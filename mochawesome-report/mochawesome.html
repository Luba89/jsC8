<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:162,&quot;tests&quot;:219,&quot;passes&quot;:174,&quot;pending&quot;:20,&quot;failures&quot;:25,&quot;start&quot;:&quot;2020-02-20T07:29:00.372Z&quot;,&quot;end&quot;:&quot;2020-02-20T07:31:21.382Z&quot;,&quot;duration&quot;:141010,&quot;testsRegistered&quot;:227,&quot;passPercent&quot;:84.05797101449275,&quot;pendingPercent&quot;:8.81057268722467,&quot;other&quot;:5,&quot;hasOther&quot;:true,&quot;skipped&quot;:8,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;5c4f730b-a8c4-4aec-a0cd-aafdc2bb0509&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets subscription list&quot;,&quot;fullTitle&quot;:&quot;gets subscription list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getSubscriptionList();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fddc46c0-2e87-4a00-b3d2-e579a92f5599&quot;,&quot;parentUUID&quot;:&quot;5c4f730b-a8c4-4aec-a0cd-aafdc2bb0509&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3a96d394-8ced-42ef-910b-c0baaa52614c&quot;,&quot;title&quot;:&quot;Creating a Fabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e415de50-7056-470a-8d56-27085f0d78f5&quot;,&quot;title&quot;:&quot;using the factory&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6279b373-315a-41e0-939f-7b709f24e522&quot;,&quot;parentUUID&quot;:&quot;e415de50-7056-470a-8d56-27085f0d78f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 54321);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c6840f9-b79a-44ba-9f8e-af62fcc067cd&quot;,&quot;parentUUID&quot;:&quot;e415de50-7056-470a-8d56-27085f0d78f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6279b373-315a-41e0-939f-7b709f24e522&quot;,&quot;3c6840f9-b79a-44ba-9f8e-af62fcc067cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;e27d2f7f-c456-46f3-a649-2bf25c27d63c&quot;,&quot;title&quot;:&quot;using the constructor&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d99afc3-eeae-423e-8643-2978f1649ae5&quot;,&quot;parentUUID&quot;:&quot;e27d2f7f-c456-46f3-a649-2bf25c27d63c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 43210);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d10c68c-06de-4193-a36a-ce7058c88200&quot;,&quot;parentUUID&quot;:&quot;e27d2f7f-c456-46f3-a649-2bf25c27d63c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d99afc3-eeae-423e-8643-2978f1649ae5&quot;,&quot;0d10c68c-06de-4193-a36a-ce7058c88200&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;4c0720af-3507-4656-963d-db8ee7e4c3e3&quot;,&quot;title&quot;:&quot;Configuring the driver&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;60f011e6-b500-4c54-8b87-57348b2d1a00&quot;,&quot;title&quot;:&quot;with a string&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the url&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with a string sets the url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84ceb3de-6b0c-455a-9916-d114b6989aca&quot;,&quot;parentUUID&quot;:&quot;60f011e6-b500-4c54-8b87-57348b2d1a00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;84ceb3de-6b0c-455a-9916-d114b6989aca&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;7f1e43d4-fd7b-4fce-aba4-728196f18dc9&quot;,&quot;title&quot;:&quot;with headers&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;applies the headers&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with headers applies the headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({\n    headers: {\n        \&quot;x-one\&quot;: \&quot;1\&quot;,\n        \&quot;x-two\&quot;: \&quot;2\&quot;\n    }\n});\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-one\&quot;, \&quot;1\&quot;);\n        chai_1.expect(headers).to.have.property(\&quot;x-two\&quot;, \&quot;2\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2934eccb-c789-4f49-be2b-32b13555ad6c&quot;,&quot;parentUUID&quot;:&quot;7f1e43d4-fd7b-4fce-aba4-728196f18dc9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2934eccb-c789-4f49-be2b-32b13555ad6c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c7c25e92-1425-4840-a2d8-4a79b7f46028&quot;,&quot;title&quot;:&quot;with an c8Version&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the x-c8-version header&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with an c8Version sets the x-c8-version header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({ c8Version: 99999 });\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-c8-version\&quot;, \&quot;99999\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff9df47e-fae3-486d-a0fa-e10d91371440&quot;,&quot;parentUUID&quot;:&quot;c7c25e92-1425-4840-a2d8-4a79b7f46028&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff9df47e-fae3-486d-a0fa-e10d91371440&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;240f9860-2abe-44b5-85ac-ffe30f0c3eb2&quot;,&quot;title&quot;:&quot;with agentOptions&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Agent = (ptcl) =&gt; function (opts) {\n    protocol = ptcl;\n    options = opts;\n    return () =&gt; null;\n};\nhttp.Agent = Agent(\&quot;http\&quot;);\nhttps.Agent = Agent(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2670ccbe-3b60-4fb4-b797-f00451463e47&quot;,&quot;parentUUID&quot;:&quot;240f9860-2abe-44b5-85ac-ffe30f0c3eb2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f6a5fdf-9787-41c6-bcc5-462a67369119&quot;,&quot;parentUUID&quot;:&quot;240f9860-2abe-44b5-85ac-ffe30f0c3eb2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.Agent = _httpAgent;\nhttps.Agent = _httpsAgent;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a6918de-49f2-4acb-aba6-994eca49abab&quot;,&quot;parentUUID&quot;:&quot;240f9860-2abe-44b5-85ac-ffe30f0c3eb2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agentOptions to the agent&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions passes the agentOptions to the agent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;new connection_1.Connection({ agentOptions: { hello: \&quot;world\&quot; } }); // eslint-disable-line no-new\nchai_1.expect(options).to.have.property(\&quot;hello\&quot;, \&quot;world\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e447e27-b517-470c-a9b3-054fc4d16497&quot;,&quot;parentUUID&quot;:&quot;240f9860-2abe-44b5-85ac-ffe30f0c3eb2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the built-in agent for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions uses the built-in agent for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// default: http\nnew connection_1.Connection(); // eslint-disable-line no-new\n// expect(protocol).to.equal(\&quot;http\&quot;);\nnew connection_1.Connection(\&quot;https://test.macrometa.io\&quot;); // eslint-disable-line no-new\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ace3f5b-4361-4c40-a5f6-ccf01d9a8c6f&quot;,&quot;parentUUID&quot;:&quot;240f9860-2abe-44b5-85ac-ffe30f0c3eb2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e447e27-b517-470c-a9b3-054fc4d16497&quot;,&quot;3ace3f5b-4361-4c40-a5f6-ccf01d9a8c6f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;519d9d7d-2602-4d9c-9246-9f7d4b0a7be4&quot;,&quot;title&quot;:&quot;with agent&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Request = (ptcl) =&gt; (opts) =&gt; {\n    protocol = ptcl;\n    options = opts;\n    return {\n        on() {\n            return this;\n        },\n        end() {\n            return this;\n        }\n    };\n};\nhttp.request = Request(\&quot;http\&quot;);\nhttps.request = Request(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bebb32b-963f-42ee-ba35-f12dd07d44cb&quot;,&quot;parentUUID&quot;:&quot;519d9d7d-2602-4d9c-9246-9f7d4b0a7be4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2b4b4f6-cd44-428b-aa01-e862fd2127dd&quot;,&quot;parentUUID&quot;:&quot;519d9d7d-2602-4d9c-9246-9f7d4b0a7be4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.request = _httpRequest;\nhttps.request = _httpsRequest;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6df3c17-0b49-436d-b4d8-bdc06ece293e&quot;,&quot;parentUUID&quot;:&quot;519d9d7d-2602-4d9c-9246-9f7d4b0a7be4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agent to the request function&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent passes the agent to the request function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: https\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);\nagent = Symbol(\&quot;agent\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8291434-47e7-4c0c-adab-d4165747e2e2&quot;,&quot;parentUUID&quot;:&quot;519d9d7d-2602-4d9c-9246-9f7d4b0a7be4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the request function for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent uses the request function for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: http\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89d9d08d-57cf-435c-a99f-255ad6331a81&quot;,&quot;parentUUID&quot;:&quot;519d9d7d-2602-4d9c-9246-9f7d4b0a7be4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;calls Agent#destroy when the connection is closed&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent calls Agent#destroy when the connection is closed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = {\n    _destroyed: false,\n    destroy() {\n        this._destroyed = true;\n    }\n};\nconst conn = new connection_1.Connection({ agent });\nchai_1.expect(agent._destroyed).to.equal(false);\nconn.close();\nchai_1.expect(agent._destroyed).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e90430a-bf4c-4c52-8e45-120554f11065&quot;,&quot;parentUUID&quot;:&quot;519d9d7d-2602-4d9c-9246-9f7d4b0a7be4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8291434-47e7-4c0c-adab-d4165747e2e2&quot;,&quot;89d9d08d-57cf-435c-a99f-255ad6331a81&quot;,&quot;4e90430a-bf4c-4c52-8e45-120554f11065&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;db703b2a-7968-4ff5-99a7-06c947df7ad4&quot;,&quot;title&quot;:&quot;Manipulating fabrics&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1698,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;669119ea-7c07-44f0-a0b1-14014d0dfe84&quot;,&quot;parentUUID&quot;:&quot;db703b2a-7968-4ff5-99a7-06c947df7ad4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1099,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = new jsC8_1.Fabric({\n    url: testUrl\n});\nawait fabric2.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric2.useTenant(\&quot;guest\&quot;);\ncollection = fabric2.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b31197c-da08-4327-a27f-6d362d51bf69&quot;,&quot;parentUUID&quot;:&quot;db703b2a-7968-4ff5-99a7-06c947df7ad4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:608,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a912d9c9-57a6-45de-804a-e83c02bb18d8&quot;,&quot;parentUUID&quot;:&quot;db703b2a-7968-4ff5-99a7-06c947df7ad4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f89e0ca-c0f6-42e4-bea9-9ed21c1a90be&quot;,&quot;parentUUID&quot;:&quot;db703b2a-7968-4ff5-99a7-06c947df7ad4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd4fccc6-7f8c-44ac-9570-049e72523a95&quot;,&quot;parentUUID&quot;:&quot;db703b2a-7968-4ff5-99a7-06c947df7ad4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:151,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.drop();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc9d2c68-f3fd-41b5-a171-656e376d5ef2&quot;,&quot;parentUUID&quot;:&quot;db703b2a-7968-4ff5-99a7-06c947df7ad4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7f29e2b-f441-4757-9c74-818a503610eb&quot;,&quot;parentUUID&quot;:&quot;db703b2a-7968-4ff5-99a7-06c947df7ad4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f0c0eefb-54c5-4ae2-9d9d-420d5e74128c&quot;,&quot;title&quot;:&quot;fabric.version&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version object when no details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when no details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version();\nchai_1.expect(response.server).to.equal(\&quot;C8DB\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cff9b07-c9a9-4477-a79f-0df535ea4ba4&quot;,&quot;parentUUID&quot;:&quot;f0c0eefb-54c5-4ae2-9d9d-420d5e74128c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the version object when details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:128,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version(true);\nchai_1.expect(response.server).to.equal(\&quot;C8DB\&quot;);\nchai_1.expect(response.details).to.haveOwnProperty(\&quot;C8DB\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (architecture, arm, ...) } to have own property &#x27;C8DB&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (architecture, arm, ...) } to have own property &#x27;C8DB&#x27;\n    at Context.it (src/test/01-manipulating-fabrics.ts:60:35)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;43f5c60d-70c2-4615-b0af-03e2131a9835&quot;,&quot;parentUUID&quot;:&quot;f0c0eefb-54c5-4ae2-9d9d-420d5e74128c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7cff9b07-c9a9-4477-a79f-0df535ea4ba4&quot;],&quot;failures&quot;:[&quot;43f5c60d-70c2-4615-b0af-03e2131a9835&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:250,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;80a5f2b3-cca0-4fba-a55b-fbbdecdbbcb8&quot;,&quot;title&quot;:&quot;fabric.useFabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the fabric name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric updates the fabric name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = \&quot;example\&quot;;\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;); // default\nfabric.useFabric(name);\nchai_1.expect(fabric._connection).to.have.property(\&quot;_fabricName\&quot;, name);\nchai_1.expect(fabric.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;555e0a38-86f9-48d8-a268-fbc6c0cc505c&quot;,&quot;parentUUID&quot;:&quot;80a5f2b3-cca0-4fba-a55b-fbbdecdbbcb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns itself&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric returns itself&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = fabric.useFabric(\&quot;nope\&quot;);\nchai_1.expect(fabric).to.equal(fabric2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3189b12c-2546-4ba5-a794-af4982e3ccc5&quot;,&quot;parentUUID&quot;:&quot;80a5f2b3-cca0-4fba-a55b-fbbdecdbbcb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;555e0a38-86f9-48d8-a268-fbc6c0cc505c&quot;,&quot;3189b12c-2546-4ba5-a794-af4982e3ccc5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0c21ed60-4b0e-4f40-be08-b55cd00bf4f1&quot;,&quot;title&quot;:&quot;fabric.edgeLocations&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets all the edge locations&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets all the edge locations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllEdgeLocations();\nchai_1.expect(Array.isArray(response)).to.be.true;\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;tags\&quot;);\nchai_1.expect(response.length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20c985d0-2cc6-41bc-86ec-c4a34e234441&quot;,&quot;parentUUID&quot;:&quot;0c21ed60-4b0e-4f40-be08-b55cd00bf4f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets local edge location&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets local edge location&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\nchai_1.expect(Array.isArray(response)).to.be.false;\nchai_1.expect(response).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;tags\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3a3289f-27c1-4958-862b-1d5e4c80d5a5&quot;,&quot;parentUUID&quot;:&quot;0c21ed60-4b0e-4f40-be08-b55cd00bf4f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20c985d0-2cc6-41bc-86ec-c4a34e234441&quot;,&quot;a3a3289f-27c1-4958-862b-1d5e4c80d5a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:247,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;75c5c1fe-2736-479e-876f-4b64cc063cfc&quot;,&quot;title&quot;:&quot;fabric.createFabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:163,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a46e0f2e-185b-4b92-a5ba-a662d4e91e06&quot;,&quot;parentUUID&quot;:&quot;75c5c1fe-2736-479e-876f-4b64cc063cfc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a fabric with the given name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric creates a fabric with the given name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:923,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nconst info = await fabric.get();\nchai_1.expect(info.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8adcb18e-e9df-47ae-840b-164aabf906de&quot;,&quot;parentUUID&quot;:&quot;75c5c1fe-2736-479e-876f-4b64cc063cfc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;adds the given users to the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric adds the given users to the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9b467dc-bce5-4170-843b-b96de9bfda99&quot;,&quot;parentUUID&quot;:&quot;75c5c1fe-2736-479e-876f-4b64cc063cfc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8adcb18e-e9df-47ae-840b-164aabf906de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;e9b467dc-bce5-4170-843b-b96de9bfda99&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:923,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6a102420-a369-4913-b656-f4c227227a32&quot;,&quot;title&quot;:&quot;fabric.get&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches the fabric description if the fabric exists&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fetches the fabric description if the fabric exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:188,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await fabric.get();\nchai_1.expect(info.name).to.equal(fabric.name);\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fd77171-e40c-4bf7-b6d9-1b4f91e65766&quot;,&quot;parentUUID&quot;:&quot;6a102420-a369-4913-b656-f4c227227a32&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fails if the fabric does not exist&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fails if the fabric does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:149,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;__does_not_exist__\&quot;);\ntry {\n    await fabric.get();\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n    return;\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42b9935f-8a98-4b19-ac66-9c72d934a75a&quot;,&quot;parentUUID&quot;:&quot;6a102420-a369-4913-b656-f4c227227a32&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2fd77171-e40c-4bf7-b6d9-1b4f91e65766&quot;,&quot;42b9935f-8a98-4b19-ac66-9c72d934a75a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:337,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6a0fb1eb-1eab-4b2e-8a7e-1fbcabf3f41c&quot;,&quot;title&quot;:&quot;fabric.listFabrics&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of all fabrics&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listFabrics returns a list of all fabrics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics.indexOf(\&quot;_system\&quot;)).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6b484bf-55bb-4e2d-a063-3d4a61c098f0&quot;,&quot;parentUUID&quot;:&quot;6a0fb1eb-1eab-4b2e-8a7e-1fbcabf3f41c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6b484bf-55bb-4e2d-a063-3d4a61c098f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:120,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c9bf7393-c059-4284-95ac-3eb9f3f71f74&quot;,&quot;title&quot;:&quot;fabric.listUserFabrics&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of fabrics accessible to the active user&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listUserFabrics returns a list of fabrics accessible to the active user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listUserFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics[0].name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef1a8473-aec8-40a4-947b-57fcc992b488&quot;,&quot;parentUUID&quot;:&quot;c9bf7393-c059-4284-95ac-3eb9f3f71f74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef1a8473-aec8-40a4-947b-57fcc992b488&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:119,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;30b1f00f-4987-4441-ada0-ca689c7a1705&quot;,&quot;title&quot;:&quot;fabric.dropFabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:186,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1866bc04-a8f5-4aa2-8efa-f865924c293f&quot;,&quot;parentUUID&quot;:&quot;30b1f00f-4987-4441-ada0-ca689c7a1705&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given fabric from the server&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric deletes the given fabric from the server&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:235,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.dropFabric(name);\nlet temp = new jsC8_1.Fabric().useFabric(name);\ntry {\n    await temp.get();\n}\ncatch (e) {\n    return;\n}\nfinally {\n    temp.close();\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae7742a9-0ee2-4df6-9c25-71a7aa4bb77c&quot;,&quot;parentUUID&quot;:&quot;30b1f00f-4987-4441-ada0-ca689c7a1705&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae7742a9-0ee2-4df6-9c25-71a7aa4bb77c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:235,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2dba2563-f62d-4bf8-b26d-951cf9266af6&quot;,&quot;title&quot;:&quot;fabric.truncate&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1178,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create();\n        await collection.save({ _key: \&quot;example\&quot; });\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create({ isSystem: true });\n        await collection.save({ _key: \&quot;example\&quot; });\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dca2c6d6-3bea-4176-a72f-c93fb9cb8d66&quot;,&quot;parentUUID&quot;:&quot;2dba2563-f62d-4bf8-b26d-951cf9266af6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:158,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc6b7f7d-3620-492c-8e62-37718b46e732&quot;,&quot;parentUUID&quot;:&quot;2dba2563-f62d-4bf8-b26d-951cf9266af6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes all documents from all non-system collections in the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate removes all documents from all non-system collections in the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2300,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.truncate();\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b7b8ebb-4934-45b7-a7fb-389aa51c55a8&quot;,&quot;parentUUID&quot;:&quot;2dba2563-f62d-4bf8-b26d-951cf9266af6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;additionally truncates system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate additionally truncates system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;311b5a75-cef5-49eb-8e75-f29a2277fecc&quot;,&quot;parentUUID&quot;:&quot;2dba2563-f62d-4bf8-b26d-951cf9266af6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b7b8ebb-4934-45b7-a7fb-389aa51c55a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;311b5a75-cef5-49eb-8e75-f29a2277fecc&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:2300,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;08fd7ad2-ea24-4625-89cd-4c280e31aa0d&quot;,&quot;title&quot;:&quot;fabric.validateQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate correct query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate correct query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.validateQuery(\&quot;for doc in docs return doc\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9829dfe-9585-4473-83d2-cbd634d5dfd6&quot;,&quot;parentUUID&quot;:&quot;08fd7ad2-ea24-4625-89cd-4c280e31aa0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate incorrect query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate incorrect query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const response = await fabric.validateQuery(\&quot;forrrr doc in docs return doc\&quot;);\n    chai_1.expect(response.error).to.be.true;\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e8a71fe-5e52-4130-abf9-6814207f5f25&quot;,&quot;parentUUID&quot;:&quot;08fd7ad2-ea24-4625-89cd-4c280e31aa0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b9829dfe-9585-4473-83d2-cbd634d5dfd6&quot;,&quot;8e8a71fe-5e52-4130-abf9-6814207f5f25&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:232,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4d486fbd-af04-42e5-9178-707ef8b6294c&quot;,&quot;title&quot;:&quot;fabric.explainQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should explain query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.explainQuery should explain query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryObject = {\n    query: `for doc in ${collectionName} return doc`,\n    bindVars: {}\n};\nconst response = await fabric.explainQuery(queryObject);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: expecting POST /_api/query&quot;,&quot;estack&quot;:&quot;C8Error: expecting POST /_api/query\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;217b338d-608d-47d7-a4ce-03b1935b1b6e&quot;,&quot;parentUUID&quot;:&quot;4d486fbd-af04-42e5-9178-707ef8b6294c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;217b338d-608d-47d7-a4ce-03b1935b1b6e&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:120,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;392a57a8-cf8b-4dd0-8613-0ea85a524b7b&quot;,&quot;title&quot;:&quot;fabric.getCurrentQueries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get currently running queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.getCurrentQueries should get currently running queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d1a03e1-c901-425b-a0a6-f6a014b6a0a3&quot;,&quot;parentUUID&quot;:&quot;392a57a8-cf8b-4dd0-8613-0ea85a524b7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;2d1a03e1-c901-425b-a0a6-f6a014b6a0a3&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;cf8c0528-aa5b-4d33-9be1-8439564c7054&quot;,&quot;title&quot;:&quot;fabric.clearSlowQueries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should clear slow queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.clearSlowQueries should clear slow queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;812eadb2-f705-468b-bb15-11a35312f9ec&quot;,&quot;parentUUID&quot;:&quot;cf8c0528-aa5b-4d33-9be1-8439564c7054&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;812eadb2-f705-468b-bb15-11a35312f9ec&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;49672e3a-5ffd-44f7-a293-1b28d411ec05&quot;,&quot;title&quot;:&quot;fabric.terminateRunningQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should terminate running query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.terminateRunningQuery should terminate running query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8f52a93-31d0-42d7-aa0d-33f5c70742fb&quot;,&quot;parentUUID&quot;:&quot;49672e3a-5ffd-44f7-a293-1b28d411ec05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;a8f52a93-31d0-42d7-aa0d-33f5c70742fb&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;fadfa776-6ca4-4f37-a94d-88428e82c8d8&quot;,&quot;title&quot;:&quot;Accessing collections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:929,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\nconst collections = await fabric.listCollections(false);\nbuiltinSystemCollections = collections.map((c) =&gt; c.name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f31319d-2c54-4dd5-aae2-80c25dfe9027&quot;,&quot;parentUUID&quot;:&quot;fadfa776-6ca4-4f37-a94d-88428e82c8d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:156,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3657f2b-7e19-4b40-b2bc-97664d56425d&quot;,&quot;parentUUID&quot;:&quot;fadfa776-6ca4-4f37-a94d-88428e82c8d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d6ee5ec1-ce2e-4d10-bbf6-90191c3ddf5d&quot;,&quot;title&quot;:&quot;fabric.collection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a DocumentCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collection returns a DocumentCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = fabric.collection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.DocumentCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8944805a-1c73-4db6-94d1-e5d42b14747d&quot;,&quot;parentUUID&quot;:&quot;d6ee5ec1-ce2e-4d10-bbf6-90191c3ddf5d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8944805a-1c73-4db6-94d1-e5d42b14747d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;8a744d9b-f2f9-4e60-9998-26166daf270b&quot;,&quot;title&quot;:&quot;fabric.edgeCollection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an EdgeCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.edgeCollection returns an EdgeCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;tomato\&quot;;\nlet collection = fabric.edgeCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.EdgeCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1506fe09-c04a-493f-83f7-105eb3ff622a&quot;,&quot;parentUUID&quot;:&quot;8a744d9b-f2f9-4e60-9998-26166daf270b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1506fe09-c04a-493f-83f7-105eb3ff622a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;db8a7e2a-4d87-434b-b3e2-17adb56243dc&quot;,&quot;title&quot;:&quot;fabric.listCollections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).create())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).create({ isSystem: true })\n    // )\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2f3c97e-aea5-4894-9f41-0c1f9384c4e6&quot;,&quot;parentUUID&quot;:&quot;db8a7e2a-4d87-434b-b3e2-17adb56243dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).drop())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).drop({ isSystem: true })\n    // )\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2992fd84-8750-4770-b925-759888dafe01&quot;,&quot;parentUUID&quot;:&quot;db8a7e2a-4d87-434b-b3e2-17adb56243dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all non-system collections&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections fetches information about all non-system collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:126,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections()\n    .then(collections =&gt; {\n    chai_1.expect(collections.length).to.equal(nonSystemCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(nonSystemCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5905700-19f5-4532-9f7f-5f5fa9450ea2&quot;,&quot;parentUUID&quot;:&quot;db8a7e2a-4d87-434b-b3e2-17adb56243dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections(false)\n    .then(collections =&gt; {\n    let allCollectionNames = nonSystemCollectionNames\n        // .concat(systemCollectionNames)\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(collections.length).to.be.at.least(allCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(allCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2ccdcd7-8e63-4c8e-a323-91e1262c9123&quot;,&quot;parentUUID&quot;:&quot;db8a7e2a-4d87-434b-b3e2-17adb56243dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c5905700-19f5-4532-9f7f-5f5fa9450ea2&quot;,&quot;a2ccdcd7-8e63-4c8e-a323-91e1262c9123&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:245,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;d0232c1c-4eb2-4e8a-b37d-cee100ba3f86&quot;,&quot;title&quot;:&quot;fabric.collections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:620,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08bce537-de8c-4301-ae3a-26c0b56c8ac7&quot;,&quot;parentUUID&quot;:&quot;d0232c1c-4eb2-4e8a-b37d-cee100ba3f86&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:479,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).drop()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).drop())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;831e0543-f40b-4789-b905-34c9c222a594&quot;,&quot;parentUUID&quot;:&quot;d0232c1c-4eb2-4e8a-b37d-cee100ba3f86&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates DocumentCollection and EdgeCollection instances&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections creates DocumentCollection and EdgeCollection instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections()\n    .then(collections =&gt; {\n    let documentCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.DocumentCollection)\n        .sort();\n    let edgeCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.EdgeCollection)\n        .sort();\n    chai_1.expect(documentCollections.length).to.equal(documentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(documentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.equal(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3471d0ff-f6ff-4ed5-9f48-4558e0510bbc&quot;,&quot;parentUUID&quot;:&quot;d0232c1c-4eb2-4e8a-b37d-cee100ba3f86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections(false)\n    .then(collections =&gt; {\n    let documentCollections = collections.filter((c) =&gt; c instanceof collection_1.DocumentCollection);\n    let edgeCollections = collections.filter((c) =&gt; c instanceof collection_1.EdgeCollection);\n    let allDocumentCollectionNames = documentCollectionNames\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(documentCollections.length).to.be.at.least(allDocumentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(allDocumentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.be.at.least(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df9aace9-d8e7-4028-941b-63b08c429998&quot;,&quot;parentUUID&quot;:&quot;d0232c1c-4eb2-4e8a-b37d-cee100ba3f86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3471d0ff-f6ff-4ed5-9f48-4558e0510bbc&quot;,&quot;df9aace9-d8e7-4028-941b-63b08c429998&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:241,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;0660b70f-df7a-4a41-9b9c-ce78fec797e5&quot;,&quot;title&quot;:&quot;Accessing graphs&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:804,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bb69b2a-2556-44b8-b78f-964b48f0725d&quot;,&quot;parentUUID&quot;:&quot;0660b70f-df7a-4a41-9b9c-ce78fec797e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:156,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29f91af0-dcc3-47b3-a92b-a051b2d91802&quot;,&quot;parentUUID&quot;:&quot;0660b70f-df7a-4a41-9b9c-ce78fec797e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6b9464a1-1682-4fb7-a233-e63f5a4d7dde&quot;,&quot;title&quot;:&quot;fabric.graph&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Graph instance&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graph returns a Graph instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet graph = fabric.graph(name);\nchai_1.expect(graph).to.be.an.instanceof(graph_1.Graph);\nchai_1.expect(graph)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05858caa-7806-4844-8c07-3feab1605715&quot;,&quot;parentUUID&quot;:&quot;6b9464a1-1682-4fb7-a233-e63f5a4d7dde&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05858caa-7806-4844-8c07-3feab1605715&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;67e879d2-f360-410e-92f6-ceef73fd2209&quot;,&quot;title&quot;:&quot;fabric.listGraphs&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:654,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        })),\n        isSmart: true,\n        options: {\n            numberOfShards: 1,\n            smartGraphAttribute: \&quot;test\&quot;\n        },\n        orphanCollections: []\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d45abcd1-b3ce-47be-94be-630c932a5afa&quot;,&quot;parentUUID&quot;:&quot;67e879d2-f360-410e-92f6-ceef73fd2209&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:519,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd9f2bd9-f1ab-425c-bf9d-87deee9dd043&quot;,&quot;parentUUID&quot;:&quot;67e879d2-f360-410e-92f6-ceef73fd2209&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all graphs&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs fetches information about all graphs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listGraphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g._key).sort()).to.eql(graphNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36c0b8e8-ceaa-4824-b9b9-9ccde3bf79ca&quot;,&quot;parentUUID&quot;:&quot;67e879d2-f360-410e-92f6-ceef73fd2209&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;36c0b8e8-ceaa-4824-b9b9-9ccde3bf79ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:122,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;b0f2d1d6-6b60-404e-8eec-24adb50b24f1&quot;,&quot;title&quot;:&quot;fabric.graphs&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:544,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        }))\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e0dca3d-dcae-48df-8655-2bbcc8e03962&quot;,&quot;parentUUID&quot;:&quot;b0f2d1d6-6b60-404e-8eec-24adb50b24f1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:536,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b80dcc7b-25c8-4d27-b280-d3dd80360e0d&quot;,&quot;parentUUID&quot;:&quot;b0f2d1d6-6b60-404e-8eec-24adb50b24f1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates Graph instances&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs creates Graph instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .graphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g.name).sort()).to.eql(graphNames);\n    graphs.forEach((graph) =&gt; chai_1.expect(graph).to.be.an.instanceof(graph_1.Graph));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c658937c-3e2a-4e33-96f8-f3860809d5c9&quot;,&quot;parentUUID&quot;:&quot;b0f2d1d6-6b60-404e-8eec-24adb50b24f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c658937c-3e2a-4e33-96f8-f3860809d5c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:124,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;6ec909dc-0ca3-4099-870b-1feb9c95029f&quot;,&quot;title&quot;:&quot;Transactions&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:507,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;890412ce-9d51-448d-804d-6e43331b3815&quot;,&quot;parentUUID&quot;:&quot;6ec909dc-0ca3-4099-870b-1feb9c95029f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29f60023-69f9-41c8-868c-7c3870a76345&quot;,&quot;parentUUID&quot;:&quot;6ec909dc-0ca3-4099-870b-1feb9c95029f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;94897fef-b03f-4f03-b126-b28197b8a371&quot;,&quot;title&quot;:&quot;fabric.transaction&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a transaction and return the result&quot;,&quot;fullTitle&quot;:&quot;Transactions fabric.transaction should execute a transaction and return the result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await fabric.transaction([], \&quot;function (params) {return params;}\&quot;, \&quot;test\&quot;);\nchai_1.expect(result).to.equal(\&quot;test\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79f53926-2f55-412a-96a3-c413f84b0ba9&quot;,&quot;parentUUID&quot;:&quot;94897fef-b03f-4f03-b126-b28197b8a371&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79f53926-2f55-412a-96a3-c413f84b0ba9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:122,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;908b6056-ef69-4282-b593-58af9077e6ce&quot;,&quot;title&quot;:&quot;C8QL queries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1831,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccebde5b-0cfe-4e46-be3a-0607aea71666&quot;,&quot;parentUUID&quot;:&quot;908b6056-ef69-4282-b593-58af9077e6ce&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:155,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcd201a9-7ba0-47e6-968d-c3875c1e8e64&quot;,&quot;parentUUID&quot;:&quot;908b6056-ef69-4282-b593-58af9077e6ce&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9036fbd-4ced-4e54-9b2e-b1e05ab0cf1e&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an exception on error&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i IN no RETURN i\&quot;)\n    .then(() =&gt; {\n    chai_1.expect.fail();\n    done();\n})\n    .catch(err =&gt; {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f6943da-ddb3-4f48-92bf-f2cada07d5b7&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an exception on error (async await)&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error (async await)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.query(\&quot;FOR i IN no RETURN i\&quot;);\n    chai_1.expect.fail();\n}\ncatch (err) {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d45d55a6-3fb9-46d5-8b0c-9ecae896be0a&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2aa33ea5-43f8-40cf-82b7-d28086037a83&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, undefined, {\n    batchSize: 2,\n    count: true\n})\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94298396-7c0e-4d3b-937d-7afbe0167879&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports AQB queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports AQB queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ toC8QL: () =&gt; \&quot;RETURN 42\&quot; })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(42);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68e48e4c-4d1a-43b4-ae0c-5c4463b0bb40&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports query objects&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports query objects&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN 1337\&quot;, bindVars: {} })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(1337);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4372a389-d401-4308-bac7-b62cda929ae9&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN @potato\&quot;, bindVars: { potato: \&quot;tomato\&quot; } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(\&quot;tomato\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49a7a1ff-d3de-4c25-886f-de27b5d451a3&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b2b6fb0-116a-4292-aa97-85e29166d32f&quot;,&quot;parentUUID&quot;:&quot;9b0b55e4-5f03-4eac-911a-efb32631d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a9036fbd-4ced-4e54-9b2e-b1e05ab0cf1e&quot;,&quot;3f6943da-ddb3-4f48-92bf-f2cada07d5b7&quot;,&quot;d45d55a6-3fb9-46d5-8b0c-9ecae896be0a&quot;,&quot;2aa33ea5-43f8-40cf-82b7-d28086037a83&quot;,&quot;94298396-7c0e-4d3b-937d-7afbe0167879&quot;,&quot;68e48e4c-4d1a-43b4-ae0c-5c4463b0bb40&quot;,&quot;4372a389-d401-4308-bac7-b62cda929ae9&quot;,&quot;49a7a1ff-d3de-4c25-886f-de27b5d451a3&quot;,&quot;6b2b6fb0-116a-4292-aa97-85e29166d32f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1097,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7cb7aa38-4635-422d-88de-4077fbc883d6&quot;,&quot;title&quot;:&quot;c8ql&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly handles simple parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles simple parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let values = [\n    0,\n    42,\n    -1,\n    null,\n    undefined,\n    true,\n    false,\n    \&quot;\&quot;,\n    \&quot;string\&quot;,\n    [1, 2, 3],\n    { a: \&quot;b\&quot; }\n];\nlet query = jsC8_1.c8ql `\n        A ${values[0]} B ${values[1]} C ${values[2]} D ${values[3]} E ${values[4]} F ${values[5]}\n        G ${values[6]} H ${values[7]} I ${values[8]} J ${values[9]} K ${values[10]} EOF\n      `;\nchai_1.expect(query.query).to.equal(`\n        A @value0 B @value1 C @value2 D @value3 E @value4 F @value5\n        G @value6 H @value7 I @value8 J @value9 K @value10 EOF\n      `);\nlet bindVarNames = Object.keys(query.bindVars).sort((a, b) =&gt; (+a.substr(5) &gt; +b.substr(5) ? 1 : -1));\nchai_1.expect(bindVarNames).to.eql([\n    \&quot;value0\&quot;,\n    \&quot;value1\&quot;,\n    \&quot;value2\&quot;,\n    \&quot;value3\&quot;,\n    \&quot;value4\&quot;,\n    \&quot;value5\&quot;,\n    \&quot;value6\&quot;,\n    \&quot;value7\&quot;,\n    \&quot;value8\&quot;,\n    \&quot;value9\&quot;,\n    \&quot;value10\&quot;\n]);\nchai_1.expect(bindVarNames.map(k =&gt; query.bindVars[k])).to.eql(values);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;adbe811b-3849-456a-9688-c0271bc8b3b8&quot;,&quot;parentUUID&quot;:&quot;7cb7aa38-4635-422d-88de-4077fbc883d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;correctly handles jsC8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles jsC8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let collection = fabric.collection(\&quot;potato\&quot;);\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;potato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab58cd19-c6d5-4911-bada-a6a154047dcf&quot;,&quot;parentUUID&quot;:&quot;7cb7aa38-4635-422d-88de-4077fbc883d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;correctly handles C8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles C8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;class C8Collection {\n    constructor() {\n        this.isC8Collection = true;\n        this.name = \&quot;tomato\&quot;;\n    }\n}\nlet collection = new C8Collection();\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;tomato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53d80375-79f5-451c-9832-8d18083efc5c&quot;,&quot;parentUUID&quot;:&quot;7cb7aa38-4635-422d-88de-4077fbc883d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;adbe811b-3849-456a-9688-c0271bc8b3b8&quot;,&quot;ab58cd19-c6d5-4911-bada-a6a154047dcf&quot;,&quot;53d80375-79f5-451c-9832-8d18083efc5c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;184ff8b2-b0c9-4fa2-bf70-c7a146122f84&quot;,&quot;title&quot;:&quot;Route API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1864,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\ncollection = fabric.collection(`c${Date.now()}`);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a9e945c-5923-48ef-b5a0-68d6a5f1c87e&quot;,&quot;parentUUID&quot;:&quot;184ff8b2-b0c9-4fa2-bf70-c7a146122f84&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.truncate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd99560b-816e-46cd-a19f-5bfe5834f574&quot;,&quot;parentUUID&quot;:&quot;184ff8b2-b0c9-4fa2-bf70-c7a146122f84&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:257,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc963ab0-87c5-4240-8f6d-00159bc6ad51&quot;,&quot;parentUUID&quot;:&quot;184ff8b2-b0c9-4fa2-bf70-c7a146122f84&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;22efded1-a5ab-44c2-8b5c-dc958834e568&quot;,&quot;title&quot;:&quot;route.route&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should concat path&quot;,&quot;fullTitle&quot;:&quot;Route API route.route should concat path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/api\&quot;).route(\&quot;/version\&quot;);\nchai_1.expect(route).to.have.property(\&quot;_path\&quot;, \&quot;/api/version\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f8b847c-b988-45d7-bdb0-83427211e74f&quot;,&quot;parentUUID&quot;:&quot;22efded1-a5ab-44c2-8b5c-dc958834e568&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6f8b847c-b988-45d7-bdb0-83427211e74f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3ba45e7e-2b08-4b87-90ef-5120c8568de2&quot;,&quot;title&quot;:&quot;route.post&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.post should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:155,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${collection.name}`)\n    .post({ foo: \&quot;bar\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83ddc3e3-84d9-4f1d-b86f-f317ca95e537&quot;,&quot;parentUUID&quot;:&quot;3ba45e7e-2b08-4b87-90ef-5120c8568de2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83ddc3e3-84d9-4f1d-b86f-f317ca95e537&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:155,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0c855fc2-00bb-41e1-a4ad-8bcf6b3256d0&quot;,&quot;title&quot;:&quot;route.put&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.put \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1a793c7-d973-4b0d-b43e-dd37552e77e2&quot;,&quot;parentUUID&quot;:&quot;0c855fc2-00bb-41e1-a4ad-8bcf6b3256d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.put should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:150,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .put({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8efd8ab-3607-4dd8-94a1-9591a8fab1ea&quot;,&quot;parentUUID&quot;:&quot;0c855fc2-00bb-41e1-a4ad-8bcf6b3256d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a8efd8ab-3607-4dd8-94a1-9591a8fab1ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:150,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6e3c22df-2a00-4549-83b1-7009e664e1cc&quot;,&quot;title&quot;:&quot;route.patch&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:155,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7367a435-ce06-479e-ba56-b7fb5a0ae908&quot;,&quot;parentUUID&quot;:&quot;6e3c22df-2a00-4549-83b1-7009e664e1cc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:243,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .patch({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd6ebd43-5a5e-41bf-ab97-ccce456e34e9&quot;,&quot;parentUUID&quot;:&quot;6e3c22df-2a00-4549-83b1-7009e664e1cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cd6ebd43-5a5e-41bf-ab97-ccce456e34e9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:243,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a60e31f0-ab53-450f-b1b0-33947e0d7a3f&quot;,&quot;title&quot;:&quot;route.delete&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:209,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b409b3e-80df-4fe5-a661-5cab2f64dc52&quot;,&quot;parentUUID&quot;:&quot;a60e31f0-ab53-450f-b1b0-33947e0d7a3f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .delete()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19e042f1-09a4-4ef8-86f2-5e5c3e1799b5&quot;,&quot;parentUUID&quot;:&quot;a60e31f0-ab53-450f-b1b0-33947e0d7a3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19e042f1-09a4-4ef8-86f2-5e5c3e1799b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3a86d6fd-314b-4f3f-995a-b54fd0289cd4&quot;,&quot;title&quot;:&quot;route.head&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.head \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:171,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f38dce1b-39b8-48e8-b891-bc273b57350d&quot;,&quot;parentUUID&quot;:&quot;3a86d6fd-314b-4f3f-995a-b54fd0289cd4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.head should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:146,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .head()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;statusCode\&quot;, 200);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53774beb-8970-46e3-93be-7fcb52157733&quot;,&quot;parentUUID&quot;:&quot;3a86d6fd-314b-4f3f-995a-b54fd0289cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;53774beb-8970-46e3-93be-7fcb52157733&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:146,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;54373e4e-65c2-45ff-bfe8-20b25a838ca0&quot;,&quot;title&quot;:&quot;Cursor API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:924,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8bd7238-4376-40fd-a97e-f55f9585c1c4&quot;,&quot;parentUUID&quot;:&quot;54373e4e-65c2-45ff-bfe8-20b25a838ca0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor = await fabric.query(c8qlQuery);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c2724ad-7534-48f6-8bb7-7441afcb3090&quot;,&quot;parentUUID&quot;:&quot;54373e4e-65c2-45ff-bfe8-20b25a838ca0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cd7a002-4c38-4075-9a0f-7172471f9acc&quot;,&quot;parentUUID&quot;:&quot;54373e4e-65c2-45ff-bfe8-20b25a838ca0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6ac63b8e-49b7-49fc-a8ba-f86b7bb8ab26&quot;,&quot;title&quot;:&quot;cursor.all&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an Array of all results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.all returns an Array of all results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(vals =&gt; {\n    chai_1.expect(vals).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b6ef393-c9e1-457b-9d8a-c109b19b0889&quot;,&quot;parentUUID&quot;:&quot;6ac63b8e-49b7-49fc-a8ba-f86b7bb8ab26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b6ef393-c9e1-457b-9d8a-c109b19b0889&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;eb7de5da-b27b-4430-add2-e8c5f578d34c&quot;,&quot;title&quot;:&quot;cursor.next&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns the next result of the Cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.next returns the next result of the Cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(0);\n    return cursor.next();\n})\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(1);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aec0060d-51fd-4b70-aaba-fcc24cb9a0f2&quot;,&quot;parentUUID&quot;:&quot;eb7de5da-b27b-4430-add2-e8c5f578d34c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aec0060d-51fd-4b70-aaba-fcc24cb9a0f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8863748b-d1ee-4636-8c45-d5f0e0ce51b6&quot;,&quot;title&quot;:&quot;cursor.hasNext&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the Cursor has more results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true if the Cursor has more results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(cursor.hasNext()).to.equal(true);\ncursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.be.a(\&quot;number\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;642dcd3f-468a-4f0a-986b-cdec5bd62694&quot;,&quot;parentUUID&quot;:&quot;8863748b-d1ee-4636-8c45-d5f0e0ce51b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the Cursor is empty&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false if the Cursor is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(() =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;556af155-2386-4b27-ae6e-880895163780&quot;,&quot;parentUUID&quot;:&quot;8863748b-d1ee-4636-8c45-d5f0e0ce51b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns true after first batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true after first batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(c8qlQuery, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor.next();\n    chai_1.expect(cursor._result.length).to.equal(0);\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb9fa94e-5027-4f7a-8dfd-051fbf5e03a6&quot;,&quot;parentUUID&quot;:&quot;8863748b-d1ee-4636-8c45-d5f0e0ce51b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:687,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(\&quot;FOR i In 0..1 RETURN i\&quot;, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbadac22-b906-43c5-bfa4-7345317cb0db&quot;,&quot;parentUUID&quot;:&quot;8863748b-d1ee-4636-8c45-d5f0e0ce51b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(\&quot;FOR i In 0..1 RETURN i\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(2);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(1);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ba9f5b2-f507-4d28-9e63-c587b4ec819c&quot;,&quot;parentUUID&quot;:&quot;8863748b-d1ee-4636-8c45-d5f0e0ce51b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 404 after timeout&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns 404 after timeout&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69de53c4-760a-4979-ba66-c4235d72ce88&quot;,&quot;parentUUID&quot;:&quot;8863748b-d1ee-4636-8c45-d5f0e0ce51b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed (with large amount of results)&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed (with large amount of results)&quot;,&quot;timedOut&quot;:true,&quot;duration&quot;:20002,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const EXPECTED_LENGTH = 100000;\nconst loadMore = function (cursor, totalLength) {\n    cursor\n        .next()\n        .then(() =&gt; {\n        totalLength++;\n        chai_1.expect(cursor.hasNext()).to.equal(totalLength !== EXPECTED_LENGTH);\n        if (cursor.hasNext()) {\n            loadMore(cursor, totalLength);\n        }\n        else {\n            done();\n        }\n    })\n        .catch(done);\n};\nfabric.query(`FOR i In 1..${EXPECTED_LENGTH} RETURN i`)\n    .then(cursor =&gt; loadMore(cursor, 0))\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Timeout of 20000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js)&quot;,&quot;estack&quot;:&quot;Error: Timeout of 20000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js)&quot;},&quot;uuid&quot;:&quot;8bb0a8ad-3150-4ffa-8c95-173e172b29c2&quot;,&quot;parentUUID&quot;:&quot;8863748b-d1ee-4636-8c45-d5f0e0ce51b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;642dcd3f-468a-4f0a-986b-cdec5bd62694&quot;,&quot;556af155-2386-4b27-ae6e-880895163780&quot;,&quot;eb9fa94e-5027-4f7a-8dfd-051fbf5e03a6&quot;,&quot;fbadac22-b906-43c5-bfa4-7345317cb0db&quot;,&quot;6ba9f5b2-f507-4d28-9e63-c587b4ec819c&quot;],&quot;failures&quot;:[&quot;8bb0a8ad-3150-4ffa-8c95-173e172b29c2&quot;],&quot;pending&quot;:[&quot;69de53c4-760a-4979-ba66-c4235d72ce88&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:20939,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;ff8db0dd-d77d-4acb-b380-7cc888ebce0c&quot;,&quot;title&quot;:&quot;cursor.each&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;invokes the callback for each value&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each invokes the callback for each value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each(value =&gt; {\n    results.push(value);\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3518ac98-c0f6-4ce3-9cf2-da96d04be10c&quot;,&quot;parentUUID&quot;:&quot;ff8db0dd-d77d-4acb-b380-7cc888ebce0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;aborts if the callback returns false&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each aborts if the callback returns false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each((value) =&gt; {\n    results.push(value);\n    if (value === 5)\n        return false;\n    return;\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d89a97ca-ca27-45d9-8a21-439924396b52&quot;,&quot;parentUUID&quot;:&quot;ff8db0dd-d77d-4acb-b380-7cc888ebce0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3518ac98-c0f6-4ce3-9cf2-da96d04be10c&quot;,&quot;d89a97ca-ca27-45d9-8a21-439924396b52&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8f0b1ba8-3f51-49f4-b8b4-2a448ed44810&quot;,&quot;title&quot;:&quot;cursor.every&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns true if the callback returns a truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return false;\n    results.push(value);\n    return true;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f967b24f-abd6-4841-819d-df7a053ebe5f&quot;,&quot;parentUUID&quot;:&quot;8f0b1ba8-3f51-49f4-b8b4-2a448ed44810&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns false if the callback returns a non-truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    results.push(value);\n    return value &lt; 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c81df4f0-2b63-4de9-97cd-7669745d465d&quot;,&quot;parentUUID&quot;:&quot;8f0b1ba8-3f51-49f4-b8b4-2a448ed44810&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f967b24f-abd6-4841-819d-df7a053ebe5f&quot;,&quot;c81df4f0-2b63-4de9-97cd-7669745d465d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9adca659-9115-4501-8670-0939bfaca698&quot;,&quot;title&quot;:&quot;cursor.some&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns false if the callback returns a non-truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return true;\n    results.push(value);\n    return false;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;550a773a-2c8d-4765-a810-35e39aee65cd&quot;,&quot;parentUUID&quot;:&quot;9adca659-9115-4501-8670-0939bfaca698&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns true if the callback returns a truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    results.push(value);\n    return value &gt;= 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2319026-c5d5-446f-9695-8e27eaed1c4a&quot;,&quot;parentUUID&quot;:&quot;9adca659-9115-4501-8670-0939bfaca698&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;550a773a-2c8d-4765-a810-35e39aee65cd&quot;,&quot;d2319026-c5d5-446f-9695-8e27eaed1c4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;039a1dbe-5ac5-4796-8c1d-501525e54682&quot;,&quot;title&quot;:&quot;cursor.map&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;maps all result values over the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.map maps all result values over the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .map(value =&gt; value * 2)\n    .then(results =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult.map(value =&gt; value * 2));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;134c768e-d0a4-41e3-a46d-c8ba6e0a29b2&quot;,&quot;parentUUID&quot;:&quot;039a1dbe-5ac5-4796-8c1d-501525e54682&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;134c768e-d0a4-41e3-a46d-c8ba6e0a29b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;0c8066b3-e209-434d-a46f-8f48101f0620&quot;,&quot;title&quot;:&quot;cursor.reduce&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;reduces the result values with the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.reduce reduces the result values with the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .reduce((a, b) =&gt; a + b)\n    .then(result =&gt; {\n    chai_1.expect(result).to.eql(c8qlResult.reduce((a, b) =&gt; a + b));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4920776f-3a01-4f2b-8cd7-ad2d9cf64f43&quot;,&quot;parentUUID&quot;:&quot;0c8066b3-e209-434d-a46f-8f48101f0620&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4920776f-3a01-4f2b-8cd7-ad2d9cf64f43&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;351c0c97-cdec-43fb-8da0-56caf0697768&quot;,&quot;title&quot;:&quot;cursor.delete&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete the cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.delete should delete the cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34723423-c066-494f-8043-7c0cf156641e&quot;,&quot;parentUUID&quot;:&quot;351c0c97-cdec-43fb-8da0-56caf0697768&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;34723423-c066-494f-8043-7c0cf156641e&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;02561d9e-e279-43a0-8d87-556ed3b8349d&quot;,&quot;title&quot;:&quot;Collection metadata&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:920,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;664a2cdb-1da1-4371-89c3-233cdc040751&quot;,&quot;parentUUID&quot;:&quot;02561d9e-e279-43a0-8d87-556ed3b8349d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:156,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(dbName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bff9373-4525-49af-a3ea-a265262e4bf8&quot;,&quot;parentUUID&quot;:&quot;02561d9e-e279-43a0-8d87-556ed3b8349d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f7eacc24-140c-42d2-a3fd-b43e628c61f6&quot;,&quot;title&quot;:&quot;collection.get&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await collection.get();\nchai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\nchai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\nchai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\nchai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7eafd4b8-60b8-48fc-8cac-81e73a441cee&quot;,&quot;parentUUID&quot;:&quot;f7eacc24-140c-42d2-a3fd-b43e628c61f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should throw if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:166,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.collection(\&quot;no\&quot;).get();\n}\ncatch (e) {\n    chai_1.expect(e).to.have.property(\&quot;errorNum\&quot;, collection_1.COLLECTION_NOT_FOUND);\n    return;\n}\nchai_1.expect.fail(\&quot;should throw\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21401921-0287-45c6-baa2-d8f13b053bc1&quot;,&quot;parentUUID&quot;:&quot;f7eacc24-140c-42d2-a3fd-b43e628c61f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7eafd4b8-60b8-48fc-8cac-81e73a441cee&quot;,&quot;21401921-0287-45c6-baa2-d8f13b053bc1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:280,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;00ef1e1a-3b36-4720-85fe-e4bfbc4990a5&quot;,&quot;title&quot;:&quot;collection.exists&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if collection exists&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return true if collection exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.exists();\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0abefd35-9fbf-48ad-b990-df06ace8a18d&quot;,&quot;parentUUID&quot;:&quot;00ef1e1a-3b36-4720-85fe-e4bfbc4990a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return false if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric.collection(\&quot;no\&quot;).exists();\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76d35951-bcfb-4963-8961-228f2999153f&quot;,&quot;parentUUID&quot;:&quot;00ef1e1a-3b36-4720-85fe-e4bfbc4990a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0abefd35-9fbf-48ad-b990-df06ace8a18d&quot;,&quot;76d35951-bcfb-4963-8961-228f2999153f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:229,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;16115b96-5785-454a-a9cf-6173be7300e1&quot;,&quot;title&quot;:&quot;collection.properties&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return properties of a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.properties should return properties of a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:194,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .properties()\n    .then(properties =&gt; {\n    chai_1.expect(properties).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(properties).to.have.property(\&quot;waitForSync\&quot;, false);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0ff418a-cc2a-4bf0-89d5-7edc1d165cfd&quot;,&quot;parentUUID&quot;:&quot;16115b96-5785-454a-a9cf-6173be7300e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0ff418a-cc2a-4bf0-89d5-7edc1d165cfd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:194,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;93803ed2-16e2-4b8a-aa54-9236478d1961&quot;,&quot;title&quot;:&quot;collection.count&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.count should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .count()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53fbec91-a725-4a59-8b3e-217394c0ef95&quot;,&quot;parentUUID&quot;:&quot;93803ed2-16e2-4b8a-aa54-9236478d1961&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;53fbec91-a725-4a59-8b3e-217394c0ef95&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:116,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;495df1bd-d015-4e84-95f6-9685447591f2&quot;,&quot;title&quot;:&quot;Manipulating collections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1609,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9219c58f-d074-45cd-99b2-e1acdf84e531&quot;,&quot;parentUUID&quot;:&quot;495df1bd-d015-4e84-95f6-9685447591f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:219,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`collection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f15fbf9-9371-4b62-a34d-0d6d286ccbe2&quot;,&quot;parentUUID&quot;:&quot;495df1bd-d015-4e84-95f6-9685447591f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:155,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33b57c97-abb5-4579-998c-0b0d5ee0807c&quot;,&quot;parentUUID&quot;:&quot;495df1bd-d015-4e84-95f6-9685447591f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:262,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .get()\n    .then(() =&gt; {\n    collection\n        .drop()\n        .then(() =&gt; void done())\n        .catch(done);\n})\n    .catch(() =&gt; void done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e32cc8c-76dc-4618-aa38-97d520ab7a95&quot;,&quot;parentUUID&quot;:&quot;495df1bd-d015-4e84-95f6-9685447591f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9fa475f0-0b79-494b-bb63-a92943c903b7&quot;,&quot;title&quot;:&quot;collection.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:313,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0b49465-a104-4c56-bdbc-a151731c8694&quot;,&quot;parentUUID&quot;:&quot;9fa475f0-0b79-494b-bb63-a92943c903b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new local document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:276,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;388bc96b-505a-4069-9132-aa2aac209ced&quot;,&quot;parentUUID&quot;:&quot;9fa475f0-0b79-494b-bb63-a92943c903b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:633,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54ca2c5d-c3cb-43f4-8880-6a31cf06cb0d&quot;,&quot;parentUUID&quot;:&quot;9fa475f0-0b79-494b-bb63-a92943c903b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new local edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:279,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b906872-1f9f-494a-90e2-bc3bf881c389&quot;,&quot;parentUUID&quot;:&quot;9fa475f0-0b79-494b-bb63-a92943c903b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0b49465-a104-4c56-bdbc-a151731c8694&quot;,&quot;388bc96b-505a-4069-9132-aa2aac209ced&quot;,&quot;54ca2c5d-c3cb-43f4-8880-6a31cf06cb0d&quot;,&quot;6b906872-1f9f-494a-90e2-bc3bf881c389&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1501,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4c86d103-a25d-43b9-8e26-8f0f80cca8d3&quot;,&quot;title&quot;:&quot;collection.rename&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should rename a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.rename should rename a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:670,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(\&quot;/_admin/server/role\&quot;)\n    .get()\n    .then(res =&gt; {\n    if (res.body.role !== \&quot;SINGLE\&quot;)\n        return;\n    const name = `renamecollection${Date.now()}`;\n    return collection.rename(name).then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, name);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;954120c5-63cd-4f23-a609-0a32be9f20af&quot;,&quot;parentUUID&quot;:&quot;4c86d103-a25d-43b9-8e26-8f0f80cca8d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;954120c5-63cd-4f23-a609-0a32be9f20af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:670,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;fa532543-9e7a-40c9-89c3-f9f8753fbb6d&quot;,&quot;title&quot;:&quot;collection.truncate&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should truncate a non-empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should truncate a non-empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:821,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.save({}).then(() =&gt; {\n    return collection\n        .truncate()\n        .then(() =&gt; {\n        collection.count().then(info =&gt; {\n            chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n            chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n        });\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99864e0b-26ed-4a9f-a6e2-a1b085f3c873&quot;,&quot;parentUUID&quot;:&quot;fa532543-9e7a-40c9-89c3-f9f8753fbb6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow truncating a empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should allow truncating a empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:906,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.truncate().then(() =&gt; {\n    return collection\n        .count()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8547860-ed1d-4a8f-8023-a56fe0999142&quot;,&quot;parentUUID&quot;:&quot;fa532543-9e7a-40c9-89c3-f9f8753fbb6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99864e0b-26ed-4a9f-a6e2-a1b085f3c873&quot;,&quot;c8547860-ed1d-4a8f-8023-a56fe0999142&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1727,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9da003f4-5784-4b97-94fc-405ae53ddc85&quot;,&quot;title&quot;:&quot;collection.drop&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.drop should drop a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:264,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.drop().then(() =&gt; {\n    return collection\n        .get()\n        .then(done)\n        .catch(err =&gt; {\n        chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n        void done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79c0d957-6414-491e-a729-7dd020f7aeda&quot;,&quot;parentUUID&quot;:&quot;9da003f4-5784-4b97-94fc-405ae53ddc85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79c0d957-6414-491e-a729-7dd020f7aeda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:264,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a9f6f93a-84ec-4798-974d-1428771bd151&quot;,&quot;title&quot;:&quot;collection.onChange&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the message on collection change&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.onChange should get the message on collection change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1000,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const callbackObj = {\n    onopen: () =&gt; {\n        collection.save({ name: \&quot;Anthony\&quot;, lastname: \&quot;Gonsalvis\&quot; });\n    },\n    onmessage: (msg) =&gt; {\n        console.log(\&quot;msg=&gt;\&quot;, msg);\n        done();\n    },\n    onerror: (err) =&gt; {\n        console.log(\&quot;Connection Error-&gt;\&quot;, err);\n        chai_1.expect.fail(\&quot;Websocket connection error\&quot;);\n    },\n    onclose: () =&gt; console.log(\&quot;Websoket connection closed\&quot;)\n};\ncollection.onChange(callbackObj, testUrl.substring(8));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ae6bfcb-1d34-4349-afe6-abb4c8c57fd0&quot;,&quot;parentUUID&quot;:&quot;a9f6f93a-84ec-4798-974d-1428771bd151&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5ae6bfcb-1d34-4349-afe6-abb4c8c57fd0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1000,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b7706c9e-40af-4d0d-8289-fa15965dfbe8&quot;,&quot;title&quot;:&quot;Managing indexes&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:952,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41d89b46-86c8-4764-b570-d31e40627d07&quot;,&quot;parentUUID&quot;:&quot;b7706c9e-40af-4d0d-8289-fa15965dfbe8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:175,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea295ea2-0bc2-47f9-a253-7cb27ba60494&quot;,&quot;parentUUID&quot;:&quot;b7706c9e-40af-4d0d-8289-fa15965dfbe8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d20244e9-b595-4c14-9d30-e6ad8445691a&quot;,&quot;title&quot;:&quot;collection.createIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a index of given type&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createIndex should create a index of given type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createIndex({\n    type: \&quot;hash\&quot;,\n    fields: [\&quot;value0\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value0\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01f8cd4e-8c01-40df-976b-557502cc61c4&quot;,&quot;parentUUID&quot;:&quot;d20244e9-b595-4c14-9d30-e6ad8445691a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01f8cd4e-8c01-40df-976b-557502cc61c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:118,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f1070c15-37c9-45e2-877e-e0ce838514e8&quot;,&quot;title&quot;:&quot;collection.createHashIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a hash index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createHashIndex should create a hash index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2428db2f-199b-47b3-86d8-8afcb17f1d0e&quot;,&quot;parentUUID&quot;:&quot;f1070c15-37c9-45e2-877e-e0ce838514e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2428db2f-199b-47b3-86d8-8afcb17f1d0e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:116,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1225b7b7-d188-4e32-9bdb-4e2500c5807b&quot;,&quot;title&quot;:&quot;collection.createSkipList&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a skiplist index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createSkipList should create a skiplist index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createSkipList([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;skiplist\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0720b2b-32fe-4639-b545-5c5b1474bb00&quot;,&quot;parentUUID&quot;:&quot;1225b7b7-d188-4e32-9bdb-4e2500c5807b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0720b2b-32fe-4639-b545-5c5b1474bb00&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:118,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;37f93010-02e4-4e12-8f7b-e625f8b58011&quot;,&quot;title&quot;:&quot;collection.createPersistentIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a persistent index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createPersistentIndex should create a persistent index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createPersistentIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;persistent\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1bef9d0-89cc-4ba9-92cc-fe9e27a2cfe7&quot;,&quot;parentUUID&quot;:&quot;37f93010-02e4-4e12-8f7b-e625f8b58011&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a1bef9d0-89cc-4ba9-92cc-fe9e27a2cfe7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:121,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d64e5dc2-3cac-45e4-9f9a-622080c31980&quot;,&quot;title&quot;:&quot;collection.createGeoIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a geo1 index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo1 index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3891c4b-b4fa-43ce-af5d-c6c8315aeb9b&quot;,&quot;parentUUID&quot;:&quot;d64e5dc2-3cac-45e4-9f9a-622080c31980&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo2 index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo2 index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a4ad838-e587-41d8-9cda-10d9392cfa46&quot;,&quot;parentUUID&quot;:&quot;d64e5dc2-3cac-45e4-9f9a-622080c31980&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo1\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (bestIndexedLevel, fields, ...) } to have property &#x27;type&#x27; of &#x27;geo1&#x27;, but got &#x27;geo&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (bestIndexedLevel, fields, ...) } to have property &#x27;type&#x27; of &#x27;geo1&#x27;, but got &#x27;geo&#x27;\n    at collection.createGeoIndex.then.info (src/test/11-managing-indexes.ts:143:32)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;,&quot;diff&quot;:&quot;- geo\n+ geo1\n&quot;},&quot;uuid&quot;:&quot;280daa6e-4fed-4747-b9f7-05306ad56a86&quot;,&quot;parentUUID&quot;:&quot;d64e5dc2-3cac-45e4-9f9a-622080c31980&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:170,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value1\&quot;, \&quot;value2\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo2\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value1\&quot;, \&quot;value2\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (bestIndexedLevel, fields, ...) } to have property &#x27;type&#x27; of &#x27;geo2&#x27;, but got &#x27;geo&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (bestIndexedLevel, fields, ...) } to have property &#x27;type&#x27; of &#x27;geo2&#x27;, but got &#x27;geo&#x27;\n    at collection.createGeoIndex.then.info (src/test/11-managing-indexes.ts:156:32)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;,&quot;diff&quot;:&quot;- geo\n+ geo2\n&quot;},&quot;uuid&quot;:&quot;dfefc380-5533-473e-96ef-bd5a469c728c&quot;,&quot;parentUUID&quot;:&quot;d64e5dc2-3cac-45e4-9f9a-622080c31980&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;280daa6e-4fed-4747-b9f7-05306ad56a86&quot;,&quot;dfefc380-5533-473e-96ef-bd5a469c728c&quot;],&quot;pending&quot;:[&quot;d3891c4b-b4fa-43ce-af5d-c6c8315aeb9b&quot;,&quot;2a4ad838-e587-41d8-9cda-10d9392cfa46&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:293,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;94308617-684c-4b41-a993-74e7fdaf8cf6&quot;,&quot;title&quot;:&quot;collection.createFulltextIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fulltext index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createFulltextIndex should create a fulltext index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:179,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createFulltextIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;fulltext\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4574fef9-e7c8-4964-bb0c-6baed7e25402&quot;,&quot;parentUUID&quot;:&quot;94308617-684c-4b41-a993-74e7fdaf8cf6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4574fef9-e7c8-4964-bb0c-6baed7e25402&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:179,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c5076144-ca5b-4a83-8d4c-8ba8d55caf13&quot;,&quot;title&quot;:&quot;collection.index&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.index should return information about a index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:234,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.index(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        chai_1.expect(index).to.have.property(\&quot;type\&quot;, info.type);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67c7cbbe-ca06-4e10-ba1a-1869bb680827&quot;,&quot;parentUUID&quot;:&quot;c5076144-ca5b-4a83-8d4c-8ba8d55caf13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;67c7cbbe-ca06-4e10-ba1a-1869bb680827&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:234,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;25bd5f16-abe0-4632-97ec-a0bfc9f7b152&quot;,&quot;title&quot;:&quot;collection.indexes&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of indexes&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.indexes should return a list of indexes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:233,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(index =&gt; {\n    return collection.indexes().then(indexes =&gt; {\n        chai_1.expect(indexes).to.be.instanceof(Array);\n        chai_1.expect(indexes).to.not.be.empty;\n        chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(1);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a9e1c35-924a-466d-b40b-7e810cca721b&quot;,&quot;parentUUID&quot;:&quot;25bd5f16-abe0-4632-97ec-a0bfc9f7b152&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2a9e1c35-924a-466d-b40b-7e810cca721b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:233,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3995d383-a1a0-4267-9587-2a8c7289c54a&quot;,&quot;title&quot;:&quot;collection.dropIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop existing index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.dropIndex should drop existing index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:403,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.dropIndex(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        return collection.indexes().then(indexes =&gt; {\n            chai_1.expect(indexes).to.be.instanceof(Array);\n            chai_1.expect(indexes).to.not.be.empty;\n            chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(1);\n        });\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to equal 1&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to equal 1\n    at collection.indexes.then.indexes (src/test/11-managing-indexes.ts:223:20)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;,&quot;diff&quot;:&quot;- 0\n+ 1\n&quot;},&quot;uuid&quot;:&quot;9a83c5da-a7e6-4056-91eb-6db22b4637b2&quot;,&quot;parentUUID&quot;:&quot;3995d383-a1a0-4267-9587-2a8c7289c54a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;9a83c5da-a7e6-4056-91eb-6db22b4637b2&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:403,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d81a40bb-2fae-41b0-8ae5-240af236f19c&quot;,&quot;title&quot;:&quot;DocumentCollection API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:937,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1355acf6-e8cf-4470-af29-9f029ce6fdef&quot;,&quot;parentUUID&quot;:&quot;d81a40bb-2fae-41b0-8ae5-240af236f19c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:150,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;deaa80d9-e11f-42e0-bae5-b245d60d3190&quot;,&quot;parentUUID&quot;:&quot;d81a40bb-2fae-41b0-8ae5-240af236f19c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:157,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83759bc6-6d11-4c8c-9fb0-3fe232c0b51c&quot;,&quot;parentUUID&quot;:&quot;d81a40bb-2fae-41b0-8ae5-240af236f19c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfc99bde-dcd7-461e-9775-989a8869ab51&quot;,&quot;parentUUID&quot;:&quot;d81a40bb-2fae-41b0-8ae5-240af236f19c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3a9cb764-6bd9-49de-8bfc-e89b54643f3e&quot;,&quot;title&quot;:&quot;documentCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:328,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9582e0a-7696-4fe7-85b9-cb5512eeadcb&quot;,&quot;parentUUID&quot;:&quot;3a9cb764-6bd9-49de-8bfc-e89b54643f3e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document returns a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:478,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;712e10b3-e65b-4f66-8756-c61f8574856b&quot;,&quot;parentUUID&quot;:&quot;3a9cb764-6bd9-49de-8bfc-e89b54643f3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4de93d91-57eb-4739-9d74-ec803bd0731b&quot;,&quot;parentUUID&quot;:&quot;3a9cb764-6bd9-49de-8bfc-e89b54643f3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;712e10b3-e65b-4f66-8756-c61f8574856b&quot;,&quot;4de93d91-57eb-4739-9d74-ec803bd0731b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:601,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a5b9d90b-0794-4b6e-a033-26234feb0dac&quot;,&quot;title&quot;:&quot;documentCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;133531bc-ade9-4689-9f96-7d75a13173b7&quot;,&quot;parentUUID&quot;:&quot;a5b9d90b-0794-4b6e-a033-26234feb0dac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the document exists&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns true if the document exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c497a26-6f3d-44e6-84f2-75cfcb87d7a6&quot;,&quot;parentUUID&quot;:&quot;a5b9d90b-0794-4b6e-a033-26234feb0dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the document does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the document does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;does-not-exist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cef9ca0-8a1e-4478-9526-4b4a306bdabb&quot;,&quot;parentUUID&quot;:&quot;a5b9d90b-0794-4b6e-a033-26234feb0dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the collection does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric\n    .collection(\&quot;doesnotexist\&quot;)\n    .documentExists(\&quot;lol\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c607799-70ce-4f29-8e6b-fcfb90de9537&quot;,&quot;parentUUID&quot;:&quot;a5b9d90b-0794-4b6e-a033-26234feb0dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c497a26-6f3d-44e6-84f2-75cfcb87d7a6&quot;,&quot;3cef9ca0-8a1e-4478-9526-4b4a306bdabb&quot;,&quot;2c607799-70ce-4f29-8e6b-fcfb90de9537&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:450,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;312d7a02-5fb4-495e-8b6a-02bfa9e15422&quot;,&quot;title&quot;:&quot;documentCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save creates a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:253,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a17e21d-2ec7-43b8-b1db-aae65bd91025&quot;,&quot;parentUUID&quot;:&quot;312d7a02-5fb4-495e-8b6a-02bfa9e15422&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:270,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eea5f74f-e213-471a-944e-6c4558a1fdc9&quot;,&quot;parentUUID&quot;:&quot;312d7a02-5fb4-495e-8b6a-02bfa9e15422&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns the document if opts.returnNew is set&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save returns the document if opts.returnNew is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = { returnNew: true };\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;184edd1d-16db-4780-86a9-e28a14010629&quot;,&quot;parentUUID&quot;:&quot;312d7a02-5fb4-495e-8b6a-02bfa9e15422&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;interprets opts as returnNew if it is a boolean&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save interprets opts as returnNew if it is a boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = true;\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2fcfea3-2e62-44dc-8ac4-ed05a9544fed&quot;,&quot;parentUUID&quot;:&quot;312d7a02-5fb4-495e-8b6a-02bfa9e15422&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3a17e21d-2ec7-43b8-b1db-aae65bd91025&quot;,&quot;eea5f74f-e213-471a-944e-6c4558a1fdc9&quot;,&quot;184edd1d-16db-4780-86a9-e28a14010629&quot;,&quot;f2fcfea3-2e62-44dc-8ac4-ed05a9544fed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:804,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f7087561-cd41-44ea-bfa7-cedc75720484&quot;,&quot;title&quot;:&quot;documentCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.replace replaces the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:378,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7b216d1-aed9-47d1-8f4f-19709ca6d5f5&quot;,&quot;parentUUID&quot;:&quot;f7087561-cd41-44ea-bfa7-cedc75720484&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7b216d1-aed9-47d1-8f4f-19709ca6d5f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:378,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e8305907-a608-4e38-a856-f0cfca6fead8&quot;,&quot;title&quot;:&quot;documentCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:648,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad96b7c0-ac7f-4fd4-a1e7-8686c7913c11&quot;,&quot;parentUUID&quot;:&quot;e8305907-a608-4e38-a856-f0cfca6fead8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:456,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b51bc51f-3d91-40ef-94cb-50218588eb45&quot;,&quot;parentUUID&quot;:&quot;e8305907-a608-4e38-a856-f0cfca6fead8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad96b7c0-ac7f-4fd4-a1e7-8686c7913c11&quot;,&quot;b51bc51f-3d91-40ef-94cb-50218588eb45&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1104,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ea26e9e1-e317-4494-b43b-0e8e53178b03&quot;,&quot;title&quot;:&quot;documentCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2ddf338-9174-4286-a32c-63e9bd7122e7&quot;,&quot;parentUUID&quot;:&quot;ea26e9e1-e317-4494-b43b-0e8e53178b03&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove deletes the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:323,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.document(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4451380-274a-4d04-9366-8a2c10918f1b&quot;,&quot;parentUUID&quot;:&quot;ea26e9e1-e317-4494-b43b-0e8e53178b03&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4451380-274a-4d04-9366-8a2c10918f1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:323,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;45b6b39e-2cb8-4f0f-bc0c-d12134ab9cb3&quot;,&quot;title&quot;:&quot;EdgeCollection API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:843,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58314fb5-9cca-4f44-8522-ecb935d76f7e&quot;,&quot;parentUUID&quot;:&quot;45b6b39e-2cb8-4f0f-bc0c-d12134ab9cb3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:151,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.edgeCollection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9ff303f-bd1a-43a4-9ef9-fa3e5c7b4a06&quot;,&quot;parentUUID&quot;:&quot;45b6b39e-2cb8-4f0f-bc0c-d12134ab9cb3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:156,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62939efe-4f91-406e-a59d-ee7ff265e251&quot;,&quot;parentUUID&quot;:&quot;45b6b39e-2cb8-4f0f-bc0c-d12134ab9cb3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:156,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9be3e402-bb0b-4dc9-b6c1-3d31b3c6d074&quot;,&quot;parentUUID&quot;:&quot;45b6b39e-2cb8-4f0f-bc0c-d12134ab9cb3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;312b71a7-bb16-4a2e-a0d8-71040adb7ae8&quot;,&quot;title&quot;:&quot;edgeCollection.edge&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e565dd8-d6e3-4f43-a0f9-6e5eaae32d4e&quot;,&quot;parentUUID&quot;:&quot;312b71a7-bb16-4a2e-a0d8-71040adb7ae8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5bea9f5-8c19-48c2-97de-a0b373827375&quot;,&quot;parentUUID&quot;:&quot;312b71a7-bb16-4a2e-a0d8-71040adb7ae8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d3b5878-735a-4905-b34f-11750e08ef91&quot;,&quot;parentUUID&quot;:&quot;312b71a7-bb16-4a2e-a0d8-71040adb7ae8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5bea9f5-8c19-48c2-97de-a0b373827375&quot;,&quot;0d3b5878-735a-4905-b34f-11750e08ef91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:237,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;96905b0a-6208-4ae8-a810-a7c90f749d7d&quot;,&quot;title&quot;:&quot;edgeCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93b8c1d0-43c4-403c-8926-f5223710d32d&quot;,&quot;parentUUID&quot;:&quot;96905b0a-6208-4ae8-a810-a7c90f749d7d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbf79f82-9877-46b6-9a32-53a5c180862c&quot;,&quot;parentUUID&quot;:&quot;96905b0a-6208-4ae8-a810-a7c90f749d7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:188,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39812d38-4f3c-4297-84d0-ca0bb1a0a204&quot;,&quot;parentUUID&quot;:&quot;96905b0a-6208-4ae8-a810-a7c90f749d7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dbf79f82-9877-46b6-9a32-53a5c180862c&quot;,&quot;39812d38-4f3c-4297-84d0-ca0bb1a0a204&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:308,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;cef3348b-bf76-417c-aad5-c411f799e9a8&quot;,&quot;title&quot;:&quot;edgeCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ac92006-ba07-4ac4-b433-97ab9d49fcf3&quot;,&quot;parentUUID&quot;:&quot;cef3348b-bf76-417c-aad5-c411f799e9a8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the edge exists&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns true if the edge exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25192a2f-d799-4ab6-86c4-68f3ce319bfe&quot;,&quot;parentUUID&quot;:&quot;cef3348b-bf76-417c-aad5-c411f799e9a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the edge does not exist&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns false if the edge does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:179,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;doesnotexist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b352e6b-eef9-49ee-bb31-09217374010b&quot;,&quot;parentUUID&quot;:&quot;cef3348b-bf76-417c-aad5-c411f799e9a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25192a2f-d799-4ab6-86c4-68f3ce319bfe&quot;,&quot;0b352e6b-eef9-49ee-bb31-09217374010b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:380,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;33c0439e-b397-4d83-985b-7fadfee5c42b&quot;,&quot;title&quot;:&quot;edgeCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save creates an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:244,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;925ee605-f244-4dd8-95f0-f58f01ef96d7&quot;,&quot;parentUUID&quot;:&quot;33c0439e-b397-4d83-985b-7fadfee5c42b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:241,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = {\n    chicken: \&quot;chicken\&quot;,\n    _key: \&quot;banana\&quot;,\n    _from: \&quot;d/1\&quot;,\n    _to: \&quot;d/2\&quot;\n};\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.equals(data._key);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._key).to.equal(data._key);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3413fe85-91a2-4be0-93e7-9b2c26821ef5&quot;,&quot;parentUUID&quot;:&quot;33c0439e-b397-4d83-985b-7fadfee5c42b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes _from and _to as positional arguments&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes _from and _to as positional arguments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:382,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c66ad493-021b-4a0b-986b-27beef9637a0&quot;,&quot;parentUUID&quot;:&quot;33c0439e-b397-4d83-985b-7fadfee5c42b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes an options object&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:323,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a97d303c-42ef-4069-b4b0-84e64ea3ee17&quot;,&quot;parentUUID&quot;:&quot;33c0439e-b397-4d83-985b-7fadfee5c42b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes an options object with positional _from and _to&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object with positional _from and _to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:405,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d243ff2a-85af-4f91-b65b-ed2db157d317&quot;,&quot;parentUUID&quot;:&quot;33c0439e-b397-4d83-985b-7fadfee5c42b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;925ee605-f244-4dd8-95f0-f58f01ef96d7&quot;,&quot;3413fe85-91a2-4be0-93e7-9b2c26821ef5&quot;,&quot;c66ad493-021b-4a0b-986b-27beef9637a0&quot;,&quot;a97d303c-42ef-4069-b4b0-84e64ea3ee17&quot;,&quot;d243ff2a-85af-4f91-b65b-ed2db157d317&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1595,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;093249c6-7f2b-4d33-a6dd-d7d64e9f0e41&quot;,&quot;title&quot;:&quot;edgeCollection.traversal&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:531,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows = fabric.edgeCollection(\&quot;knows\&quot;);\nconst person = fabric.collection(\&quot;person\&quot;);\nPromise.all([person.create(), knows.create()])\n    .then(() =&gt; Promise.all([\n    person.import([\n        { _key: \&quot;Alice\&quot; },\n        { _key: \&quot;Bob\&quot; },\n        { _key: \&quot;Charlie\&quot; },\n        { _key: \&quot;Dave\&quot; },\n        { _key: \&quot;Eve\&quot; }\n    ]),\n    knows.import([\n        { _from: \&quot;person/Alice\&quot;, _to: \&quot;person/Bob\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Charlie\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Dave\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Alice\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Bob\&quot; }\n    ])\n]))\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0e8bcd7-5f8a-45a0-9d75-0c01fbcf27d3&quot;,&quot;parentUUID&quot;:&quot;093249c6-7f2b-4d33-a6dd-d7d64e9f0e41&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;executes traversal&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal executes traversal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:133,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows\n    .traversal(\&quot;person/Alice\&quot;, { direction: \&quot;outbound\&quot; })\n    .then((result) =&gt; {\n    chai_1.expect(result).to.have.property(\&quot;visited\&quot;);\n    const visited = result.visited;\n    chai_1.expect(visited).to.have.property(\&quot;vertices\&quot;);\n    const vertices = visited.vertices;\n    chai_1.expect(vertices).to.be.instanceOf(Array);\n    chai_1.expect(vertices.length).to.equal(4);\n    const names = vertices.map((d) =&gt; d._key);\n    for (const name of [\&quot;Alice\&quot;, \&quot;Bob\&quot;, \&quot;Charlie\&quot;, \&quot;Dave\&quot;]) {\n        chai_1.expect(names).to.contain(name);\n    }\n    chai_1.expect(visited).to.have.property(\&quot;paths\&quot;);\n    const paths = visited.paths;\n    chai_1.expect(paths).to.be.instanceOf(Array);\n    chai_1.expect(paths.length).to.equal(4);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbdc5dcc-3827-4976-b3d2-ee64e8b793a7&quot;,&quot;parentUUID&quot;:&quot;093249c6-7f2b-4d33-a6dd-d7d64e9f0e41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fbdc5dcc-3827-4976-b3d2-ee64e8b793a7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:133,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3e15444a-46b6-4464-8954-e502123a312e&quot;,&quot;title&quot;:&quot;edgeCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.replace replaces the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:363,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = { potato: \&quot;tomato\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, {\n        sup: \&quot;dawg\&quot;,\n        _from: \&quot;d/1\&quot;,\n        _to: \&quot;d/2\&quot;\n    });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d70ec54d-d215-4ff1-9ba0-0b79ce4c3f3d&quot;,&quot;parentUUID&quot;:&quot;3e15444a-46b6-4464-8954-e502123a312e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d70ec54d-d215-4ff1-9ba0-0b79ce4c3f3d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:363,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7de44918-9a0e-42bf-96af-b994d27bb86c&quot;,&quot;title&quot;:&quot;edgeCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:362,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;empty\&quot;, null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;085b6e17-ad8b-4cc5-989e-4ed618d99c28&quot;,&quot;parentUUID&quot;:&quot;7de44918-9a0e-42bf-96af-b994d27bb86c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:370,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e36b8cf-5864-446f-b531-5a8c929a65a5&quot;,&quot;parentUUID&quot;:&quot;7de44918-9a0e-42bf-96af-b994d27bb86c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;085b6e17-ad8b-4cc5-989e-4ed618d99c28&quot;,&quot;6e36b8cf-5864-446f-b531-5a8c929a65a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:732,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8686ee5a-23a1-4cd9-b868-bd48d14bd86c&quot;,&quot;title&quot;:&quot;edgeCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c83bb763-5d04-40dd-8609-055702adc53a&quot;,&quot;parentUUID&quot;:&quot;8686ee5a-23a1-4cd9-b868-bd48d14bd86c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove deletes the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:241,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.edge(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8eac4d01-5f97-4612-924f-e00fb49fa5f2&quot;,&quot;parentUUID&quot;:&quot;8686ee5a-23a1-4cd9-b868-bd48d14bd86c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8eac4d01-5f97-4612-924f-e00fb49fa5f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:241,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f151e0eb-031c-4417-8d36-a83b5f82999a&quot;,&quot;title&quot;:&quot;Graph API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:848,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8dfd278e-8977-4265-b707-cdf4435bc982&quot;,&quot;parentUUID&quot;:&quot;f151e0eb-031c-4417-8d36-a83b5f82999a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:188,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e3f37f5-22f7-479e-bdee-1de9ab45c43d&quot;,&quot;parentUUID&quot;:&quot;f151e0eb-031c-4417-8d36-a83b5f82999a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;be5d3b9b-1bba-475a-ac95-804955edbf8a&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:536,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6290990-223c-4da1-a853-f81c24a1d3dc&quot;,&quot;parentUUID&quot;:&quot;be5d3b9b-1bba-475a-ac95-804955edbf8a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:680,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ec3d633-8e05-443e-9069-6fd318788adf&quot;,&quot;parentUUID&quot;:&quot;be5d3b9b-1bba-475a-ac95-804955edbf8a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get fetches information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9afe2d04-5128-47fa-b269-eb8124e0e4ed&quot;,&quot;parentUUID&quot;:&quot;be5d3b9b-1bba-475a-ac95-804955edbf8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9afe2d04-5128-47fa-b269-eb8124e0e4ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:118,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9e661801-a548-4bf5-ab57-09c8f4bb23af&quot;,&quot;title&quot;:&quot;graph.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;869a6503-a07d-42d6-a66f-d7219929067e&quot;,&quot;parentUUID&quot;:&quot;9e661801-a548-4bf5-ab57-09c8f4bb23af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:520,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric.collection(name).drop()))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e11d2cfa-a1c1-474e-be96-c8a875178dbb&quot;,&quot;parentUUID&quot;:&quot;9e661801-a548-4bf5-ab57-09c8f4bb23af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create creates the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:246,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let graph = fabric.graph(`g${Date.now()}`);\ngraph\n    .create({\n    edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n        collection: name,\n        from: vertexCollectionNames,\n        to: vertexCollectionNames\n    }))\n})\n    .then(() =&gt; graph.get())\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6638831e-f0ce-478a-9eb9-1514086e25a2&quot;,&quot;parentUUID&quot;:&quot;9e661801-a548-4bf5-ab57-09c8f4bb23af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6638831e-f0ce-478a-9eb9-1514086e25a2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:246,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;65df4f45-6248-4864-a5b9-847da9de9888&quot;,&quot;title&quot;:&quot;graph.drop&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:436,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21fba6e2-42db-4a82-976e-ab8c9a3431a4&quot;,&quot;parentUUID&quot;:&quot;65df4f45-6248-4864-a5b9-847da9de9888&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:235,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric\n    .collection(name)\n    .drop()\n    .catch(() =&gt; null)))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ca3e512-40da-4362-be99-1accc663dc43&quot;,&quot;parentUUID&quot;:&quot;65df4f45-6248-4864-a5b9-847da9de9888&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;destroys the graph if not passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop destroys the graph if not passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:380,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8bde656-23ad-4681-b449-acdc71958da9&quot;,&quot;parentUUID&quot;:&quot;65df4f45-6248-4864-a5b9-847da9de9888&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;additionally drops all of its collections if passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop additionally drops all of its collections if passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:485,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop(true)\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).not.to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc895b01-9abb-41cd-95b2-18cf4889744e&quot;,&quot;parentUUID&quot;:&quot;65df4f45-6248-4864-a5b9-847da9de9888&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f8bde656-23ad-4681-b449-acdc71958da9&quot;,&quot;cc895b01-9abb-41cd-95b2-18cf4889744e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:865,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4d6a9d93-7067-4129-b6d6-10674ef1b4b9&quot;,&quot;title&quot;:&quot;Manipulating graph vertices&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:905,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9c5d34e-1c12-45ec-90e8-e7612bcfdb86&quot;,&quot;parentUUID&quot;:&quot;4d6a9d93-7067-4129-b6d6-10674ef1b4b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:437,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e311bfd-df0c-49b2-9482-7ab5e7b7ded7&quot;,&quot;parentUUID&quot;:&quot;4d6a9d93-7067-4129-b6d6-10674ef1b4b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:158,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de0d6be8-a94f-4fca-9874-5a9b32e583e2&quot;,&quot;parentUUID&quot;:&quot;4d6a9d93-7067-4129-b6d6-10674ef1b4b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:431,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acd19b7a-3933-49b6-8526-f544444cd863&quot;,&quot;parentUUID&quot;:&quot;4d6a9d93-7067-4129-b6d6-10674ef1b4b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9dd7c5dd-1d89-4a30-98e5-8c51bca89c5f&quot;,&quot;title&quot;:&quot;graph.vertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a GraphVertexCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.vertexCollection returns a GraphVertexCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = graph.vertexCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(graph_1.GraphVertexCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30c0befe-9443-4c8a-8255-c0af47d6f9f6&quot;,&quot;parentUUID&quot;:&quot;9dd7c5dd-1d89-4a30-98e5-8c51bca89c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30c0befe-9443-4c8a-8255-c0af47d6f9f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;71b318ef-1db2-4d0a-885c-69e7c60657d0&quot;,&quot;title&quot;:&quot;graph.addVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:148,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`xc${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9b8f532-69a1-4d0a-9bb0-423d5c86c9b7&quot;,&quot;parentUUID&quot;:&quot;71b318ef-1db2-4d0a-885c-69e7c60657d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:148,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0312de16-1f88-4f48-9b6b-1a2cf2e86205&quot;,&quot;parentUUID&quot;:&quot;71b318ef-1db2-4d0a-885c-69e7c60657d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds the given vertex collection to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection adds the given vertex collection to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).to.contain(vertexCollection.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: VPack error: Expecting Object (exception location: /c8db/arangod/GeneralServer/RestHandler.cpp:458). Please report this error to arangodb.com&quot;,&quot;estack&quot;:&quot;C8Error: VPack error: Expecting Object (exception location: /c8db/arangod/GeneralServer/RestHandler.cpp:458). Please report this error to arangodb.com\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;333ba9a1-ee5a-445e-ac21-aeae435ac09f&quot;,&quot;parentUUID&quot;:&quot;71b318ef-1db2-4d0a-885c-69e7c60657d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;333ba9a1-ee5a-445e-ac21-aeae435ac09f&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:118,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8f98004e-e577-4e91-856b-57b4e9af63ee&quot;,&quot;title&quot;:&quot;graph.removeVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;removes the given vertex collection from the graph\&quot;&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection \&quot;before each\&quot; hook for \&quot;removes the given vertex collection from the graph\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:268,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`xc${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; graph.addVertexCollection(vertexCollection.name))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: VPack error: Expecting Object (exception location: /c8db/arangod/GeneralServer/RestHandler.cpp:458). Please report this error to arangodb.com&quot;,&quot;estack&quot;:&quot;C8Error: VPack error: Expecting Object (exception location: /c8db/arangod/GeneralServer/RestHandler.cpp:458). Please report this error to arangodb.com\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;82c2d558-9a16-4541-84e3-3d54e82141d9&quot;,&quot;parentUUID&quot;:&quot;8f98004e-e577-4e91-856b-57b4e9af63ee&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes the given vertex collection from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection removes the given vertex collection from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;261ac41c-e63f-4d1c-8ad9-50f0dd1bdd89&quot;,&quot;parentUUID&quot;:&quot;8f98004e-e577-4e91-856b-57b4e9af63ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;destroys the collection if explicitly passed true&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection destroys the collection if explicitly passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name, true)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), err =&gt; {\n    chai_1.expect(err).to.be.an.instanceof(error_1.C8Error);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ac4c617-d57e-4e9b-8515-d5235eafb0df&quot;,&quot;parentUUID&quot;:&quot;8f98004e-e577-4e91-856b-57b4e9af63ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;261ac41c-e63f-4d1c-8ad9-50f0dd1bdd89&quot;,&quot;0ac4c617-d57e-4e9b-8515-d5235eafb0df&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;69836539-5c1b-4642-9905-a332dbba67d9&quot;,&quot;title&quot;:&quot;Manipulating graph edges&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1141,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b885f06-24d8-4edd-bbbf-bbec016836e2&quot;,&quot;parentUUID&quot;:&quot;69836539-5c1b-4642-9905-a332dbba67d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:126,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(graphName);\ngraph\n    .create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae590ca6-4f7f-4d55-a5ba-098bfd6daac1&quot;,&quot;parentUUID&quot;:&quot;69836539-5c1b-4642-9905-a332dbba67d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:154,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddafcf30-2a85-458c-a5ac-21e97d7da716&quot;,&quot;parentUUID&quot;:&quot;69836539-5c1b-4642-9905-a332dbba67d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:138,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05236074-39df-461b-adf5-3de6c418c691&quot;,&quot;parentUUID&quot;:&quot;69836539-5c1b-4642-9905-a332dbba67d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2b61ce73-e8b5-4c83-a337-7750e03e4551&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.get should return information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa023775-f24a-4735-88a5-8c7ae7db974a&quot;,&quot;parentUUID&quot;:&quot;2b61ce73-e8b5-4c83-a337-7750e03e4551&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa023775-f24a-4735-88a5-8c7ae7db974a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:119,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a04147c3-fc15-4df0-addb-d280633e4e78&quot;,&quot;title&quot;:&quot;graph.edgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.edgeCollections should contain edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .edgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info.map((c) =&gt; c.name)).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ec22960-9df0-4791-aaef-8dd92b7790bd&quot;,&quot;parentUUID&quot;:&quot;a04147c3-fc15-4df0-addb-d280633e4e78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ec22960-9df0-4791-aaef-8dd92b7790bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:124,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e6d60b22-b3a1-4406-86a1-ad829d026ab7&quot;,&quot;title&quot;:&quot;graph.listEdgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all edge collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listEdgeCollections should return all edge collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listEdgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a63879c-5f1b-455d-a3e6-6994e7e5310b&quot;,&quot;parentUUID&quot;:&quot;e6d60b22-b3a1-4406-86a1-ad829d026ab7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a63879c-5f1b-455d-a3e6-6994e7e5310b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:118,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d387cb6e-7db2-417d-9033-e6fbe5fd79f6&quot;,&quot;title&quot;:&quot;graph.listVertexCollections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all vertex collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listVertexCollections should return all vertex collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listVertexCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;656745eb-6cc7-4cad-bd6e-8152a150f49c&quot;,&quot;parentUUID&quot;:&quot;d387cb6e-7db2-417d-9033-e6fbe5fd79f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;656745eb-6cc7-4cad-bd6e-8152a150f49c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:117,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a53dad15-bd3d-495e-b1c5-42d6ff474136&quot;,&quot;title&quot;:&quot;graph.addEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add an edgeDefinition to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.addEdgeDefinition should add an edgeDefinition to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:185,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addEdgeDefinition({\n    collection: \&quot;works_in\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(2);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;works_in\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;works_in\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dab8258-792c-44b1-9fee-f8f28c55d033&quot;,&quot;parentUUID&quot;:&quot;a53dad15-bd3d-495e-b1c5-42d6ff474136&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2dab8258-792c-44b1-9fee-f8f28c55d033&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:185,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;660d9099-2058-44ea-8b25-0756f6732e7e&quot;,&quot;title&quot;:&quot;graph.replaceEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should replace an existing edgeDefinition in the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.replaceEdgeDefinition should replace an existing edgeDefinition in the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:130,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .replaceEdgeDefinition(\&quot;knows\&quot;, {\n    collection: \&quot;knows\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91eefa80-3f68-4ee1-b966-c6c2821e15ea&quot;,&quot;parentUUID&quot;:&quot;660d9099-2058-44ea-8b25-0756f6732e7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91eefa80-3f68-4ee1-b966-c6c2821e15ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:130,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ca71f9fb-1349-46cc-a3d4-8cc04fa2fb65&quot;,&quot;title&quot;:&quot;graph.removeEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove an edgeDefinition from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.removeEdgeDefinition should remove an edgeDefinition from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeEdgeDefinition(\&quot;knows\&quot;)\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44a1e1ab-13d4-4f4e-b13a-8b29e3f1ba3b&quot;,&quot;parentUUID&quot;:&quot;ca71f9fb-1349-46cc-a3d4-8cc04fa2fb65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44a1e1ab-13d4-4f4e-b13a-8b29e3f1ba3b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:125,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b8c8013c-b2ef-48ed-9984-dd2228e193e0&quot;,&quot;title&quot;:&quot;GraphVertexCollection API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1009,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\nconst graph = fabric.graph(`testgraph${Date.now()}`);\nawait graph.create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n});\ncollection = graph.vertexCollection(\&quot;person\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ecd0e6f-d7ed-41fb-8823-b8bdcc5ed97e&quot;,&quot;parentUUID&quot;:&quot;b8c8013c-b2ef-48ed-9984-dd2228e193e0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .truncate()\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af34b675-1a24-41ce-b9dc-6bdf250bba97&quot;,&quot;parentUUID&quot;:&quot;b8c8013c-b2ef-48ed-9984-dd2228e193e0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:160,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;409b907f-a35c-4f39-bb44-00b3011e5de6&quot;,&quot;parentUUID&quot;:&quot;b8c8013c-b2ef-48ed-9984-dd2228e193e0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2d144945-9ed5-4caa-9eec-79869b258545&quot;,&quot;title&quot;:&quot;graphVertexCollection.vertex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;returns a vertex in the collection\&quot;&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex \&quot;before each\&quot; hook for \&quot;returns a vertex in the collection\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:134,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;20774303-b2a8-4a47-a470-dfa24456a8c4&quot;,&quot;parentUUID&quot;:&quot;2d144945-9ed5-4caa-9eec-79869b258545&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b83e7b5-291a-4c3f-95ec-1edb9c620e32&quot;,&quot;parentUUID&quot;:&quot;2d144945-9ed5-4caa-9eec-79869b258545&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b47ff0b1-3bc4-4147-b05e-40419b12cb9a&quot;,&quot;parentUUID&quot;:&quot;2d144945-9ed5-4caa-9eec-79869b258545&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;6b83e7b5-291a-4c3f-95ec-1edb9c620e32&quot;,&quot;b47ff0b1-3bc4-4147-b05e-40419b12cb9a&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f23fc72d-2b76-455f-a469-f8a3719e7e66&quot;,&quot;title&quot;:&quot;graphVertexCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;returns a vertex in the collection\&quot;&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document \&quot;before each\&quot; hook for \&quot;returns a vertex in the collection\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;4ec64fa0-57b3-4386-9a52-45cfd5767030&quot;,&quot;parentUUID&quot;:&quot;f23fc72d-2b76-455f-a469-f8a3719e7e66&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d6146b7-5633-4024-b7e7-fa2bfc627ed1&quot;,&quot;parentUUID&quot;:&quot;f23fc72d-2b76-455f-a469-f8a3719e7e66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e37d30e-a4f8-4172-aa8b-de2db904a4b8&quot;,&quot;parentUUID&quot;:&quot;f23fc72d-2b76-455f-a469-f8a3719e7e66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;1d6146b7-5633-4024-b7e7-fa2bfc627ed1&quot;,&quot;5e37d30e-a4f8-4172-aa8b-de2db904a4b8&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e79e5b92-649f-493c-bd89-135f231aecdc&quot;,&quot;title&quot;:&quot;graphVertexCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save creates a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;97b93973-6627-44de-8b58-18c7da1111a4&quot;,&quot;parentUUID&quot;:&quot;e79e5b92-649f-493c-bd89-135f231aecdc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;db477f3f-c98a-4cd1-9ddf-20eecfe95e7f&quot;,&quot;parentUUID&quot;:&quot;e79e5b92-649f-493c-bd89-135f231aecdc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;97b93973-6627-44de-8b58-18c7da1111a4&quot;,&quot;db477f3f-c98a-4cd1-9ddf-20eecfe95e7f&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:325,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d58ea115-0d76-4d4f-910a-82ae31f44fb4&quot;,&quot;title&quot;:&quot;graphVertexCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.replace replaces the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;0f934482-fb7f-4452-be51-5c3318e25073&quot;,&quot;parentUUID&quot;:&quot;d58ea115-0d76-4d4f-910a-82ae31f44fb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;0f934482-fb7f-4452-be51-5c3318e25073&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:121,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;78e5cc75-a71f-4149-9a29-77bee90ee313&quot;,&quot;title&quot;:&quot;graphVertexCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update updates the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:212,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;0bf7d2f5-f971-4760-a3c6-b7d59be177a8&quot;,&quot;parentUUID&quot;:&quot;78e5cc75-a71f-4149-9a29-77bee90ee313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;211313c9-6077-4186-b264-c888a630a409&quot;,&quot;parentUUID&quot;:&quot;78e5cc75-a71f-4149-9a29-77bee90ee313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;0bf7d2f5-f971-4760-a3c6-b7d59be177a8&quot;,&quot;211313c9-6077-4186-b264-c888a630a409&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:413,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0491c99f-83ef-4430-b4d8-cc402fd06b69&quot;,&quot;title&quot;:&quot;graphVertexCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;deletes the given vertex\&quot;&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove \&quot;before each\&quot; hook for \&quot;deletes the given vertex\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582183740359/graph/testgraph1582183858027/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;bffbf4f4-d1d0-43a4-a18b-35ba92937e78&quot;,&quot;parentUUID&quot;:&quot;0491c99f-83ef-4430-b4d8-cc402fd06b69&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove deletes the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.vertex(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3daea9d-5b5b-4be3-8fd5-eb4278823b4d&quot;,&quot;parentUUID&quot;:&quot;0491c99f-83ef-4430-b4d8-cc402fd06b69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;c3daea9d-5b5b-4be3-8fd5-eb4278823b4d&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a7ac32b3-da3c-4311-9f86-d6a3c4755114&quot;,&quot;title&quot;:&quot;Join Path&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/21-util-joinpath.js&quot;,&quot;file&quot;:&quot;/lib/async/test/21-util-joinpath.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;joinPath 1&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;../../u1/u2\&quot;;\nvar path = \&quot;/security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;../../u1/u2/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41a6b356-24fa-47b1-9539-a9e7c38c7e03&quot;,&quot;parentUUID&quot;:&quot;a7ac32b3-da3c-4311-9f86-d6a3c4755114&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 2&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/u1/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd92009a-2120-46bd-a026-d722e7f82f29&quot;,&quot;parentUUID&quot;:&quot;a7ac32b3-da3c-4311-9f86-d6a3c4755114&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 3&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05e1f106-ee56-4a01-928d-df991fc783ba&quot;,&quot;parentUUID&quot;:&quot;a7ac32b3-da3c-4311-9f86-d6a3c4755114&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41a6b356-24fa-47b1-9539-a9e7c38c7e03&quot;,&quot;fd92009a-2120-46bd-a026-d722e7f82f29&quot;,&quot;05e1f106-ee56-4a01-928d-df991fc783ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;b6bcc4b3-fad6-4977-ad3d-80e34c56416d&quot;,&quot;title&quot;:&quot;Helper.getFullStreamPath&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output when there is no extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is no extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd16c68a-74f3-4a9e-b287-c102fb7e97d6&quot;,&quot;parentUUID&quot;:&quot;b6bcc4b3-fad6-4977-ad3d-80e34c56416d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns correct output when there is extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;, \&quot;/compaction\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog/compaction\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86274e4f-7da1-4c19-95a2-c8665bf3fa1e&quot;,&quot;parentUUID&quot;:&quot;b6bcc4b3-fad6-4977-ad3d-80e34c56416d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd16c68a-74f3-4a9e-b287-c102fb7e97d6&quot;,&quot;86274e4f-7da1-4c19-95a2-c8665bf3fa1e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;338e8662-6e0e-4431-b51d-831949ad1941&quot;,&quot;title&quot;:&quot;Helper.getDCListString&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output&quot;,&quot;fullTitle&quot;:&quot;Helper.getDCListString returns correct output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(helper_1.getDCListString(response)).to.equal(&#x27;dev-ap-southeast-1,dev-ap-southeast-2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e83654b8-4053-4d70-a09c-a5ecc9856238&quot;,&quot;parentUUID&quot;:&quot;338e8662-6e0e-4431-b51d-831949ad1941&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e83654b8-4053-4d70-a09c-a5ecc9856238&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;bb3adfa9-6034-42f2-84a4-d48ed7dd9e74&quot;,&quot;title&quot;:&quot;C8QL Stream queries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:872,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7511c694-d42a-4bb6-9826-eb44958c7bd8&quot;,&quot;parentUUID&quot;:&quot;bb3adfa9-6034-42f2-84a4-d48ed7dd9e74&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:168,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04a98c9e-0d5b-49be-b3f9-bc4f140e749c&quot;,&quot;parentUUID&quot;:&quot;bb3adfa9-6034-42f2-84a4-d48ed7dd9e74&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c8de2af8-c451-430a-9b33-5d22fc0c1228&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;, {}, { options: { stream: true } })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e299c4ab-42f3-47d2-916a-cb36789d9ee4&quot;,&quot;parentUUID&quot;:&quot;c8de2af8-c451-430a-9b33-5d22fc0c1228&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 }, { options: { stream: true } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61ec9d0c-5479-486a-81ef-e7ad5c7546dc&quot;,&quot;parentUUID&quot;:&quot;c8de2af8-c451-430a-9b33-5d22fc0c1228&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, undefined, {\n    batchSize: 2,\n    count: true,\n    options: { stream: true }\n})\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to equal 10&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to equal 10\n    at fabric.query.then.cursor (src/test/23-c8ql-queries-stream.ts:69:35)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;2f3ddb1c-b74a-4270-80fc-c766f9afe906&quot;,&quot;parentUUID&quot;:&quot;c8de2af8-c451-430a-9b33-5d22fc0c1228&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true, options: { stream: true } })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to equal 10&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to equal 10\n    at fabric.query.then.cursor (src/test/23-c8ql-queries-stream.ts:83:35)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;7306d6fd-9d5d-469a-85e8-f5a0ce44dc99&quot;,&quot;parentUUID&quot;:&quot;c8de2af8-c451-430a-9b33-5d22fc0c1228&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e299c4ab-42f3-47d2-916a-cb36789d9ee4&quot;,&quot;61ec9d0c-5479-486a-81ef-e7ad5c7546dc&quot;],&quot;failures&quot;:[&quot;2f3ddb1c-b74a-4270-80fc-c766f9afe906&quot;,&quot;7306d6fd-9d5d-469a-85e8-f5a0ce44dc99&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:475,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;65cf7578-744c-4699-bed7-a9aea50f72d2&quot;,&quot;title&quot;:&quot;with some data&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;can do writes and reads&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries with some data can do writes and reads&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let collection = fabric.collection(cname);\nlet readQ = jsC8_1.c8ql `FOR doc in ${collection} RETURN doc`;\nlet writeQ = jsC8_1.c8ql `FOR i in 1..1000 LET y = SLEEP(1) INSERT {forbidden: i} INTO ${collection}`;\nconst opts = { batchSize: 500, ttl: 5, options: { stream: true } };\n// 900s lock timeout + 5s ttl\nlet readCursor = fabric.query(readQ, opts);\nlet writeCursor = fabric.query(writeQ, opts);\n// the read cursor should always win\nPromise.race([readCursor, writeCursor])\n    .then(c =&gt; {\n    // therefore no document should have been written here\n    return c.every((d) =&gt; !d.hasOwnProperty(\&quot;forbidden\&quot;));\n})\n    .then(isOk =&gt; {\n    chai_1.expect(isOk).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: collection or view not found: name: MyTestCollection&quot;,&quot;estack&quot;:&quot;C8Error: collection or view not found: name: MyTestCollection\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;6509bf38-2a56-425a-a832-eeb73816f694&quot;,&quot;parentUUID&quot;:&quot;65cf7578-744c-4699-bed7-a9aea50f72d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;6509bf38-2a56-425a-a832-eeb73816f694&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:124,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;24fa6850-4b60-4348-9585-4a77fd3f2977&quot;,&quot;title&quot;:&quot;Manipulating streams&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:454,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec7565cd-c753-4e52-b6b3-2b70999515c8&quot;,&quot;parentUUID&quot;:&quot;24fa6850-4b60-4348-9585-4a77fd3f2977&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fdebb80-0f7b-45dd-b832-d680d819e4f6&quot;,&quot;parentUUID&quot;:&quot;24fa6850-4b60-4348-9585-4a77fd3f2977&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2494c37a-99b6-424a-b6c9-cb95b1dcfc4d&quot;,&quot;title&quot;:&quot;fabric.stream&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a new Stream instance&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream returns a new Stream instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.stream(\&quot;testStream\&quot;, true)).to.be.instanceof(stream_1.Stream);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e2b2220-0070-4ba9-8b61-b31be774ca00&quot;,&quot;parentUUID&quot;:&quot;2494c37a-99b6-424a-b6c9-cb95b1dcfc4d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets all streams&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream gets all streams&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getStreams();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53bc7f90-0c3a-4376-aad8-6444305da221&quot;,&quot;parentUUID&quot;:&quot;2494c37a-99b6-424a-b6c9-cb95b1dcfc4d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;clears backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.clearBacklog();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;697767f0-0b0a-4bd2-b9d3-1e629f1b8084&quot;,&quot;parentUUID&quot;:&quot;2494c37a-99b6-424a-b6c9-cb95b1dcfc4d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;clears subscription backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears subscription backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9441787-b587-4b10-9f9a-fec7dbb6a3ce&quot;,&quot;parentUUID&quot;:&quot;2494c37a-99b6-424a-b6c9-cb95b1dcfc4d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unsubscribes to a subscription&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream unsubscribes to a subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d607f43-a0d9-44f7-ade1-90dc92dcd271&quot;,&quot;parentUUID&quot;:&quot;2494c37a-99b6-424a-b6c9-cb95b1dcfc4d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e2b2220-0070-4ba9-8b61-b31be774ca00&quot;,&quot;53bc7f90-0c3a-4376-aad8-6444305da221&quot;,&quot;697767f0-0b0a-4bd2-b9d3-1e629f1b8084&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;d9441787-b587-4b10-9f9a-fec7dbb6a3ce&quot;,&quot;0d607f43-a0d9-44f7-ade1-90dc92dcd271&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:235,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;7fa3063c-2959-4d0a-b77a-8443901831b2&quot;,&quot;title&quot;:&quot;stream.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d90572b6-3bc6-45de-b4a1-81bd41d50e22&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, true);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfcc19c8-739a-4aab-8704-d5a17efd7149&quot;,&quot;parentUUID&quot;:&quot;d90572b6-3bc6-45de-b4a1-81bd41d50e22&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, false);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac80dfef-4028-49c7-9dc0-a97c2bbd25a5&quot;,&quot;parentUUID&quot;:&quot;d90572b6-3bc6-45de-b4a1-81bd41d50e22&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bfcc19c8-739a-4aab-8704-d5a17efd7149&quot;,&quot;ac80dfef-4028-49c7-9dc0-a97c2bbd25a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:252,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;ccdb9c07-147a-417a-9c48-e094bc518433&quot;,&quot;title&quot;:&quot;stream.manipulate&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream = fabric.stream(`testStream${Date.now()}`, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;725bf7b1-b117-4ed7-a206-e75e24b71deb&quot;,&quot;parentUUID&quot;:&quot;ccdb9c07-147a-417a-9c48-e094bc518433&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50fe296e-3e57-4d26-bc63-119ea1a92266&quot;,&quot;parentUUID&quot;:&quot;ccdb9c07-147a-417a-9c48-e094bc518433&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e9330e7-a5c5-4ef0-acf2-4395d3f9cab9&quot;,&quot;parentUUID&quot;:&quot;ccdb9c07-147a-417a-9c48-e094bc518433&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.expireMessagesOnAllSubscriptions&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.expireMessagesOnAllSubscriptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc978f2d-9768-43da-89ed-33a4d0788fd8&quot;,&quot;parentUUID&quot;:&quot;ccdb9c07-147a-417a-9c48-e094bc518433&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8a14a984-9463-4f0b-950f-dbad1090e3b6&quot;,&quot;title&quot;:&quot;stream.getBacklog&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets estimated backlog for offline stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getBacklog gets estimated backlog for offline stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:126,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.backlog();\nconsole.log(response.error);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ef35465-88dc-458c-a2f8-1b95865987ec&quot;,&quot;parentUUID&quot;:&quot;8a14a984-9463-4f0b-950f-dbad1090e3b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ef35465-88dc-458c-a2f8-1b95865987ec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:126,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;0b9800c1-f4f0-4a11-9253-9a365703072c&quot;,&quot;title&quot;:&quot;stream.getStreamStatistics&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets the stream statistics&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getStreamStatistics gets the stream statistics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:128,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getStreamStatistics();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: C8Streams error 404&quot;,&quot;estack&quot;:&quot;C8Error: C8Streams error 404\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;e7d309ec-595c-4d6a-85a2-b8a928dc0068&quot;,&quot;parentUUID&quot;:&quot;0b9800c1-f4f0-4a11-9253-9a365703072c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;e7d309ec-595c-4d6a-85a2-b8a928dc0068&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:128,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;3843c0ee-6953-475b-8320-f6252fbf9b7e&quot;,&quot;title&quot;:&quot;stream.subscriptions&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.resetSubscriptionToPosition&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetSubscriptionToPosition&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1639,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let numberOfMessages = 0;\nfunction callback(msg) {\n    const parsedMsg = JSON.parse(msg);\n    const { payload } = parsedMsg;\n    const array = [\&quot;bmFuZGhh\&quot;, \&quot;YWJoaXNoZWs=\&quot;, \&quot;dmlwdWw=\&quot;, \&quot;c3Vsb20=\&quot;, \&quot;cHJhdGlr\&quot;];\n    if (array.includes(payload)) {\n        numberOfMessages++;\n    }\n    ;\n    if (numberOfMessages === 5) {\n        done();\n    }\n}\nstream.consumer(`streamSubscriptionTest`, {\n    onmessage: callback,\n    onopen: () =&gt; {\n        stream.producer([\&quot;nandha\&quot;, \&quot;abhishek\&quot;, \&quot;vipul\&quot;, \&quot;sulom\&quot;, \&quot;pratik\&quot;], dcName);\n    }\n}, dcName);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: done() called multiple times&quot;,&quot;estack&quot;:&quot;Error: done() called multiple times\n    at callback (src/test/28-manipulating-streams.ts:103:13)\n    at WebSocket.consumer.on (src/stream.ts:247:21)\n    at Receiver.receiverOnMessage (node_modules/ws/lib/websocket.js:719:20)\n    at Receiver.dataMessage (node_modules/ws/lib/receiver.js:414:14)\n    at perMessageDeflate.decompress (node_modules/ws/lib/receiver.js:371:23)\n    at _decompress (node_modules/ws/lib/permessage-deflate.js:307:9)\n    at _inflate.flush (node_modules/ws/lib/permessage-deflate.js:389:7)\n    at afterWrite (_stream_writable.js:485:3)\n    at onwrite (_stream_writable.js:476:7)\n    at InflateRaw.afterTransform (_stream_transform.js:94:3)\n    at Zlib.processCallback (zlib.js:557:8)&quot;},&quot;uuid&quot;:&quot;0ec110fb-aea0-4dc8-bfe4-e0465447c50a&quot;,&quot;parentUUID&quot;:&quot;3843c0ee-6953-475b-8320-f6252fbf9b7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.expireMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.expireMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b2bdcfa-788e-4186-b670-d1fe06e26bf9&quot;,&quot;parentUUID&quot;:&quot;3843c0ee-6953-475b-8320-f6252fbf9b7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.resetCursor&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetCursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2f1e34a-68eb-42fe-b22f-3f6425719c47&quot;,&quot;parentUUID&quot;:&quot;3843c0ee-6953-475b-8320-f6252fbf9b7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.skipNumberOfMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipNumberOfMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54e31f46-cb1f-49d2-bb63-e6959058d30a&quot;,&quot;parentUUID&quot;:&quot;3843c0ee-6953-475b-8320-f6252fbf9b7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.skipAllMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipAllMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73f43c29-12f7-489f-8491-916fd017139b&quot;,&quot;parentUUID&quot;:&quot;3843c0ee-6953-475b-8320-f6252fbf9b7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.getSubscriptionList&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.getSubscriptionList&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;it(\&quot;gets subscription list\&quot;, async () =&gt; {\n    const response = await stream.getSubscriptionList();\n    chai_1.expect(response.error).to.be.false;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9478f8a3-f13b-4075-95dc-185143fb18b5&quot;,&quot;parentUUID&quot;:&quot;3843c0ee-6953-475b-8320-f6252fbf9b7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b2bdcfa-788e-4186-b670-d1fe06e26bf9&quot;,&quot;a2f1e34a-68eb-42fe-b22f-3f6425719c47&quot;,&quot;54e31f46-cb1f-49d2-bb63-e6959058d30a&quot;,&quot;73f43c29-12f7-489f-8491-916fd017139b&quot;,&quot;9478f8a3-f13b-4075-95dc-185143fb18b5&quot;],&quot;failures&quot;:[&quot;0ec110fb-aea0-4dc8-bfe4-e0465447c50a&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1639,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;09e567ab-386a-48f5-a5ac-e1f57ff60a79&quot;,&quot;title&quot;:&quot;stream.terminate&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;42fbe715-fb37-468e-b181-7798ed023887&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fee42e21-06c2-4171-abab-51ae33040b61&quot;,&quot;title&quot;:&quot;local&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, true);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a38efbad-541c-48ce-8815-d23b10f238f5&quot;,&quot;parentUUID&quot;:&quot;fee42e21-06c2-4171-abab-51ae33040b61&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local terminates persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.terminateStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: C8Streams error 404&quot;,&quot;estack&quot;:&quot;C8Error: C8Streams error 404\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;a52655f2-15f7-47c6-b64e-2a0b81898c29&quot;,&quot;parentUUID&quot;:&quot;fee42e21-06c2-4171-abab-51ae33040b61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;a52655f2-15f7-47c6-b64e-2a0b81898c29&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:125,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;67a39a78-0c5d-465a-8c0f-b3d4d4698f9b&quot;,&quot;title&quot;:&quot;global&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:126,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4faf9173-fc22-4c69-a849-fa4cabf9e6ca&quot;,&quot;parentUUID&quot;:&quot;67a39a78-0c5d-465a-8c0f-b3d4d4698f9b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global terminates persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.terminateStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73df0827-859b-447e-9ae8-939164618f2b&quot;,&quot;parentUUID&quot;:&quot;67a39a78-0c5d-465a-8c0f-b3d4d4698f9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;73df0827-859b-447e-9ae8-939164618f2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:145,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;02e52e75-da7a-404f-bcfd-9fc63eaab286&quot;,&quot;title&quot;:&quot;stream.websocket&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80ac6c4f-3d8b-4f4c-ae2a-c5b5d5aa39b3&quot;,&quot;parentUUID&quot;:&quot;02e52e75-da7a-404f-bcfd-9fc63eaab286&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ba02017-32fd-4f44-9470-f0f717299800&quot;,&quot;parentUUID&quot;:&quot;02e52e75-da7a-404f-bcfd-9fc63eaab286&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets data in consumer when sent by producer&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket gets data in consumer when sent by producer&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:756,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;function callback(msg) {\n    const parsedMsg = JSON.parse(msg);\n    const { payload } = parsedMsg;\n    chai_1.expect(payload).to.equal(\&quot;dGVzdA==\&quot;);\n    done();\n}\nstream.consumer(`streamSubscription${Date.now()}`, {\n    onmessage: callback,\n    onopen: () =&gt; stream.producer(\&quot;test\&quot;, dcName)\n}, dcName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;841f417a-fe38-4d74-8e4f-94db28b49e15&quot;,&quot;parentUUID&quot;:&quot;02e52e75-da7a-404f-bcfd-9fc63eaab286&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;841f417a-fe38-4d74-8e4f-94db28b49e15&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:756,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;fc978f2d-9768-43da-89ed-33a4d0788fd8&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;b05f9fc4-a399-4bf7-aa19-ebce75de5101&quot;,&quot;title&quot;:&quot;manipulating spot&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:878,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nlocalLocation = await fabric.getLocalEdgeLocation();\nname = localLocation.name;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3267077-a0a4-4259-8bd4-d04f71f124a9&quot;,&quot;parentUUID&quot;:&quot;b05f9fc4-a399-4bf7-aa19-ebce75de5101&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48422466-35a8-48ea-bfc5-38c1ed1c4852&quot;,&quot;parentUUID&quot;:&quot;b05f9fc4-a399-4bf7-aa19-ebce75de5101&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4b662f47-8dc3-4818-a52b-72e7e9efb0fb&quot;,&quot;title&quot;:&quot;spot_region status of a region&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should change the spot_region of a region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot_region status of a region should change the spot_region of a region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:172,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const currentSpotStatus = localLocation.spot_region;\nawait fabric.changeEdgeLocationSpotStatus(name, !currentSpotStatus);\nconst changedLocation = await fabric.getLocalEdgeLocation();\nconst changedSpotStatus = changedLocation.spot_region;\nchai_1.expect(changedLocation).to.equal(!changedSpotStatus);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: forbidden&quot;,&quot;estack&quot;:&quot;C8Error: forbidden\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;d9a0d092-6538-47e6-baae-3f19946c63b8&quot;,&quot;parentUUID&quot;:&quot;4b662f47-8dc3-4818-a52b-72e7e9efb0fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not change the spot_region to false if a fabric&#x27;s spot primary is that region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot_region status of a region should not change the spot_region to false if a fabric&#x27;s spot primary is that region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8f75ac0-f9fe-409e-bd23-7b91afba4808&quot;,&quot;parentUUID&quot;:&quot;4b662f47-8dc3-4818-a52b-72e7e9efb0fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;d9a0d092-6538-47e6-baae-3f19946c63b8&quot;],&quot;pending&quot;:[&quot;c8f75ac0-f9fe-409e-bd23-7b91afba4808&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:172,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;a8ada5c0-abfb-4739-a22b-54ae214ef221&quot;,&quot;title&quot;:&quot;spot fabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.dropFabric(fabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8204c298-edd8-42f8-acbc-00a6244c3ebe&quot;,&quot;parentUUID&quot;:&quot;a8ada5c0-abfb-4739-a22b-54ae214ef221&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fabric with a spot primary region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric should create a fabric with a spot primary region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1292,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.changeEdgeLocationSpotStatus(name, true);\nconst options = {\n    dcList: name,\n    spotDc: name\n};\nconst response = await fabric.createFabric(fabricName, undefined, options);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1d430ad-d599-4871-984d-481e30fb3c44&quot;,&quot;parentUUID&quot;:&quot;a8ada5c0-abfb-4739-a22b-54ae214ef221&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should change the spot primary region of a fabric&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric should change the spot primary region of a fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;471a3f96-1f69-4183-a588-cb23c59a4e1a&quot;,&quot;parentUUID&quot;:&quot;a8ada5c0-abfb-4739-a22b-54ae214ef221&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b1d430ad-d599-4871-984d-481e30fb3c44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;471a3f96-1f69-4183-a588-cb23c59a4e1a&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:1292,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;d01f4ff9-d790-43fc-b574-1ec081fb1182&quot;,&quot;title&quot;:&quot;spot collection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a spot document collection&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection should create a spot document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce311f14-217d-47c4-b91b-eef5984e93ba&quot;,&quot;parentUUID&quot;:&quot;d01f4ff9-d790-43fc-b574-1ec081fb1182&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a spot edge collection&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection should create a spot edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3451709-6f91-46a2-9e72-c64db8c6bb76&quot;,&quot;parentUUID&quot;:&quot;d01f4ff9-d790-43fc-b574-1ec081fb1182&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2224f4d5-6134-4cb3-97a3-203b2ec960d0&quot;,&quot;title&quot;:&quot;mapulating spot collection&#x27;s region&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should change the spot region of a spot collection to none&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection mapulating spot collection&#x27;s region should change the spot region of a spot collection to none&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19b52b74-cc05-4518-9509-2eee58ce8a4a&quot;,&quot;parentUUID&quot;:&quot;2224f4d5-6134-4cb3-97a3-203b2ec960d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should change the spot region of a spot collection to some other region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection mapulating spot collection&#x27;s region should change the spot region of a spot collection to some other region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64dde0c0-dc56-4919-9d11-af5bdd37501f&quot;,&quot;parentUUID&quot;:&quot;2224f4d5-6134-4cb3-97a3-203b2ec960d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;19b52b74-cc05-4518-9509-2eee58ce8a4a&quot;,&quot;64dde0c0-dc56-4919-9d11-af5bdd37501f&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;ce311f14-217d-47c4-b91b-eef5984e93ba&quot;,&quot;c3451709-6f91-46a2-9e72-c64db8c6bb76&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1c8ab554-be31-490b-a92d-92d49080a056&quot;,&quot;title&quot;:&quot;User Management&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:740,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41300ef0-3a98-4567-b3bb-c2eee0aff2ab&quot;,&quot;parentUUID&quot;:&quot;1c8ab554-be31-490b-a92d-92d49080a056&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ae2ae70-fbfd-4b95-9b0f-7c150e433474&quot;,&quot;parentUUID&quot;:&quot;1c8ab554-be31-490b-a92d-92d49080a056&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;468be8b4-e4a3-4814-97fe-1fea94e6669b&quot;,&quot;title&quot;:&quot;fabric.user&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new user instance&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.user creates a new user instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.user(\&quot;testUser\&quot;, \&quot;testUser@test.com\&quot;)).to.be.instanceof(user_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7268787b-d98c-457d-8c17-d890f8588dcf&quot;,&quot;parentUUID&quot;:&quot;468be8b4-e4a3-4814-97fe-1fea94e6669b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7268787b-d98c-457d-8c17-d890f8588dcf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;a86b9183-ce49-4cfa-a047-336abdac8e16&quot;,&quot;title&quot;:&quot;user.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await user.deleteUser();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;652cdc6e-8f92-4196-8e39-58fc900b60de&quot;,&quot;parentUUID&quot;:&quot;a86b9183-ce49-4cfa-a047-336abdac8e16&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.create creates a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:138,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nconst response = await user.createUser(\&quot;testPass\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90338cf7-9eb0-4967-9253-d905509f8f6c&quot;,&quot;parentUUID&quot;:&quot;a86b9183-ce49-4cfa-a047-336abdac8e16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;90338cf7-9eb0-4967-9253-d905509f8f6c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:138,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;83a4d3f1-048a-423a-ac41-c21af821f98e&quot;,&quot;title&quot;:&quot;fabric.getAllUsers&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists all users&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.getAllUsers Lists all users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllUsers();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5627141-f7b6-4e12-91ea-fac00a6a21b1&quot;,&quot;parentUUID&quot;:&quot;83a4d3f1-048a-423a-ac41-c21af821f98e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5627141-f7b6-4e12-91ea-fac00a6a21b1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:119,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;7c7d1919-ab94-4193-bd05-1e00149b32fc&quot;,&quot;title&quot;:&quot;user.crud_operations&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:136,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nawait user.createUser(\&quot;testPass\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16593647-8df0-4586-9020-19513dee1726&quot;,&quot;parentUUID&quot;:&quot;7c7d1919-ab94-4193-bd05-1e00149b32fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await user.deleteUser();\n}\ncatch (error) { }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3048ff0-4816-4215-b31c-4d8eacb7436b&quot;,&quot;parentUUID&quot;:&quot;7c7d1919-ab94-4193-bd05-1e00149b32fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9fa6acc2-4fb0-4f2c-83cf-9d8e9da57224&quot;,&quot;title&quot;:&quot;user.deleteUser&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Deletes a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.deleteUser Deletes a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:133,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.deleteUser();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31c6007b-d655-4bff-8025-621ee47fa3a0&quot;,&quot;parentUUID&quot;:&quot;9fa6acc2-4fb0-4f2c-83cf-9d8e9da57224&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31c6007b-d655-4bff-8025-621ee47fa3a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:133,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;6f5d7fc8-13f4-4c24-9cca-7468e9eea023&quot;,&quot;title&quot;:&quot;user.getUserDetails&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Fetches a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.getUserDetails Fetches a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getUserDeatils();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a4064d9-11b3-4b1b-a45a-76da512630b6&quot;,&quot;parentUUID&quot;:&quot;6f5d7fc8-13f4-4c24-9cca-7468e9eea023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a4064d9-11b3-4b1b-a45a-76da512630b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:117,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;68e18b16-de7c-4031-bfb1-533e74198434&quot;,&quot;title&quot;:&quot;user.modifyUser&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.modifyUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.modifyUser({\n    active: false\n});\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.active).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7602abde-c9df-4322-93f2-37500f4bc0a2&quot;,&quot;parentUUID&quot;:&quot;68e18b16-de7c-4031-bfb1-533e74198434&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7602abde-c9df-4322-93f2-37500f4bc0a2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:124,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;03b62537-1f56-49b9-8f91-13f5e06196e3&quot;,&quot;title&quot;:&quot;user.replaceUser&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.replaceUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:132,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.replaceUser({\n    passwd: \&quot;test_passwordddd\&quot;\n});\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5768b1af-2bb9-4a6e-b8e8-05475411d1f1&quot;,&quot;parentUUID&quot;:&quot;03b62537-1f56-49b9-8f91-13f5e06196e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5768b1af-2bb9-4a6e-b8e8-05475411d1f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:132,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;title&quot;:&quot;User.FabricAccessOperations&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(testFabricName, [{ username: user.user }], {\n    dcList: dcList\n});\nfabric.useFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9af603cb-1735-49e2-9fe5-9580b22d0bfa&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:254,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a8f7ba1-f59b-4da2-b7a4-921f9ede3c39&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists the accessible databases and their permissions &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:146,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47355c82-4d3d-408f-be14-406f559d36ad&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Lists the accessible databases and their permissions with all the collections&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions with all the collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases(true);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f81b818-ae55-4e4c-a1c1-e210b2de8cd1&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Gets the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result).to.be.oneOf([\&quot;rw\&quot;, \&quot;ro\&quot;, \&quot;none\&quot;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;718823a2-1a0e-4139-9d86-2b6fea1da12d&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Gets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.getCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20a6c923-dc2b-4efc-99c7-dc64f19ee02b&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Clears the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:151,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.clearDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f346f1f9-f261-4cad-82d7-88f1d999f617&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Clears the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:276,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.clearCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: database not found&quot;,&quot;estack&quot;:&quot;C8Error: database not found\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;c4a3d97f-9354-4f7e-9904-4494e29dc4ae&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:340,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.setCollectionAccessLevel(testFabricName, collectionName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}/${collectionName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: database not found&quot;,&quot;estack&quot;:&quot;C8Error: database not found\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;04bec57b-d363-4ca7-a0fe-54de3a802a54&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sets the access level of a database&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.setDatabaseAccessLevel(testFabricName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24c2bfb6-80a2-4482-8929-700c85b0b84d&quot;,&quot;parentUUID&quot;:&quot;acc8421b-a3fe-4c04-a5fa-af57ec20d33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47355c82-4d3d-408f-be14-406f559d36ad&quot;,&quot;6f81b818-ae55-4e4c-a1c1-e210b2de8cd1&quot;,&quot;718823a2-1a0e-4139-9d86-2b6fea1da12d&quot;,&quot;20a6c923-dc2b-4efc-99c7-dc64f19ee02b&quot;,&quot;f346f1f9-f261-4cad-82d7-88f1d999f617&quot;,&quot;24c2bfb6-80a2-4482-8929-700c85b0b84d&quot;],&quot;failures&quot;:[&quot;c4a3d97f-9354-4f7e-9904-4494e29dc4ae&quot;,&quot;04bec57b-d363-4ca7-a0fe-54de3a802a54&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1593,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1d59f907-91f7-4636-94fb-dc186c280272&quot;,&quot;title&quot;:&quot;manipulating restql&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:469,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2c9f875-9ce4-4a4b-9142-becca0fee434&quot;,&quot;parentUUID&quot;:&quot;1d59f907-91f7-4636-94fb-dc186c280272&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60e895e6-f96f-474c-85fe-ab8f84d03810&quot;,&quot;parentUUID&quot;:&quot;1d59f907-91f7-4636-94fb-dc186c280272&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;494501a3-cf92-487e-8cdd-d9d61eff4469&quot;,&quot;title&quot;:&quot;fabric.saveQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should save a query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.saveQuery should save a query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryName = \&quot;testQuery\&quot;;\nconst response = await fabric.saveQuery(queryName, {}, \&quot;for coll in _collections return coll\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.name).to.equal(queryName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6be577d-b382-41c7-bf6e-c94af786ad45&quot;,&quot;parentUUID&quot;:&quot;494501a3-cf92-487e-8cdd-d9d61eff4469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6be577d-b382-41c7-bf6e-c94af786ad45&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:119,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;14c97243-68ff-498c-add1-6af2e4b762f4&quot;,&quot;title&quot;:&quot;fabric.listSavedQueries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should make a successful API call&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.listSavedQueries should make a successful API call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.listSavedQueries();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.length).to.be.at.least(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44d5f8f9-0fbc-4a94-8e5b-299c5b85abb8&quot;,&quot;parentUUID&quot;:&quot;14c97243-68ff-498c-add1-6af2e4b762f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44d5f8f9-0fbc-4a94-8e5b-299c5b85abb8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:113,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;26f1cc30-47c0-4d68-b2f4-274d55b3ec6e&quot;,&quot;title&quot;:&quot;fabric.executeSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.executeSavedQuery(queryName, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96043f7b-b584-4707-8e13-546c24fd2b47&quot;,&quot;parentUUID&quot;:&quot;26f1cc30-47c0-4d68-b2f4-274d55b3ec6e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery should execute a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b8c3320-d73e-48fe-b69f-41f86305b492&quot;,&quot;parentUUID&quot;:&quot;26f1cc30-47c0-4d68-b2f4-274d55b3ec6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b8c3320-d73e-48fe-b69f-41f86305b492&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;380ef42b-e649-4ab6-b747-2c636ef30de9&quot;,&quot;title&quot;:&quot;fabric.deleteSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.deleteSavedQuery should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.deleteSavedQuery(queryName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5370547-4276-40be-bce1-1cc79d47e083&quot;,&quot;parentUUID&quot;:&quot;380ef42b-e649-4ab6-b747-2c636ef30de9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d5370547-4276-40be-bce1-1cc79d47e083&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:120,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;2414f0a6-50e9-43bf-85e2-aa09cd74cfa0&quot;,&quot;title&quot;:&quot;fabric.createRestqlCursor&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.createRestqlCursor should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ddf46db-a090-47eb-8679-e1e6ec8ab7d2&quot;,&quot;parentUUID&quot;:&quot;2414f0a6-50e9-43bf-85e2-aa09cd74cfa0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;3ddf46db-a090-47eb-8679-e1e6ec8ab7d2&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;6cfa98ae-303a-4bcd-ac52-a75082e3c7f4&quot;,&quot;title&quot;:&quot;Manipulating pipelines&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:461,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nfabric.useFabric(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8aaaa4e-eb9e-4735-82f0-207d01c064c5&quot;,&quot;parentUUID&quot;:&quot;6cfa98ae-303a-4bcd-ac52-a75082e3c7f4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;472e85a8-e481-4042-ae34-011d9a679cfb&quot;,&quot;parentUUID&quot;:&quot;6cfa98ae-303a-4bcd-ac52-a75082e3c7f4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7bc4bf1a-489d-45d0-bcef-5c3d21b49679&quot;,&quot;title&quot;:&quot;fabric.getAllPipelines&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an empty array or an array of all pipelines&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines fabric.getAllPipelines returns an empty array or an array of all pipelines&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:245,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dcList = await fabric.getAllEdgeLocations();\nconst regions = helper_1.getDCListString(dcList).split(&#x27;,&#x27;);\nconst isEnabled = false;\nconst config = {\n    \&quot;input\&quot;: {\n        \&quot;type\&quot;: \&quot;c8db\&quot;,\n        \&quot;c8db\&quot;: {\n            \&quot;name\&quot;: \&quot;collection_namepl1\&quot;\n        }\n    },\n    \&quot;output\&quot;: {\n        \&quot;type\&quot;: \&quot;c8streams\&quot;,\n        \&quot;c8streams\&quot;: {\n            \&quot;name\&quot;: \&quot;stream_namepl1\&quot;,\n            \&quot;local\&quot;: true\n        }\n    }\n};\nconst result = await fabric.getPipelines();\nconst allPipelines = result.result;\nconst pipelinesCount = allPipelines.length;\nchai_1.expect(allPipelines).to.be.an(&#x27;array&#x27;);\nconst pipeline = fabric.pipeline(&#x27;testPipeline&#x27;);\nawait pipeline.create(regions, isEnabled, config);\nconst updatedResult = await fabric.getPipelines();\nconst updatedAllPipelines = updatedResult.result;\nconst expectedPipelinesCount = pipelinesCount + 1;\nchai_1.expect(updatedAllPipelines.length).to.equal(expectedPipelinesCount);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;8699463c-6948-4a98-988e-3988c09b24db&quot;,&quot;parentUUID&quot;:&quot;7bc4bf1a-489d-45d0-bcef-5c3d21b49679&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;8699463c-6948-4a98-988e-3988c09b24db&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:245,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;b6f1d882-8a70-4a10-8654-dc27283eac32&quot;,&quot;title&quot;:&quot;pipeline.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new pipeline&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines pipeline.create creates a new pipeline&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:272,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dcList = await fabric.getAllEdgeLocations();\nconst regions = helper_1.getDCListString(dcList).split(&#x27;,&#x27;);\nconst isEnabled = false;\nconst config = {\n    \&quot;input\&quot;: {\n        \&quot;type\&quot;: \&quot;c8db\&quot;,\n        \&quot;c8db\&quot;: {\n            \&quot;name\&quot;: \&quot;collection_namepl2\&quot;\n        }\n    },\n    \&quot;output\&quot;: {\n        \&quot;type\&quot;: \&quot;c8streams\&quot;,\n        \&quot;c8streams\&quot;: {\n            \&quot;name\&quot;: \&quot;stream_namepl2\&quot;,\n            \&quot;local\&quot;: true\n        }\n    }\n};\nconst pipeline = fabric.pipeline(&#x27;testPipeline2&#x27;);\nconst response = await pipeline.create(regions, isEnabled, config);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;6abfed06-f0fc-4ef3-a9a9-8adac73cf8f6&quot;,&quot;parentUUID&quot;:&quot;b6f1d882-8a70-4a10-8654-dc27283eac32&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;6abfed06-f0fc-4ef3-a9a9-8adac73cf8f6&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:272,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;caab7128-9b5e-48d7-bb2a-97e0c984a517&quot;,&quot;title&quot;:&quot;pipeline.drop&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes an existing pipeline&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines pipeline.drop deletes an existing pipeline&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resultObject = await fabric.getPipelines();\nconst allPipelines = resultObject.result;\nconst pipelineName = allPipelines[0].name;\nconst pipelinesCount = allPipelines.length;\nconst pipeline = fabric.pipeline(pipelineName);\nawait pipeline.drop();\nconst updatedResultObject = await fabric.getPipelines();\nconst updatedPipelines = updatedResultObject.result;\nconst updatedPipelinesCount = updatedPipelines.length;\nchai_1.expect(updatedPipelinesCount).to.equal(pipelinesCount - 1);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;73ceb9e0-410d-423a-8ca9-18bbaea1ec81&quot;,&quot;parentUUID&quot;:&quot;caab7128-9b5e-48d7-bb2a-97e0c984a517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;73ceb9e0-410d-423a-8ca9-18bbaea1ec81&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:119,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;c37721a4-9ff7-4e2d-9de5-dc7d61416e65&quot;,&quot;title&quot;:&quot;pipeline.details&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches the details of an existing pipeline&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines pipeline.details fetches the details of an existing pipeline&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resultObject = await fabric.getPipelines();\nconst allPipelines = resultObject.result;\nconst pipelineName = allPipelines[0].name;\nconst pipeline = fabric.pipeline(pipelineName);\nconst response = await pipeline.details();\nconst result = response.result;\nchai_1.expect(result).to.be.an(&#x27;object&#x27;);\nchai_1.expect(result).to.have.property(&#x27;name&#x27;);\nchai_1.expect(result).to.have.property(&#x27;regions&#x27;);\nchai_1.expect(result).to.have.property(&#x27;enabled&#x27;);\nchai_1.expect(result).to.have.property(&#x27;config&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;b077789a-7ac9-4e51-a6e5-648b7ca34534&quot;,&quot;parentUUID&quot;:&quot;c37721a4-9ff7-4e2d-9de5-dc7d61416e65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;b077789a-7ac9-4e51-a6e5-648b7ca34534&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:122,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;e552ee15-9349-4347-9e5c-8a8638a91ee4&quot;,&quot;title&quot;:&quot;pipeline.update&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates an existing pipeline&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines pipeline.update updates an existing pipeline&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:160,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resultObject = await fabric.getPipelines();\nconst allPipelines = resultObject.result;\nconst pipelineName = allPipelines[0].name;\nconst pipeline = fabric.pipeline(pipelineName);\nconst response = await pipeline.details();\nconst { regions, enabled: isEnabled, config } = response.result;\nconst toggleEnabled = !isEnabled;\nconst updatedResultObject = await pipeline.update(regions, toggleEnabled, config);\nchai_1.expect(updatedResultObject.error).to.be.false;\nconst updatedPipeline = fabric.pipeline(pipelineName);\nconst detailsObject = await updatedPipeline.details();\nconst { enabled: updatedEnabledValue } = detailsObject.result;\nchai_1.expect(updatedEnabledValue).to.not.equal(isEnabled);\nchai_1.expect(updatedEnabledValue).to.equal(toggleEnabled);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;603188a4-2af1-472c-8702-7613b65d25b8&quot;,&quot;parentUUID&quot;:&quot;e552ee15-9349-4347-9e5c-8a8638a91ee4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;603188a4-2af1-472c-8702-7613b65d25b8&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:160,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;053f7f8d-9410-4739-98aa-d39ea386294e&quot;,&quot;title&quot;:&quot;fabric.route&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Route instance&quot;,&quot;fullTitle&quot;:&quot;fabric.route returns a Route instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route();\nchai_1.expect(route).to.be.an.instanceof(route_1.Route);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4ad0c91-0164-4e62-97f2-e17ef04c55d2&quot;,&quot;parentUUID&quot;:&quot;053f7f8d-9410-4739-98aa-d39ea386294e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a route for the given path&quot;,&quot;fullTitle&quot;:&quot;fabric.route creates a route for the given path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = \&quot;/hi\&quot;;\nconst route = fabric.route(path);\nchai_1.expect(route._path).to.equal(path);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a8d75d1-36c9-4b8c-bc7f-a4f7f6a8d4f7&quot;,&quot;parentUUID&quot;:&quot;053f7f8d-9410-4739-98aa-d39ea386294e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes the given headers to the new route&quot;,&quot;fullTitle&quot;:&quot;fabric.route passes the given headers to the new route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/hello\&quot;, { \&quot;x-magic\&quot;: \&quot;awesome\&quot; });\nchai_1.expect(route._headers).to.have.property(\&quot;x-magic\&quot;, \&quot;awesome\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66b82abc-1224-4e32-9ac3-9b012618a82a&quot;,&quot;parentUUID&quot;:&quot;053f7f8d-9410-4739-98aa-d39ea386294e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4ad0c91-0164-4e62-97f2-e17ef04c55d2&quot;,&quot;4a8d75d1-36c9-4b8c-bc7f-a4f7f6a8d4f7&quot;,&quot;66b82abc-1224-4e32-9ac3-9b012618a82a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;fddc46c0-2e87-4a00-b3d2-e579a92f5599&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;5.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;options&quot;:{},&quot;version&quot;:&quot;4.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;jsC8&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>