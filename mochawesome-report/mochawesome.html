<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:162,&quot;tests&quot;:219,&quot;passes&quot;:174,&quot;pending&quot;:20,&quot;failures&quot;:25,&quot;start&quot;:&quot;2020-02-20T06:03:07.533Z&quot;,&quot;end&quot;:&quot;2020-02-20T06:06:23.138Z&quot;,&quot;duration&quot;:195605,&quot;testsRegistered&quot;:227,&quot;passPercent&quot;:84.05797101449275,&quot;pendingPercent&quot;:8.81057268722467,&quot;other&quot;:5,&quot;hasOther&quot;:true,&quot;skipped&quot;:8,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;e4d506e6-5d19-4059-9a44-cf64e6620cf3&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets subscription list&quot;,&quot;fullTitle&quot;:&quot;gets subscription list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getSubscriptionList();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e637b85-8feb-4930-b2f5-3cb69e3ecf6f&quot;,&quot;parentUUID&quot;:&quot;e4d506e6-5d19-4059-9a44-cf64e6620cf3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;40381f1e-37fc-44ba-a302-2e5431764251&quot;,&quot;title&quot;:&quot;Creating a Fabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;678fd6b3-f8b0-4ef8-af37-7d658e9ca805&quot;,&quot;title&quot;:&quot;using the factory&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bddada5c-6b09-44dd-9d69-951b7eb68394&quot;,&quot;parentUUID&quot;:&quot;678fd6b3-f8b0-4ef8-af37-7d658e9ca805&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 54321);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd6f974c-81a3-4ecb-8119-06138f29d15d&quot;,&quot;parentUUID&quot;:&quot;678fd6b3-f8b0-4ef8-af37-7d658e9ca805&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bddada5c-6b09-44dd-9d69-951b7eb68394&quot;,&quot;dd6f974c-81a3-4ecb-8119-06138f29d15d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;6b93bc68-e06f-4a74-a6fd-a69abdc3ab1e&quot;,&quot;title&quot;:&quot;using the constructor&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bb297da-6ce9-4aeb-9780-31c0f1b10d7c&quot;,&quot;parentUUID&quot;:&quot;6b93bc68-e06f-4a74-a6fd-a69abdc3ab1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 43210);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9ee7e0a-f097-4b76-9e26-8e47fedcadee&quot;,&quot;parentUUID&quot;:&quot;6b93bc68-e06f-4a74-a6fd-a69abdc3ab1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4bb297da-6ce9-4aeb-9780-31c0f1b10d7c&quot;,&quot;c9ee7e0a-f097-4b76-9e26-8e47fedcadee&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;7ad7571a-3b56-4b2d-b22f-f07a13ba46a9&quot;,&quot;title&quot;:&quot;Configuring the driver&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;86454409-967a-4a9b-9b1d-b6d78ab1773a&quot;,&quot;title&quot;:&quot;with a string&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the url&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with a string sets the url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c74286a-aff1-40e5-b40b-4407c65dfa34&quot;,&quot;parentUUID&quot;:&quot;86454409-967a-4a9b-9b1d-b6d78ab1773a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;5c74286a-aff1-40e5-b40b-4407c65dfa34&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8f18508c-11bf-41b5-b3c7-b5ca82caae02&quot;,&quot;title&quot;:&quot;with headers&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;applies the headers&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with headers applies the headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({\n    headers: {\n        \&quot;x-one\&quot;: \&quot;1\&quot;,\n        \&quot;x-two\&quot;: \&quot;2\&quot;\n    }\n});\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-one\&quot;, \&quot;1\&quot;);\n        chai_1.expect(headers).to.have.property(\&quot;x-two\&quot;, \&quot;2\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b894599-411e-4378-b6bd-f324dbb84d98&quot;,&quot;parentUUID&quot;:&quot;8f18508c-11bf-41b5-b3c7-b5ca82caae02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b894599-411e-4378-b6bd-f324dbb84d98&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;4caae881-c695-41ab-a8ab-16c25bccb486&quot;,&quot;title&quot;:&quot;with an c8Version&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the x-c8-version header&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with an c8Version sets the x-c8-version header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({ c8Version: 99999 });\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-c8-version\&quot;, \&quot;99999\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e59872f3-e9ab-43e0-bf48-d769dde9972e&quot;,&quot;parentUUID&quot;:&quot;4caae881-c695-41ab-a8ab-16c25bccb486&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e59872f3-e9ab-43e0-bf48-d769dde9972e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c26ed40a-8169-4889-8d00-f3cda966b8eb&quot;,&quot;title&quot;:&quot;with agentOptions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Agent = (ptcl) =&gt; function (opts) {\n    protocol = ptcl;\n    options = opts;\n    return () =&gt; null;\n};\nhttp.Agent = Agent(\&quot;http\&quot;);\nhttps.Agent = Agent(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3118b5c5-46f2-4e90-9c54-879b895c68c5&quot;,&quot;parentUUID&quot;:&quot;c26ed40a-8169-4889-8d00-f3cda966b8eb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;776573f7-553a-4903-b7bc-2500800c4cfe&quot;,&quot;parentUUID&quot;:&quot;c26ed40a-8169-4889-8d00-f3cda966b8eb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.Agent = _httpAgent;\nhttps.Agent = _httpsAgent;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e96b593-9698-4532-9df5-9c79a22ce178&quot;,&quot;parentUUID&quot;:&quot;c26ed40a-8169-4889-8d00-f3cda966b8eb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agentOptions to the agent&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions passes the agentOptions to the agent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;new connection_1.Connection({ agentOptions: { hello: \&quot;world\&quot; } }); // eslint-disable-line no-new\nchai_1.expect(options).to.have.property(\&quot;hello\&quot;, \&quot;world\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b30ee437-d486-416c-b783-2adae9e79d71&quot;,&quot;parentUUID&quot;:&quot;c26ed40a-8169-4889-8d00-f3cda966b8eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the built-in agent for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions uses the built-in agent for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// default: http\nnew connection_1.Connection(); // eslint-disable-line no-new\n// expect(protocol).to.equal(\&quot;http\&quot;);\nnew connection_1.Connection(\&quot;https://test.macrometa.io\&quot;); // eslint-disable-line no-new\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;befb2b38-239d-4632-b955-e6d0508afe5f&quot;,&quot;parentUUID&quot;:&quot;c26ed40a-8169-4889-8d00-f3cda966b8eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b30ee437-d486-416c-b783-2adae9e79d71&quot;,&quot;befb2b38-239d-4632-b955-e6d0508afe5f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8840c11a-795b-43f1-ae98-731ca6ec8efe&quot;,&quot;title&quot;:&quot;with agent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Request = (ptcl) =&gt; (opts) =&gt; {\n    protocol = ptcl;\n    options = opts;\n    return {\n        on() {\n            return this;\n        },\n        end() {\n            return this;\n        }\n    };\n};\nhttp.request = Request(\&quot;http\&quot;);\nhttps.request = Request(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2686d08-9a51-43e9-944c-548666e50f22&quot;,&quot;parentUUID&quot;:&quot;8840c11a-795b-43f1-ae98-731ca6ec8efe&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d07e9676-a91e-4b66-a6a0-31b721d0b43f&quot;,&quot;parentUUID&quot;:&quot;8840c11a-795b-43f1-ae98-731ca6ec8efe&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.request = _httpRequest;\nhttps.request = _httpsRequest;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0472a9b2-ca6e-4e29-bec2-516cccae74e3&quot;,&quot;parentUUID&quot;:&quot;8840c11a-795b-43f1-ae98-731ca6ec8efe&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agent to the request function&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent passes the agent to the request function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: https\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);\nagent = Symbol(\&quot;agent\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12189654-eab2-4849-9104-c57d29ce4aa3&quot;,&quot;parentUUID&quot;:&quot;8840c11a-795b-43f1-ae98-731ca6ec8efe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the request function for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent uses the request function for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: http\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f92a6902-a643-4b9c-8588-47633b7ef714&quot;,&quot;parentUUID&quot;:&quot;8840c11a-795b-43f1-ae98-731ca6ec8efe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;calls Agent#destroy when the connection is closed&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent calls Agent#destroy when the connection is closed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = {\n    _destroyed: false,\n    destroy() {\n        this._destroyed = true;\n    }\n};\nconst conn = new connection_1.Connection({ agent });\nchai_1.expect(agent._destroyed).to.equal(false);\nconn.close();\nchai_1.expect(agent._destroyed).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6eeaf7c1-7ae7-499d-ab1f-8a2dde6804ad&quot;,&quot;parentUUID&quot;:&quot;8840c11a-795b-43f1-ae98-731ca6ec8efe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12189654-eab2-4849-9104-c57d29ce4aa3&quot;,&quot;f92a6902-a643-4b9c-8588-47633b7ef714&quot;,&quot;6eeaf7c1-7ae7-499d-ab1f-8a2dde6804ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;adc38215-809e-4dda-8a18-62cc7382f69d&quot;,&quot;title&quot;:&quot;Manipulating fabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1425,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a00b21d9-efd3-41e7-942f-d46314b26ec1&quot;,&quot;parentUUID&quot;:&quot;adc38215-809e-4dda-8a18-62cc7382f69d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:906,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = new jsC8_1.Fabric({\n    url: testUrl\n});\nawait fabric2.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric2.useTenant(\&quot;guest\&quot;);\ncollection = fabric2.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f59dc761-53b9-452b-9149-25d068c03184&quot;,&quot;parentUUID&quot;:&quot;adc38215-809e-4dda-8a18-62cc7382f69d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:642,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e099ea13-c71b-443e-af8c-a10ada1bea03&quot;,&quot;parentUUID&quot;:&quot;adc38215-809e-4dda-8a18-62cc7382f69d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a429125-162a-4ffe-844c-454f2be6b9b1&quot;,&quot;parentUUID&quot;:&quot;adc38215-809e-4dda-8a18-62cc7382f69d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c45194dc-e47c-44b4-90b5-cfd74001119f&quot;,&quot;parentUUID&quot;:&quot;adc38215-809e-4dda-8a18-62cc7382f69d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:193,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.drop();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d44a4c4-e163-4f72-b537-4a239328af97&quot;,&quot;parentUUID&quot;:&quot;adc38215-809e-4dda-8a18-62cc7382f69d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4803f90-9a53-41cc-8cd7-1b2c3e328ba0&quot;,&quot;parentUUID&quot;:&quot;adc38215-809e-4dda-8a18-62cc7382f69d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8adb8db8-ffbd-4817-8f89-5827de0af8a1&quot;,&quot;title&quot;:&quot;fabric.version&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version object when no details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when no details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version();\nchai_1.expect(response.server).to.equal(\&quot;C8\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;C8DB&#x27; to equal &#x27;C8&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;C8DB&#x27; to equal &#x27;C8&#x27;\n    at Context.it (src/test/01-manipulating-fabrics.ts:55:34)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;,&quot;diff&quot;:&quot;- C8DB\n+ C8\n&quot;},&quot;uuid&quot;:&quot;c3e56480-6bda-4886-904b-ae22914585d6&quot;,&quot;parentUUID&quot;:&quot;8adb8db8-ffbd-4817-8f89-5827de0af8a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the version object when details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version(true);\nchai_1.expect(response.server).to.equal(\&quot;C8\&quot;);\nchai_1.expect(response.details).to.haveOwnProperty(\&quot;C8DB\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;C8DB&#x27; to equal &#x27;C8&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;C8DB&#x27; to equal &#x27;C8&#x27;\n    at Context.it (src/test/01-manipulating-fabrics.ts:59:34)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;,&quot;diff&quot;:&quot;- C8DB\n+ C8\n&quot;},&quot;uuid&quot;:&quot;793a59d7-93bb-4169-ae0f-960b9f58e62f&quot;,&quot;parentUUID&quot;:&quot;8adb8db8-ffbd-4817-8f89-5827de0af8a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;c3e56480-6bda-4886-904b-ae22914585d6&quot;,&quot;793a59d7-93bb-4169-ae0f-960b9f58e62f&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:230,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;cf1b6bbc-733f-4ea2-9a20-eabbe9a44997&quot;,&quot;title&quot;:&quot;fabric.useFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the fabric name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric updates the fabric name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = \&quot;example\&quot;;\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;); // default\nfabric.useFabric(name);\nchai_1.expect(fabric._connection).to.have.property(\&quot;_fabricName\&quot;, name);\nchai_1.expect(fabric.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b37c48b-4687-4354-945d-4cf4c7621874&quot;,&quot;parentUUID&quot;:&quot;cf1b6bbc-733f-4ea2-9a20-eabbe9a44997&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns itself&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric returns itself&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = fabric.useFabric(\&quot;nope\&quot;);\nchai_1.expect(fabric).to.equal(fabric2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ccb1b00-122a-4baf-860f-d2de54b8a211&quot;,&quot;parentUUID&quot;:&quot;cf1b6bbc-733f-4ea2-9a20-eabbe9a44997&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b37c48b-4687-4354-945d-4cf4c7621874&quot;,&quot;6ccb1b00-122a-4baf-860f-d2de54b8a211&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a6db52ea-13c8-4a82-b23b-d7805e1aeab3&quot;,&quot;title&quot;:&quot;fabric.edgeLocations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets all the edge locations&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets all the edge locations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1031,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllEdgeLocations();\nchai_1.expect(Array.isArray(response)).to.be.true;\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;tags\&quot;);\nchai_1.expect(response.length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e6f44e4-870e-41bb-be52-5905d9d63efd&quot;,&quot;parentUUID&quot;:&quot;a6db52ea-13c8-4a82-b23b-d7805e1aeab3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets local edge location&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets local edge location&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\nchai_1.expect(Array.isArray(response)).to.be.false;\nchai_1.expect(response).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;tags\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8e76b70-e10a-46f3-9aac-3dd375958293&quot;,&quot;parentUUID&quot;:&quot;a6db52ea-13c8-4a82-b23b-d7805e1aeab3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e6f44e4-870e-41bb-be52-5905d9d63efd&quot;,&quot;e8e76b70-e10a-46f3-9aac-3dd375958293&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1149,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a91b0ff4-7c18-4d28-9f91-dce9511f08c3&quot;,&quot;title&quot;:&quot;fabric.createFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:215,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08b68ff6-59f4-49b0-8ed9-43075eb67435&quot;,&quot;parentUUID&quot;:&quot;a91b0ff4-7c18-4d28-9f91-dce9511f08c3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a fabric with the given name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric creates a fabric with the given name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:510,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nconst info = await fabric.get();\nchai_1.expect(info.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a587b16-c262-46f2-a848-2250647f5574&quot;,&quot;parentUUID&quot;:&quot;a91b0ff4-7c18-4d28-9f91-dce9511f08c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;adds the given users to the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric adds the given users to the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe653acf-cb95-47f6-bdce-a55d4cc38778&quot;,&quot;parentUUID&quot;:&quot;a91b0ff4-7c18-4d28-9f91-dce9511f08c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a587b16-c262-46f2-a848-2250647f5574&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;fe653acf-cb95-47f6-bdce-a55d4cc38778&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:510,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;54d4f259-0a41-48e4-af6d-c32df1470c04&quot;,&quot;title&quot;:&quot;fabric.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches the fabric description if the fabric exists&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fetches the fabric description if the fabric exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:715,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await fabric.get();\nchai_1.expect(info.name).to.equal(fabric.name);\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07eb99e4-6b7f-41fa-8c41-ac95dbbca3ab&quot;,&quot;parentUUID&quot;:&quot;54d4f259-0a41-48e4-af6d-c32df1470c04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fails if the fabric does not exist&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fails if the fabric does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:715,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;__does_not_exist__\&quot;);\ntry {\n    await fabric.get();\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n    return;\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec54c4f0-7408-4af2-b9d8-cb620a6534ff&quot;,&quot;parentUUID&quot;:&quot;54d4f259-0a41-48e4-af6d-c32df1470c04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07eb99e4-6b7f-41fa-8c41-ac95dbbca3ab&quot;,&quot;ec54c4f0-7408-4af2-b9d8-cb620a6534ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1430,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;60920fd9-84d6-4906-8592-6fbc7769f9ab&quot;,&quot;title&quot;:&quot;fabric.listFabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of all fabrics&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listFabrics returns a list of all fabrics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:478,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics.indexOf(\&quot;_system\&quot;)).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccc9b845-a77b-4ec7-aae8-9655a3c91afa&quot;,&quot;parentUUID&quot;:&quot;60920fd9-84d6-4906-8592-6fbc7769f9ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccc9b845-a77b-4ec7-aae8-9655a3c91afa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:478,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e456fa34-23a1-4b62-bbd6-be26c4a2e468&quot;,&quot;title&quot;:&quot;fabric.listUserFabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of fabrics accessible to the active user&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listUserFabrics returns a list of fabrics accessible to the active user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listUserFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics[0].name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33b627e5-1aad-4eae-b91d-6c5d5a1364ad&quot;,&quot;parentUUID&quot;:&quot;e456fa34-23a1-4b62-bbd6-be26c4a2e468&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;33b627e5-1aad-4eae-b91d-6c5d5a1364ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:122,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;59f21e94-71d9-4a30-b8f7-8a18b9b8e417&quot;,&quot;title&quot;:&quot;fabric.dropFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76d5109f-3761-40d5-9388-a741ee0077af&quot;,&quot;parentUUID&quot;:&quot;59f21e94-71d9-4a30-b8f7-8a18b9b8e417&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given fabric from the server&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric deletes the given fabric from the server&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:608,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.dropFabric(name);\nlet temp = new jsC8_1.Fabric().useFabric(name);\ntry {\n    await temp.get();\n}\ncatch (e) {\n    return;\n}\nfinally {\n    temp.close();\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4e6fc92-b042-4d96-bc3d-84f67b258e10&quot;,&quot;parentUUID&quot;:&quot;59f21e94-71d9-4a30-b8f7-8a18b9b8e417&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4e6fc92-b042-4d96-bc3d-84f67b258e10&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:608,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;61e945fb-e964-4f12-ad7d-10fa0c81ea85&quot;,&quot;title&quot;:&quot;fabric.truncate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1153,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create();\n        await collection.save({ _key: \&quot;example\&quot; });\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create({ isSystem: true });\n        await collection.save({ _key: \&quot;example\&quot; });\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e89933f8-48a7-46b4-912e-42b131c6d5af&quot;,&quot;parentUUID&quot;:&quot;61e945fb-e964-4f12-ad7d-10fa0c81ea85&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:154,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;729d31b0-459c-4e54-a6c6-d6b09652a5bf&quot;,&quot;parentUUID&quot;:&quot;61e945fb-e964-4f12-ad7d-10fa0c81ea85&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes all documents from all non-system collections in the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate removes all documents from all non-system collections in the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4573,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.truncate();\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d59ee258-da0d-42fe-b6f6-cfb1c3bbf35b&quot;,&quot;parentUUID&quot;:&quot;61e945fb-e964-4f12-ad7d-10fa0c81ea85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;additionally truncates system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate additionally truncates system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9297f497-32df-48d5-844b-a1d07ba1ce56&quot;,&quot;parentUUID&quot;:&quot;61e945fb-e964-4f12-ad7d-10fa0c81ea85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d59ee258-da0d-42fe-b6f6-cfb1c3bbf35b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;9297f497-32df-48d5-844b-a1d07ba1ce56&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4573,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;63b0dfb0-ff6d-4f18-b64e-9f57fe8a13f1&quot;,&quot;title&quot;:&quot;fabric.validateQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate correct query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate correct query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:148,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.validateQuery(\&quot;for doc in docs return doc\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b73f23df-2fa1-4d1a-8d08-d5790416df92&quot;,&quot;parentUUID&quot;:&quot;63b0dfb0-ff6d-4f18-b64e-9f57fe8a13f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate incorrect query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate incorrect query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const response = await fabric.validateQuery(\&quot;forrrr doc in docs return doc\&quot;);\n    chai_1.expect(response.error).to.be.true;\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e60eee85-be2c-4d24-be9d-fef5d8d8a366&quot;,&quot;parentUUID&quot;:&quot;63b0dfb0-ff6d-4f18-b64e-9f57fe8a13f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b73f23df-2fa1-4d1a-8d08-d5790416df92&quot;,&quot;e60eee85-be2c-4d24-be9d-fef5d8d8a366&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:266,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7b1f7996-c35a-4867-aaef-a8961b0fa9e6&quot;,&quot;title&quot;:&quot;fabric.explainQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should explain query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.explainQuery should explain query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryObject = {\n    query: `for doc in ${collectionName} return doc`,\n    bindVars: {}\n};\nconst response = await fabric.explainQuery(queryObject);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: expecting POST /_api/query&quot;,&quot;estack&quot;:&quot;C8Error: expecting POST /_api/query\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;65c26c2b-7772-4f25-b6c6-df0073fa80db&quot;,&quot;parentUUID&quot;:&quot;7b1f7996-c35a-4867-aaef-a8961b0fa9e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;65c26c2b-7772-4f25-b6c6-df0073fa80db&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:307,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c382d68d-8926-4e07-bce9-debec9ae365d&quot;,&quot;title&quot;:&quot;fabric.getCurrentQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get currently running queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.getCurrentQueries should get currently running queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35c4afdf-d10f-44b7-ba5e-b075cd25e036&quot;,&quot;parentUUID&quot;:&quot;c382d68d-8926-4e07-bce9-debec9ae365d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;35c4afdf-d10f-44b7-ba5e-b075cd25e036&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f2b3d623-bb24-4582-81b4-8a97e3a4d2dd&quot;,&quot;title&quot;:&quot;fabric.clearSlowQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should clear slow queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.clearSlowQueries should clear slow queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38bd7a06-05db-4cfe-8582-ce560bee9a21&quot;,&quot;parentUUID&quot;:&quot;f2b3d623-bb24-4582-81b4-8a97e3a4d2dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;38bd7a06-05db-4cfe-8582-ce560bee9a21&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a3b1d45a-d640-4a4d-a0dc-54e7647ff5ff&quot;,&quot;title&quot;:&quot;fabric.terminateRunningQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should terminate running query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.terminateRunningQuery should terminate running query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc909e19-41cc-4049-bfb5-b907f6670937&quot;,&quot;parentUUID&quot;:&quot;a3b1d45a-d640-4a4d-a0dc-54e7647ff5ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;fc909e19-41cc-4049-bfb5-b907f6670937&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;44890bc6-99ad-46e6-8036-23f80edc9a4a&quot;,&quot;title&quot;:&quot;Accessing collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3001,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\nconst collections = await fabric.listCollections(false);\nbuiltinSystemCollections = collections.map((c) =&gt; c.name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68cb81b0-3c49-49a2-827c-2776561f3fa1&quot;,&quot;parentUUID&quot;:&quot;44890bc6-99ad-46e6-8036-23f80edc9a4a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25d60b99-d5ca-4439-ba03-872bb361fb12&quot;,&quot;parentUUID&quot;:&quot;44890bc6-99ad-46e6-8036-23f80edc9a4a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1ba61998-cab4-47ca-b0e2-ae0b9febe719&quot;,&quot;title&quot;:&quot;fabric.collection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a DocumentCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collection returns a DocumentCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = fabric.collection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.DocumentCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6387efbf-285c-4969-81b6-b6bda9562a11&quot;,&quot;parentUUID&quot;:&quot;1ba61998-cab4-47ca-b0e2-ae0b9febe719&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6387efbf-285c-4969-81b6-b6bda9562a11&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;ae2f4d5a-9154-4826-8ade-b33a7260101b&quot;,&quot;title&quot;:&quot;fabric.edgeCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an EdgeCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.edgeCollection returns an EdgeCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;tomato\&quot;;\nlet collection = fabric.edgeCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.EdgeCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64ec6fab-ba51-4939-9a90-173035738492&quot;,&quot;parentUUID&quot;:&quot;ae2f4d5a-9154-4826-8ade-b33a7260101b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64ec6fab-ba51-4939-9a90-173035738492&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;3a73aa4b-3852-460c-a8d0-51d32850501b&quot;,&quot;title&quot;:&quot;fabric.listCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1166,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).create())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).create({ isSystem: true })\n    // )\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02d5bdda-9540-4daf-bd06-6bfd150cbfdb&quot;,&quot;parentUUID&quot;:&quot;3a73aa4b-3852-460c-a8d0-51d32850501b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1462,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).drop())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).drop({ isSystem: true })\n    // )\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23ed112b-7184-40de-9444-cf916f05b873&quot;,&quot;parentUUID&quot;:&quot;3a73aa4b-3852-460c-a8d0-51d32850501b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all non-system collections&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections fetches information about all non-system collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:749,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections()\n    .then(collections =&gt; {\n    chai_1.expect(collections.length).to.equal(nonSystemCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(nonSystemCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c257af9f-9829-44fe-9461-7aac6fe523b9&quot;,&quot;parentUUID&quot;:&quot;3a73aa4b-3852-460c-a8d0-51d32850501b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:287,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections(false)\n    .then(collections =&gt; {\n    let allCollectionNames = nonSystemCollectionNames\n        // .concat(systemCollectionNames)\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(collections.length).to.be.at.least(allCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(allCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98f07ed6-c929-43f3-ac89-0f1c1866e106&quot;,&quot;parentUUID&quot;:&quot;3a73aa4b-3852-460c-a8d0-51d32850501b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c257af9f-9829-44fe-9461-7aac6fe523b9&quot;,&quot;98f07ed6-c929-43f3-ac89-0f1c1866e106&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1036,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;c2f63b76-a33f-44fb-b2f1-8b9ca63e6580&quot;,&quot;title&quot;:&quot;fabric.collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2019,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e7a21e7-fa3b-45be-beeb-064c1f779e13&quot;,&quot;parentUUID&quot;:&quot;c2f63b76-a33f-44fb-b2f1-8b9ca63e6580&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:434,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).drop()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).drop())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f6fb370-4c0d-4b42-81c8-86fd43d0b57c&quot;,&quot;parentUUID&quot;:&quot;c2f63b76-a33f-44fb-b2f1-8b9ca63e6580&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates DocumentCollection and EdgeCollection instances&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections creates DocumentCollection and EdgeCollection instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:431,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections()\n    .then(collections =&gt; {\n    let documentCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.DocumentCollection)\n        .sort();\n    let edgeCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.EdgeCollection)\n        .sort();\n    chai_1.expect(documentCollections.length).to.equal(documentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(documentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.equal(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;981fbe7d-77fb-42e6-977a-8afc59200324&quot;,&quot;parentUUID&quot;:&quot;c2f63b76-a33f-44fb-b2f1-8b9ca63e6580&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:599,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections(false)\n    .then(collections =&gt; {\n    let documentCollections = collections.filter((c) =&gt; c instanceof collection_1.DocumentCollection);\n    let edgeCollections = collections.filter((c) =&gt; c instanceof collection_1.EdgeCollection);\n    let allDocumentCollectionNames = documentCollectionNames\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(documentCollections.length).to.be.at.least(allDocumentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(allDocumentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.be.at.least(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;094ecc18-9172-431e-8788-5fd738ac5c15&quot;,&quot;parentUUID&quot;:&quot;c2f63b76-a33f-44fb-b2f1-8b9ca63e6580&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;981fbe7d-77fb-42e6-977a-8afc59200324&quot;,&quot;094ecc18-9172-431e-8788-5fd738ac5c15&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1030,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;307402af-c6b1-4201-a127-bc9c17acd84e&quot;,&quot;title&quot;:&quot;Accessing graphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2126,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acca9edd-c507-480c-91c7-35c5f2ccb061&quot;,&quot;parentUUID&quot;:&quot;307402af-c6b1-4201-a127-bc9c17acd84e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:162,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e62e0f59-1d60-4a42-8331-835a3258c508&quot;,&quot;parentUUID&quot;:&quot;307402af-c6b1-4201-a127-bc9c17acd84e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;901ad02f-380e-4bc4-9cad-0877174e7e07&quot;,&quot;title&quot;:&quot;fabric.graph&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Graph instance&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graph returns a Graph instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet graph = fabric.graph(name);\nchai_1.expect(graph).to.be.an.instanceof(graph_1.Graph);\nchai_1.expect(graph)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1044276f-37a5-4f34-930f-9637a107cc39&quot;,&quot;parentUUID&quot;:&quot;901ad02f-380e-4bc4-9cad-0877174e7e07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1044276f-37a5-4f34-930f-9637a107cc39&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;ab66f762-c9fb-42e0-9bf8-8a90302c3e08&quot;,&quot;title&quot;:&quot;fabric.listGraphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1154,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        })),\n        isSmart: true,\n        options: {\n            numberOfShards: 1,\n            smartGraphAttribute: \&quot;test\&quot;\n        },\n        orphanCollections: []\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6a4be08-8e49-4dbf-8861-908141797d1c&quot;,&quot;parentUUID&quot;:&quot;ab66f762-c9fb-42e0-9bf8-8a90302c3e08&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:716,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6281f27e-3d65-4ce2-9372-5d7443ec2f2f&quot;,&quot;parentUUID&quot;:&quot;ab66f762-c9fb-42e0-9bf8-8a90302c3e08&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all graphs&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs fetches information about all graphs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listGraphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g._key).sort()).to.eql(graphNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;018dbbd9-8bc5-4670-917b-d6e430d050db&quot;,&quot;parentUUID&quot;:&quot;ab66f762-c9fb-42e0-9bf8-8a90302c3e08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;018dbbd9-8bc5-4670-917b-d6e430d050db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:196,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;93022bf0-9e78-4e40-971d-e3269046a6f0&quot;,&quot;title&quot;:&quot;fabric.graphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:675,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        }))\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15dce6f9-149c-4d78-9431-5319133d037a&quot;,&quot;parentUUID&quot;:&quot;93022bf0-9e78-4e40-971d-e3269046a6f0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:685,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58a47fce-bfa7-4f42-8f6e-f868a3c8b66c&quot;,&quot;parentUUID&quot;:&quot;93022bf0-9e78-4e40-971d-e3269046a6f0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates Graph instances&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs creates Graph instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .graphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g.name).sort()).to.eql(graphNames);\n    graphs.forEach((graph) =&gt; chai_1.expect(graph).to.be.an.instanceof(graph_1.Graph));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b77a401d-9570-426f-95f3-692f67d4543b&quot;,&quot;parentUUID&quot;:&quot;93022bf0-9e78-4e40-971d-e3269046a6f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b77a401d-9570-426f-95f3-692f67d4543b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:122,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;f8af6a35-e379-4c47-8da3-2d277902c8c7&quot;,&quot;title&quot;:&quot;Transactions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:813,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fc2e75f-f09b-49e4-a2c6-f40a0d17afb4&quot;,&quot;parentUUID&quot;:&quot;f8af6a35-e379-4c47-8da3-2d277902c8c7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d3d1b40-4165-4c87-adee-70aa222a1dd2&quot;,&quot;parentUUID&quot;:&quot;f8af6a35-e379-4c47-8da3-2d277902c8c7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;101e9fa1-c638-4a35-8c3f-067fd9d32f1d&quot;,&quot;title&quot;:&quot;fabric.transaction&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a transaction and return the result&quot;,&quot;fullTitle&quot;:&quot;Transactions fabric.transaction should execute a transaction and return the result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await fabric.transaction([], \&quot;function (params) {return params;}\&quot;, \&quot;test\&quot;);\nchai_1.expect(result).to.equal(\&quot;test\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df3ed872-5b18-4fb2-a9a5-b1cb50d7dce1&quot;,&quot;parentUUID&quot;:&quot;101e9fa1-c638-4a35-8c3f-067fd9d32f1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df3ed872-5b18-4fb2-a9a5-b1cb50d7dce1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:204,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c8863ab2-718f-4e38-9b97-2a1cd904d6c8&quot;,&quot;title&quot;:&quot;C8QL queries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1125,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;509234fd-38bc-4d14-8535-829f84dc00aa&quot;,&quot;parentUUID&quot;:&quot;c8863ab2-718f-4e38-9b97-2a1cd904d6c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cf0a295-bd84-48c3-90ab-0535c484b875&quot;,&quot;parentUUID&quot;:&quot;c8863ab2-718f-4e38-9b97-2a1cd904d6c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;951a4c89-adad-46f5-899e-bb324043195c&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an exception on error&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i IN no RETURN i\&quot;)\n    .then(() =&gt; {\n    chai_1.expect.fail();\n    done();\n})\n    .catch(err =&gt; {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bccb21e9-e1ee-4c93-8008-18f2345ed1ab&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an exception on error (async await)&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error (async await)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.query(\&quot;FOR i IN no RETURN i\&quot;);\n    chai_1.expect.fail();\n}\ncatch (err) {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd3cd47f-b042-4c5e-abc5-a23ef179d9b3&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:179,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b03d1261-a148-47ff-98bc-ad66985567ba&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:231,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, undefined, {\n    batchSize: 2,\n    count: true\n})\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdfb994c-62f9-42c8-a07c-bd576103663e&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports AQB queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports AQB queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ toC8QL: () =&gt; \&quot;RETURN 42\&quot; })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(42);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9875cd6-5fb8-4a39-b1e6-55a88834da14&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports query objects&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports query objects&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN 1337\&quot;, bindVars: {} })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(1337);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd11c168-ce8e-4783-8833-01d76623b0ee&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:190,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN @potato\&quot;, bindVars: { potato: \&quot;tomato\&quot; } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(\&quot;tomato\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f7fdf48-3f72-48a8-b2fa-c1eba429411b&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d20fb4d5-92cd-4d76-84d3-141a06d9a482&quot;,&quot;parentUUID&quot;:&quot;73868b42-9aa6-4439-837c-dbb0935e008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;951a4c89-adad-46f5-899e-bb324043195c&quot;,&quot;bccb21e9-e1ee-4c93-8008-18f2345ed1ab&quot;,&quot;bd3cd47f-b042-4c5e-abc5-a23ef179d9b3&quot;,&quot;b03d1261-a148-47ff-98bc-ad66985567ba&quot;,&quot;cdfb994c-62f9-42c8-a07c-bd576103663e&quot;,&quot;a9875cd6-5fb8-4a39-b1e6-55a88834da14&quot;,&quot;dd11c168-ce8e-4783-8833-01d76623b0ee&quot;,&quot;5f7fdf48-3f72-48a8-b2fa-c1eba429411b&quot;,&quot;d20fb4d5-92cd-4d76-84d3-141a06d9a482&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1831,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;76320e6c-6667-4af6-bdff-2c4629e7e587&quot;,&quot;title&quot;:&quot;c8ql&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly handles simple parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles simple parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let values = [\n    0,\n    42,\n    -1,\n    null,\n    undefined,\n    true,\n    false,\n    \&quot;\&quot;,\n    \&quot;string\&quot;,\n    [1, 2, 3],\n    { a: \&quot;b\&quot; }\n];\nlet query = jsC8_1.c8ql `\n        A ${values[0]} B ${values[1]} C ${values[2]} D ${values[3]} E ${values[4]} F ${values[5]}\n        G ${values[6]} H ${values[7]} I ${values[8]} J ${values[9]} K ${values[10]} EOF\n      `;\nchai_1.expect(query.query).to.equal(`\n        A @value0 B @value1 C @value2 D @value3 E @value4 F @value5\n        G @value6 H @value7 I @value8 J @value9 K @value10 EOF\n      `);\nlet bindVarNames = Object.keys(query.bindVars).sort((a, b) =&gt; (+a.substr(5) &gt; +b.substr(5) ? 1 : -1));\nchai_1.expect(bindVarNames).to.eql([\n    \&quot;value0\&quot;,\n    \&quot;value1\&quot;,\n    \&quot;value2\&quot;,\n    \&quot;value3\&quot;,\n    \&quot;value4\&quot;,\n    \&quot;value5\&quot;,\n    \&quot;value6\&quot;,\n    \&quot;value7\&quot;,\n    \&quot;value8\&quot;,\n    \&quot;value9\&quot;,\n    \&quot;value10\&quot;\n]);\nchai_1.expect(bindVarNames.map(k =&gt; query.bindVars[k])).to.eql(values);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63766c92-2428-4e5d-8e44-c79494c75e88&quot;,&quot;parentUUID&quot;:&quot;76320e6c-6667-4af6-bdff-2c4629e7e587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;correctly handles jsC8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles jsC8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let collection = fabric.collection(\&quot;potato\&quot;);\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;potato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2792277c-dae1-482c-aa54-8276b9dacde2&quot;,&quot;parentUUID&quot;:&quot;76320e6c-6667-4af6-bdff-2c4629e7e587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;correctly handles C8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles C8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;class C8Collection {\n    constructor() {\n        this.isC8Collection = true;\n        this.name = \&quot;tomato\&quot;;\n    }\n}\nlet collection = new C8Collection();\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;tomato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a647b01-d72a-4ffc-a86a-b6e33db194cd&quot;,&quot;parentUUID&quot;:&quot;76320e6c-6667-4af6-bdff-2c4629e7e587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;63766c92-2428-4e5d-8e44-c79494c75e88&quot;,&quot;2792277c-dae1-482c-aa54-8276b9dacde2&quot;,&quot;1a647b01-d72a-4ffc-a86a-b6e33db194cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6681ae7d-5995-41c0-a9dc-ff91295ebf7a&quot;,&quot;title&quot;:&quot;Route API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1277,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\ncollection = fabric.collection(`c${Date.now()}`);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b44b8a14-3c27-403c-930b-bab72395baa8&quot;,&quot;parentUUID&quot;:&quot;6681ae7d-5995-41c0-a9dc-ff91295ebf7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:615,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.truncate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b96aec9-fa4f-48d5-af4d-5b224da58433&quot;,&quot;parentUUID&quot;:&quot;6681ae7d-5995-41c0-a9dc-ff91295ebf7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5de3f23-5d9f-430b-abf8-e7372e1bbf94&quot;,&quot;parentUUID&quot;:&quot;6681ae7d-5995-41c0-a9dc-ff91295ebf7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1ef1605d-d2dd-4d4b-88ec-570fb337b4a2&quot;,&quot;title&quot;:&quot;route.route&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should concat path&quot;,&quot;fullTitle&quot;:&quot;Route API route.route should concat path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/api\&quot;).route(\&quot;/version\&quot;);\nchai_1.expect(route).to.have.property(\&quot;_path\&quot;, \&quot;/api/version\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0dad5f4a-c1f1-4268-8c5b-d403b3780bc0&quot;,&quot;parentUUID&quot;:&quot;1ef1605d-d2dd-4d4b-88ec-570fb337b4a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0dad5f4a-c1f1-4268-8c5b-d403b3780bc0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;cb72d4f2-37e5-4ad4-8980-1bcd3e68e8e8&quot;,&quot;title&quot;:&quot;route.post&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.post should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${collection.name}`)\n    .post({ foo: \&quot;bar\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f469765b-f013-4125-b798-47d0803f0da3&quot;,&quot;parentUUID&quot;:&quot;cb72d4f2-37e5-4ad4-8980-1bcd3e68e8e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f469765b-f013-4125-b798-47d0803f0da3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:207,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f2f7470e-7e4d-4583-93d3-b89f0ea23e5a&quot;,&quot;title&quot;:&quot;route.put&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.put \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b663488e-f748-4edf-b52e-f5525b53f222&quot;,&quot;parentUUID&quot;:&quot;f2f7470e-7e4d-4583-93d3-b89f0ea23e5a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.put should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .put({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96c017cf-3eb0-4368-b79c-cedb4d4437c0&quot;,&quot;parentUUID&quot;:&quot;f2f7470e-7e4d-4583-93d3-b89f0ea23e5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96c017cf-3eb0-4368-b79c-cedb4d4437c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:204,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f5fe015f-c4c8-42d4-9b07-ae0a4598c04b&quot;,&quot;title&quot;:&quot;route.patch&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbc4bbf6-9679-4eb9-a098-dffc255f7edf&quot;,&quot;parentUUID&quot;:&quot;f5fe015f-c4c8-42d4-9b07-ae0a4598c04b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .patch({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36ed777d-83ca-42ab-85df-2f27bc5f0e19&quot;,&quot;parentUUID&quot;:&quot;f5fe015f-c4c8-42d4-9b07-ae0a4598c04b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;36ed777d-83ca-42ab-85df-2f27bc5f0e19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:205,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8515b788-68d1-4a9d-905e-1fa3f38d5ea8&quot;,&quot;title&quot;:&quot;route.delete&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b65d7ace-95ed-4dac-8c7d-a8820e48ed6a&quot;,&quot;parentUUID&quot;:&quot;8515b788-68d1-4a9d-905e-1fa3f38d5ea8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .delete()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecb1887c-7aed-4bac-b67b-92a0997c3090&quot;,&quot;parentUUID&quot;:&quot;8515b788-68d1-4a9d-905e-1fa3f38d5ea8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ecb1887c-7aed-4bac-b67b-92a0997c3090&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:204,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;52a71bc7-1f52-4fb1-83de-178fa8cd97d0&quot;,&quot;title&quot;:&quot;route.head&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.head \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8abe6e29-79f2-4640-87f9-fa0a7b031e21&quot;,&quot;parentUUID&quot;:&quot;52a71bc7-1f52-4fb1-83de-178fa8cd97d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.head should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .head()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;statusCode\&quot;, 200);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ca5db62-6e3a-4c72-838d-3f36a7b0a882&quot;,&quot;parentUUID&quot;:&quot;52a71bc7-1f52-4fb1-83de-178fa8cd97d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ca5db62-6e3a-4c72-838d-3f36a7b0a882&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:207,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d14aadb7-5cb2-4d74-b5ea-98708fb116a7&quot;,&quot;title&quot;:&quot;Cursor API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:833,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cc73690-e64d-4077-b71a-faa8cdb30b92&quot;,&quot;parentUUID&quot;:&quot;d14aadb7-5cb2-4d74-b5ea-98708fb116a7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor = await fabric.query(c8qlQuery);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d33c01f-8f32-41de-96b6-30af8e605891&quot;,&quot;parentUUID&quot;:&quot;d14aadb7-5cb2-4d74-b5ea-98708fb116a7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;487b3162-6013-47b4-9b22-b73a691ab0bf&quot;,&quot;parentUUID&quot;:&quot;d14aadb7-5cb2-4d74-b5ea-98708fb116a7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9f249b3e-a1ca-4533-a627-fc662ee0fcab&quot;,&quot;title&quot;:&quot;cursor.all&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an Array of all results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.all returns an Array of all results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(vals =&gt; {\n    chai_1.expect(vals).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1eb8e8c-b340-4c5e-a701-3fd1e0ef173d&quot;,&quot;parentUUID&quot;:&quot;9f249b3e-a1ca-4533-a627-fc662ee0fcab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1eb8e8c-b340-4c5e-a701-3fd1e0ef173d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;565b4b8d-5cdd-4613-81ab-813714c8c3d1&quot;,&quot;title&quot;:&quot;cursor.next&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns the next result of the Cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.next returns the next result of the Cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(0);\n    return cursor.next();\n})\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(1);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a132af95-f01e-4d7f-8c35-e00c0fc73d7b&quot;,&quot;parentUUID&quot;:&quot;565b4b8d-5cdd-4613-81ab-813714c8c3d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a132af95-f01e-4d7f-8c35-e00c0fc73d7b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;70720d02-768b-422c-86fb-0c6cff074fe5&quot;,&quot;title&quot;:&quot;cursor.hasNext&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the Cursor has more results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true if the Cursor has more results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(cursor.hasNext()).to.equal(true);\ncursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.be.a(\&quot;number\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99949851-06fc-49d2-acfe-2371067cb0ab&quot;,&quot;parentUUID&quot;:&quot;70720d02-768b-422c-86fb-0c6cff074fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the Cursor is empty&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false if the Cursor is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(() =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf843c07-fbf6-46e7-be04-2c1ed3911010&quot;,&quot;parentUUID&quot;:&quot;70720d02-768b-422c-86fb-0c6cff074fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns true after first batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true after first batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(c8qlQuery, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor.next();\n    chai_1.expect(cursor._result.length).to.equal(0);\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d600292-042e-4c3d-a246-e0b11e7aaf80&quot;,&quot;parentUUID&quot;:&quot;70720d02-768b-422c-86fb-0c6cff074fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:420,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(\&quot;FOR i In 0..1 RETURN i\&quot;, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f6674b6-0f91-4778-8d28-026a6ad922c5&quot;,&quot;parentUUID&quot;:&quot;70720d02-768b-422c-86fb-0c6cff074fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:177,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(\&quot;FOR i In 0..1 RETURN i\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(2);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(1);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d13cf66d-f6e7-42b4-b286-2f612de89c49&quot;,&quot;parentUUID&quot;:&quot;70720d02-768b-422c-86fb-0c6cff074fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 404 after timeout&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns 404 after timeout&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30dc6717-edd6-43dd-9754-9e81449f09b1&quot;,&quot;parentUUID&quot;:&quot;70720d02-768b-422c-86fb-0c6cff074fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed (with large amount of results)&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed (with large amount of results)&quot;,&quot;timedOut&quot;:true,&quot;duration&quot;:20002,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const EXPECTED_LENGTH = 100000;\nconst loadMore = function (cursor, totalLength) {\n    cursor\n        .next()\n        .then(() =&gt; {\n        totalLength++;\n        chai_1.expect(cursor.hasNext()).to.equal(totalLength !== EXPECTED_LENGTH);\n        if (cursor.hasNext()) {\n            loadMore(cursor, totalLength);\n        }\n        else {\n            done();\n        }\n    })\n        .catch(done);\n};\nfabric.query(`FOR i In 1..${EXPECTED_LENGTH} RETURN i`)\n    .then(cursor =&gt; loadMore(cursor, 0))\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Timeout of 20000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js)&quot;,&quot;estack&quot;:&quot;Error: Timeout of 20000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js)&quot;},&quot;uuid&quot;:&quot;428bc086-2b5d-46c0-bc66-362bc8384fca&quot;,&quot;parentUUID&quot;:&quot;70720d02-768b-422c-86fb-0c6cff074fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99949851-06fc-49d2-acfe-2371067cb0ab&quot;,&quot;bf843c07-fbf6-46e7-be04-2c1ed3911010&quot;,&quot;9d600292-042e-4c3d-a246-e0b11e7aaf80&quot;,&quot;2f6674b6-0f91-4778-8d28-026a6ad922c5&quot;,&quot;d13cf66d-f6e7-42b4-b286-2f612de89c49&quot;],&quot;failures&quot;:[&quot;428bc086-2b5d-46c0-bc66-362bc8384fca&quot;],&quot;pending&quot;:[&quot;30dc6717-edd6-43dd-9754-9e81449f09b1&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:20806,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c698dce0-e8d5-4985-8765-883ae92f2ca5&quot;,&quot;title&quot;:&quot;cursor.each&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;invokes the callback for each value&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each invokes the callback for each value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each(value =&gt; {\n    results.push(value);\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ebcb04a-ee7e-4aae-901a-123621284e25&quot;,&quot;parentUUID&quot;:&quot;c698dce0-e8d5-4985-8765-883ae92f2ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;aborts if the callback returns false&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each aborts if the callback returns false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each((value) =&gt; {\n    results.push(value);\n    if (value === 5)\n        return false;\n    return;\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;913c9840-313a-453b-9103-3e7e07cadb44&quot;,&quot;parentUUID&quot;:&quot;c698dce0-e8d5-4985-8765-883ae92f2ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ebcb04a-ee7e-4aae-901a-123621284e25&quot;,&quot;913c9840-313a-453b-9103-3e7e07cadb44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9fdd8d7b-3e95-430f-bba8-2ee5ab5b0fbb&quot;,&quot;title&quot;:&quot;cursor.every&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns true if the callback returns a truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return false;\n    results.push(value);\n    return true;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d158a5f-cbf5-4939-ae35-7101cba07bd5&quot;,&quot;parentUUID&quot;:&quot;9fdd8d7b-3e95-430f-bba8-2ee5ab5b0fbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns false if the callback returns a non-truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    results.push(value);\n    return value &lt; 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6418f9c9-f6a6-417a-baaa-e112dffa2564&quot;,&quot;parentUUID&quot;:&quot;9fdd8d7b-3e95-430f-bba8-2ee5ab5b0fbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7d158a5f-cbf5-4939-ae35-7101cba07bd5&quot;,&quot;6418f9c9-f6a6-417a-baaa-e112dffa2564&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;b64d103a-218c-4f89-a91a-9c8bba07578d&quot;,&quot;title&quot;:&quot;cursor.some&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns false if the callback returns a non-truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return true;\n    results.push(value);\n    return false;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eecbd1a0-a71d-4b3e-917a-c1d781108400&quot;,&quot;parentUUID&quot;:&quot;b64d103a-218c-4f89-a91a-9c8bba07578d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns true if the callback returns a truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    results.push(value);\n    return value &gt;= 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbd0f475-870c-4a43-8e1a-a48479532a4a&quot;,&quot;parentUUID&quot;:&quot;b64d103a-218c-4f89-a91a-9c8bba07578d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eecbd1a0-a71d-4b3e-917a-c1d781108400&quot;,&quot;dbd0f475-870c-4a43-8e1a-a48479532a4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;7fe26697-8eff-4ec2-b9ae-e17839dfc982&quot;,&quot;title&quot;:&quot;cursor.map&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;maps all result values over the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.map maps all result values over the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .map(value =&gt; value * 2)\n    .then(results =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult.map(value =&gt; value * 2));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9853922b-8899-4c6b-8e16-8218d62ea41a&quot;,&quot;parentUUID&quot;:&quot;7fe26697-8eff-4ec2-b9ae-e17839dfc982&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9853922b-8899-4c6b-8e16-8218d62ea41a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;ba7c36fd-90ca-4c30-b58a-a756019bcc65&quot;,&quot;title&quot;:&quot;cursor.reduce&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;reduces the result values with the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.reduce reduces the result values with the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .reduce((a, b) =&gt; a + b)\n    .then(result =&gt; {\n    chai_1.expect(result).to.eql(c8qlResult.reduce((a, b) =&gt; a + b));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18f05ed8-f9c7-4221-9eb7-0a24794cb56e&quot;,&quot;parentUUID&quot;:&quot;ba7c36fd-90ca-4c30-b58a-a756019bcc65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18f05ed8-f9c7-4221-9eb7-0a24794cb56e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;dcb71a5b-aa6c-4a42-a361-af91c9643919&quot;,&quot;title&quot;:&quot;cursor.delete&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete the cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.delete should delete the cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f881d05-1d3b-4c97-bf40-98bd5a71500f&quot;,&quot;parentUUID&quot;:&quot;dcb71a5b-aa6c-4a42-a361-af91c9643919&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;4f881d05-1d3b-4c97-bf40-98bd5a71500f&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;619cf5b9-e5f2-42fc-8185-2ec5c571a3ef&quot;,&quot;title&quot;:&quot;Collection metadata&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1383,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f91db80b-a421-4527-a83b-4051f0bbb368&quot;,&quot;parentUUID&quot;:&quot;619cf5b9-e5f2-42fc-8185-2ec5c571a3ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(dbName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa9797fe-6b91-43c5-bf9b-4c5e3b5fe184&quot;,&quot;parentUUID&quot;:&quot;619cf5b9-e5f2-42fc-8185-2ec5c571a3ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;63b3b3de-4117-4ff8-a2a7-9913fa7be49d&quot;,&quot;title&quot;:&quot;collection.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:171,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await collection.get();\nchai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\nchai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\nchai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\nchai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7cf7697-2c84-4f63-84a7-7885ffcf75f6&quot;,&quot;parentUUID&quot;:&quot;63b3b3de-4117-4ff8-a2a7-9913fa7be49d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should throw if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:209,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.collection(\&quot;no\&quot;).get();\n}\ncatch (e) {\n    chai_1.expect(e).to.have.property(\&quot;errorNum\&quot;, collection_1.COLLECTION_NOT_FOUND);\n    return;\n}\nchai_1.expect.fail(\&quot;should throw\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2932cbf5-53b6-4b75-ae58-62781a7c6554&quot;,&quot;parentUUID&quot;:&quot;63b3b3de-4117-4ff8-a2a7-9913fa7be49d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7cf7697-2c84-4f63-84a7-7885ffcf75f6&quot;,&quot;2932cbf5-53b6-4b75-ae58-62781a7c6554&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:380,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;504af839-4ffa-4d8a-ac1c-d90faad1a23d&quot;,&quot;title&quot;:&quot;collection.exists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if collection exists&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return true if collection exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:188,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.exists();\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ceadb3a-b640-4508-a003-6ab19290ed9e&quot;,&quot;parentUUID&quot;:&quot;504af839-4ffa-4d8a-ac1c-d90faad1a23d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return false if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:185,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric.collection(\&quot;no\&quot;).exists();\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e54a42d-66bb-4b8d-b51c-348189205438&quot;,&quot;parentUUID&quot;:&quot;504af839-4ffa-4d8a-ac1c-d90faad1a23d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7ceadb3a-b640-4508-a003-6ab19290ed9e&quot;,&quot;4e54a42d-66bb-4b8d-b51c-348189205438&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:373,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c476fbc8-45b3-4454-ae0c-fadad784ef02&quot;,&quot;title&quot;:&quot;collection.properties&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return properties of a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.properties should return properties of a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:159,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .properties()\n    .then(properties =&gt; {\n    chai_1.expect(properties).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(properties).to.have.property(\&quot;waitForSync\&quot;, false);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eeab6091-e4fb-44c7-a4e2-c6cb2453ba1c&quot;,&quot;parentUUID&quot;:&quot;c476fbc8-45b3-4454-ae0c-fadad784ef02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eeab6091-e4fb-44c7-a4e2-c6cb2453ba1c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:159,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e2e7743d-7ff9-4952-aff5-c7f14e5c20d2&quot;,&quot;title&quot;:&quot;collection.count&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.count should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:184,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .count()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e42be89-7f50-4c5c-82a1-80e66c53e9ba&quot;,&quot;parentUUID&quot;:&quot;e2e7743d-7ff9-4952-aff5-c7f14e5c20d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e42be89-7f50-4c5c-82a1-80e66c53e9ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:184,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e58e8aac-1e23-410b-a348-b7a9f6469629&quot;,&quot;title&quot;:&quot;Manipulating collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:835,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9adb7e2-e5cc-40b5-8944-e573726bb731&quot;,&quot;parentUUID&quot;:&quot;e58e8aac-1e23-410b-a348-b7a9f6469629&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`collection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f754e963-9879-43a3-90ae-689e5c561389&quot;,&quot;parentUUID&quot;:&quot;e58e8aac-1e23-410b-a348-b7a9f6469629&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:227,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccd454cc-23af-4326-88f5-543e5a5ba6e4&quot;,&quot;parentUUID&quot;:&quot;e58e8aac-1e23-410b-a348-b7a9f6469629&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:265,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .get()\n    .then(() =&gt; {\n    collection\n        .drop()\n        .then(() =&gt; void done())\n        .catch(done);\n})\n    .catch(() =&gt; void done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee7badd6-9505-49bb-ad7b-fce1a5d6f185&quot;,&quot;parentUUID&quot;:&quot;e58e8aac-1e23-410b-a348-b7a9f6469629&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b619bd58-1f25-4ce0-836b-69c6876dd309&quot;,&quot;title&quot;:&quot;collection.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:371,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8a01a5d-d265-4b66-a3dd-1e7b174cadcc&quot;,&quot;parentUUID&quot;:&quot;b619bd58-1f25-4ce0-836b-69c6876dd309&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new local document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:406,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee141b68-db54-4dec-9449-f6619db3763c&quot;,&quot;parentUUID&quot;:&quot;b619bd58-1f25-4ce0-836b-69c6876dd309&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92176d06-05c8-4afe-8ba2-5d85d57a4812&quot;,&quot;parentUUID&quot;:&quot;b619bd58-1f25-4ce0-836b-69c6876dd309&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new local edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:334,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21d58782-4109-4c01-9ca1-f70f333180e4&quot;,&quot;parentUUID&quot;:&quot;b619bd58-1f25-4ce0-836b-69c6876dd309&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8a01a5d-d265-4b66-a3dd-1e7b174cadcc&quot;,&quot;ee141b68-db54-4dec-9449-f6619db3763c&quot;,&quot;92176d06-05c8-4afe-8ba2-5d85d57a4812&quot;,&quot;21d58782-4109-4c01-9ca1-f70f333180e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1521,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;99e55d7f-594c-42b3-9439-77bb8d267f90&quot;,&quot;title&quot;:&quot;collection.rename&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should rename a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.rename should rename a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(\&quot;/_admin/server/role\&quot;)\n    .get()\n    .then(res =&gt; {\n    if (res.body.role !== \&quot;SINGLE\&quot;)\n        return;\n    const name = `renamecollection${Date.now()}`;\n    return collection.rename(name).then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, name);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3346363f-8739-49bd-98a2-6f972f0fcc6c&quot;,&quot;parentUUID&quot;:&quot;99e55d7f-594c-42b3-9439-77bb8d267f90&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3346363f-8739-49bd-98a2-6f972f0fcc6c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:410,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;dc3cb537-a702-4e6e-830d-2fe33c60e1e1&quot;,&quot;title&quot;:&quot;collection.truncate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should truncate a non-empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should truncate a non-empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:720,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.save({}).then(() =&gt; {\n    return collection\n        .truncate()\n        .then(() =&gt; {\n        collection.count().then(info =&gt; {\n            chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n            chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n        });\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc8cfad2-3e60-4066-88bf-6296bcf90b45&quot;,&quot;parentUUID&quot;:&quot;dc3cb537-a702-4e6e-830d-2fe33c60e1e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow truncating a empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should allow truncating a empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:255,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.truncate().then(() =&gt; {\n    return collection\n        .count()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c0c1bc4-b37e-44cf-b4cb-40b6b1aad0bd&quot;,&quot;parentUUID&quot;:&quot;dc3cb537-a702-4e6e-830d-2fe33c60e1e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc8cfad2-3e60-4066-88bf-6296bcf90b45&quot;,&quot;1c0c1bc4-b37e-44cf-b4cb-40b6b1aad0bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:975,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;eadd430c-fb22-4211-bd59-c172fb389cca&quot;,&quot;title&quot;:&quot;collection.drop&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.drop should drop a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.drop().then(() =&gt; {\n    return collection\n        .get()\n        .then(done)\n        .catch(err =&gt; {\n        chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n        void done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c66cf5ed-0269-4572-8167-48d8ebe19a9d&quot;,&quot;parentUUID&quot;:&quot;eadd430c-fb22-4211-bd59-c172fb389cca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c66cf5ed-0269-4572-8167-48d8ebe19a9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:407,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;31d0cbbe-8910-4992-8e97-a1a21bd24fdf&quot;,&quot;title&quot;:&quot;collection.onChange&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the message on collection change&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.onChange should get the message on collection change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1043,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const callbackObj = {\n    onopen: () =&gt; {\n        collection.save({ name: \&quot;Anthony\&quot;, lastname: \&quot;Gonsalvis\&quot; });\n    },\n    onmessage: (msg) =&gt; {\n        console.log(\&quot;msg=&gt;\&quot;, msg);\n        done();\n    },\n    onerror: (err) =&gt; {\n        console.log(\&quot;Connection Error-&gt;\&quot;, err);\n        chai_1.expect.fail(\&quot;Websocket connection error\&quot;);\n    },\n    onclose: () =&gt; console.log(\&quot;Websoket connection closed\&quot;)\n};\ncollection.onChange(callbackObj, testUrl.substring(8));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb1ddd14-7c9c-49b5-8664-5f942b8bdd48&quot;,&quot;parentUUID&quot;:&quot;31d0cbbe-8910-4992-8e97-a1a21bd24fdf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb1ddd14-7c9c-49b5-8664-5f942b8bdd48&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1043,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;410a1808-1385-4940-8b68-ae6f71fe60e3&quot;,&quot;title&quot;:&quot;Managing indexes&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1329,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;684d57fb-7ce7-4fb2-9649-388e35922516&quot;,&quot;parentUUID&quot;:&quot;410a1808-1385-4940-8b68-ae6f71fe60e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2997c38f-ef8c-4f11-a948-9456ed20a415&quot;,&quot;parentUUID&quot;:&quot;410a1808-1385-4940-8b68-ae6f71fe60e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7dc6751d-55c1-4007-a326-0f19d3a9f51c&quot;,&quot;title&quot;:&quot;collection.createIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a index of given type&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createIndex should create a index of given type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createIndex({\n    type: \&quot;hash\&quot;,\n    fields: [\&quot;value0\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value0\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5052b50e-b8bf-4546-9f53-e874015ece2c&quot;,&quot;parentUUID&quot;:&quot;7dc6751d-55c1-4007-a326-0f19d3a9f51c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5052b50e-b8bf-4546-9f53-e874015ece2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:205,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1597694b-d17b-4abf-a493-79d78b7225d0&quot;,&quot;title&quot;:&quot;collection.createHashIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a hash index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createHashIndex should create a hash index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e72d5c28-98f8-4edc-b3ec-af2d6ab9d3d5&quot;,&quot;parentUUID&quot;:&quot;1597694b-d17b-4abf-a493-79d78b7225d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e72d5c28-98f8-4edc-b3ec-af2d6ab9d3d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:207,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;fa06fe30-ba9f-446d-9105-52fa42647826&quot;,&quot;title&quot;:&quot;collection.createSkipList&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a skiplist index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createSkipList should create a skiplist index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createSkipList([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;skiplist\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec3e3195-1982-446b-8a02-ad44fa1760bf&quot;,&quot;parentUUID&quot;:&quot;fa06fe30-ba9f-446d-9105-52fa42647826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec3e3195-1982-446b-8a02-ad44fa1760bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:199,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;052bfc62-ff7d-45dd-b885-f0dc93e77907&quot;,&quot;title&quot;:&quot;collection.createPersistentIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a persistent index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createPersistentIndex should create a persistent index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createPersistentIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;persistent\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f58f076e-f9af-42a5-83e7-b977d84d526b&quot;,&quot;parentUUID&quot;:&quot;052bfc62-ff7d-45dd-b885-f0dc93e77907&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f58f076e-f9af-42a5-83e7-b977d84d526b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:206,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;acbeccf4-65ac-420b-80e1-c6f8cd204dac&quot;,&quot;title&quot;:&quot;collection.createGeoIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a geo1 index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo1 index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f88baa5f-1186-4264-981f-6a66936bc10e&quot;,&quot;parentUUID&quot;:&quot;acbeccf4-65ac-420b-80e1-c6f8cd204dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo2 index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo2 index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8448f39f-61fa-4795-ba97-91ff27531593&quot;,&quot;parentUUID&quot;:&quot;acbeccf4-65ac-420b-80e1-c6f8cd204dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:136,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo1\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (bestIndexedLevel, fields, ...) } to have property &#x27;type&#x27; of &#x27;geo1&#x27;, but got &#x27;geo&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (bestIndexedLevel, fields, ...) } to have property &#x27;type&#x27; of &#x27;geo1&#x27;, but got &#x27;geo&#x27;\n    at collection.createGeoIndex.then.info (src/test/11-managing-indexes.ts:143:32)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;,&quot;diff&quot;:&quot;- geo\n+ geo1\n&quot;},&quot;uuid&quot;:&quot;bcf50914-6846-4d75-8748-f499d3f9234c&quot;,&quot;parentUUID&quot;:&quot;acbeccf4-65ac-420b-80e1-c6f8cd204dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value1\&quot;, \&quot;value2\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo2\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value1\&quot;, \&quot;value2\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (bestIndexedLevel, fields, ...) } to have property &#x27;type&#x27; of &#x27;geo2&#x27;, but got &#x27;geo&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (bestIndexedLevel, fields, ...) } to have property &#x27;type&#x27; of &#x27;geo2&#x27;, but got &#x27;geo&#x27;\n    at collection.createGeoIndex.then.info (src/test/11-managing-indexes.ts:156:32)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;,&quot;diff&quot;:&quot;- geo\n+ geo2\n&quot;},&quot;uuid&quot;:&quot;3f73c854-25c5-45d0-a6ac-2cc21a43c011&quot;,&quot;parentUUID&quot;:&quot;acbeccf4-65ac-420b-80e1-c6f8cd204dac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;bcf50914-6846-4d75-8748-f499d3f9234c&quot;,&quot;3f73c854-25c5-45d0-a6ac-2cc21a43c011&quot;],&quot;pending&quot;:[&quot;f88baa5f-1186-4264-981f-6a66936bc10e&quot;,&quot;8448f39f-61fa-4795-ba97-91ff27531593&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:273,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;24563c34-f4bf-4823-8dc0-e3bdff835eb0&quot;,&quot;title&quot;:&quot;collection.createFulltextIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fulltext index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createFulltextIndex should create a fulltext index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:171,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createFulltextIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;fulltext\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17ee9434-6157-4d25-a70e-e5f418cb90c3&quot;,&quot;parentUUID&quot;:&quot;24563c34-f4bf-4823-8dc0-e3bdff835eb0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;17ee9434-6157-4d25-a70e-e5f418cb90c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:171,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3fe73083-e1f0-49c7-beb0-2f6bd5ac5edc&quot;,&quot;title&quot;:&quot;collection.index&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.index should return information about a index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:350,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.index(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        chai_1.expect(index).to.have.property(\&quot;type\&quot;, info.type);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7dc2d29a-9cf8-4d9e-bea2-634adf508c30&quot;,&quot;parentUUID&quot;:&quot;3fe73083-e1f0-49c7-beb0-2f6bd5ac5edc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7dc2d29a-9cf8-4d9e-bea2-634adf508c30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:350,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;afae9a11-cc58-40bd-8cfb-6e7c07f0443e&quot;,&quot;title&quot;:&quot;collection.indexes&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of indexes&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.indexes should return a list of indexes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:315,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(index =&gt; {\n    return collection.indexes().then(indexes =&gt; {\n        chai_1.expect(indexes).to.be.instanceof(Array);\n        chai_1.expect(indexes).to.not.be.empty;\n        chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(1);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c42fabc1-bb88-4af6-a295-3d8657961070&quot;,&quot;parentUUID&quot;:&quot;afae9a11-cc58-40bd-8cfb-6e7c07f0443e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c42fabc1-bb88-4af6-a295-3d8657961070&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:315,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6fe4568c-b868-4340-a2c0-fa1452ff2f2c&quot;,&quot;title&quot;:&quot;collection.dropIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop existing index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.dropIndex should drop existing index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4729,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.dropIndex(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        return collection.indexes().then(indexes =&gt; {\n            chai_1.expect(indexes).to.be.instanceof(Array);\n            chai_1.expect(indexes).to.not.be.empty;\n            chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(1);\n        });\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to equal 1&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to equal 1\n    at collection.indexes.then.indexes (src/test/11-managing-indexes.ts:223:20)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;,&quot;diff&quot;:&quot;- 0\n+ 1\n&quot;},&quot;uuid&quot;:&quot;931a14c1-714d-44dc-ab25-689cfc590ae2&quot;,&quot;parentUUID&quot;:&quot;6fe4568c-b868-4340-a2c0-fa1452ff2f2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;931a14c1-714d-44dc-ab25-689cfc590ae2&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4729,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d6a03757-37c9-42b7-aa5a-225ac52f736a&quot;,&quot;title&quot;:&quot;DocumentCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:924,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab079215-5162-4eb5-8db5-61594ae020c3&quot;,&quot;parentUUID&quot;:&quot;d6a03757-37c9-42b7-aa5a-225ac52f736a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fad7d905-2fa6-4f47-bf69-cf0db3d94617&quot;,&quot;parentUUID&quot;:&quot;d6a03757-37c9-42b7-aa5a-225ac52f736a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50849684-0147-4408-b205-55179d1dd26a&quot;,&quot;parentUUID&quot;:&quot;d6a03757-37c9-42b7-aa5a-225ac52f736a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8565e9d4-940f-4a8a-87d7-530e46617b7b&quot;,&quot;parentUUID&quot;:&quot;d6a03757-37c9-42b7-aa5a-225ac52f736a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;32f8d2b3-867e-456e-9cde-5a495638b7f5&quot;,&quot;title&quot;:&quot;documentCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:171,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ed62072-ed4a-41c8-984d-b391b7ddf1a8&quot;,&quot;parentUUID&quot;:&quot;32f8d2b3-867e-456e-9cde-5a495638b7f5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document returns a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1186,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd753839-d965-4a52-9aaf-eb08cc47c422&quot;,&quot;parentUUID&quot;:&quot;32f8d2b3-867e-456e-9cde-5a495638b7f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4911364-9bf0-4f0c-9115-4d149d6ef76e&quot;,&quot;parentUUID&quot;:&quot;32f8d2b3-867e-456e-9cde-5a495638b7f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd753839-d965-4a52-9aaf-eb08cc47c422&quot;,&quot;a4911364-9bf0-4f0c-9115-4d149d6ef76e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1390,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b224d1aa-285a-435b-91fc-baee88013d37&quot;,&quot;title&quot;:&quot;documentCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7438975c-3742-47c4-be11-5b43c511aee2&quot;,&quot;parentUUID&quot;:&quot;b224d1aa-285a-435b-91fc-baee88013d37&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the document exists&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns true if the document exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d5e1d68-e2e7-4405-ba2a-8d2154a51ec8&quot;,&quot;parentUUID&quot;:&quot;b224d1aa-285a-435b-91fc-baee88013d37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the document does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the document does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;does-not-exist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2d09b13-8c29-4e1d-b17f-512c1b550c1c&quot;,&quot;parentUUID&quot;:&quot;b224d1aa-285a-435b-91fc-baee88013d37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the collection does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:138,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric\n    .collection(\&quot;doesnotexist\&quot;)\n    .documentExists(\&quot;lol\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;463b3249-61da-4733-a395-f3638123811f&quot;,&quot;parentUUID&quot;:&quot;b224d1aa-285a-435b-91fc-baee88013d37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d5e1d68-e2e7-4405-ba2a-8d2154a51ec8&quot;,&quot;a2d09b13-8c29-4e1d-b17f-512c1b550c1c&quot;,&quot;463b3249-61da-4733-a395-f3638123811f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:464,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;bb71c427-650b-46a5-a652-3b57fd709bac&quot;,&quot;title&quot;:&quot;documentCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save creates a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:324,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e58408c8-adc8-4bd1-839c-2231856daae1&quot;,&quot;parentUUID&quot;:&quot;bb71c427-650b-46a5-a652-3b57fd709bac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:241,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1e7d62b-1d5b-4447-8e57-1689226aac47&quot;,&quot;parentUUID&quot;:&quot;bb71c427-650b-46a5-a652-3b57fd709bac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns the document if opts.returnNew is set&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save returns the document if opts.returnNew is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = { returnNew: true };\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ce71073-26b5-4435-bb80-731cd1bb9f13&quot;,&quot;parentUUID&quot;:&quot;bb71c427-650b-46a5-a652-3b57fd709bac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;interprets opts as returnNew if it is a boolean&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save interprets opts as returnNew if it is a boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = true;\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bb9b123-c440-4652-8f67-7676fb11d83f&quot;,&quot;parentUUID&quot;:&quot;bb71c427-650b-46a5-a652-3b57fd709bac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e58408c8-adc8-4bd1-839c-2231856daae1&quot;,&quot;a1e7d62b-1d5b-4447-8e57-1689226aac47&quot;,&quot;5ce71073-26b5-4435-bb80-731cd1bb9f13&quot;,&quot;8bb9b123-c440-4652-8f67-7676fb11d83f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:974,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;eb57fc4d-85e7-4d86-958c-6e2443724650&quot;,&quot;title&quot;:&quot;documentCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.replace replaces the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:553,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;777dcec2-e150-4e33-a91d-5ec934cd9239&quot;,&quot;parentUUID&quot;:&quot;eb57fc4d-85e7-4d86-958c-6e2443724650&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;777dcec2-e150-4e33-a91d-5ec934cd9239&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:553,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2ed33f11-2d26-44dc-a6b5-d083133ba424&quot;,&quot;title&quot;:&quot;documentCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:615,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;000dcce5-88ac-4b85-b31f-28f7ad514781&quot;,&quot;parentUUID&quot;:&quot;2ed33f11-2d26-44dc-a6b5-d083133ba424&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:717,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09e15d8f-f15d-43da-bc7e-96716a663d2c&quot;,&quot;parentUUID&quot;:&quot;2ed33f11-2d26-44dc-a6b5-d083133ba424&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;000dcce5-88ac-4b85-b31f-28f7ad514781&quot;,&quot;09e15d8f-f15d-43da-bc7e-96716a663d2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1332,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4e8de063-1798-462e-846e-81bdeaa555fe&quot;,&quot;title&quot;:&quot;documentCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05a40458-fd8f-43fa-aaab-9337ce9987cd&quot;,&quot;parentUUID&quot;:&quot;4e8de063-1798-462e-846e-81bdeaa555fe&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove deletes the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:416,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.document(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96825754-4370-4b5d-9ad1-6fdaef96a7e2&quot;,&quot;parentUUID&quot;:&quot;4e8de063-1798-462e-846e-81bdeaa555fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96825754-4370-4b5d-9ad1-6fdaef96a7e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:416,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;bf57936a-1a9c-4d8a-b9bd-ad77d2a7afd6&quot;,&quot;title&quot;:&quot;EdgeCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1330,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c81a418d-199c-413a-86b4-7d09843570a4&quot;,&quot;parentUUID&quot;:&quot;bf57936a-1a9c-4d8a-b9bd-ad77d2a7afd6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.edgeCollection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c31b0767-1935-46d3-aa3b-28a47ed2b092&quot;,&quot;parentUUID&quot;:&quot;bf57936a-1a9c-4d8a-b9bd-ad77d2a7afd6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcc933c5-d852-4414-a547-3531de3d32cc&quot;,&quot;parentUUID&quot;:&quot;bf57936a-1a9c-4d8a-b9bd-ad77d2a7afd6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66c64c13-11a9-44f7-815a-b331c1ad2091&quot;,&quot;parentUUID&quot;:&quot;bf57936a-1a9c-4d8a-b9bd-ad77d2a7afd6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d7605c96-8487-47f5-a4f5-f18907d7c1ce&quot;,&quot;title&quot;:&quot;edgeCollection.edge&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6493e5ed-e473-4633-8343-a4ca802b4de4&quot;,&quot;parentUUID&quot;:&quot;d7605c96-8487-47f5-a4f5-f18907d7c1ce&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:182,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96db401e-6820-4592-b5d1-a963f0015cd9&quot;,&quot;parentUUID&quot;:&quot;d7605c96-8487-47f5-a4f5-f18907d7c1ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b780db88-cf34-4385-af0f-08a8b928dff9&quot;,&quot;parentUUID&quot;:&quot;d7605c96-8487-47f5-a4f5-f18907d7c1ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96db401e-6820-4592-b5d1-a963f0015cd9&quot;,&quot;b780db88-cf34-4385-af0f-08a8b928dff9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:388,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;adc855d5-5cce-433d-849b-dd473add3d6e&quot;,&quot;title&quot;:&quot;edgeCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5892e3ca-0f72-47d3-afcf-9e5ce9b60d04&quot;,&quot;parentUUID&quot;:&quot;adc855d5-5cce-433d-849b-dd473add3d6e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55ad99ac-2f2b-4ad5-a67d-ea1f84708d22&quot;,&quot;parentUUID&quot;:&quot;adc855d5-5cce-433d-849b-dd473add3d6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78caa1f7-b13f-4a08-be2e-f7f17d482581&quot;,&quot;parentUUID&quot;:&quot;adc855d5-5cce-433d-849b-dd473add3d6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55ad99ac-2f2b-4ad5-a67d-ea1f84708d22&quot;,&quot;78caa1f7-b13f-4a08-be2e-f7f17d482581&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:411,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b9fa374e-aefa-4b8c-a08c-0dc275273785&quot;,&quot;title&quot;:&quot;edgeCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:210,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;233b31d7-076c-4bbd-93b0-b6c659dc6b5b&quot;,&quot;parentUUID&quot;:&quot;b9fa374e-aefa-4b8c-a08c-0dc275273785&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the edge exists&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns true if the edge exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18039dc3-040d-45db-8242-7d25439d4e00&quot;,&quot;parentUUID&quot;:&quot;b9fa374e-aefa-4b8c-a08c-0dc275273785&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the edge does not exist&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns false if the edge does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;doesnotexist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a88c093-9618-4ad2-b25a-8f148ccaa26a&quot;,&quot;parentUUID&quot;:&quot;b9fa374e-aefa-4b8c-a08c-0dc275273785&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18039dc3-040d-45db-8242-7d25439d4e00&quot;,&quot;5a88c093-9618-4ad2-b25a-8f148ccaa26a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:378,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a5c44ff7-163d-4be8-bffc-0c8cf93a59ce&quot;,&quot;title&quot;:&quot;edgeCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save creates an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c502519e-46f3-4d25-94af-84540128249d&quot;,&quot;parentUUID&quot;:&quot;a5c44ff7-163d-4be8-bffc-0c8cf93a59ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:426,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = {\n    chicken: \&quot;chicken\&quot;,\n    _key: \&quot;banana\&quot;,\n    _from: \&quot;d/1\&quot;,\n    _to: \&quot;d/2\&quot;\n};\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.equals(data._key);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._key).to.equal(data._key);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4b09521-0e92-4a78-b0f3-ca93cc5803f0&quot;,&quot;parentUUID&quot;:&quot;a5c44ff7-163d-4be8-bffc-0c8cf93a59ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes _from and _to as positional arguments&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes _from and _to as positional arguments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:247,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5a604e4-2a4f-4a9d-9962-e70499261ef0&quot;,&quot;parentUUID&quot;:&quot;a5c44ff7-163d-4be8-bffc-0c8cf93a59ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes an options object&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:412,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3f93bef-4e90-4e55-b932-83fceec8a930&quot;,&quot;parentUUID&quot;:&quot;a5c44ff7-163d-4be8-bffc-0c8cf93a59ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes an options object with positional _from and _to&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object with positional _from and _to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:463,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7ae6a4f-c30a-4161-a096-c42db4d466bb&quot;,&quot;parentUUID&quot;:&quot;a5c44ff7-163d-4be8-bffc-0c8cf93a59ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c502519e-46f3-4d25-94af-84540128249d&quot;,&quot;d4b09521-0e92-4a78-b0f3-ca93cc5803f0&quot;,&quot;a5a604e4-2a4f-4a9d-9962-e70499261ef0&quot;,&quot;e3f93bef-4e90-4e55-b932-83fceec8a930&quot;,&quot;d7ae6a4f-c30a-4161-a096-c42db4d466bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1958,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3f9e0bc5-df96-47c4-9a5a-e19224e7190a&quot;,&quot;title&quot;:&quot;edgeCollection.traversal&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:633,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows = fabric.edgeCollection(\&quot;knows\&quot;);\nconst person = fabric.collection(\&quot;person\&quot;);\nPromise.all([person.create(), knows.create()])\n    .then(() =&gt; Promise.all([\n    person.import([\n        { _key: \&quot;Alice\&quot; },\n        { _key: \&quot;Bob\&quot; },\n        { _key: \&quot;Charlie\&quot; },\n        { _key: \&quot;Dave\&quot; },\n        { _key: \&quot;Eve\&quot; }\n    ]),\n    knows.import([\n        { _from: \&quot;person/Alice\&quot;, _to: \&quot;person/Bob\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Charlie\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Dave\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Alice\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Bob\&quot; }\n    ])\n]))\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0b455d6-faa8-4468-9348-1a1eede323ea&quot;,&quot;parentUUID&quot;:&quot;3f9e0bc5-df96-47c4-9a5a-e19224e7190a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;executes traversal&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal executes traversal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:131,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows\n    .traversal(\&quot;person/Alice\&quot;, { direction: \&quot;outbound\&quot; })\n    .then((result) =&gt; {\n    chai_1.expect(result).to.have.property(\&quot;visited\&quot;);\n    const visited = result.visited;\n    chai_1.expect(visited).to.have.property(\&quot;vertices\&quot;);\n    const vertices = visited.vertices;\n    chai_1.expect(vertices).to.be.instanceOf(Array);\n    chai_1.expect(vertices.length).to.equal(4);\n    const names = vertices.map((d) =&gt; d._key);\n    for (const name of [\&quot;Alice\&quot;, \&quot;Bob\&quot;, \&quot;Charlie\&quot;, \&quot;Dave\&quot;]) {\n        chai_1.expect(names).to.contain(name);\n    }\n    chai_1.expect(visited).to.have.property(\&quot;paths\&quot;);\n    const paths = visited.paths;\n    chai_1.expect(paths).to.be.instanceOf(Array);\n    chai_1.expect(paths.length).to.equal(4);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9db372a3-dd15-4735-b141-05edcc7f5a8f&quot;,&quot;parentUUID&quot;:&quot;3f9e0bc5-df96-47c4-9a5a-e19224e7190a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9db372a3-dd15-4735-b141-05edcc7f5a8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:131,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f708a05e-599c-4170-a1a3-36f13d855200&quot;,&quot;title&quot;:&quot;edgeCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.replace replaces the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:508,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = { potato: \&quot;tomato\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, {\n        sup: \&quot;dawg\&quot;,\n        _from: \&quot;d/1\&quot;,\n        _to: \&quot;d/2\&quot;\n    });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4aa80a3b-2034-437b-b8b4-7a558e2fae7a&quot;,&quot;parentUUID&quot;:&quot;f708a05e-599c-4170-a1a3-36f13d855200&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4aa80a3b-2034-437b-b8b4-7a558e2fae7a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:508,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a7df2bcc-5965-4ded-910e-a7b09c611100&quot;,&quot;title&quot;:&quot;edgeCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:721,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;empty\&quot;, null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8871a19e-34ee-4357-b947-267ff4c92418&quot;,&quot;parentUUID&quot;:&quot;a7df2bcc-5965-4ded-910e-a7b09c611100&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:616,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5cd7866-1373-4eac-bad2-e5f515bedfbd&quot;,&quot;parentUUID&quot;:&quot;a7df2bcc-5965-4ded-910e-a7b09c611100&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8871a19e-34ee-4357-b947-267ff4c92418&quot;,&quot;d5cd7866-1373-4eac-bad2-e5f515bedfbd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1337,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e227696c-26f0-4f2b-a735-fa1a279a7030&quot;,&quot;title&quot;:&quot;edgeCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7dc44678-48ea-434a-b775-3fc3e1fe756b&quot;,&quot;parentUUID&quot;:&quot;e227696c-26f0-4f2b-a735-fa1a279a7030&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove deletes the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:414,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.edge(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;faadcb08-6512-47f5-8133-821707401335&quot;,&quot;parentUUID&quot;:&quot;e227696c-26f0-4f2b-a735-fa1a279a7030&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;faadcb08-6512-47f5-8133-821707401335&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:414,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4ca6157e-20fa-4ef3-8060-1ac79fff1514&quot;,&quot;title&quot;:&quot;Graph API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:916,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce4378dd-9526-48ef-9222-b99de602bba4&quot;,&quot;parentUUID&quot;:&quot;4ca6157e-20fa-4ef3-8060-1ac79fff1514&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:181,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49a9db9e-ee38-4c1d-bfaa-0eb1d1d76806&quot;,&quot;parentUUID&quot;:&quot;4ca6157e-20fa-4ef3-8060-1ac79fff1514&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0630dd63-4bdf-45c2-875e-1ebe81c07f79&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:722,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4446bcab-0199-4898-80a9-18e2b51248f1&quot;,&quot;parentUUID&quot;:&quot;0630dd63-4bdf-45c2-875e-1ebe81c07f79&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:613,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92759052-0b1d-43e4-a764-8c28b4643c03&quot;,&quot;parentUUID&quot;:&quot;0630dd63-4bdf-45c2-875e-1ebe81c07f79&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get fetches information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c43890a2-05bd-4cb8-919f-399b6f87c1c5&quot;,&quot;parentUUID&quot;:&quot;0630dd63-4bdf-45c2-875e-1ebe81c07f79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c43890a2-05bd-4cb8-919f-399b6f87c1c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:201,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;80e240ba-db5e-4566-8fc5-9e66b569bd9d&quot;,&quot;title&quot;:&quot;graph.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:413,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbbaa9f4-4d61-4000-8041-2bd75913f1d4&quot;,&quot;parentUUID&quot;:&quot;80e240ba-db5e-4566-8fc5-9e66b569bd9d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:408,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric.collection(name).drop()))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45eb47b7-9d79-46b4-9a9e-ab298e89af46&quot;,&quot;parentUUID&quot;:&quot;80e240ba-db5e-4566-8fc5-9e66b569bd9d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create creates the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let graph = fabric.graph(`g${Date.now()}`);\ngraph\n    .create({\n    edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n        collection: name,\n        from: vertexCollectionNames,\n        to: vertexCollectionNames\n    }))\n})\n    .then(() =&gt; graph.get())\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83943649-b9cc-4151-8fc1-0e3d108b1f16&quot;,&quot;parentUUID&quot;:&quot;80e240ba-db5e-4566-8fc5-9e66b569bd9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83943649-b9cc-4151-8fc1-0e3d108b1f16&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:407,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;486f2bf6-8af4-4ea1-b3e7-3202e84fe7da&quot;,&quot;title&quot;:&quot;graph.drop&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:540,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa0f79b1-9904-46e1-a7a4-7d218b87a518&quot;,&quot;parentUUID&quot;:&quot;486f2bf6-8af4-4ea1-b3e7-3202e84fe7da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:536,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric\n    .collection(name)\n    .drop()\n    .catch(() =&gt; null)))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;feb1a18c-5b1c-43a0-bb32-cff05d22b675&quot;,&quot;parentUUID&quot;:&quot;486f2bf6-8af4-4ea1-b3e7-3202e84fe7da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;destroys the graph if not passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop destroys the graph if not passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:562,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6654917-8694-4b79-b51c-c86622a8dbf9&quot;,&quot;parentUUID&quot;:&quot;486f2bf6-8af4-4ea1-b3e7-3202e84fe7da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;additionally drops all of its collections if passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop additionally drops all of its collections if passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:689,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop(true)\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).not.to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1e4995b-cc39-442f-9a66-4d5fa967989f&quot;,&quot;parentUUID&quot;:&quot;486f2bf6-8af4-4ea1-b3e7-3202e84fe7da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6654917-8694-4b79-b51c-c86622a8dbf9&quot;,&quot;b1e4995b-cc39-442f-9a66-4d5fa967989f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1251,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d86d7281-4b2c-4c8e-bb17-ecc2a81af0da&quot;,&quot;title&quot;:&quot;Manipulating graph vertices&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:946,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5010ab59-f6e4-4dad-af90-7cb18c467f80&quot;,&quot;parentUUID&quot;:&quot;d86d7281-4b2c-4c8e-bb17-ecc2a81af0da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:427,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba10ac7f-31d5-40cd-9f82-1a860bcf512f&quot;,&quot;parentUUID&quot;:&quot;d86d7281-4b2c-4c8e-bb17-ecc2a81af0da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6749fa37-dcb6-4d36-bf7d-3b594eb0ec7c&quot;,&quot;parentUUID&quot;:&quot;d86d7281-4b2c-4c8e-bb17-ecc2a81af0da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:813,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa56ac3d-0d4e-4a24-826f-1b8e5bf978cb&quot;,&quot;parentUUID&quot;:&quot;d86d7281-4b2c-4c8e-bb17-ecc2a81af0da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;636bbf1a-58c3-44ec-888c-1b510a67415f&quot;,&quot;title&quot;:&quot;graph.vertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a GraphVertexCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.vertexCollection returns a GraphVertexCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = graph.vertexCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(graph_1.GraphVertexCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca967987-a0a1-4c6b-b382-5606e0653e9c&quot;,&quot;parentUUID&quot;:&quot;636bbf1a-58c3-44ec-888c-1b510a67415f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca967987-a0a1-4c6b-b382-5606e0653e9c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;76685c62-c9e9-4336-8a61-854c303752b8&quot;,&quot;title&quot;:&quot;graph.addVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:182,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`xc${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25dcb458-2ad7-463c-a46b-10e2f887d8be&quot;,&quot;parentUUID&quot;:&quot;76685c62-c9e9-4336-8a61-854c303752b8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:186,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb5ecae5-41e2-4393-b6f6-b26b49905eb3&quot;,&quot;parentUUID&quot;:&quot;76685c62-c9e9-4336-8a61-854c303752b8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds the given vertex collection to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection adds the given vertex collection to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).to.contain(vertexCollection.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: VPack error: Expecting Object (exception location: /c8db/arangod/GeneralServer/RestHandler.cpp:458). Please report this error to arangodb.com&quot;,&quot;estack&quot;:&quot;C8Error: VPack error: Expecting Object (exception location: /c8db/arangod/GeneralServer/RestHandler.cpp:458). Please report this error to arangodb.com\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;5388c692-81bf-4e11-8686-d7b20810c4ce&quot;,&quot;parentUUID&quot;:&quot;76685c62-c9e9-4336-8a61-854c303752b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;5388c692-81bf-4e11-8686-d7b20810c4ce&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:115,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c91ca6f5-2840-4741-8df6-aee151ebd873&quot;,&quot;title&quot;:&quot;graph.removeVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;removes the given vertex collection from the graph\&quot;&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection \&quot;before each\&quot; hook for \&quot;removes the given vertex collection from the graph\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:349,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`xc${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; graph.addVertexCollection(vertexCollection.name))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: VPack error: Expecting Object (exception location: /c8db/arangod/GeneralServer/RestHandler.cpp:458). Please report this error to arangodb.com&quot;,&quot;estack&quot;:&quot;C8Error: VPack error: Expecting Object (exception location: /c8db/arangod/GeneralServer/RestHandler.cpp:458). Please report this error to arangodb.com\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;5d3ab4c3-2273-4be3-a3b4-c2622c73fd78&quot;,&quot;parentUUID&quot;:&quot;c91ca6f5-2840-4741-8df6-aee151ebd873&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes the given vertex collection from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection removes the given vertex collection from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f83583e4-06ed-4890-a6ce-b5879606f052&quot;,&quot;parentUUID&quot;:&quot;c91ca6f5-2840-4741-8df6-aee151ebd873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;destroys the collection if explicitly passed true&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection destroys the collection if explicitly passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name, true)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), err =&gt; {\n    chai_1.expect(err).to.be.an.instanceof(error_1.C8Error);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4c97e84-8c23-4b03-95c2-2dee0f02970f&quot;,&quot;parentUUID&quot;:&quot;c91ca6f5-2840-4741-8df6-aee151ebd873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;f83583e4-06ed-4890-a6ce-b5879606f052&quot;,&quot;e4c97e84-8c23-4b03-95c2-2dee0f02970f&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;4c00a2be-d115-4791-ad61-1497393c1508&quot;,&quot;title&quot;:&quot;Manipulating graph edges&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1076,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42a04759-200f-407d-bc29-77cb46516f3e&quot;,&quot;parentUUID&quot;:&quot;4c00a2be-d115-4791-ad61-1497393c1508&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(graphName);\ngraph\n    .create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b92527f3-4152-4001-bb40-f01cbdef4fb6&quot;,&quot;parentUUID&quot;:&quot;4c00a2be-d115-4791-ad61-1497393c1508&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:549,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0cacf16-f0ca-48ad-8d53-2445f9115aa2&quot;,&quot;parentUUID&quot;:&quot;4c00a2be-d115-4791-ad61-1497393c1508&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;700cfe60-a5c0-41e1-8ff1-5b27b652bbea&quot;,&quot;parentUUID&quot;:&quot;4c00a2be-d115-4791-ad61-1497393c1508&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f340b03c-7e10-48d2-8589-a61469b77970&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.get should return information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ad721f7-59a0-40b3-b4dc-744e2d2a432a&quot;,&quot;parentUUID&quot;:&quot;f340b03c-7e10-48d2-8589-a61469b77970&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ad721f7-59a0-40b3-b4dc-744e2d2a432a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:206,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f357db95-4eed-484e-bb72-02d53054ae5f&quot;,&quot;title&quot;:&quot;graph.edgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.edgeCollections should contain edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .edgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info.map((c) =&gt; c.name)).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;313a1ea4-7e0b-40e9-998d-6ec300bbdf7a&quot;,&quot;parentUUID&quot;:&quot;f357db95-4eed-484e-bb72-02d53054ae5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;313a1ea4-7e0b-40e9-998d-6ec300bbdf7a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:206,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;136b94d4-9491-48f9-be41-56ee3c02a4e8&quot;,&quot;title&quot;:&quot;graph.listEdgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all edge collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listEdgeCollections should return all edge collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listEdgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d07a337e-7b25-404b-a054-8ecd3b3334bf&quot;,&quot;parentUUID&quot;:&quot;136b94d4-9491-48f9-be41-56ee3c02a4e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d07a337e-7b25-404b-a054-8ecd3b3334bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:206,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e3c3c735-f11a-4f04-ad07-921a21a8cbff&quot;,&quot;title&quot;:&quot;graph.listVertexCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all vertex collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listVertexCollections should return all vertex collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listVertexCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7ade0e0-6e4a-45fe-979b-6fb515f3a33a&quot;,&quot;parentUUID&quot;:&quot;e3c3c735-f11a-4f04-ad07-921a21a8cbff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7ade0e0-6e4a-45fe-979b-6fb515f3a33a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:204,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;019a88cd-459b-460e-be2e-4033a666bd72&quot;,&quot;title&quot;:&quot;graph.addEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add an edgeDefinition to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.addEdgeDefinition should add an edgeDefinition to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:209,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addEdgeDefinition({\n    collection: \&quot;works_in\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(2);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;works_in\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;works_in\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62a1b438-d056-4620-bc9d-83ce07b9a210&quot;,&quot;parentUUID&quot;:&quot;019a88cd-459b-460e-be2e-4033a666bd72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;62a1b438-d056-4620-bc9d-83ce07b9a210&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:209,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;07c34a09-9c1c-4906-b66a-837b41cdd732&quot;,&quot;title&quot;:&quot;graph.replaceEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should replace an existing edgeDefinition in the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.replaceEdgeDefinition should replace an existing edgeDefinition in the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .replaceEdgeDefinition(\&quot;knows\&quot;, {\n    collection: \&quot;knows\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48a12eb9-2f24-46e2-9c0c-86247f4c2205&quot;,&quot;parentUUID&quot;:&quot;07c34a09-9c1c-4906-b66a-837b41cdd732&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48a12eb9-2f24-46e2-9c0c-86247f4c2205&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:206,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;fad050d8-8c9e-4e16-a3b2-840354216481&quot;,&quot;title&quot;:&quot;graph.removeEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove an edgeDefinition from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.removeEdgeDefinition should remove an edgeDefinition from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeEdgeDefinition(\&quot;knows\&quot;)\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a593ebb-f875-4e00-9594-0d92f16e444b&quot;,&quot;parentUUID&quot;:&quot;fad050d8-8c9e-4e16-a3b2-840354216481&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a593ebb-f875-4e00-9594-0d92f16e444b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:205,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2b0c13e3-074c-41b5-8500-7b50c072d360&quot;,&quot;title&quot;:&quot;GraphVertexCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1086,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\nconst graph = fabric.graph(`testgraph${Date.now()}`);\nawait graph.create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n});\ncollection = graph.vertexCollection(\&quot;person\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fdb753e-5456-4bc9-b11a-f3ef5da35fd2&quot;,&quot;parentUUID&quot;:&quot;2b0c13e3-074c-41b5-8500-7b50c072d360&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .truncate()\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54508abf-07c6-43fe-9da1-d6d2253c5d63&quot;,&quot;parentUUID&quot;:&quot;2b0c13e3-074c-41b5-8500-7b50c072d360&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99f80cdc-bcf0-4245-9cad-bb89c5d518bb&quot;,&quot;parentUUID&quot;:&quot;2b0c13e3-074c-41b5-8500-7b50c072d360&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cb74f3ec-4f61-4c21-8ed0-a5ba5d0a2691&quot;,&quot;title&quot;:&quot;graphVertexCollection.vertex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;returns a vertex in the collection\&quot;&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex \&quot;before each\&quot; hook for \&quot;returns a vertex in the collection\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:133,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;a41100b5-b2fa-4013-9636-9f0c01b04dc4&quot;,&quot;parentUUID&quot;:&quot;cb74f3ec-4f61-4c21-8ed0-a5ba5d0a2691&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3262f614-5be3-429f-ab16-f4a1432ebd3f&quot;,&quot;parentUUID&quot;:&quot;cb74f3ec-4f61-4c21-8ed0-a5ba5d0a2691&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb9b35f6-0782-4d7b-8f90-c5505727f080&quot;,&quot;parentUUID&quot;:&quot;cb74f3ec-4f61-4c21-8ed0-a5ba5d0a2691&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;3262f614-5be3-429f-ab16-f4a1432ebd3f&quot;,&quot;fb9b35f6-0782-4d7b-8f90-c5505727f080&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1438db12-3186-42bb-9a23-5a10c4e24539&quot;,&quot;title&quot;:&quot;graphVertexCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;returns a vertex in the collection\&quot;&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document \&quot;before each\&quot; hook for \&quot;returns a vertex in the collection\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;1cf0a470-e2c0-45e2-a270-cea82f41b763&quot;,&quot;parentUUID&quot;:&quot;1438db12-3186-42bb-9a23-5a10c4e24539&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba3a005f-53f9-473a-825e-b5487bc2afad&quot;,&quot;parentUUID&quot;:&quot;1438db12-3186-42bb-9a23-5a10c4e24539&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f9a13de-e43b-4ea6-8264-b36b5459039f&quot;,&quot;parentUUID&quot;:&quot;1438db12-3186-42bb-9a23-5a10c4e24539&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;ba3a005f-53f9-473a-825e-b5487bc2afad&quot;,&quot;6f9a13de-e43b-4ea6-8264-b36b5459039f&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e0b11d4b-7aae-488e-bd52-3efa8a23c096&quot;,&quot;title&quot;:&quot;graphVertexCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save creates a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;6f77b5f8-1ce7-420a-a6ee-c30424a07a83&quot;,&quot;parentUUID&quot;:&quot;e0b11d4b-7aae-488e-bd52-3efa8a23c096&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;7313efeb-6556-481d-bfb9-d888b92d50b3&quot;,&quot;parentUUID&quot;:&quot;e0b11d4b-7aae-488e-bd52-3efa8a23c096&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;6f77b5f8-1ce7-420a-a6ee-c30424a07a83&quot;,&quot;7313efeb-6556-481d-bfb9-d888b92d50b3&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:411,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a36f1aa2-cb9c-4b5a-ba7e-2e925093d364&quot;,&quot;title&quot;:&quot;graphVertexCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.replace replaces the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;20fb560a-5d25-4ab5-8f8b-4aea28d79b41&quot;,&quot;parentUUID&quot;:&quot;a36f1aa2-cb9c-4b5a-ba7e-2e925093d364&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;20fb560a-5d25-4ab5-8f8b-4aea28d79b41&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:208,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;39899d27-b5af-4902-a081-fdf419a23f93&quot;,&quot;title&quot;:&quot;graphVertexCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update updates the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:211,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;3a300311-8332-4e93-8d39-cf2cb85f674c&quot;,&quot;parentUUID&quot;:&quot;39899d27-b5af-4902-a081-fdf419a23f93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;fcf52ea6-1121-4fa8-b430-946355c48baf&quot;,&quot;parentUUID&quot;:&quot;39899d27-b5af-4902-a081-fdf419a23f93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;3a300311-8332-4e93-8d39-cf2cb85f674c&quot;,&quot;fcf52ea6-1121-4fa8-b430-946355c48baf&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:406,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a7f5ac4c-a6b8-4291-b17c-27e51bd23e2b&quot;,&quot;title&quot;:&quot;graphVertexCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;deletes the given vertex\&quot;&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove \&quot;before each\&quot; hook for \&quot;deletes the given vertex\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:209,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;&quot;,&quot;estack&quot;:&quot;C8Error: unknown path &#x27;/_fabric/testdb1582178587521/graph/testgraph1582178754059/vertex/person&#x27;\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;61be910a-71d3-4cef-b4ba-7b92d6a85deb&quot;,&quot;parentUUID&quot;:&quot;a7f5ac4c-a6b8-4291-b17c-27e51bd23e2b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove deletes the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.vertex(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ed6a809-89ce-49a7-941c-d8854e3feff3&quot;,&quot;parentUUID&quot;:&quot;a7f5ac4c-a6b8-4291-b17c-27e51bd23e2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;0ed6a809-89ce-49a7-941c-d8854e3feff3&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9fd2c706-d7fc-46c0-a75d-168b97da189e&quot;,&quot;title&quot;:&quot;Join Path&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/21-util-joinpath.js&quot;,&quot;file&quot;:&quot;/lib/async/test/21-util-joinpath.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;joinPath 1&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;../../u1/u2\&quot;;\nvar path = \&quot;/security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;../../u1/u2/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8df435e3-8b88-471b-92f5-82e45db9df4c&quot;,&quot;parentUUID&quot;:&quot;9fd2c706-d7fc-46c0-a75d-168b97da189e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 2&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/u1/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97ccf409-6398-4b74-9e89-233e658e1f66&quot;,&quot;parentUUID&quot;:&quot;9fd2c706-d7fc-46c0-a75d-168b97da189e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 3&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d39709e-83b1-4f83-bd18-93eb5ec1f3cf&quot;,&quot;parentUUID&quot;:&quot;9fd2c706-d7fc-46c0-a75d-168b97da189e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8df435e3-8b88-471b-92f5-82e45db9df4c&quot;,&quot;97ccf409-6398-4b74-9e89-233e658e1f66&quot;,&quot;3d39709e-83b1-4f83-bd18-93eb5ec1f3cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;678829c8-58e7-4866-9cf9-b8b7959e89b9&quot;,&quot;title&quot;:&quot;Helper.getFullStreamPath&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output when there is no extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is no extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;707c11fe-483f-4b12-8cf3-7bc3a9b638dc&quot;,&quot;parentUUID&quot;:&quot;678829c8-58e7-4866-9cf9-b8b7959e89b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns correct output when there is extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;, \&quot;/compaction\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog/compaction\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4ccd7eb-5290-4456-aac9-e54eeef82c46&quot;,&quot;parentUUID&quot;:&quot;678829c8-58e7-4866-9cf9-b8b7959e89b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;707c11fe-483f-4b12-8cf3-7bc3a9b638dc&quot;,&quot;d4ccd7eb-5290-4456-aac9-e54eeef82c46&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;fa3338b1-ac68-404b-9765-b101ae338aad&quot;,&quot;title&quot;:&quot;Helper.getDCListString&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output&quot;,&quot;fullTitle&quot;:&quot;Helper.getDCListString returns correct output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(helper_1.getDCListString(response)).to.equal(&#x27;dev-ap-southeast-1,dev-ap-southeast-2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61d2acfe-224d-4ff3-8c2f-f968bb0740e2&quot;,&quot;parentUUID&quot;:&quot;fa3338b1-ac68-404b-9765-b101ae338aad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61d2acfe-224d-4ff3-8c2f-f968bb0740e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;681140ec-f698-4c8d-9929-0bba79daade1&quot;,&quot;title&quot;:&quot;C8QL Stream queries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1122,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45627a98-04ff-48a9-87da-e8acb989514e&quot;,&quot;parentUUID&quot;:&quot;681140ec-f698-4c8d-9929-0bba79daade1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:170,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc2e307c-0147-4626-9ec4-ff9147c1a242&quot;,&quot;parentUUID&quot;:&quot;681140ec-f698-4c8d-9929-0bba79daade1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d82815bb-752b-4c91-b723-fcc7fe7c70f0&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;, {}, { options: { stream: true } })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;353d4e69-2752-4380-91f1-39a7ea892d68&quot;,&quot;parentUUID&quot;:&quot;d82815bb-752b-4c91-b723-fcc7fe7c70f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 }, { options: { stream: true } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b51d825e-106a-4074-913f-e4043f1183c5&quot;,&quot;parentUUID&quot;:&quot;d82815bb-752b-4c91-b723-fcc7fe7c70f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, undefined, {\n    batchSize: 2,\n    count: true,\n    options: { stream: true }\n})\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to equal 10&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to equal 10\n    at fabric.query.then.cursor (src/test/23-c8ql-queries-stream.ts:69:35)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;b22e6abc-1f1f-49bf-8f06-af879f066ab0&quot;,&quot;parentUUID&quot;:&quot;d82815bb-752b-4c91-b723-fcc7fe7c70f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true, options: { stream: true } })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to equal 10&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to equal 10\n    at fabric.query.then.cursor (src/test/23-c8ql-queries-stream.ts:83:35)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;2d194654-23fd-4d6a-8119-8b36139c91a1&quot;,&quot;parentUUID&quot;:&quot;d82815bb-752b-4c91-b723-fcc7fe7c70f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;353d4e69-2752-4380-91f1-39a7ea892d68&quot;,&quot;b51d825e-106a-4074-913f-e4043f1183c5&quot;],&quot;failures&quot;:[&quot;b22e6abc-1f1f-49bf-8f06-af879f066ab0&quot;,&quot;2d194654-23fd-4d6a-8119-8b36139c91a1&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:806,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;81c4fa98-139e-4908-9c62-28ef27c7ce3d&quot;,&quot;title&quot;:&quot;with some data&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;can do writes and reads&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries with some data can do writes and reads&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let collection = fabric.collection(cname);\nlet readQ = jsC8_1.c8ql `FOR doc in ${collection} RETURN doc`;\nlet writeQ = jsC8_1.c8ql `FOR i in 1..1000 LET y = SLEEP(1) INSERT {forbidden: i} INTO ${collection}`;\nconst opts = { batchSize: 500, ttl: 5, options: { stream: true } };\n// 900s lock timeout + 5s ttl\nlet readCursor = fabric.query(readQ, opts);\nlet writeCursor = fabric.query(writeQ, opts);\n// the read cursor should always win\nPromise.race([readCursor, writeCursor])\n    .then(c =&gt; {\n    // therefore no document should have been written here\n    return c.every((d) =&gt; !d.hasOwnProperty(\&quot;forbidden\&quot;));\n})\n    .then(isOk =&gt; {\n    chai_1.expect(isOk).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: collection or view not found: name: MyTestCollection&quot;,&quot;estack&quot;:&quot;C8Error: collection or view not found: name: MyTestCollection\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;830291b0-8f6b-4572-b529-2fe5e7dd71ca&quot;,&quot;parentUUID&quot;:&quot;81c4fa98-139e-4908-9c62-28ef27c7ce3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;830291b0-8f6b-4572-b529-2fe5e7dd71ca&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:205,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;d11dbbc8-eb5a-4789-b6ed-96a4567fcf45&quot;,&quot;title&quot;:&quot;Manipulating streams&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:646,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c03d998-1d4a-4642-905d-dd1a531b9a97&quot;,&quot;parentUUID&quot;:&quot;d11dbbc8-eb5a-4789-b6ed-96a4567fcf45&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bce558e-5745-4c2a-a8c3-a24e18714ba7&quot;,&quot;parentUUID&quot;:&quot;d11dbbc8-eb5a-4789-b6ed-96a4567fcf45&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;213f6fe9-8ebd-4dda-b5a3-db3cf1a5c6e7&quot;,&quot;title&quot;:&quot;fabric.stream&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a new Stream instance&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream returns a new Stream instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.stream(\&quot;testStream\&quot;, true)).to.be.instanceof(stream_1.Stream);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b86d8e2-0ca9-44fc-9990-6788b119b7f3&quot;,&quot;parentUUID&quot;:&quot;213f6fe9-8ebd-4dda-b5a3-db3cf1a5c6e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets all streams&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream gets all streams&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getStreams();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59e6540b-503b-4929-9ec1-19778dc0cd06&quot;,&quot;parentUUID&quot;:&quot;213f6fe9-8ebd-4dda-b5a3-db3cf1a5c6e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;clears backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.clearBacklog();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2c5621a-958d-42aa-a55b-148b2daf66d2&quot;,&quot;parentUUID&quot;:&quot;213f6fe9-8ebd-4dda-b5a3-db3cf1a5c6e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;clears subscription backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears subscription backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7adec9d-b015-4066-8f16-f8d7ff11f0c9&quot;,&quot;parentUUID&quot;:&quot;213f6fe9-8ebd-4dda-b5a3-db3cf1a5c6e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unsubscribes to a subscription&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream unsubscribes to a subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af11b6e7-cfd1-48f3-9d73-27518e0514fb&quot;,&quot;parentUUID&quot;:&quot;213f6fe9-8ebd-4dda-b5a3-db3cf1a5c6e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b86d8e2-0ca9-44fc-9990-6788b119b7f3&quot;,&quot;59e6540b-503b-4929-9ec1-19778dc0cd06&quot;,&quot;b2c5621a-958d-42aa-a55b-148b2daf66d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;d7adec9d-b015-4066-8f16-f8d7ff11f0c9&quot;,&quot;af11b6e7-cfd1-48f3-9d73-27518e0514fb&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:404,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;061b83e6-c0e2-44de-8df9-72d145b05de7&quot;,&quot;title&quot;:&quot;stream.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;58dc8049-6e75-4333-8afa-2eb3fc8ba5b7&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:132,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, true);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d0210bb-c474-4f4a-bd08-9e6ea6e3b1b6&quot;,&quot;parentUUID&quot;:&quot;58dc8049-6e75-4333-8afa-2eb3fc8ba5b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, false);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b703ca5c-2d2d-483e-8329-1d333cb7ee8f&quot;,&quot;parentUUID&quot;:&quot;58dc8049-6e75-4333-8afa-2eb3fc8ba5b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d0210bb-c474-4f4a-bd08-9e6ea6e3b1b6&quot;,&quot;b703ca5c-2d2d-483e-8329-1d333cb7ee8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:306,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;740a2626-5e1a-4213-b220-522e9405e0ad&quot;,&quot;title&quot;:&quot;stream.manipulate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream = fabric.stream(`testStream${Date.now()}`, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;345963d5-15ce-4eba-bc9a-c43b3d7fb6c1&quot;,&quot;parentUUID&quot;:&quot;740a2626-5e1a-4213-b220-522e9405e0ad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82a6dced-67f1-4c23-a12b-059831b6879c&quot;,&quot;parentUUID&quot;:&quot;740a2626-5e1a-4213-b220-522e9405e0ad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60bb75a4-eab8-42be-80c7-7065deeaf8a1&quot;,&quot;parentUUID&quot;:&quot;740a2626-5e1a-4213-b220-522e9405e0ad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.expireMessagesOnAllSubscriptions&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.expireMessagesOnAllSubscriptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc05da0a-8c31-4f8c-8fa7-8ebd380340be&quot;,&quot;parentUUID&quot;:&quot;740a2626-5e1a-4213-b220-522e9405e0ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3f4b4d95-ecd8-4ec9-b3a3-38a449b7297d&quot;,&quot;title&quot;:&quot;stream.getBacklog&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets estimated backlog for offline stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getBacklog gets estimated backlog for offline stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.backlog();\nconsole.log(response.error);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eec170fb-7585-4bfd-9b95-889e0ce07c47&quot;,&quot;parentUUID&quot;:&quot;3f4b4d95-ecd8-4ec9-b3a3-38a449b7297d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eec170fb-7585-4bfd-9b95-889e0ce07c47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:307,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;dd292220-ba0c-43d0-a0b6-4eeec011c34a&quot;,&quot;title&quot;:&quot;stream.getStreamStatistics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets the stream statistics&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getStreamStatistics gets the stream statistics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getStreamStatistics();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cc8f532-3ebe-4d58-a403-52c5bae272e4&quot;,&quot;parentUUID&quot;:&quot;dd292220-ba0c-43d0-a0b6-4eeec011c34a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cc8f532-3ebe-4d58-a403-52c5bae272e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:205,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;aefa244e-fe88-4e10-9d09-1dd65441bec6&quot;,&quot;title&quot;:&quot;stream.subscriptions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.resetSubscriptionToPosition&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetSubscriptionToPosition&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1640,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let numberOfMessages = 0;\nfunction callback(msg) {\n    const parsedMsg = JSON.parse(msg);\n    const { payload } = parsedMsg;\n    const array = [\&quot;bmFuZGhh\&quot;, \&quot;YWJoaXNoZWs=\&quot;, \&quot;dmlwdWw=\&quot;, \&quot;c3Vsb20=\&quot;, \&quot;cHJhdGlr\&quot;];\n    if (array.includes(payload)) {\n        numberOfMessages++;\n    }\n    ;\n    if (numberOfMessages === 5) {\n        done();\n    }\n}\nstream.consumer(`streamSubscriptionTest`, {\n    onmessage: callback,\n    onopen: () =&gt; {\n        stream.producer([\&quot;nandha\&quot;, \&quot;abhishek\&quot;, \&quot;vipul\&quot;, \&quot;sulom\&quot;, \&quot;pratik\&quot;], dcName);\n    }\n}, dcName);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: done() called multiple times&quot;,&quot;estack&quot;:&quot;Error: done() called multiple times\n    at callback (src/test/28-manipulating-streams.ts:103:13)\n    at WebSocket.consumer.on (src/stream.ts:247:21)\n    at Receiver.receiverOnMessage (node_modules/ws/lib/websocket.js:719:20)\n    at Receiver.dataMessage (node_modules/ws/lib/receiver.js:414:14)\n    at perMessageDeflate.decompress (node_modules/ws/lib/receiver.js:371:23)\n    at _decompress (node_modules/ws/lib/permessage-deflate.js:307:9)\n    at _inflate.flush (node_modules/ws/lib/permessage-deflate.js:389:7)\n    at afterWrite (_stream_writable.js:485:3)\n    at onwrite (_stream_writable.js:476:7)\n    at InflateRaw.afterTransform (_stream_transform.js:94:3)\n    at Zlib.processCallback (zlib.js:557:8)&quot;},&quot;uuid&quot;:&quot;3f588a52-8b64-48b9-9c5f-ab99a26d0f70&quot;,&quot;parentUUID&quot;:&quot;aefa244e-fe88-4e10-9d09-1dd65441bec6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.expireMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.expireMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11ac0817-2368-4c68-9fe8-b24adfdb3ef3&quot;,&quot;parentUUID&quot;:&quot;aefa244e-fe88-4e10-9d09-1dd65441bec6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.resetCursor&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetCursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b30ca72-cb85-41c4-8279-a2aa4cb11a3c&quot;,&quot;parentUUID&quot;:&quot;aefa244e-fe88-4e10-9d09-1dd65441bec6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.skipNumberOfMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipNumberOfMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4334e01-a41a-4b08-8163-c152587e4d0e&quot;,&quot;parentUUID&quot;:&quot;aefa244e-fe88-4e10-9d09-1dd65441bec6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.skipAllMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipAllMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd519dc7-986c-4f52-ae12-4c3f1ae925a3&quot;,&quot;parentUUID&quot;:&quot;aefa244e-fe88-4e10-9d09-1dd65441bec6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.getSubscriptionList&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.getSubscriptionList&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;it(\&quot;gets subscription list\&quot;, async () =&gt; {\n    const response = await stream.getSubscriptionList();\n    chai_1.expect(response.error).to.be.false;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccecb943-8299-4afc-9608-a0b33fa8b457&quot;,&quot;parentUUID&quot;:&quot;aefa244e-fe88-4e10-9d09-1dd65441bec6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11ac0817-2368-4c68-9fe8-b24adfdb3ef3&quot;,&quot;5b30ca72-cb85-41c4-8279-a2aa4cb11a3c&quot;,&quot;b4334e01-a41a-4b08-8163-c152587e4d0e&quot;,&quot;dd519dc7-986c-4f52-ae12-4c3f1ae925a3&quot;,&quot;ccecb943-8299-4afc-9608-a0b33fa8b457&quot;],&quot;failures&quot;:[&quot;3f588a52-8b64-48b9-9c5f-ab99a26d0f70&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1640,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;607d04c9-0ec8-4d2d-8f47-df50374aa66c&quot;,&quot;title&quot;:&quot;stream.terminate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2eec7f21-d333-488e-81db-c9fd8a97b997&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ec55b0e7-ba55-4aa2-aef5-dbc07a3657bf&quot;,&quot;title&quot;:&quot;local&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, true);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98dc8e4a-2057-4b40-9a4b-836c60307048&quot;,&quot;parentUUID&quot;:&quot;ec55b0e7-ba55-4aa2-aef5-dbc07a3657bf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local terminates persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:173,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.terminateStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: C8Streams error 404&quot;,&quot;estack&quot;:&quot;C8Error: C8Streams error 404\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;ed05c69e-9e0e-4a69-9da8-00690c8d914e&quot;,&quot;parentUUID&quot;:&quot;ec55b0e7-ba55-4aa2-aef5-dbc07a3657bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;ed05c69e-9e0e-4a69-9da8-00690c8d914e&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:173,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;c2882d17-9806-47ee-b28c-de96a7e6e260&quot;,&quot;title&quot;:&quot;global&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06bfcf1c-607d-4b8b-a311-f6de82b48b8c&quot;,&quot;parentUUID&quot;:&quot;c2882d17-9806-47ee-b28c-de96a7e6e260&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global terminates persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.terminateStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fac7d40-2bbd-4943-81c4-43c4a72edff8&quot;,&quot;parentUUID&quot;:&quot;c2882d17-9806-47ee-b28c-de96a7e6e260&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6fac7d40-2bbd-4943-81c4-43c4a72edff8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:141,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;586d24c7-3ac8-414a-a34c-bebb56690c07&quot;,&quot;title&quot;:&quot;stream.websocket&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e650de5b-ea82-4a60-9c89-43218b45283d&quot;,&quot;parentUUID&quot;:&quot;586d24c7-3ac8-414a-a34c-bebb56690c07&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2204cf3f-2e40-475b-bac6-0b8aa393fdea&quot;,&quot;parentUUID&quot;:&quot;586d24c7-3ac8-414a-a34c-bebb56690c07&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets data in consumer when sent by producer&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket gets data in consumer when sent by producer&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:879,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;function callback(msg) {\n    const parsedMsg = JSON.parse(msg);\n    const { payload } = parsedMsg;\n    chai_1.expect(payload).to.equal(\&quot;dGVzdA==\&quot;);\n    done();\n}\nstream.consumer(`streamSubscription${Date.now()}`, {\n    onmessage: callback,\n    onopen: () =&gt; stream.producer(\&quot;test\&quot;, dcName)\n}, dcName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89286b66-ba8d-47d7-a281-6dcc6c6f5896&quot;,&quot;parentUUID&quot;:&quot;586d24c7-3ac8-414a-a34c-bebb56690c07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89286b66-ba8d-47d7-a281-6dcc6c6f5896&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:879,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;bc05da0a-8c31-4f8c-8fa7-8ebd380340be&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;22dadd4f-b11f-4109-8780-3fa72324fdb7&quot;,&quot;title&quot;:&quot;manipulating spot&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:909,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nlocalLocation = await fabric.getLocalEdgeLocation();\nname = localLocation.name;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19624f1b-4378-4c08-8e04-35ae33eb7dab&quot;,&quot;parentUUID&quot;:&quot;22dadd4f-b11f-4109-8780-3fa72324fdb7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa5ac09a-879a-4039-aaf0-25e8f02c7a8f&quot;,&quot;parentUUID&quot;:&quot;22dadd4f-b11f-4109-8780-3fa72324fdb7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c1fd65a6-3b87-485d-b035-07c748f78c44&quot;,&quot;title&quot;:&quot;spot_region status of a region&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should change the spot_region of a region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot_region status of a region should change the spot_region of a region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const currentSpotStatus = localLocation.spot_region;\nawait fabric.changeEdgeLocationSpotStatus(name, !currentSpotStatus);\nconst changedLocation = await fabric.getLocalEdgeLocation();\nconst changedSpotStatus = changedLocation.spot_region;\nchai_1.expect(changedLocation).to.equal(!changedSpotStatus);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_id, _key, ...) } to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_id, _key, ...) } to equal true\n    at Context.it (src/test/29-manipulating-spot.ts:35:34)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;d380f86a-90c0-4276-9b7b-07d4b1f28558&quot;,&quot;parentUUID&quot;:&quot;c1fd65a6-3b87-485d-b035-07c748f78c44&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not change the spot_region to false if a fabric&#x27;s spot primary is that region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot_region status of a region should not change the spot_region to false if a fabric&#x27;s spot primary is that region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9472d828-3ea8-4c83-88b8-54b07c1fc1d6&quot;,&quot;parentUUID&quot;:&quot;c1fd65a6-3b87-485d-b035-07c748f78c44&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;d380f86a-90c0-4276-9b7b-07d4b1f28558&quot;],&quot;pending&quot;:[&quot;9472d828-3ea8-4c83-88b8-54b07c1fc1d6&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:407,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;e3ca6022-efec-4651-b9a7-2bf681acb5bd&quot;,&quot;title&quot;:&quot;spot fabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.dropFabric(fabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2a060d0-4221-4239-912d-ba4c785fcc5a&quot;,&quot;parentUUID&quot;:&quot;e3ca6022-efec-4651-b9a7-2bf681acb5bd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fabric with a spot primary region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric should create a fabric with a spot primary region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:398,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.changeEdgeLocationSpotStatus(name, true);\nconst options = {\n    dcList: name,\n    spotDc: name\n};\nconst response = await fabric.createFabric(fabricName, undefined, options);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cdaff74-3888-426c-97b8-38e229a94e8c&quot;,&quot;parentUUID&quot;:&quot;e3ca6022-efec-4651-b9a7-2bf681acb5bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should change the spot primary region of a fabric&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric should change the spot primary region of a fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5c9ef18-6be2-4445-83d5-743707e2ebc9&quot;,&quot;parentUUID&quot;:&quot;e3ca6022-efec-4651-b9a7-2bf681acb5bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9cdaff74-3888-426c-97b8-38e229a94e8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;c5c9ef18-6be2-4445-83d5-743707e2ebc9&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:398,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1dfce40a-98c5-4f55-b521-ab3dc864ae3c&quot;,&quot;title&quot;:&quot;spot collection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a spot document collection&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection should create a spot document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e178747e-64ec-4ff9-9e6c-e34a99b32ca6&quot;,&quot;parentUUID&quot;:&quot;1dfce40a-98c5-4f55-b521-ab3dc864ae3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a spot edge collection&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection should create a spot edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;826e5c7c-45d0-4042-806e-46bec2e95711&quot;,&quot;parentUUID&quot;:&quot;1dfce40a-98c5-4f55-b521-ab3dc864ae3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f63d079a-71d0-44d4-8ddb-eeb9dd8db027&quot;,&quot;title&quot;:&quot;mapulating spot collection&#x27;s region&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should change the spot region of a spot collection to none&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection mapulating spot collection&#x27;s region should change the spot region of a spot collection to none&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e131250-d02b-4555-b40f-3f1f050aafc6&quot;,&quot;parentUUID&quot;:&quot;f63d079a-71d0-44d4-8ddb-eeb9dd8db027&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should change the spot region of a spot collection to some other region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection mapulating spot collection&#x27;s region should change the spot region of a spot collection to some other region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;408b7800-07f3-4e0e-9ee3-c122d9d0af06&quot;,&quot;parentUUID&quot;:&quot;f63d079a-71d0-44d4-8ddb-eeb9dd8db027&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;2e131250-d02b-4555-b40f-3f1f050aafc6&quot;,&quot;408b7800-07f3-4e0e-9ee3-c122d9d0af06&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;e178747e-64ec-4ff9-9e6c-e34a99b32ca6&quot;,&quot;826e5c7c-45d0-4042-806e-46bec2e95711&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;2a91103f-ec86-41ad-a153-2a196d1ca307&quot;,&quot;title&quot;:&quot;User Management&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:820,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f882d971-14b3-4694-8f83-ba1b91c17f92&quot;,&quot;parentUUID&quot;:&quot;2a91103f-ec86-41ad-a153-2a196d1ca307&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15c0be09-b444-4bfa-95d2-9b2d7c03cc95&quot;,&quot;parentUUID&quot;:&quot;2a91103f-ec86-41ad-a153-2a196d1ca307&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3c3dfc27-e159-4167-9cf9-061edfe7415c&quot;,&quot;title&quot;:&quot;fabric.user&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new user instance&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.user creates a new user instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.user(\&quot;testUser\&quot;, \&quot;testUser@test.com\&quot;)).to.be.instanceof(user_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d4d0cdd-ecc3-430f-a1e9-e3d057b00d6b&quot;,&quot;parentUUID&quot;:&quot;3c3dfc27-e159-4167-9cf9-061edfe7415c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d4d0cdd-ecc3-430f-a1e9-e3d057b00d6b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;4ead8b8d-d1a8-4f03-a750-7e12268e119c&quot;,&quot;title&quot;:&quot;user.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await user.deleteUser();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7161781c-0a10-4deb-9f02-3d281bc79269&quot;,&quot;parentUUID&quot;:&quot;4ead8b8d-d1a8-4f03-a750-7e12268e119c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.create creates a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:194,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nconst response = await user.createUser(\&quot;testPass\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85f35920-2546-408a-8c15-696e3ced9ab3&quot;,&quot;parentUUID&quot;:&quot;4ead8b8d-d1a8-4f03-a750-7e12268e119c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;85f35920-2546-408a-8c15-696e3ced9ab3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:194,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;08475781-2c38-4bcc-9932-606b1cf122bf&quot;,&quot;title&quot;:&quot;fabric.getAllUsers&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists all users&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.getAllUsers Lists all users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllUsers();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6064ebf-d29a-4c97-ae71-77cc2ce2a4ac&quot;,&quot;parentUUID&quot;:&quot;08475781-2c38-4bcc-9932-606b1cf122bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b6064ebf-d29a-4c97-ae71-77cc2ce2a4ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:204,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;5eb6f7bc-09be-422c-9055-8c32661786ce&quot;,&quot;title&quot;:&quot;user.crud_operations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nawait user.createUser(\&quot;testPass\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f8c94f4-6b08-41e4-9f84-0931016169d5&quot;,&quot;parentUUID&quot;:&quot;5eb6f7bc-09be-422c-9055-8c32661786ce&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await user.deleteUser();\n}\ncatch (error) { }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;395ee28e-c604-43ac-a3c3-a95305ceb8a6&quot;,&quot;parentUUID&quot;:&quot;5eb6f7bc-09be-422c-9055-8c32661786ce&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f64bb89f-1069-49de-a0d1-f95a0c72af33&quot;,&quot;title&quot;:&quot;user.deleteUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Deletes a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.deleteUser Deletes a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.deleteUser();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fadb7ce-2b20-4297-af3c-2ac0f2fa048a&quot;,&quot;parentUUID&quot;:&quot;f64bb89f-1069-49de-a0d1-f95a0c72af33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7fadb7ce-2b20-4297-af3c-2ac0f2fa048a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:309,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9c3aed1b-26f2-4700-85f0-925817230674&quot;,&quot;title&quot;:&quot;user.getUserDetails&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Fetches a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.getUserDetails Fetches a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:271,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getUserDeatils();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;305a6cd5-393a-414a-a20e-29566d67bc38&quot;,&quot;parentUUID&quot;:&quot;9c3aed1b-26f2-4700-85f0-925817230674&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;305a6cd5-393a-414a-a20e-29566d67bc38&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:271,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;82950f3a-42c0-4a4f-9227-5858352ec2ee&quot;,&quot;title&quot;:&quot;user.modifyUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.modifyUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.modifyUser({\n    active: false\n});\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.active).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;752c15c7-2d3c-49f0-84ed-0ca5e4a27bd2&quot;,&quot;parentUUID&quot;:&quot;82950f3a-42c0-4a4f-9227-5858352ec2ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;752c15c7-2d3c-49f0-84ed-0ca5e4a27bd2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:207,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;6deeacdd-1b98-40b8-bb6a-60873daf9e12&quot;,&quot;title&quot;:&quot;user.replaceUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.replaceUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.replaceUser({\n    passwd: \&quot;test_passwordddd\&quot;\n});\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff66cb4d-6f77-436e-991b-13df45bb202c&quot;,&quot;parentUUID&quot;:&quot;6deeacdd-1b98-40b8-bb6a-60873daf9e12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff66cb4d-6f77-436e-991b-13df45bb202c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:205,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;title&quot;:&quot;User.FabricAccessOperations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(testFabricName, [{ username: user.user }], {\n    dcList: dcList\n});\nfabric.useFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8984cbf-dfa9-4d8e-b584-d5dc1c7caefd&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1649435-c944-47e2-aa1d-81fbdc630843&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists the accessible databases and their permissions &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:181,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9072f8a0-24d4-43e2-884e-6be567f5799b&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Lists the accessible databases and their permissions with all the collections&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions with all the collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases(true);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44eb3395-7350-42d4-9d92-fd2c40c227ef&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Gets the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result).to.be.oneOf([\&quot;rw\&quot;, \&quot;ro\&quot;, \&quot;none\&quot;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbcf609c-59f3-46fb-bc22-3c9c4dc32366&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Gets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.getCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8439064b-bbe7-4b2c-9029-b723606b1624&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Clears the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:186,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.clearDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cac7fa26-e844-46d1-a4dd-e10f9aa8ffcd&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Clears the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:408,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.clearCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: database not found&quot;,&quot;estack&quot;:&quot;C8Error: database not found\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;d818b65a-e54d-4b19-a618-5ff359cda689&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.setCollectionAccessLevel(testFabricName, collectionName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}/${collectionName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: database not found&quot;,&quot;estack&quot;:&quot;C8Error: database not found\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;c1739230-5296-4b67-9818-eb8b6de5153e&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sets the access level of a database&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:209,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.setDatabaseAccessLevel(testFabricName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46a98d35-f4ca-43ce-a254-60ede85b24c7&quot;,&quot;parentUUID&quot;:&quot;5920b44c-dced-4aa3-ae34-a0d158acc6d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9072f8a0-24d4-43e2-884e-6be567f5799b&quot;,&quot;44eb3395-7350-42d4-9d92-fd2c40c227ef&quot;,&quot;bbcf609c-59f3-46fb-bc22-3c9c4dc32366&quot;,&quot;8439064b-bbe7-4b2c-9029-b723606b1624&quot;,&quot;cac7fa26-e844-46d1-a4dd-e10f9aa8ffcd&quot;,&quot;46a98d35-f4ca-43ce-a254-60ede85b24c7&quot;],&quot;failures&quot;:[&quot;d818b65a-e54d-4b19-a618-5ff359cda689&quot;,&quot;c1739230-5296-4b67-9818-eb8b6de5153e&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2019,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;de8b3be9-aca1-49a9-8988-4c7d74e8e931&quot;,&quot;title&quot;:&quot;manipulating restql&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:497,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64f36205-b820-4c10-a8f2-df4b16cbfd1c&quot;,&quot;parentUUID&quot;:&quot;de8b3be9-aca1-49a9-8988-4c7d74e8e931&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c6c277a-bafd-4785-aada-4d2fccf0d6c3&quot;,&quot;parentUUID&quot;:&quot;de8b3be9-aca1-49a9-8988-4c7d74e8e931&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1cd78984-f9dc-4d5a-87c0-e1d4032cde33&quot;,&quot;title&quot;:&quot;fabric.saveQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should save a query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.saveQuery should save a query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryName = \&quot;testQuery\&quot;;\nconst response = await fabric.saveQuery(queryName, {}, \&quot;for coll in _collections return coll\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.name).to.equal(queryName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;201f1583-63b6-4102-9ac4-4296629437db&quot;,&quot;parentUUID&quot;:&quot;1cd78984-f9dc-4d5a-87c0-e1d4032cde33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;201f1583-63b6-4102-9ac4-4296629437db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:125,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;88fb4403-847e-4c00-abda-35f6edda58d6&quot;,&quot;title&quot;:&quot;fabric.listSavedQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should make a successful API call&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.listSavedQueries should make a successful API call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.listSavedQueries();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.length).to.be.at.least(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7fdb866-c4d8-411d-9820-6622b76a6a8c&quot;,&quot;parentUUID&quot;:&quot;88fb4403-847e-4c00-abda-35f6edda58d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e7fdb866-c4d8-411d-9820-6622b76a6a8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:125,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;522125fc-b9cc-4d9b-9890-e2a44d7d2025&quot;,&quot;title&quot;:&quot;fabric.executeSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.executeSavedQuery(queryName, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;447721b0-e21c-4190-9727-545f91c2a056&quot;,&quot;parentUUID&quot;:&quot;522125fc-b9cc-4d9b-9890-e2a44d7d2025&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery should execute a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2dd548d-9106-4e32-b26f-c1b65f80d769&quot;,&quot;parentUUID&quot;:&quot;522125fc-b9cc-4d9b-9890-e2a44d7d2025&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2dd548d-9106-4e32-b26f-c1b65f80d769&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;3be76dc3-3550-435e-bf51-b932ef1de986&quot;,&quot;title&quot;:&quot;fabric.deleteSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.deleteSavedQuery should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.deleteSavedQuery(queryName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f67c94cb-bd35-45aa-b298-27a50386254d&quot;,&quot;parentUUID&quot;:&quot;3be76dc3-3550-435e-bf51-b932ef1de986&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f67c94cb-bd35-45aa-b298-27a50386254d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:203,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;224c49c2-e61d-4915-af86-630afb72f0ad&quot;,&quot;title&quot;:&quot;fabric.createRestqlCursor&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.createRestqlCursor should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9059595f-e551-4402-be0d-8e178e9c1254&quot;,&quot;parentUUID&quot;:&quot;224c49c2-e61d-4915-af86-630afb72f0ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;9059595f-e551-4402-be0d-8e178e9c1254&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;63fadd91-d7aa-416f-a437-f7fccfdeb51a&quot;,&quot;title&quot;:&quot;Manipulating pipelines&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:564,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nfabric.useFabric(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c15da822-3f6f-4a47-8122-e5f19e1ccf06&quot;,&quot;parentUUID&quot;:&quot;63fadd91-d7aa-416f-a437-f7fccfdeb51a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9a50bc2-8ea4-43c7-906b-213f241da125&quot;,&quot;parentUUID&quot;:&quot;63fadd91-d7aa-416f-a437-f7fccfdeb51a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7db74710-7ea5-4328-8abf-c282c253a739&quot;,&quot;title&quot;:&quot;fabric.getAllPipelines&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an empty array or an array of all pipelines&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines fabric.getAllPipelines returns an empty array or an array of all pipelines&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:270,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dcList = await fabric.getAllEdgeLocations();\nconst regions = helper_1.getDCListString(dcList).split(&#x27;,&#x27;);\nconst isEnabled = false;\nconst config = {\n    \&quot;input\&quot;: {\n        \&quot;type\&quot;: \&quot;c8db\&quot;,\n        \&quot;c8db\&quot;: {\n            \&quot;name\&quot;: \&quot;collection_namepl1\&quot;\n        }\n    },\n    \&quot;output\&quot;: {\n        \&quot;type\&quot;: \&quot;c8streams\&quot;,\n        \&quot;c8streams\&quot;: {\n            \&quot;name\&quot;: \&quot;stream_namepl1\&quot;,\n            \&quot;local\&quot;: true\n        }\n    }\n};\nconst result = await fabric.getPipelines();\nconst allPipelines = result.result;\nconst pipelinesCount = allPipelines.length;\nchai_1.expect(allPipelines).to.be.an(&#x27;array&#x27;);\nconst pipeline = fabric.pipeline(&#x27;testPipeline&#x27;);\nawait pipeline.create(regions, isEnabled, config);\nconst updatedResult = await fabric.getPipelines();\nconst updatedAllPipelines = updatedResult.result;\nconst expectedPipelinesCount = pipelinesCount + 1;\nchai_1.expect(updatedAllPipelines.length).to.equal(expectedPipelinesCount);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;c46bc5d6-f1d2-4cad-be53-326738efbad3&quot;,&quot;parentUUID&quot;:&quot;7db74710-7ea5-4328-8abf-c282c253a739&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;c46bc5d6-f1d2-4cad-be53-326738efbad3&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:270,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;630feea4-c4a7-4927-8fae-5f35227e111c&quot;,&quot;title&quot;:&quot;pipeline.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new pipeline&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines pipeline.create creates a new pipeline&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:392,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dcList = await fabric.getAllEdgeLocations();\nconst regions = helper_1.getDCListString(dcList).split(&#x27;,&#x27;);\nconst isEnabled = false;\nconst config = {\n    \&quot;input\&quot;: {\n        \&quot;type\&quot;: \&quot;c8db\&quot;,\n        \&quot;c8db\&quot;: {\n            \&quot;name\&quot;: \&quot;collection_namepl2\&quot;\n        }\n    },\n    \&quot;output\&quot;: {\n        \&quot;type\&quot;: \&quot;c8streams\&quot;,\n        \&quot;c8streams\&quot;: {\n            \&quot;name\&quot;: \&quot;stream_namepl2\&quot;,\n            \&quot;local\&quot;: true\n        }\n    }\n};\nconst pipeline = fabric.pipeline(&#x27;testPipeline2&#x27;);\nconst response = await pipeline.create(regions, isEnabled, config);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;f8dfa987-c775-46e8-95cb-01c64dc75bfd&quot;,&quot;parentUUID&quot;:&quot;630feea4-c4a7-4927-8fae-5f35227e111c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;f8dfa987-c775-46e8-95cb-01c64dc75bfd&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:392,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;c7fd95eb-a472-4e43-8f55-aeb794f02485&quot;,&quot;title&quot;:&quot;pipeline.drop&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes an existing pipeline&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines pipeline.drop deletes an existing pipeline&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resultObject = await fabric.getPipelines();\nconst allPipelines = resultObject.result;\nconst pipelineName = allPipelines[0].name;\nconst pipelinesCount = allPipelines.length;\nconst pipeline = fabric.pipeline(pipelineName);\nawait pipeline.drop();\nconst updatedResultObject = await fabric.getPipelines();\nconst updatedPipelines = updatedResultObject.result;\nconst updatedPipelinesCount = updatedPipelines.length;\nchai_1.expect(updatedPipelinesCount).to.equal(pipelinesCount - 1);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;2aae98f4-8ab0-47e8-b0b7-5f70cf899951&quot;,&quot;parentUUID&quot;:&quot;c7fd95eb-a472-4e43-8f55-aeb794f02485&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;2aae98f4-8ab0-47e8-b0b7-5f70cf899951&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:201,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;f24333a4-ca7b-49e8-b0ef-188a130add8f&quot;,&quot;title&quot;:&quot;pipeline.details&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches the details of an existing pipeline&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines pipeline.details fetches the details of an existing pipeline&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:213,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resultObject = await fabric.getPipelines();\nconst allPipelines = resultObject.result;\nconst pipelineName = allPipelines[0].name;\nconst pipeline = fabric.pipeline(pipelineName);\nconst response = await pipeline.details();\nconst result = response.result;\nchai_1.expect(result).to.be.an(&#x27;object&#x27;);\nchai_1.expect(result).to.have.property(&#x27;name&#x27;);\nchai_1.expect(result).to.have.property(&#x27;regions&#x27;);\nchai_1.expect(result).to.have.property(&#x27;enabled&#x27;);\nchai_1.expect(result).to.have.property(&#x27;config&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;77372968-b448-4685-b732-55b89f179dc8&quot;,&quot;parentUUID&quot;:&quot;f24333a4-ca7b-49e8-b0ef-188a130add8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;77372968-b448-4685-b732-55b89f179dc8&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:213,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;3e819a5e-fe00-4f2d-b840-234ab175f2a3&quot;,&quot;title&quot;:&quot;pipeline.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates an existing pipeline&quot;,&quot;fullTitle&quot;:&quot;Manipulating pipelines pipeline.update updates an existing pipeline&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:298,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resultObject = await fabric.getPipelines();\nconst allPipelines = resultObject.result;\nconst pipelineName = allPipelines[0].name;\nconst pipeline = fabric.pipeline(pipelineName);\nconst response = await pipeline.details();\nconst { regions, enabled: isEnabled, config } = response.result;\nconst toggleEnabled = !isEnabled;\nconst updatedResultObject = await pipeline.update(regions, toggleEnabled, config);\nchai_1.expect(updatedResultObject.error).to.be.false;\nconst updatedPipeline = fabric.pipeline(pipelineName);\nconst detailsObject = await updatedPipeline.details();\nconst { enabled: updatedEnabledValue } = detailsObject.result;\nchai_1.expect(updatedEnabledValue).to.not.equal(isEnabled);\nchai_1.expect(updatedEnabledValue).to.equal(toggleEnabled);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: 500&quot;,&quot;estack&quot;:&quot;C8Error: 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;54df7d8b-31b0-4a04-b5dd-f0e070db5f9e&quot;,&quot;parentUUID&quot;:&quot;3e819a5e-fe00-4f2d-b840-234ab175f2a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;54df7d8b-31b0-4a04-b5dd-f0e070db5f9e&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:298,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;4d587b3b-151a-4477-8dfa-d273a8c471c0&quot;,&quot;title&quot;:&quot;fabric.route&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/32-pipelines.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-pipelines.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Route instance&quot;,&quot;fullTitle&quot;:&quot;fabric.route returns a Route instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route();\nchai_1.expect(route).to.be.an.instanceof(route_1.Route);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5c92287-64b1-4357-99c8-cef64168c35c&quot;,&quot;parentUUID&quot;:&quot;4d587b3b-151a-4477-8dfa-d273a8c471c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a route for the given path&quot;,&quot;fullTitle&quot;:&quot;fabric.route creates a route for the given path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = \&quot;/hi\&quot;;\nconst route = fabric.route(path);\nchai_1.expect(route._path).to.equal(path);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2e645cd-a43f-43f9-88a8-40a3d1ba81be&quot;,&quot;parentUUID&quot;:&quot;4d587b3b-151a-4477-8dfa-d273a8c471c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes the given headers to the new route&quot;,&quot;fullTitle&quot;:&quot;fabric.route passes the given headers to the new route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/hello\&quot;, { \&quot;x-magic\&quot;: \&quot;awesome\&quot; });\nchai_1.expect(route._headers).to.have.property(\&quot;x-magic\&quot;, \&quot;awesome\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32ae1e8b-8c40-4b76-9466-1652e9e1f355&quot;,&quot;parentUUID&quot;:&quot;4d587b3b-151a-4477-8dfa-d273a8c471c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5c92287-64b1-4357-99c8-cef64168c35c&quot;,&quot;f2e645cd-a43f-43f9-88a8-40a3d1ba81be&quot;,&quot;32ae1e8b-8c40-4b76-9466-1652e9e1f355&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;6e637b85-8feb-4930-b2f5-3cb69e3ecf6f&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;5.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;options&quot;:{},&quot;version&quot;:&quot;4.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;jsC8&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>