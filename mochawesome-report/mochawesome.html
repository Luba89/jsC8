<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:161,&quot;tests&quot;:223,&quot;passes&quot;:203,&quot;pending&quot;:20,&quot;failures&quot;:0,&quot;start&quot;:&quot;2020-03-18T13:00:35.600Z&quot;,&quot;end&quot;:&quot;2020-03-18T13:04:44.614Z&quot;,&quot;duration&quot;:249014,&quot;testsRegistered&quot;:224,&quot;passPercent&quot;:99.50980392156863,&quot;pendingPercent&quot;:8.928571428571429,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:1,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;8f0e3002-7b82-49c2-a9ec-699a463b8396&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets subscription list&quot;,&quot;fullTitle&quot;:&quot;gets subscription list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getSubscriptionList();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;193f0fbf-e5dd-48a6-a948-f971aad99f9a&quot;,&quot;parentUUID&quot;:&quot;8f0e3002-7b82-49c2-a9ec-699a463b8396&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;632adeed-f12f-4b22-b93b-58b21fc3d727&quot;,&quot;title&quot;:&quot;Creating a Fabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c8d9954a-938e-467f-bf12-8b9b2c51863a&quot;,&quot;title&quot;:&quot;using the factory&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62fa2cc7-8030-413e-941d-e3800a4b2358&quot;,&quot;parentUUID&quot;:&quot;c8d9954a-938e-467f-bf12-8b9b2c51863a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 54321);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;187a8f04-0da8-48af-a224-333e18555a30&quot;,&quot;parentUUID&quot;:&quot;c8d9954a-938e-467f-bf12-8b9b2c51863a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;62fa2cc7-8030-413e-941d-e3800a4b2358&quot;,&quot;187a8f04-0da8-48af-a224-333e18555a30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;618150bc-a959-4687-bbf9-add4e6ee68af&quot;,&quot;title&quot;:&quot;using the constructor&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6649179c-a871-4ebf-83d1-f7ea3abfa26c&quot;,&quot;parentUUID&quot;:&quot;618150bc-a959-4687-bbf9-add4e6ee68af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 43210);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d557c078-a016-47fd-bd2c-e34cebaa47bd&quot;,&quot;parentUUID&quot;:&quot;618150bc-a959-4687-bbf9-add4e6ee68af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6649179c-a871-4ebf-83d1-f7ea3abfa26c&quot;,&quot;d557c078-a016-47fd-bd2c-e34cebaa47bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;81091b1c-218f-48b7-8f53-1b4a72a654a9&quot;,&quot;title&quot;:&quot;Configuring the driver&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;74b50eef-0191-4014-84be-1cff258ac6cb&quot;,&quot;title&quot;:&quot;with a string&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the url&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with a string sets the url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;830b31a8-021f-45fe-a5a6-c8af60ff7c83&quot;,&quot;parentUUID&quot;:&quot;74b50eef-0191-4014-84be-1cff258ac6cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;830b31a8-021f-45fe-a5a6-c8af60ff7c83&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3ce66eb3-35df-4b97-a563-20386147014f&quot;,&quot;title&quot;:&quot;with headers&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;applies the headers&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with headers applies the headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({\n    headers: {\n        \&quot;x-one\&quot;: \&quot;1\&quot;,\n        \&quot;x-two\&quot;: \&quot;2\&quot;\n    }\n});\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-one\&quot;, \&quot;1\&quot;);\n        chai_1.expect(headers).to.have.property(\&quot;x-two\&quot;, \&quot;2\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;340e51c1-feb0-45ec-a4e8-a3c97cf3e76e&quot;,&quot;parentUUID&quot;:&quot;3ce66eb3-35df-4b97-a563-20386147014f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;340e51c1-feb0-45ec-a4e8-a3c97cf3e76e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3a3b1167-9dc3-4b12-acbb-5fd1e2354865&quot;,&quot;title&quot;:&quot;with an c8Version&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the x-c8-version header&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with an c8Version sets the x-c8-version header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({ c8Version: 99999 });\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-c8-version\&quot;, \&quot;99999\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72f60523-6036-4752-b9ef-8c381d3a681a&quot;,&quot;parentUUID&quot;:&quot;3a3b1167-9dc3-4b12-acbb-5fd1e2354865&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72f60523-6036-4752-b9ef-8c381d3a681a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0de62ef5-f4c9-43bc-aecc-8bc823062dbb&quot;,&quot;title&quot;:&quot;with agentOptions&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Agent = (ptcl) =&gt; function (opts) {\n    protocol = ptcl;\n    options = opts;\n    return () =&gt; null;\n};\nhttp.Agent = Agent(\&quot;http\&quot;);\nhttps.Agent = Agent(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff071c2a-ef15-4e94-aa19-5de7654d1573&quot;,&quot;parentUUID&quot;:&quot;0de62ef5-f4c9-43bc-aecc-8bc823062dbb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6a0059f-614d-4e79-91e2-f366dd9afd95&quot;,&quot;parentUUID&quot;:&quot;0de62ef5-f4c9-43bc-aecc-8bc823062dbb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.Agent = _httpAgent;\nhttps.Agent = _httpsAgent;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;134ddc0c-3c0c-4562-a35f-373d987b7558&quot;,&quot;parentUUID&quot;:&quot;0de62ef5-f4c9-43bc-aecc-8bc823062dbb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agentOptions to the agent&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions passes the agentOptions to the agent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;new connection_1.Connection({ agentOptions: { hello: \&quot;world\&quot; } }); // eslint-disable-line no-new\nchai_1.expect(options).to.have.property(\&quot;hello\&quot;, \&quot;world\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc57f056-9419-4dfd-9d6d-6a927179e1a9&quot;,&quot;parentUUID&quot;:&quot;0de62ef5-f4c9-43bc-aecc-8bc823062dbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the built-in agent for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions uses the built-in agent for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// default: http\nnew connection_1.Connection(); // eslint-disable-line no-new\n// expect(protocol).to.equal(\&quot;http\&quot;);\nnew connection_1.Connection(\&quot;https://test.macrometa.io\&quot;); // eslint-disable-line no-new\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2772ff46-7525-4757-a067-828c32710ad5&quot;,&quot;parentUUID&quot;:&quot;0de62ef5-f4c9-43bc-aecc-8bc823062dbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc57f056-9419-4dfd-9d6d-6a927179e1a9&quot;,&quot;2772ff46-7525-4757-a067-828c32710ad5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3686d37f-f05c-4723-a599-4281049fa5ef&quot;,&quot;title&quot;:&quot;with agent&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Request = (ptcl) =&gt; (opts) =&gt; {\n    protocol = ptcl;\n    options = opts;\n    return {\n        on() {\n            return this;\n        },\n        end() {\n            return this;\n        }\n    };\n};\nhttp.request = Request(\&quot;http\&quot;);\nhttps.request = Request(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecf36b37-92bf-468a-9c7a-bf7822bdc645&quot;,&quot;parentUUID&quot;:&quot;3686d37f-f05c-4723-a599-4281049fa5ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21706607-edad-4276-8839-68a389c0039d&quot;,&quot;parentUUID&quot;:&quot;3686d37f-f05c-4723-a599-4281049fa5ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.request = _httpRequest;\nhttps.request = _httpsRequest;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;820ef45f-4220-4732-8a03-c829d878a7cd&quot;,&quot;parentUUID&quot;:&quot;3686d37f-f05c-4723-a599-4281049fa5ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agent to the request function&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent passes the agent to the request function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: https\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);\nagent = Symbol(\&quot;agent\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0187c06e-30c6-416e-b35f-21ebd559246e&quot;,&quot;parentUUID&quot;:&quot;3686d37f-f05c-4723-a599-4281049fa5ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the request function for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent uses the request function for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: http\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6394e0f2-d00a-4353-b271-2417f1559024&quot;,&quot;parentUUID&quot;:&quot;3686d37f-f05c-4723-a599-4281049fa5ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;calls Agent#destroy when the connection is closed&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent calls Agent#destroy when the connection is closed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = {\n    _destroyed: false,\n    destroy() {\n        this._destroyed = true;\n    }\n};\nconst conn = new connection_1.Connection({ agent });\nchai_1.expect(agent._destroyed).to.equal(false);\nconn.close();\nchai_1.expect(agent._destroyed).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e10c890-e56e-4fb0-8a3c-7286f6c0664f&quot;,&quot;parentUUID&quot;:&quot;3686d37f-f05c-4723-a599-4281049fa5ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0187c06e-30c6-416e-b35f-21ebd559246e&quot;,&quot;6394e0f2-d00a-4353-b271-2417f1559024&quot;,&quot;6e10c890-e56e-4fb0-8a3c-7286f6c0664f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9e27326f-b0da-4958-88d0-901ba3645b44&quot;,&quot;title&quot;:&quot;Manipulating fabrics&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1576,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b81d8e03-126c-4f65-8285-57d9531bc6f7&quot;,&quot;parentUUID&quot;:&quot;9e27326f-b0da-4958-88d0-901ba3645b44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1534,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = new jsC8_1.Fabric({\n    url: testUrl\n});\nawait fabric2.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric2.useTenant(\&quot;guest\&quot;);\ncollection = fabric2.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04efb287-156a-44af-9faa-253746b23eba&quot;,&quot;parentUUID&quot;:&quot;9e27326f-b0da-4958-88d0-901ba3645b44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1529,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86f381ca-4bf6-4be5-8ca1-b9d4e321fa8a&quot;,&quot;parentUUID&quot;:&quot;9e27326f-b0da-4958-88d0-901ba3645b44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04646828-233d-449a-9699-a6f4173d7df3&quot;,&quot;parentUUID&quot;:&quot;9e27326f-b0da-4958-88d0-901ba3645b44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee302209-70a3-45c1-a5ab-e71fb7b4ffd9&quot;,&quot;parentUUID&quot;:&quot;9e27326f-b0da-4958-88d0-901ba3645b44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:287,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.drop();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff54f5f9-2f23-41cc-b143-90128ea8f4a4&quot;,&quot;parentUUID&quot;:&quot;9e27326f-b0da-4958-88d0-901ba3645b44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec8affda-f421-4874-9b92-6d869ffa65fe&quot;,&quot;parentUUID&quot;:&quot;9e27326f-b0da-4958-88d0-901ba3645b44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;adf99101-3558-4737-b145-700c635e4793&quot;,&quot;title&quot;:&quot;fabric.version&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version object when no details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when no details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:302,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version();\nchai_1.expect(response.server).to.equal(\&quot;C8DB\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57c00872-e44a-4396-94f7-f29483bc1425&quot;,&quot;parentUUID&quot;:&quot;adf99101-3558-4737-b145-700c635e4793&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the version object when details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version(true);\nchai_1.expect(response.server).to.equal(\&quot;C8DB\&quot;);\nchai_1.expect(response.details).to.haveOwnProperty(\&quot;architecture\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9490d9f-2e79-41a1-8e01-ca9e7c5ef413&quot;,&quot;parentUUID&quot;:&quot;adf99101-3558-4737-b145-700c635e4793&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;57c00872-e44a-4396-94f7-f29483bc1425&quot;,&quot;c9490d9f-2e79-41a1-8e01-ca9e7c5ef413&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:610,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ecb76b83-37bd-4b58-853c-e3d922ccced0&quot;,&quot;title&quot;:&quot;fabric.useFabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the fabric name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric updates the fabric name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = \&quot;example\&quot;;\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;); // default\nfabric.useFabric(name);\nchai_1.expect(fabric._connection).to.have.property(\&quot;_fabricName\&quot;, name);\nchai_1.expect(fabric.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5befdf1b-63e9-4478-b8ea-f0560b7a0bf3&quot;,&quot;parentUUID&quot;:&quot;ecb76b83-37bd-4b58-853c-e3d922ccced0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns itself&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric returns itself&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = fabric.useFabric(\&quot;nope\&quot;);\nchai_1.expect(fabric).to.equal(fabric2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dd20d34-d2ff-41d2-9009-1dacbb29dec0&quot;,&quot;parentUUID&quot;:&quot;ecb76b83-37bd-4b58-853c-e3d922ccced0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5befdf1b-63e9-4478-b8ea-f0560b7a0bf3&quot;,&quot;9dd20d34-d2ff-41d2-9009-1dacbb29dec0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;69a35de7-d810-4e98-bf8c-52781710e07c&quot;,&quot;title&quot;:&quot;fabric.edgeLocations&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets all the edge locations&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets all the edge locations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllEdgeLocations();\nchai_1.expect(Array.isArray(response)).to.be.true;\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;tags\&quot;);\nchai_1.expect(response.length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce22b142-c0e9-45c6-abd7-01c70d97c0b5&quot;,&quot;parentUUID&quot;:&quot;69a35de7-d810-4e98-bf8c-52781710e07c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets local edge location&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets local edge location&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:363,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\nchai_1.expect(Array.isArray(response)).to.be.false;\nchai_1.expect(response).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;tags\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26aa6265-a1a2-4cb2-91f1-355948312515&quot;,&quot;parentUUID&quot;:&quot;69a35de7-d810-4e98-bf8c-52781710e07c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce22b142-c0e9-45c6-abd7-01c70d97c0b5&quot;,&quot;26aa6265-a1a2-4cb2-91f1-355948312515&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:672,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;dac4994d-44d8-4946-841d-a2fe2f763e43&quot;,&quot;title&quot;:&quot;fabric.createFabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78f8dc99-e9f8-4fd3-bccb-6c1649183cea&quot;,&quot;parentUUID&quot;:&quot;dac4994d-44d8-4946-841d-a2fe2f763e43&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a fabric with the given name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric creates a fabric with the given name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:613,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nconst info = await fabric.get();\nchai_1.expect(info.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;faf1d4c3-1dc8-4276-8e51-7a5e6fd37df3&quot;,&quot;parentUUID&quot;:&quot;dac4994d-44d8-4946-841d-a2fe2f763e43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;adds the given users to the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric adds the given users to the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f51ffc4-b9b1-4718-aec7-ff6bc505d5c1&quot;,&quot;parentUUID&quot;:&quot;dac4994d-44d8-4946-841d-a2fe2f763e43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;faf1d4c3-1dc8-4276-8e51-7a5e6fd37df3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;7f51ffc4-b9b1-4718-aec7-ff6bc505d5c1&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:613,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e7b11015-98a5-4292-92f4-32496a5caad1&quot;,&quot;title&quot;:&quot;fabric.get&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches the fabric description if the fabric exists&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fetches the fabric description if the fabric exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:249,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await fabric.get();\nchai_1.expect(info.name).to.equal(fabric.name);\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7024cca2-7e45-40bd-891f-553ff798d013&quot;,&quot;parentUUID&quot;:&quot;e7b11015-98a5-4292-92f4-32496a5caad1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fails if the fabric does not exist&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fails if the fabric does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:332,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;__does_not_exist__\&quot;);\ntry {\n    await fabric.get();\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n    return;\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaa6767b-fb58-4c60-968d-a6bf676db473&quot;,&quot;parentUUID&quot;:&quot;e7b11015-98a5-4292-92f4-32496a5caad1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7024cca2-7e45-40bd-891f-553ff798d013&quot;,&quot;aaa6767b-fb58-4c60-968d-a6bf676db473&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:581,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d4820544-d0a1-42f8-8b61-cc8b1395f9cd&quot;,&quot;title&quot;:&quot;fabric.listFabrics&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of all fabrics&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listFabrics returns a list of all fabrics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics.indexOf(\&quot;_system\&quot;)).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa225929-68dd-40cb-b1bb-a6fca1ce5e52&quot;,&quot;parentUUID&quot;:&quot;d4820544-d0a1-42f8-8b61-cc8b1395f9cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa225929-68dd-40cb-b1bb-a6fca1ce5e52&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:409,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e705082a-3336-4f03-a7ec-0e9a7df2ea99&quot;,&quot;title&quot;:&quot;fabric.listUserFabrics&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of fabrics accessible to the active user&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listUserFabrics returns a list of fabrics accessible to the active user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:302,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listUserFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics[0].name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d3e4396-7368-43a6-a67e-61c9376241df&quot;,&quot;parentUUID&quot;:&quot;e705082a-3336-4f03-a7ec-0e9a7df2ea99&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d3e4396-7368-43a6-a67e-61c9376241df&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:302,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;eb16d1f0-4ecc-4a90-bb4f-ab8cfe42335f&quot;,&quot;title&quot;:&quot;fabric.dropFabric&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:311,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d3a73e9-8cc5-4c1a-8eff-f35918f41cff&quot;,&quot;parentUUID&quot;:&quot;eb16d1f0-4ecc-4a90-bb4f-ab8cfe42335f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given fabric from the server&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric deletes the given fabric from the server&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:919,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.dropFabric(name);\nlet temp = new jsC8_1.Fabric().useFabric(name);\ntry {\n    await temp.get();\n}\ncatch (e) {\n    return;\n}\nfinally {\n    temp.close();\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eae77800-bb2f-4902-b673-8688e30ed1c6&quot;,&quot;parentUUID&quot;:&quot;eb16d1f0-4ecc-4a90-bb4f-ab8cfe42335f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eae77800-bb2f-4902-b673-8688e30ed1c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:919,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f999d587-8d09-4f25-b5ed-33965fe89de3&quot;,&quot;title&quot;:&quot;fabric.truncate&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2814,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create();\n        await collection.save({ _key: \&quot;example\&quot; });\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create({ isSystem: true });\n        await collection.save({ _key: \&quot;example\&quot; });\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbed4d26-2888-4e60-88d9-5b1168c603a6&quot;,&quot;parentUUID&quot;:&quot;f999d587-8d09-4f25-b5ed-33965fe89de3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:281,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;536a9bb4-6c98-46f2-b6d7-1cb4e6803fbb&quot;,&quot;parentUUID&quot;:&quot;f999d587-8d09-4f25-b5ed-33965fe89de3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes all documents from all non-system collections in the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate removes all documents from all non-system collections in the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7683,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.truncate();\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a746520a-18b7-4198-a8b6-b041dc4fafb8&quot;,&quot;parentUUID&quot;:&quot;f999d587-8d09-4f25-b5ed-33965fe89de3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;additionally truncates system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate additionally truncates system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25202f22-3006-4591-b90d-62a1219221d3&quot;,&quot;parentUUID&quot;:&quot;f999d587-8d09-4f25-b5ed-33965fe89de3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a746520a-18b7-4198-a8b6-b041dc4fafb8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;25202f22-3006-4591-b90d-62a1219221d3&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:7683,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;af78f5c2-e441-4b8a-aa21-f3be3f4a25fd&quot;,&quot;title&quot;:&quot;fabric.validateQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate correct query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate correct query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:260,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.validateQuery(\&quot;for doc in docs return doc\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bd1f42c-936d-4776-a459-fd3f5559df7d&quot;,&quot;parentUUID&quot;:&quot;af78f5c2-e441-4b8a-aa21-f3be3f4a25fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate incorrect query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate incorrect query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:312,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const response = await fabric.validateQuery(\&quot;forrrr doc in docs return doc\&quot;);\n    chai_1.expect(response.error).to.be.true;\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a0c1c9d-52e7-4d56-9614-f5fb35c203b6&quot;,&quot;parentUUID&quot;:&quot;af78f5c2-e441-4b8a-aa21-f3be3f4a25fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5bd1f42c-936d-4776-a459-fd3f5559df7d&quot;,&quot;4a0c1c9d-52e7-4d56-9614-f5fb35c203b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:572,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;bd9857aa-5579-4771-ab1d-100014a966ed&quot;,&quot;title&quot;:&quot;fabric.explainQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should explain query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.explainQuery should explain query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryObject = {\n    query: `for doc in ${collectionName} return doc`,\n    bindVars: {}\n};\nconst response = await fabric.explainQuery(queryObject);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aca64f3e-6339-4496-83a1-9ca1c325920c&quot;,&quot;parentUUID&quot;:&quot;bd9857aa-5579-4771-ab1d-100014a966ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aca64f3e-6339-4496-83a1-9ca1c325920c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:306,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2d5bbfae-bf31-4956-b356-a48084a306a1&quot;,&quot;title&quot;:&quot;fabric.getCurrentQueries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get currently running queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.getCurrentQueries should get currently running queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b58b987-f52d-4e30-9c79-75f36e2102b4&quot;,&quot;parentUUID&quot;:&quot;2d5bbfae-bf31-4956-b356-a48084a306a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;2b58b987-f52d-4e30-9c79-75f36e2102b4&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;17779b18-dde5-4180-9042-0a3b30eaeab2&quot;,&quot;title&quot;:&quot;fabric.clearSlowQueries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should clear slow queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.clearSlowQueries should clear slow queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62541688-ed11-4e58-b07e-aac6f2cdfc81&quot;,&quot;parentUUID&quot;:&quot;17779b18-dde5-4180-9042-0a3b30eaeab2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;62541688-ed11-4e58-b07e-aac6f2cdfc81&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;865ce8c9-117b-48a0-bcf3-f1ed0f7fc40a&quot;,&quot;title&quot;:&quot;fabric.terminateRunningQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should terminate running query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.terminateRunningQuery should terminate running query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f78e4bb5-5f6f-430f-8bf5-8a7e2855d8dc&quot;,&quot;parentUUID&quot;:&quot;865ce8c9-117b-48a0-bcf3-f1ed0f7fc40a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;f78e4bb5-5f6f-430f-8bf5-8a7e2855d8dc&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d482e64e-2f10-4881-b51d-f31766550970&quot;,&quot;title&quot;:&quot;Accessing collections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2472,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\nconst collections = await fabric.listCollections(false);\nbuiltinSystemCollections = collections.map((c) =&gt; c.name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0552e53-c8d2-4ab9-af93-af3de531383e&quot;,&quot;parentUUID&quot;:&quot;d482e64e-2f10-4881-b51d-f31766550970&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90e0d023-27c6-4195-87d5-2614d38379f0&quot;,&quot;parentUUID&quot;:&quot;d482e64e-2f10-4881-b51d-f31766550970&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4454a11a-0b08-4ed7-b2d9-1d6a574c4928&quot;,&quot;title&quot;:&quot;fabric.collection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a DocumentCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collection returns a DocumentCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = fabric.collection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.DocumentCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c2b1019-21f5-49f4-9e21-329d0d3e8cb4&quot;,&quot;parentUUID&quot;:&quot;4454a11a-0b08-4ed7-b2d9-1d6a574c4928&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2c2b1019-21f5-49f4-9e21-329d0d3e8cb4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;742c429f-b1f3-4831-970f-0390fd81b47d&quot;,&quot;title&quot;:&quot;fabric.edgeCollection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an EdgeCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.edgeCollection returns an EdgeCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;tomato\&quot;;\nlet collection = fabric.edgeCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.EdgeCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4fd33a5-6726-498d-996a-63b222ab8e79&quot;,&quot;parentUUID&quot;:&quot;742c429f-b1f3-4831-970f-0390fd81b47d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c4fd33a5-6726-498d-996a-63b222ab8e79&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;d0abfa79-d244-4c4f-91b4-8a4bc29c9b2f&quot;,&quot;title&quot;:&quot;fabric.listCollections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1225,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).create())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).create({ isSystem: true })\n    // )\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60c1f2a5-2207-403a-b728-a37f1e1527b1&quot;,&quot;parentUUID&quot;:&quot;d0abfa79-d244-4c4f-91b4-8a4bc29c9b2f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:613,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).drop())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).drop({ isSystem: true })\n    // )\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4302834b-ba8f-4ffb-b90b-ddadcbba12b8&quot;,&quot;parentUUID&quot;:&quot;d0abfa79-d244-4c4f-91b4-8a4bc29c9b2f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all non-system collections&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections fetches information about all non-system collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections()\n    .then(collections =&gt; {\n    chai_1.expect(collections.length).to.equal(nonSystemCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(nonSystemCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00357646-63e9-4aef-934d-1721b7bf80fe&quot;,&quot;parentUUID&quot;:&quot;d0abfa79-d244-4c4f-91b4-8a4bc29c9b2f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections(false)\n    .then(collections =&gt; {\n    let allCollectionNames = nonSystemCollectionNames\n        // .concat(systemCollectionNames)\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(collections.length).to.be.at.least(allCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(allCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df39489b-67e0-4142-b0b7-5380bbcadd41&quot;,&quot;parentUUID&quot;:&quot;d0abfa79-d244-4c4f-91b4-8a4bc29c9b2f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;00357646-63e9-4aef-934d-1721b7bf80fe&quot;,&quot;df39489b-67e0-4142-b0b7-5380bbcadd41&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:615,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;699148ff-cf34-4a53-a755-fa5c39aba04e&quot;,&quot;title&quot;:&quot;fabric.collections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:929,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af0df252-d8a0-489d-b1d6-02a8bf8398c3&quot;,&quot;parentUUID&quot;:&quot;699148ff-cf34-4a53-a755-fa5c39aba04e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:919,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).drop()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).drop())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;519cf249-bbb0-4628-8a34-57c518ff68a7&quot;,&quot;parentUUID&quot;:&quot;699148ff-cf34-4a53-a755-fa5c39aba04e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates DocumentCollection and EdgeCollection instances&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections creates DocumentCollection and EdgeCollection instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections()\n    .then(collections =&gt; {\n    let documentCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.DocumentCollection)\n        .sort();\n    let edgeCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.EdgeCollection)\n        .sort();\n    chai_1.expect(documentCollections.length).to.equal(documentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(documentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.equal(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac66a1f7-ee2d-442e-89c4-f459b9ad11c6&quot;,&quot;parentUUID&quot;:&quot;699148ff-cf34-4a53-a755-fa5c39aba04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:504,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections(false)\n    .then(collections =&gt; {\n    let documentCollections = collections.filter((c) =&gt; c instanceof collection_1.DocumentCollection);\n    let edgeCollections = collections.filter((c) =&gt; c instanceof collection_1.EdgeCollection);\n    let allDocumentCollectionNames = documentCollectionNames\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(documentCollections.length).to.be.at.least(allDocumentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(allDocumentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.be.at.least(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a8963b3-4147-4052-a461-4e0d1ab121df&quot;,&quot;parentUUID&quot;:&quot;699148ff-cf34-4a53-a755-fa5c39aba04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac66a1f7-ee2d-442e-89c4-f459b9ad11c6&quot;,&quot;6a8963b3-4147-4052-a461-4e0d1ab121df&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:914,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;bfe60d82-ed41-41f0-9482-ad91f8e26371&quot;,&quot;title&quot;:&quot;Accessing graphs&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1846,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bc8786a-6ace-4b2e-a305-0c4cf74c2123&quot;,&quot;parentUUID&quot;:&quot;bfe60d82-ed41-41f0-9482-ad91f8e26371&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8b360eb-db8c-4a2f-8aa8-00a8d9ec3199&quot;,&quot;parentUUID&quot;:&quot;bfe60d82-ed41-41f0-9482-ad91f8e26371&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ac20030f-6c0c-49fa-8b1f-4c6530b91065&quot;,&quot;title&quot;:&quot;fabric.graph&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Graph instance&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graph returns a Graph instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet graph = fabric.graph(name);\nchai_1.expect(graph).to.be.an.instanceof(graph_1.Graph);\nchai_1.expect(graph)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d69a61f0-229c-4bd0-9abc-acb93ff1426e&quot;,&quot;parentUUID&quot;:&quot;ac20030f-6c0c-49fa-8b1f-4c6530b91065&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d69a61f0-229c-4bd0-9abc-acb93ff1426e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;0f3fa6a8-1fe0-4ace-b8c3-6d0d9ccd5a79&quot;,&quot;title&quot;:&quot;fabric.listGraphs&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1470,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        })),\n        isSmart: true,\n        options: {\n            numberOfShards: 1,\n            smartGraphAttribute: \&quot;test\&quot;\n        },\n        orphanCollections: []\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;144ecc67-7f2a-4b12-8683-8af82b0cf395&quot;,&quot;parentUUID&quot;:&quot;0f3fa6a8-1fe0-4ace-b8c3-6d0d9ccd5a79&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1213,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c4f8457-2c31-4bfe-9f2d-4919c02964cd&quot;,&quot;parentUUID&quot;:&quot;0f3fa6a8-1fe0-4ace-b8c3-6d0d9ccd5a79&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all graphs&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs fetches information about all graphs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:321,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listGraphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g._key).sort()).to.eql(graphNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;845054ee-671b-4822-8618-6ff954e615ac&quot;,&quot;parentUUID&quot;:&quot;0f3fa6a8-1fe0-4ace-b8c3-6d0d9ccd5a79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;845054ee-671b-4822-8618-6ff954e615ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:321,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;f2a8d8eb-eb72-4a73-abfc-6c44e8eaeef1&quot;,&quot;title&quot;:&quot;fabric.graphs&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1271,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        }))\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2482e62-795c-45f8-96cf-c09abb29280a&quot;,&quot;parentUUID&quot;:&quot;f2a8d8eb-eb72-4a73-abfc-6c44e8eaeef1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1223,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4c8a426-10ee-4579-b21b-e2a07d397146&quot;,&quot;parentUUID&quot;:&quot;f2a8d8eb-eb72-4a73-abfc-6c44e8eaeef1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates Graph instances&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs creates Graph instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:327,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .graphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g.name).sort()).to.eql(graphNames);\n    graphs.forEach((graph) =&gt; chai_1.expect(graph).to.be.an.instanceof(graph_1.Graph));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba27aaa0-c462-4aa8-8104-9c11804bd170&quot;,&quot;parentUUID&quot;:&quot;f2a8d8eb-eb72-4a73-abfc-6c44e8eaeef1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba27aaa0-c462-4aa8-8104-9c11804bd170&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:327,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;89c387b7-adda-4ae1-93d8-04b04ed6cad6&quot;,&quot;title&quot;:&quot;Transactions&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1226,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bbba272-31a8-464b-b3b4-804ea9066c78&quot;,&quot;parentUUID&quot;:&quot;89c387b7-adda-4ae1-93d8-04b04ed6cad6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1f0ad39-7d97-4216-b83f-65e6f0b9c3f3&quot;,&quot;parentUUID&quot;:&quot;89c387b7-adda-4ae1-93d8-04b04ed6cad6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b8f5731d-9017-4cb4-b19c-7b1ee174a774&quot;,&quot;title&quot;:&quot;fabric.transaction&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a transaction and return the result&quot;,&quot;fullTitle&quot;:&quot;Transactions fabric.transaction should execute a transaction and return the result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await fabric.transaction([], \&quot;function (params) {return params;}\&quot;, \&quot;test\&quot;);\nchai_1.expect(result).to.equal(\&quot;test\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee0a9208-f082-4b0b-80af-405e1e8af536&quot;,&quot;parentUUID&quot;:&quot;b8f5731d-9017-4cb4-b19c-7b1ee174a774&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee0a9208-f082-4b0b-80af-405e1e8af536&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:306,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;27554b70-43b0-4bee-845d-834fb752253a&quot;,&quot;title&quot;:&quot;C8QL queries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1841,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43b8c092-55e8-4b92-bc66-b7cd7d5a4978&quot;,&quot;parentUUID&quot;:&quot;27554b70-43b0-4bee-845d-834fb752253a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:304,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c64eeddb-96d7-47f3-815c-c83cef3db827&quot;,&quot;parentUUID&quot;:&quot;27554b70-43b0-4bee-845d-834fb752253a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3403a379-3c00-42ad-acac-68caabeb5929&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an exception on error&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i IN no RETURN i\&quot;)\n    .then(() =&gt; {\n    chai_1.expect.fail();\n    done();\n})\n    .catch(err =&gt; {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c06694b-240f-41d1-a6c4-d03c61cb4413&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an exception on error (async await)&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error (async await)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:294,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.query(\&quot;FOR i IN no RETURN i\&quot;);\n    chai_1.expect.fail();\n}\ncatch (err) {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bd1c8ea-8084-46ef-8577-9f0bc9f4021e&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:318,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7aa41a66-3684-473a-927e-029d4762bcc0&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, undefined, {\n    batchSize: 2,\n    count: true\n})\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;671530f4-a7d6-488c-80df-01b7b7a03376&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports AQB queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports AQB queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ toC8QL: () =&gt; \&quot;RETURN 42\&quot; })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(42);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdfe3ad1-c4ce-4f9f-af50-7d18041832c7&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports query objects&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports query objects&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:314,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN 1337\&quot;, bindVars: {} })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(1337);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3230356b-c691-4863-aed6-5d55fd05a311&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:303,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN @potato\&quot;, bindVars: { potato: \&quot;tomato\&quot; } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(\&quot;tomato\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c8f47dc-943d-42aa-9544-6f0017774d97&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:299,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf074872-a2f4-4628-aff5-2381125851af&quot;,&quot;parentUUID&quot;:&quot;7b7f29db-18d5-48c4-bd2f-cee329360fc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3403a379-3c00-42ad-acac-68caabeb5929&quot;,&quot;4c06694b-240f-41d1-a6c4-d03c61cb4413&quot;,&quot;1bd1c8ea-8084-46ef-8577-9f0bc9f4021e&quot;,&quot;7aa41a66-3684-473a-927e-029d4762bcc0&quot;,&quot;671530f4-a7d6-488c-80df-01b7b7a03376&quot;,&quot;bdfe3ad1-c4ce-4f9f-af50-7d18041832c7&quot;,&quot;3230356b-c691-4863-aed6-5d55fd05a311&quot;,&quot;8c8f47dc-943d-42aa-9544-6f0017774d97&quot;,&quot;bf074872-a2f4-4628-aff5-2381125851af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2753,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d7d78299-a09a-4257-9092-dffd5522884c&quot;,&quot;title&quot;:&quot;c8ql&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly handles simple parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles simple parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let values = [\n    0,\n    42,\n    -1,\n    null,\n    undefined,\n    true,\n    false,\n    \&quot;\&quot;,\n    \&quot;string\&quot;,\n    [1, 2, 3],\n    { a: \&quot;b\&quot; }\n];\nlet query = jsC8_1.c8ql `\n        A ${values[0]} B ${values[1]} C ${values[2]} D ${values[3]} E ${values[4]} F ${values[5]}\n        G ${values[6]} H ${values[7]} I ${values[8]} J ${values[9]} K ${values[10]} EOF\n      `;\nchai_1.expect(query.query).to.equal(`\n        A @value0 B @value1 C @value2 D @value3 E @value4 F @value5\n        G @value6 H @value7 I @value8 J @value9 K @value10 EOF\n      `);\nlet bindVarNames = Object.keys(query.bindVars).sort((a, b) =&gt; (+a.substr(5) &gt; +b.substr(5) ? 1 : -1));\nchai_1.expect(bindVarNames).to.eql([\n    \&quot;value0\&quot;,\n    \&quot;value1\&quot;,\n    \&quot;value2\&quot;,\n    \&quot;value3\&quot;,\n    \&quot;value4\&quot;,\n    \&quot;value5\&quot;,\n    \&quot;value6\&quot;,\n    \&quot;value7\&quot;,\n    \&quot;value8\&quot;,\n    \&quot;value9\&quot;,\n    \&quot;value10\&quot;\n]);\nchai_1.expect(bindVarNames.map(k =&gt; query.bindVars[k])).to.eql(values);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83ab4060-74d4-4d64-9280-9c815e549375&quot;,&quot;parentUUID&quot;:&quot;d7d78299-a09a-4257-9092-dffd5522884c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;correctly handles jsC8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles jsC8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let collection = fabric.collection(\&quot;potato\&quot;);\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;potato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c6bcc96-c43a-44c2-b41e-d927b431d805&quot;,&quot;parentUUID&quot;:&quot;d7d78299-a09a-4257-9092-dffd5522884c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;correctly handles C8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles C8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;class C8Collection {\n    constructor() {\n        this.isC8Collection = true;\n        this.name = \&quot;tomato\&quot;;\n    }\n}\nlet collection = new C8Collection();\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;tomato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55c1075d-8879-45d6-a755-d85046003bcd&quot;,&quot;parentUUID&quot;:&quot;d7d78299-a09a-4257-9092-dffd5522884c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83ab4060-74d4-4d64-9280-9c815e549375&quot;,&quot;0c6bcc96-c43a-44c2-b41e-d927b431d805&quot;,&quot;55c1075d-8879-45d6-a755-d85046003bcd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8ac221d4-e299-4427-8049-1dd646a4c9e5&quot;,&quot;title&quot;:&quot;Route API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2111,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\ncollection = fabric.collection(`c${Date.now()}`);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42a6367c-dedc-4cdc-a679-0a2a72821ed4&quot;,&quot;parentUUID&quot;:&quot;8ac221d4-e299-4427-8049-1dd646a4c9e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:303,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.truncate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5ee3588-4419-4abd-828d-526c6fe062c3&quot;,&quot;parentUUID&quot;:&quot;8ac221d4-e299-4427-8049-1dd646a4c9e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:303,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4eb47096-37ad-4cc4-9fd6-59701066c7fe&quot;,&quot;parentUUID&quot;:&quot;8ac221d4-e299-4427-8049-1dd646a4c9e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0219eafc-a427-4e9f-8185-191582772b76&quot;,&quot;title&quot;:&quot;route.route&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should concat path&quot;,&quot;fullTitle&quot;:&quot;Route API route.route should concat path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/api\&quot;).route(\&quot;/version\&quot;);\nchai_1.expect(route).to.have.property(\&quot;_path\&quot;, \&quot;/api/version\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;558b06cc-2fac-4f06-896e-e3fc0c0f7cf3&quot;,&quot;parentUUID&quot;:&quot;0219eafc-a427-4e9f-8185-191582772b76&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;558b06cc-2fac-4f06-896e-e3fc0c0f7cf3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a17dbf59-ed29-47a5-a9c2-508b55bfebdf&quot;,&quot;title&quot;:&quot;route.post&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.post should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:254,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${collection.name}`)\n    .post({ foo: \&quot;bar\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c75c607d-ea4f-45e5-a57a-61daa7c4f32f&quot;,&quot;parentUUID&quot;:&quot;a17dbf59-ed29-47a5-a9c2-508b55bfebdf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c75c607d-ea4f-45e5-a57a-61daa7c4f32f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:254,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b3a5ffe2-beca-42ba-b313-352e04cd8365&quot;,&quot;title&quot;:&quot;route.put&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.put \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:261,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3fc4935-74d5-4b00-90b0-8f282e1a5a97&quot;,&quot;parentUUID&quot;:&quot;b3a5ffe2-beca-42ba-b313-352e04cd8365&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.put should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .put({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a185343-ae6f-47b8-b8a2-3214d640fc2c&quot;,&quot;parentUUID&quot;:&quot;b3a5ffe2-beca-42ba-b313-352e04cd8365&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a185343-ae6f-47b8-b8a2-3214d640fc2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:308,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;77c89d6d-2b61-43e8-aea5-a7c91baab3ff&quot;,&quot;title&quot;:&quot;route.patch&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:268,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;608ca809-c679-420f-a6b4-6d8119296c49&quot;,&quot;parentUUID&quot;:&quot;77c89d6d-2b61-43e8-aea5-a7c91baab3ff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .patch({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72cf0020-0a39-43a0-923c-d82b5b66f49b&quot;,&quot;parentUUID&quot;:&quot;77c89d6d-2b61-43e8-aea5-a7c91baab3ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72cf0020-0a39-43a0-923c-d82b5b66f49b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:307,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;166389d4-ca8a-4778-828a-71227c796c1b&quot;,&quot;title&quot;:&quot;route.delete&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2f288e7-5467-448f-94f8-7bdeed42c0a8&quot;,&quot;parentUUID&quot;:&quot;166389d4-ca8a-4778-828a-71227c796c1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .delete()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55070ccf-8683-46a8-bc95-816b47e65c26&quot;,&quot;parentUUID&quot;:&quot;166389d4-ca8a-4778-828a-71227c796c1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55070ccf-8683-46a8-bc95-816b47e65c26&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:309,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3527e01c-b570-4286-9947-c2962a1a9490&quot;,&quot;title&quot;:&quot;route.head&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.head \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94b00bf3-e1d5-4487-a707-8f77c83368ea&quot;,&quot;parentUUID&quot;:&quot;3527e01c-b570-4286-9947-c2962a1a9490&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.head should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .head()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;statusCode\&quot;, 200);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2c57da0-56ed-4b52-a44d-5c934b4d783f&quot;,&quot;parentUUID&quot;:&quot;3527e01c-b570-4286-9947-c2962a1a9490&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e2c57da0-56ed-4b52-a44d-5c934b4d783f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:307,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;73b55dc7-e033-411e-a5b6-03bbb75378e9&quot;,&quot;title&quot;:&quot;Cursor API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1227,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d82b26bc-f828-4845-a7de-7f8dbd7f3db0&quot;,&quot;parentUUID&quot;:&quot;73b55dc7-e033-411e-a5b6-03bbb75378e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:304,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor = await fabric.query(c8qlQuery);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3fb4681-4c27-4600-9026-92845d229a36&quot;,&quot;parentUUID&quot;:&quot;73b55dc7-e033-411e-a5b6-03bbb75378e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a4b32e4-e5ea-4fc0-8bf6-79073512aeb5&quot;,&quot;parentUUID&quot;:&quot;73b55dc7-e033-411e-a5b6-03bbb75378e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7c6a050f-9973-40cf-bb43-75613310075e&quot;,&quot;title&quot;:&quot;cursor.all&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an Array of all results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.all returns an Array of all results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(vals =&gt; {\n    chai_1.expect(vals).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b55fbc1-c1fc-4137-b949-18d6c8c51ee8&quot;,&quot;parentUUID&quot;:&quot;7c6a050f-9973-40cf-bb43-75613310075e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5b55fbc1-c1fc-4137-b949-18d6c8c51ee8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d3265781-fb94-4710-b972-f12020fc8fd3&quot;,&quot;title&quot;:&quot;cursor.next&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns the next result of the Cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.next returns the next result of the Cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(0);\n    return cursor.next();\n})\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(1);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0266866-8507-477b-9e37-318e26eb1aad&quot;,&quot;parentUUID&quot;:&quot;d3265781-fb94-4710-b972-f12020fc8fd3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0266866-8507-477b-9e37-318e26eb1aad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;45c13652-cd65-4fd6-ac94-23b13d7ed6db&quot;,&quot;title&quot;:&quot;cursor.hasNext&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the Cursor has more results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true if the Cursor has more results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(cursor.hasNext()).to.equal(true);\ncursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.be.a(\&quot;number\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff5bd46e-aa96-404a-92ac-a94dbd9e2564&quot;,&quot;parentUUID&quot;:&quot;45c13652-cd65-4fd6-ac94-23b13d7ed6db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the Cursor is empty&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false if the Cursor is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(() =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cdd9c1b-6ed9-46c6-8483-fe00dca27ba6&quot;,&quot;parentUUID&quot;:&quot;45c13652-cd65-4fd6-ac94-23b13d7ed6db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns true after first batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true after first batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:357,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(c8qlQuery, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor.next();\n    chai_1.expect(cursor._result.length).to.equal(0);\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acd0d2f8-6ecb-4c09-a725-420ccb0c8245&quot;,&quot;parentUUID&quot;:&quot;45c13652-cd65-4fd6-ac94-23b13d7ed6db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:860,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i In 0..1 RETURN i\&quot;, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8458a25d-d5bf-468a-9785-d9a1e36f0e12&quot;,&quot;parentUUID&quot;:&quot;45c13652-cd65-4fd6-ac94-23b13d7ed6db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i In 0..1 RETURN i\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(2);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(1);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f511fbbe-ac71-40f3-82e7-5a136cff43b6&quot;,&quot;parentUUID&quot;:&quot;45c13652-cd65-4fd6-ac94-23b13d7ed6db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 404 after timeout&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns 404 after timeout&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3baa0381-63f8-46d8-8fb6-178d3c1984c4&quot;,&quot;parentUUID&quot;:&quot;45c13652-cd65-4fd6-ac94-23b13d7ed6db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed (with large amount of results)&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed (with large amount of results)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f961582-3f18-4507-8219-9fab138be72b&quot;,&quot;parentUUID&quot;:&quot;45c13652-cd65-4fd6-ac94-23b13d7ed6db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff5bd46e-aa96-404a-92ac-a94dbd9e2564&quot;,&quot;7cdd9c1b-6ed9-46c6-8483-fe00dca27ba6&quot;,&quot;acd0d2f8-6ecb-4c09-a725-420ccb0c8245&quot;,&quot;8458a25d-d5bf-468a-9785-d9a1e36f0e12&quot;,&quot;f511fbbe-ac71-40f3-82e7-5a136cff43b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;3baa0381-63f8-46d8-8fb6-178d3c1984c4&quot;,&quot;1f961582-3f18-4507-8219-9fab138be72b&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:1528,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8af27f89-2bfd-4d8d-989e-e24081c67da7&quot;,&quot;title&quot;:&quot;cursor.each&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;invokes the callback for each value&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each invokes the callback for each value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each(value =&gt; {\n    results.push(value);\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3c8f077-80ed-4385-9a7a-020e649a70d1&quot;,&quot;parentUUID&quot;:&quot;8af27f89-2bfd-4d8d-989e-e24081c67da7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;aborts if the callback returns false&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each aborts if the callback returns false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each((value) =&gt; {\n    results.push(value);\n    if (value === 5)\n        return false;\n    return;\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6deb34c-718d-4b2d-9394-5d7dd5b22302&quot;,&quot;parentUUID&quot;:&quot;8af27f89-2bfd-4d8d-989e-e24081c67da7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f3c8f077-80ed-4385-9a7a-020e649a70d1&quot;,&quot;e6deb34c-718d-4b2d-9394-5d7dd5b22302&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7557a8fa-e2a2-4f78-8b08-6bae2e6d4a07&quot;,&quot;title&quot;:&quot;cursor.every&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns true if the callback returns a truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return false;\n    results.push(value);\n    return true;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9063ecea-6805-4fe5-87f9-f6c38343bb88&quot;,&quot;parentUUID&quot;:&quot;7557a8fa-e2a2-4f78-8b08-6bae2e6d4a07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns false if the callback returns a non-truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    results.push(value);\n    return value &lt; 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;141795e8-59f0-4f5f-9cb1-a937152481c1&quot;,&quot;parentUUID&quot;:&quot;7557a8fa-e2a2-4f78-8b08-6bae2e6d4a07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9063ecea-6805-4fe5-87f9-f6c38343bb88&quot;,&quot;141795e8-59f0-4f5f-9cb1-a937152481c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;71d5d6d2-77a8-4bcb-9e23-d528fa4ee097&quot;,&quot;title&quot;:&quot;cursor.some&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns false if the callback returns a non-truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return true;\n    results.push(value);\n    return false;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a130642-374f-476f-943c-c772e34b16a8&quot;,&quot;parentUUID&quot;:&quot;71d5d6d2-77a8-4bcb-9e23-d528fa4ee097&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns true if the callback returns a truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    results.push(value);\n    return value &gt;= 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cee88773-8c51-4364-bdad-9a7e1bced630&quot;,&quot;parentUUID&quot;:&quot;71d5d6d2-77a8-4bcb-9e23-d528fa4ee097&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a130642-374f-476f-943c-c772e34b16a8&quot;,&quot;cee88773-8c51-4364-bdad-9a7e1bced630&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8979d805-d9ef-440c-bcc7-d330988ad60a&quot;,&quot;title&quot;:&quot;cursor.map&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;maps all result values over the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.map maps all result values over the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .map(value =&gt; value * 2)\n    .then(results =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult.map(value =&gt; value * 2));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3378654-cb64-4e15-a165-b14f7e43555c&quot;,&quot;parentUUID&quot;:&quot;8979d805-d9ef-440c-bcc7-d330988ad60a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c3378654-cb64-4e15-a165-b14f7e43555c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7724b008-a705-4634-a6c7-8614423cf372&quot;,&quot;title&quot;:&quot;cursor.reduce&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;reduces the result values with the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.reduce reduces the result values with the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .reduce((a, b) =&gt; a + b)\n    .then(result =&gt; {\n    chai_1.expect(result).to.eql(c8qlResult.reduce((a, b) =&gt; a + b));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77776f4f-5f0a-41aa-8203-f4ac8eedcb7f&quot;,&quot;parentUUID&quot;:&quot;7724b008-a705-4634-a6c7-8614423cf372&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77776f4f-5f0a-41aa-8203-f4ac8eedcb7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;73c2c477-e5dc-4b25-a3dc-16ed88a37b01&quot;,&quot;title&quot;:&quot;cursor.delete&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete the cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.delete should delete the cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1be1d21b-c4d0-4753-bbaa-e4660b81447f&quot;,&quot;parentUUID&quot;:&quot;73c2c477-e5dc-4b25-a3dc-16ed88a37b01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;1be1d21b-c4d0-4753-bbaa-e4660b81447f&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0c543227-1fa3-4fb6-ac31-5713e5e85dc4&quot;,&quot;title&quot;:&quot;Collection metadata&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2146,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94eb7b31-74bf-47d4-b9cb-83aaa72dfafb&quot;,&quot;parentUUID&quot;:&quot;0c543227-1fa3-4fb6-ac31-5713e5e85dc4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:340,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(dbName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4fee219-ee22-4f4a-a896-1cf1c428f58a&quot;,&quot;parentUUID&quot;:&quot;0c543227-1fa3-4fb6-ac31-5713e5e85dc4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b8ef58c0-9bc8-4be7-bc5e-b4d3e48bcb61&quot;,&quot;title&quot;:&quot;collection.get&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:311,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await collection.get();\nchai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\nchai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\nchai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\nchai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a73536b-8123-4576-bcd4-f3c1de19e616&quot;,&quot;parentUUID&quot;:&quot;b8ef58c0-9bc8-4be7-bc5e-b4d3e48bcb61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should throw if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:303,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.collection(\&quot;no\&quot;).get();\n}\ncatch (e) {\n    chai_1.expect(e).to.have.property(\&quot;errorNum\&quot;, collection_1.COLLECTION_NOT_FOUND);\n    return;\n}\nchai_1.expect.fail(\&quot;should throw\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b4cdebc-8a21-4e70-8d1d-d763c3feb0cb&quot;,&quot;parentUUID&quot;:&quot;b8ef58c0-9bc8-4be7-bc5e-b4d3e48bcb61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a73536b-8123-4576-bcd4-f3c1de19e616&quot;,&quot;6b4cdebc-8a21-4e70-8d1d-d763c3feb0cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:614,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6dac8ae2-8393-4af3-b09d-9d9d4024b688&quot;,&quot;title&quot;:&quot;collection.exists&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if collection exists&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return true if collection exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:303,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.exists();\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eeb605e6-7f0f-4b7e-9e1b-8b79a6362a1c&quot;,&quot;parentUUID&quot;:&quot;6dac8ae2-8393-4af3-b09d-9d9d4024b688&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return false if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:252,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric.collection(\&quot;no\&quot;).exists();\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a35bed8-d272-4cf8-946b-bf352694d6da&quot;,&quot;parentUUID&quot;:&quot;6dac8ae2-8393-4af3-b09d-9d9d4024b688&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eeb605e6-7f0f-4b7e-9e1b-8b79a6362a1c&quot;,&quot;2a35bed8-d272-4cf8-946b-bf352694d6da&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:555,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9a8578fc-5a1e-474d-8e06-043247fe8f52&quot;,&quot;title&quot;:&quot;collection.properties&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return properties of a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.properties should return properties of a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:249,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .properties()\n    .then(properties =&gt; {\n    chai_1.expect(properties).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(properties).to.have.property(\&quot;waitForSync\&quot;, false);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;868cb1b7-823c-4118-8c04-9889af79cec2&quot;,&quot;parentUUID&quot;:&quot;9a8578fc-5a1e-474d-8e06-043247fe8f52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;868cb1b7-823c-4118-8c04-9889af79cec2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:249,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;77ed1e72-e02f-4804-8620-4ad0112d3bb4&quot;,&quot;title&quot;:&quot;collection.count&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.count should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:257,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .count()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a193895b-b0dd-4802-b15e-df7434495376&quot;,&quot;parentUUID&quot;:&quot;77ed1e72-e02f-4804-8620-4ad0112d3bb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a193895b-b0dd-4802-b15e-df7434495376&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:257,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;71be690c-615c-4940-9885-c532b73f8977&quot;,&quot;title&quot;:&quot;Manipulating collections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1969,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1ab66f7-cfc4-46a2-8e5f-a1866b3a0148&quot;,&quot;parentUUID&quot;:&quot;71be690c-615c-4940-9885-c532b73f8977&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:304,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`collection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbdf6638-6622-4a94-b43d-9b52e6825d34&quot;,&quot;parentUUID&quot;:&quot;71be690c-615c-4940-9885-c532b73f8977&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:294,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72bec8e9-d8e9-483b-8817-63628cdacadd&quot;,&quot;parentUUID&quot;:&quot;71be690c-615c-4940-9885-c532b73f8977&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:614,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .get()\n    .then(() =&gt; {\n    collection\n        .drop()\n        .then(() =&gt; void done())\n        .catch(done);\n})\n    .catch(() =&gt; void done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8647b7e-3cc0-426f-8208-7fcf5a2045a9&quot;,&quot;parentUUID&quot;:&quot;71be690c-615c-4940-9885-c532b73f8977&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f49107a8-08ab-4f29-8f62-60ce1fdcf2ad&quot;,&quot;title&quot;:&quot;collection.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:608,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28cf9117-d5ca-4538-9b99-2500526cd209&quot;,&quot;parentUUID&quot;:&quot;f49107a8-08ab-4f29-8f62-60ce1fdcf2ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new local document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:603,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;442aafaa-e40f-40cd-b41e-81790197b3e2&quot;,&quot;parentUUID&quot;:&quot;f49107a8-08ab-4f29-8f62-60ce1fdcf2ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:605,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21bf2f82-2b99-4a88-a93e-8f6fa982bcfb&quot;,&quot;parentUUID&quot;:&quot;f49107a8-08ab-4f29-8f62-60ce1fdcf2ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new local edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:614,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d257008b-fb29-43f1-b1ea-574ad5320fe1&quot;,&quot;parentUUID&quot;:&quot;f49107a8-08ab-4f29-8f62-60ce1fdcf2ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;28cf9117-d5ca-4538-9b99-2500526cd209&quot;,&quot;442aafaa-e40f-40cd-b41e-81790197b3e2&quot;,&quot;21bf2f82-2b99-4a88-a93e-8f6fa982bcfb&quot;,&quot;d257008b-fb29-43f1-b1ea-574ad5320fe1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2430,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;83ced703-a41d-400e-a505-ee76b0950634&quot;,&quot;title&quot;:&quot;collection.rename&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should rename a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.rename should rename a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:616,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(\&quot;/_admin/server/role\&quot;)\n    .get()\n    .then(res =&gt; {\n    if (res.body.role !== \&quot;SINGLE\&quot;)\n        return;\n    const name = `renamecollection${Date.now()}`;\n    return collection.rename(name).then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, name);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5b87756-c2c5-4f37-97b2-e416af541e5e&quot;,&quot;parentUUID&quot;:&quot;83ced703-a41d-400e-a505-ee76b0950634&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5b87756-c2c5-4f37-97b2-e416af541e5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:616,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;62f861aa-f0e8-4981-8494-06e7a9d94377&quot;,&quot;title&quot;:&quot;collection.truncate&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should truncate a non-empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should truncate a non-empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:699,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.save({}).then(() =&gt; {\n    return collection\n        .truncate()\n        .then(() =&gt; {\n        collection.count().then(info =&gt; {\n            chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n            chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n        });\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8de3407-92cb-4f9e-a9f5-90d42b51d851&quot;,&quot;parentUUID&quot;:&quot;62f861aa-f0e8-4981-8494-06e7a9d94377&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow truncating a empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should allow truncating a empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:612,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.truncate().then(() =&gt; {\n    return collection\n        .count()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31495112-f890-4d50-9838-e2b8d5a6324e&quot;,&quot;parentUUID&quot;:&quot;62f861aa-f0e8-4981-8494-06e7a9d94377&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f8de3407-92cb-4f9e-a9f5-90d42b51d851&quot;,&quot;31495112-f890-4d50-9838-e2b8d5a6324e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1311,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4af8f78b-ce01-43a6-b9d3-588e0c12c37f&quot;,&quot;title&quot;:&quot;collection.drop&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.drop should drop a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:619,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.drop().then(() =&gt; {\n    return collection\n        .get()\n        .then(done)\n        .catch(err =&gt; {\n        chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n        void done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6150e063-170c-45a6-aa11-e1674fa267fe&quot;,&quot;parentUUID&quot;:&quot;4af8f78b-ce01-43a6-b9d3-588e0c12c37f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6150e063-170c-45a6-aa11-e1674fa267fe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:619,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7ee537bd-6896-4357-9809-66f256c08c94&quot;,&quot;title&quot;:&quot;collection.onChange&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the message on collection change&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.onChange should get the message on collection change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1852,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const callbackObj = {\n    onopen: () =&gt; {\n        collection.save({ name: \&quot;Anthony\&quot;, lastname: \&quot;Gonsalvis\&quot; });\n    },\n    onmessage: (msg) =&gt; {\n        console.log(\&quot;msg=&gt;\&quot;, msg);\n        done();\n    },\n    onerror: (err) =&gt; {\n        console.log(\&quot;Connection Error-&gt;\&quot;, err);\n        chai_1.expect.fail(\&quot;Websocket connection error\&quot;);\n    },\n    onclose: () =&gt; console.log(\&quot;Websoket connection closed\&quot;)\n};\ncollection.onChange(callbackObj, testUrl.substring(8));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0489ee39-1fcb-4b0e-bef3-f848f0f500f8&quot;,&quot;parentUUID&quot;:&quot;7ee537bd-6896-4357-9809-66f256c08c94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0489ee39-1fcb-4b0e-bef3-f848f0f500f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1852,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8c519224-ef07-4d2a-9d31-4ddd69275b1b&quot;,&quot;title&quot;:&quot;Managing indexes&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2108,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c16a77af-57e3-4493-9d81-5f5038dd4467&quot;,&quot;parentUUID&quot;:&quot;8c519224-ef07-4d2a-9d31-4ddd69275b1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:302,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf1201c6-437a-48a5-ba6c-b135839ce45a&quot;,&quot;parentUUID&quot;:&quot;8c519224-ef07-4d2a-9d31-4ddd69275b1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;82e6ce43-1290-465b-b5cc-acac57693aa0&quot;,&quot;title&quot;:&quot;collection.createIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a index of given type&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createIndex should create a index of given type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:349,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createIndex({\n    type: \&quot;hash\&quot;,\n    fields: [\&quot;value0\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value0\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;331690a7-ee29-4e57-8fa7-ff99af25b7a8&quot;,&quot;parentUUID&quot;:&quot;82e6ce43-1290-465b-b5cc-acac57693aa0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;331690a7-ee29-4e57-8fa7-ff99af25b7a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:349,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;33472324-a867-4aec-8808-f21e54de270c&quot;,&quot;title&quot;:&quot;collection.createHashIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a hash index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createHashIndex should create a hash index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:254,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ab3b950-2e1f-4be1-8e9c-bc9df24c62ab&quot;,&quot;parentUUID&quot;:&quot;33472324-a867-4aec-8808-f21e54de270c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ab3b950-2e1f-4be1-8e9c-bc9df24c62ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:254,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b3a2e713-4c42-49e2-a75a-b734d1b5d669&quot;,&quot;title&quot;:&quot;collection.createSkipList&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a skiplist index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createSkipList should create a skiplist index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:256,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createSkipList([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;skiplist\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;809137f4-69a1-4c9e-929f-023dbf7ce664&quot;,&quot;parentUUID&quot;:&quot;b3a2e713-4c42-49e2-a75a-b734d1b5d669&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;809137f4-69a1-4c9e-929f-023dbf7ce664&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:256,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;eb5980b0-a6f9-4da7-b837-84c5d6b51f7f&quot;,&quot;title&quot;:&quot;collection.createPersistentIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a persistent index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createPersistentIndex should create a persistent index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createPersistentIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;persistent\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8cf1a83-25e7-49b6-a73d-ba3a94108039&quot;,&quot;parentUUID&quot;:&quot;eb5980b0-a6f9-4da7-b837-84c5d6b51f7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e8cf1a83-25e7-49b6-a73d-ba3a94108039&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:410,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9f1361d6-ab39-435e-ac4d-5da8f9e1b055&quot;,&quot;title&quot;:&quot;collection.createGeoIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a geo1 index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo1 index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96632670-be04-4cab-bd52-0e0c5c743da6&quot;,&quot;parentUUID&quot;:&quot;9f1361d6-ab39-435e-ac4d-5da8f9e1b055&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo2 index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo2 index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e1f946f-0df9-4da9-9598-3aecd5638ff4&quot;,&quot;parentUUID&quot;:&quot;9f1361d6-ab39-435e-ac4d-5da8f9e1b055&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:303,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6731d2e-b191-4427-9b7d-a019db408306&quot;,&quot;parentUUID&quot;:&quot;9f1361d6-ab39-435e-ac4d-5da8f9e1b055&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:313,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value1\&quot;, \&quot;value2\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value1\&quot;, \&quot;value2\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca29748c-ac4f-47e0-b663-f7e6f865dd2e&quot;,&quot;parentUUID&quot;:&quot;9f1361d6-ab39-435e-ac4d-5da8f9e1b055&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6731d2e-b191-4427-9b7d-a019db408306&quot;,&quot;ca29748c-ac4f-47e0-b663-f7e6f865dd2e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;96632670-be04-4cab-bd52-0e0c5c743da6&quot;,&quot;3e1f946f-0df9-4da9-9598-3aecd5638ff4&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:616,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5aed315a-687e-4e14-b013-69a5394c2e47&quot;,&quot;title&quot;:&quot;collection.createFulltextIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fulltext index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createFulltextIndex should create a fulltext index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:301,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createFulltextIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;fulltext\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf9df06f-e163-4810-8732-c4dd1b3946a7&quot;,&quot;parentUUID&quot;:&quot;5aed315a-687e-4e14-b013-69a5394c2e47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf9df06f-e163-4810-8732-c4dd1b3946a7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:301,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;91b4a5ab-d57e-470b-914d-1ef83d8652eb&quot;,&quot;title&quot;:&quot;collection.index&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.index should return information about a index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:615,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.index(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        chai_1.expect(index).to.have.property(\&quot;type\&quot;, info.type);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efe05f82-220d-466b-a828-0c7cbedd1b16&quot;,&quot;parentUUID&quot;:&quot;91b4a5ab-d57e-470b-914d-1ef83d8652eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;efe05f82-220d-466b-a828-0c7cbedd1b16&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:615,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;12831c9b-ab72-480f-9c87-1fa6fcaa871b&quot;,&quot;title&quot;:&quot;collection.indexes&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of indexes&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.indexes should return a list of indexes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:610,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(index =&gt; {\n    return collection.indexes().then(indexes =&gt; {\n        chai_1.expect(indexes).to.be.instanceof(Array);\n        chai_1.expect(indexes).to.not.be.empty;\n        chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(1);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbf42b90-311d-48a3-880a-3015e7ff825b&quot;,&quot;parentUUID&quot;:&quot;12831c9b-ab72-480f-9c87-1fa6fcaa871b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bbf42b90-311d-48a3-880a-3015e7ff825b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:610,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6a12bc71-6761-45d9-88a2-25bf0881d74b&quot;,&quot;title&quot;:&quot;collection.dropIndex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop existing index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.dropIndex should drop existing index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1654,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.dropIndex(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        return collection.indexes().then(indexes =&gt; {\n            chai_1.expect(indexes).to.be.instanceof(Array);\n            chai_1.expect(indexes).to.not.be.empty;\n            chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(0);\n        });\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c83f0f3b-a983-4ae3-b181-45e852b6d39d&quot;,&quot;parentUUID&quot;:&quot;6a12bc71-6761-45d9-88a2-25bf0881d74b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c83f0f3b-a983-4ae3-b181-45e852b6d39d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1654,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2dbd016a-019b-4de0-8b93-588eef3018db&quot;,&quot;title&quot;:&quot;DocumentCollection API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1863,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d35e11d9-35f5-40e4-aba2-06ae0c0042da&quot;,&quot;parentUUID&quot;:&quot;2dbd016a-019b-4de0-8b93-588eef3018db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:279,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fdbd5df-04d7-426b-90f9-73b35af109ff&quot;,&quot;parentUUID&quot;:&quot;2dbd016a-019b-4de0-8b93-588eef3018db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:289,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;318d4107-c985-4953-b8c8-887cae86ec02&quot;,&quot;parentUUID&quot;:&quot;2dbd016a-019b-4de0-8b93-588eef3018db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:436,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1807146f-06ab-44ee-bd02-bc50dfc5078c&quot;,&quot;parentUUID&quot;:&quot;2dbd016a-019b-4de0-8b93-588eef3018db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c7974230-7382-4ff4-9ef8-853885dabacf&quot;,&quot;title&quot;:&quot;documentCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:252,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e3a2af7-33d0-48c6-9a66-782b4c3b71b6&quot;,&quot;parentUUID&quot;:&quot;c7974230-7382-4ff4-9ef8-853885dabacf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document returns a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dd6802b-f236-4cf4-a69f-2d071ebdde22&quot;,&quot;parentUUID&quot;:&quot;c7974230-7382-4ff4-9ef8-853885dabacf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:361,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f83ae189-4b65-439b-8b20-796ff757454c&quot;,&quot;parentUUID&quot;:&quot;c7974230-7382-4ff4-9ef8-853885dabacf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2dd6802b-f236-4cf4-a69f-2d071ebdde22&quot;,&quot;f83ae189-4b65-439b-8b20-796ff757454c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:671,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;09b8f5d7-7f14-4dd6-9e0a-22ad3e342143&quot;,&quot;title&quot;:&quot;documentCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:325,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7409b556-ba71-4410-b0ac-37357bfdfbec&quot;,&quot;parentUUID&quot;:&quot;09b8f5d7-7f14-4dd6-9e0a-22ad3e342143&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the document exists&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns true if the document exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:251,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba5afbc9-49c8-458a-bd7c-ea75a7a91bd5&quot;,&quot;parentUUID&quot;:&quot;09b8f5d7-7f14-4dd6-9e0a-22ad3e342143&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the document does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the document does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:317,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;does-not-exist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32fe4332-97fe-476e-a51c-affefc68ab80&quot;,&quot;parentUUID&quot;:&quot;09b8f5d7-7f14-4dd6-9e0a-22ad3e342143&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the collection does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric\n    .collection(\&quot;doesnotexist\&quot;)\n    .documentExists(\&quot;lol\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb99a812-6f50-403c-81b6-91b09bc880eb&quot;,&quot;parentUUID&quot;:&quot;09b8f5d7-7f14-4dd6-9e0a-22ad3e342143&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba5afbc9-49c8-458a-bd7c-ea75a7a91bd5&quot;,&quot;32fe4332-97fe-476e-a51c-affefc68ab80&quot;,&quot;cb99a812-6f50-403c-81b6-91b09bc880eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:876,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8a3ad05a-1b72-48db-8506-3a6672e2e291&quot;,&quot;title&quot;:&quot;documentCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save creates a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:618,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29aff1c5-a9ca-48c8-abc5-44eefc52dbf1&quot;,&quot;parentUUID&quot;:&quot;8a3ad05a-1b72-48db-8506-3a6672e2e291&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:610,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;027b674c-3630-4780-b0f0-f5b86566f6f1&quot;,&quot;parentUUID&quot;:&quot;8a3ad05a-1b72-48db-8506-3a6672e2e291&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns the document if opts.returnNew is set&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save returns the document if opts.returnNew is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = { returnNew: true };\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e775684a-af56-41fa-88f4-fc16bc9cd780&quot;,&quot;parentUUID&quot;:&quot;8a3ad05a-1b72-48db-8506-3a6672e2e291&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;interprets opts as returnNew if it is a boolean&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save interprets opts as returnNew if it is a boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = true;\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e34ac989-aab0-42d3-9dd3-dfa4c2263730&quot;,&quot;parentUUID&quot;:&quot;8a3ad05a-1b72-48db-8506-3a6672e2e291&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29aff1c5-a9ca-48c8-abc5-44eefc52dbf1&quot;,&quot;027b674c-3630-4780-b0f0-f5b86566f6f1&quot;,&quot;e775684a-af56-41fa-88f4-fc16bc9cd780&quot;,&quot;e34ac989-aab0-42d3-9dd3-dfa4c2263730&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1847,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;89296f0a-27d5-42cb-b718-46b045a70a0c&quot;,&quot;title&quot;:&quot;documentCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.replace replaces the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:958,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d86c2d7-9ba5-4cdc-99e3-f9db8ba211dc&quot;,&quot;parentUUID&quot;:&quot;89296f0a-27d5-42cb-b718-46b045a70a0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d86c2d7-9ba5-4cdc-99e3-f9db8ba211dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:958,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c8d69da1-aa7b-426e-84aa-7c0f977ac296&quot;,&quot;title&quot;:&quot;documentCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:922,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c5505ca-051b-4a64-881b-9bde0a5fef89&quot;,&quot;parentUUID&quot;:&quot;c8d69da1-aa7b-426e-84aa-7c0f977ac296&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:869,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2199a798-c78a-426d-be99-ed19b15abd84&quot;,&quot;parentUUID&quot;:&quot;c8d69da1-aa7b-426e-84aa-7c0f977ac296&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c5505ca-051b-4a64-881b-9bde0a5fef89&quot;,&quot;2199a798-c78a-426d-be99-ed19b15abd84&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1791,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6a634f06-3e1d-4e80-b0a2-5e2816fcfbcc&quot;,&quot;title&quot;:&quot;documentCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:425,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b82f2fa4-1349-4b7a-9635-8c45d36b53d1&quot;,&quot;parentUUID&quot;:&quot;6a634f06-3e1d-4e80-b0a2-5e2816fcfbcc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove deletes the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:495,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.document(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22946e8d-4d4a-48a2-8c2a-e06332db919e&quot;,&quot;parentUUID&quot;:&quot;6a634f06-3e1d-4e80-b0a2-5e2816fcfbcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22946e8d-4d4a-48a2-8c2a-e06332db919e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:495,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;56002ffb-4117-4d4a-bfca-cb0e207472fc&quot;,&quot;title&quot;:&quot;EdgeCollection API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1847,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53fe00a0-208b-4f7b-b458-05e9807af9db&quot;,&quot;parentUUID&quot;:&quot;56002ffb-4117-4d4a-bfca-cb0e207472fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.edgeCollection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4de12e3-f05a-46b3-8b8e-07cbf0873e10&quot;,&quot;parentUUID&quot;:&quot;56002ffb-4117-4d4a-bfca-cb0e207472fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4f47216-2a52-4788-8af0-954afb328ce1&quot;,&quot;parentUUID&quot;:&quot;56002ffb-4117-4d4a-bfca-cb0e207472fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0979f90-7ce0-4f18-9951-a296510d86a9&quot;,&quot;parentUUID&quot;:&quot;56002ffb-4117-4d4a-bfca-cb0e207472fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;61212503-86bf-4099-916e-2fbe613529b7&quot;,&quot;title&quot;:&quot;edgeCollection.edge&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6a7dfcf-f222-41e6-bc33-fc149110740d&quot;,&quot;parentUUID&quot;:&quot;61212503-86bf-4099-916e-2fbe613529b7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1404,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;557e7694-585f-4a8d-9e6d-c724bc34eff9&quot;,&quot;parentUUID&quot;:&quot;61212503-86bf-4099-916e-2fbe613529b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca311746-9e44-45af-ad39-98b88b779ddf&quot;,&quot;parentUUID&quot;:&quot;61212503-86bf-4099-916e-2fbe613529b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;557e7694-585f-4a8d-9e6d-c724bc34eff9&quot;,&quot;ca311746-9e44-45af-ad39-98b88b779ddf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1713,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6ef6846f-1990-42f3-b6fc-4b98009be9ea&quot;,&quot;title&quot;:&quot;edgeCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:379,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c697344b-c894-4a1c-a2f9-335145c1f734&quot;,&quot;parentUUID&quot;:&quot;6ef6846f-1990-42f3-b6fc-4b98009be9ea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70974f9d-cbaf-4562-9048-eac150463ffd&quot;,&quot;parentUUID&quot;:&quot;6ef6846f-1990-42f3-b6fc-4b98009be9ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ca25ee2-e8d0-4825-88b4-74e8a833e4a5&quot;,&quot;parentUUID&quot;:&quot;6ef6846f-1990-42f3-b6fc-4b98009be9ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;70974f9d-cbaf-4562-9048-eac150463ffd&quot;,&quot;5ca25ee2-e8d0-4825-88b4-74e8a833e4a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:615,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f73aa412-a0e0-42de-894e-2da747458b91&quot;,&quot;title&quot;:&quot;edgeCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:512,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d92cbbf6-ccd1-45dc-81d9-e60f63828e6c&quot;,&quot;parentUUID&quot;:&quot;f73aa412-a0e0-42de-894e-2da747458b91&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the edge exists&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns true if the edge exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:514,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a508bbb-3fe2-4446-8613-18078b72bf43&quot;,&quot;parentUUID&quot;:&quot;f73aa412-a0e0-42de-894e-2da747458b91&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the edge does not exist&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns false if the edge does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:315,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;doesnotexist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43df795d-4570-4f0e-98e3-04a1babeb12a&quot;,&quot;parentUUID&quot;:&quot;f73aa412-a0e0-42de-894e-2da747458b91&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a508bbb-3fe2-4446-8613-18078b72bf43&quot;,&quot;43df795d-4570-4f0e-98e3-04a1babeb12a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:829,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c418a1e2-a037-45a8-b2d7-e4e1a8d1d19b&quot;,&quot;title&quot;:&quot;edgeCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save creates an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:613,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24aa958d-af9f-46ad-8a46-0f80df63c9ad&quot;,&quot;parentUUID&quot;:&quot;c418a1e2-a037-45a8-b2d7-e4e1a8d1d19b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:626,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = {\n    chicken: \&quot;chicken\&quot;,\n    _key: \&quot;banana\&quot;,\n    _from: \&quot;d/1\&quot;,\n    _to: \&quot;d/2\&quot;\n};\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.equals(data._key);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._key).to.equal(data._key);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b105ca11-9e44-4f34-b001-aff52116ba5c&quot;,&quot;parentUUID&quot;:&quot;c418a1e2-a037-45a8-b2d7-e4e1a8d1d19b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes _from and _to as positional arguments&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes _from and _to as positional arguments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:616,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ea5bff4-1ecc-446d-a8bc-a61b06af0f21&quot;,&quot;parentUUID&quot;:&quot;c418a1e2-a037-45a8-b2d7-e4e1a8d1d19b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes an options object&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:960,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c660b89-7c10-4dce-8394-bb62f6a108af&quot;,&quot;parentUUID&quot;:&quot;c418a1e2-a037-45a8-b2d7-e4e1a8d1d19b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes an options object with positional _from and _to&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object with positional _from and _to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:615,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b694c7b4-29e0-4b75-b76a-49cb7406887d&quot;,&quot;parentUUID&quot;:&quot;c418a1e2-a037-45a8-b2d7-e4e1a8d1d19b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24aa958d-af9f-46ad-8a46-0f80df63c9ad&quot;,&quot;b105ca11-9e44-4f34-b001-aff52116ba5c&quot;,&quot;4ea5bff4-1ecc-446d-a8bc-a61b06af0f21&quot;,&quot;0c660b89-7c10-4dce-8394-bb62f6a108af&quot;,&quot;b694c7b4-29e0-4b75-b76a-49cb7406887d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3430,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8d563d59-8ab4-4b81-b545-256936042b5b&quot;,&quot;title&quot;:&quot;edgeCollection.traversal&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1859,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows = fabric.edgeCollection(\&quot;knows\&quot;);\nconst person = fabric.collection(\&quot;person\&quot;);\nPromise.all([person.create(), knows.create()])\n    .then(() =&gt; Promise.all([\n    person.import([\n        { _key: \&quot;Alice\&quot; },\n        { _key: \&quot;Bob\&quot; },\n        { _key: \&quot;Charlie\&quot; },\n        { _key: \&quot;Dave\&quot; },\n        { _key: \&quot;Eve\&quot; }\n    ]),\n    knows.import([\n        { _from: \&quot;person/Alice\&quot;, _to: \&quot;person/Bob\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Charlie\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Dave\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Alice\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Bob\&quot; }\n    ])\n]))\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;508391d5-9c39-44f1-b15e-c687c78d0065&quot;,&quot;parentUUID&quot;:&quot;8d563d59-8ab4-4b81-b545-256936042b5b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;executes traversal&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal executes traversal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:603,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows\n    .traversal(\&quot;person/Alice\&quot;, { direction: \&quot;outbound\&quot; })\n    .then((result) =&gt; {\n    chai_1.expect(result).to.have.property(\&quot;visited\&quot;);\n    const visited = result.visited;\n    chai_1.expect(visited).to.have.property(\&quot;vertices\&quot;);\n    const vertices = visited.vertices;\n    chai_1.expect(vertices).to.be.instanceOf(Array);\n    chai_1.expect(vertices.length).to.equal(4);\n    const names = vertices.map((d) =&gt; d._key);\n    for (const name of [\&quot;Alice\&quot;, \&quot;Bob\&quot;, \&quot;Charlie\&quot;, \&quot;Dave\&quot;]) {\n        chai_1.expect(names).to.contain(name);\n    }\n    chai_1.expect(visited).to.have.property(\&quot;paths\&quot;);\n    const paths = visited.paths;\n    chai_1.expect(paths).to.be.instanceOf(Array);\n    chai_1.expect(paths.length).to.equal(4);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c36d106-8459-4b1c-8340-40b346d871c5&quot;,&quot;parentUUID&quot;:&quot;8d563d59-8ab4-4b81-b545-256936042b5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c36d106-8459-4b1c-8340-40b346d871c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:603,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0d9e6d24-67dd-453d-9108-ce0101c6cb87&quot;,&quot;title&quot;:&quot;edgeCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.replace replaces the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:801,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = { potato: \&quot;tomato\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, {\n        sup: \&quot;dawg\&quot;,\n        _from: \&quot;d/1\&quot;,\n        _to: \&quot;d/2\&quot;\n    });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f248c60-47bd-442d-abba-0e9c83cbcf9f&quot;,&quot;parentUUID&quot;:&quot;0d9e6d24-67dd-453d-9108-ce0101c6cb87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f248c60-47bd-442d-abba-0e9c83cbcf9f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:801,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;29ca8d4c-d293-4e8a-ae43-034a5d9780ab&quot;,&quot;title&quot;:&quot;edgeCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:912,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;empty\&quot;, null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;808fbefb-249f-4191-a606-8f9198a69883&quot;,&quot;parentUUID&quot;:&quot;29ca8d4c-d293-4e8a-ae43-034a5d9780ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:781,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;780dc007-e65f-4e7b-9dda-168fb913238e&quot;,&quot;parentUUID&quot;:&quot;29ca8d4c-d293-4e8a-ae43-034a5d9780ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;808fbefb-249f-4191-a606-8f9198a69883&quot;,&quot;780dc007-e65f-4e7b-9dda-168fb913238e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1693,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b184ecab-e897-4a40-808a-ec0ffc05691c&quot;,&quot;title&quot;:&quot;edgeCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:261,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c86eb33d-37c2-4f71-b636-2f16c61dd9b5&quot;,&quot;parentUUID&quot;:&quot;b184ecab-e897-4a40-808a-ec0ffc05691c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove deletes the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1275,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.edge(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0100320-3cdb-49b3-b51d-5d5d9fedf7c9&quot;,&quot;parentUUID&quot;:&quot;b184ecab-e897-4a40-808a-ec0ffc05691c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a0100320-3cdb-49b3-b51d-5d5d9fedf7c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1275,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e9256a85-b16d-4406-bc64-e63a7a03b2f5&quot;,&quot;title&quot;:&quot;Graph API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1847,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8af90def-3b9f-482e-a4ba-afc2c0ed2e22&quot;,&quot;parentUUID&quot;:&quot;e9256a85-b16d-4406-bc64-e63a7a03b2f5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:358,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6b1f5b0-796b-4991-9178-b8118d0d864e&quot;,&quot;parentUUID&quot;:&quot;e9256a85-b16d-4406-bc64-e63a7a03b2f5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;00c09909-292a-4c37-98cf-17d9ca70ef53&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1165,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75ab143c-b099-43c3-84ce-d77de4634022&quot;,&quot;parentUUID&quot;:&quot;00c09909-292a-4c37-98cf-17d9ca70ef53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:921,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d437f28d-c662-4d09-a45e-87c90f435695&quot;,&quot;parentUUID&quot;:&quot;00c09909-292a-4c37-98cf-17d9ca70ef53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get fetches information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:365,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4605d8c7-84ba-458f-bb52-5b882fecba7c&quot;,&quot;parentUUID&quot;:&quot;00c09909-292a-4c37-98cf-17d9ca70ef53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4605d8c7-84ba-458f-bb52-5b882fecba7c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:365,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c566fcf4-ab06-4ead-abf1-365c16611f55&quot;,&quot;title&quot;:&quot;graph.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:613,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7803cab1-b498-41e3-9c7d-226d15962e80&quot;,&quot;parentUUID&quot;:&quot;c566fcf4-ab06-4ead-abf1-365c16611f55&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:610,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric.collection(name).drop()))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;890657bc-6e24-49b6-b6f8-532db88e4ffa&quot;,&quot;parentUUID&quot;:&quot;c566fcf4-ab06-4ead-abf1-365c16611f55&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create creates the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:617,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let graph = fabric.graph(`g${Date.now()}`);\ngraph\n    .create({\n    edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n        collection: name,\n        from: vertexCollectionNames,\n        to: vertexCollectionNames\n    }))\n})\n    .then(() =&gt; graph.get())\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f65c647b-c27a-4393-a4b0-fa9e5bc536c8&quot;,&quot;parentUUID&quot;:&quot;c566fcf4-ab06-4ead-abf1-365c16611f55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f65c647b-c27a-4393-a4b0-fa9e5bc536c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:617,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;87da99d9-511f-497b-8a58-2705b1846d2e&quot;,&quot;title&quot;:&quot;graph.drop&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:920,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30e646f6-9b84-4852-afe2-ab949273b27c&quot;,&quot;parentUUID&quot;:&quot;87da99d9-511f-497b-8a58-2705b1846d2e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:562,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric\n    .collection(name)\n    .drop()\n    .catch(() =&gt; null)))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d90907f8-f44d-4705-ad43-833bc52e61bd&quot;,&quot;parentUUID&quot;:&quot;87da99d9-511f-497b-8a58-2705b1846d2e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;destroys the graph if not passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop destroys the graph if not passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:923,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fa9a317-c769-47c0-922b-a0d117319558&quot;,&quot;parentUUID&quot;:&quot;87da99d9-511f-497b-8a58-2705b1846d2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;additionally drops all of its collections if passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop additionally drops all of its collections if passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1230,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop(true)\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).not.to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;904b2068-ba01-4150-8e05-e04a371334e5&quot;,&quot;parentUUID&quot;:&quot;87da99d9-511f-497b-8a58-2705b1846d2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3fa9a317-c769-47c0-922b-a0d117319558&quot;,&quot;904b2068-ba01-4150-8e05-e04a371334e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7830dcd8-e0c5-42b7-885e-8a7bdff0161d&quot;,&quot;title&quot;:&quot;Manipulating graph vertices&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2154,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66b33c91-1238-4492-9e3f-d00064206acd&quot;,&quot;parentUUID&quot;:&quot;7830dcd8-e0c5-42b7-885e-8a7bdff0161d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:921,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7bea723-5d20-455f-b290-69989570aa9e&quot;,&quot;parentUUID&quot;:&quot;7830dcd8-e0c5-42b7-885e-8a7bdff0161d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9aecc7dc-511d-4559-ba4d-aef0d8c2c81c&quot;,&quot;parentUUID&quot;:&quot;7830dcd8-e0c5-42b7-885e-8a7bdff0161d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:919,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bf6d34c-6f82-4860-a9de-09db659f2bd0&quot;,&quot;parentUUID&quot;:&quot;7830dcd8-e0c5-42b7-885e-8a7bdff0161d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d2b6b854-7711-41ec-a428-43d6dac52f97&quot;,&quot;title&quot;:&quot;graph.vertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a GraphVertexCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.vertexCollection returns a GraphVertexCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = graph.vertexCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(graph_1.GraphVertexCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f57ac67e-9f7f-4a4c-a381-b46bfcd27a1c&quot;,&quot;parentUUID&quot;:&quot;d2b6b854-7711-41ec-a428-43d6dac52f97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f57ac67e-9f7f-4a4c-a381-b46bfcd27a1c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;821b94de-5b86-466b-ae49-002a2e9e19db&quot;,&quot;title&quot;:&quot;graph.addVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:334,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`coll${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a3c15e4-40a3-4bfd-a3f5-8d0071766e58&quot;,&quot;parentUUID&quot;:&quot;821b94de-5b86-466b-ae49-002a2e9e19db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:313,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96983185-7ef8-4555-80c9-af4887bbe3e0&quot;,&quot;parentUUID&quot;:&quot;821b94de-5b86-466b-ae49-002a2e9e19db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds the given vertex collection to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection adds the given vertex collection to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).to.contain(vertexCollection.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;984b959e-7436-4008-8a20-d84a7930c775&quot;,&quot;parentUUID&quot;:&quot;821b94de-5b86-466b-ae49-002a2e9e19db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;984b959e-7436-4008-8a20-d84a7930c775&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:309,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;130a0ccb-7f1f-4771-8e74-8ee3193c46c1&quot;,&quot;title&quot;:&quot;graph.removeVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:614,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`xc${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; graph.addVertexCollection(vertexCollection.name))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;737203e0-f2dd-466d-b2c7-d0d80d2e2093&quot;,&quot;parentUUID&quot;:&quot;130a0ccb-7f1f-4771-8e74-8ee3193c46c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes the given vertex collection from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection removes the given vertex collection from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:585,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e866afc-27b6-440b-ad25-b699958c0674&quot;,&quot;parentUUID&quot;:&quot;130a0ccb-7f1f-4771-8e74-8ee3193c46c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;destroys the collection if explicitly passed true&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection destroys the collection if explicitly passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:616,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name, true)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), err =&gt; {\n    chai_1.expect(err).to.be.an.instanceof(error_1.C8Error);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c239f5e1-854d-42f2-8096-725f0efef454&quot;,&quot;parentUUID&quot;:&quot;130a0ccb-7f1f-4771-8e74-8ee3193c46c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e866afc-27b6-440b-ad25-b699958c0674&quot;,&quot;c239f5e1-854d-42f2-8096-725f0efef454&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1201,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;39dd8012-1f9e-46d3-be96-3049174c32c1&quot;,&quot;title&quot;:&quot;Manipulating graph edges&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1831,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;facc71f5-ce2f-4f1e-b22b-f628511f851f&quot;,&quot;parentUUID&quot;:&quot;39dd8012-1f9e-46d3-be96-3049174c32c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(graphName);\ngraph\n    .create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d923ca1-8a7e-4c66-b4cb-3e2c344a30eb&quot;,&quot;parentUUID&quot;:&quot;39dd8012-1f9e-46d3-be96-3049174c32c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:350,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c41d7fb-50e7-4195-a7a0-27118c546a0c&quot;,&quot;parentUUID&quot;:&quot;39dd8012-1f9e-46d3-be96-3049174c32c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:263,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4324c627-5b23-4df9-b500-9c8cc9854e11&quot;,&quot;parentUUID&quot;:&quot;39dd8012-1f9e-46d3-be96-3049174c32c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f1749b44-6e2a-4878-b2b6-fe7a26130668&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.get should return information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:342,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1f037d9-3df4-4681-933c-24c3bc59b383&quot;,&quot;parentUUID&quot;:&quot;f1749b44-6e2a-4878-b2b6-fe7a26130668&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1f037d9-3df4-4681-933c-24c3bc59b383&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:342,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;12113c63-b82c-4e32-989c-58187fddd78f&quot;,&quot;title&quot;:&quot;graph.edgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.edgeCollections should contain edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:338,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .edgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info.map((c) =&gt; c.name)).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f3284aa-8975-4df0-b1d0-9441ecc4bf52&quot;,&quot;parentUUID&quot;:&quot;12113c63-b82c-4e32-989c-58187fddd78f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f3284aa-8975-4df0-b1d0-9441ecc4bf52&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:338,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;64b0b1d8-1d53-45bc-b883-7d91c3df8be2&quot;,&quot;title&quot;:&quot;graph.listEdgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all edge collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listEdgeCollections should return all edge collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listEdgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37d2307f-49eb-4f8e-901c-68ced79ce155&quot;,&quot;parentUUID&quot;:&quot;64b0b1d8-1d53-45bc-b883-7d91c3df8be2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;37d2307f-49eb-4f8e-901c-68ced79ce155&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:258,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;64b19e4f-9286-49d0-a0fb-7faaa19ae17e&quot;,&quot;title&quot;:&quot;graph.listVertexCollections&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all vertex collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listVertexCollections should return all vertex collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:311,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listVertexCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2e61c48-0b24-4bb9-b63f-48bb5e943e58&quot;,&quot;parentUUID&quot;:&quot;64b19e4f-9286-49d0-a0fb-7faaa19ae17e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e2e61c48-0b24-4bb9-b63f-48bb5e943e58&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:311,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5d0b6dba-4663-4add-8274-7e7894c005ba&quot;,&quot;title&quot;:&quot;graph.addEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add an edgeDefinition to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.addEdgeDefinition should add an edgeDefinition to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addEdgeDefinition({\n    collection: \&quot;works_in\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(2);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;works_in\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;works_in\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;657d6805-785b-4771-b318-dfd1f7191f84&quot;,&quot;parentUUID&quot;:&quot;5d0b6dba-4663-4add-8274-7e7894c005ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;657d6805-785b-4771-b318-dfd1f7191f84&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:307,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4fc48cd3-1615-4192-8a88-88ce54074d6d&quot;,&quot;title&quot;:&quot;graph.replaceEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should replace an existing edgeDefinition in the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.replaceEdgeDefinition should replace an existing edgeDefinition in the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:278,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .replaceEdgeDefinition(\&quot;knows\&quot;, {\n    collection: \&quot;knows\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4daa7328-9820-438e-be09-44a208ab7263&quot;,&quot;parentUUID&quot;:&quot;4fc48cd3-1615-4192-8a88-88ce54074d6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4daa7328-9820-438e-be09-44a208ab7263&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:278,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;bf32e622-d348-4355-8fad-94b815c61636&quot;,&quot;title&quot;:&quot;graph.removeEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove an edgeDefinition from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.removeEdgeDefinition should remove an edgeDefinition from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeEdgeDefinition(\&quot;knows\&quot;)\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40b4f9ce-b987-4917-86db-d74750836144&quot;,&quot;parentUUID&quot;:&quot;bf32e622-d348-4355-8fad-94b815c61636&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40b4f9ce-b987-4917-86db-d74750836144&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:308,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;052d1a7b-32ca-488a-aa0d-26412a614b6f&quot;,&quot;title&quot;:&quot;GraphVertexCollection API&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3193,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\nconst graph = fabric.graph(`testgraph${Date.now()}`);\nawait graph.create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n});\ncollection = graph.vertexCollection(\&quot;person\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4187f6f6-6310-4aa2-bd15-af17794e6f32&quot;,&quot;parentUUID&quot;:&quot;052d1a7b-32ca-488a-aa0d-26412a614b6f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .truncate()\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c710f3f6-381b-49ee-b2a8-f62edbc8ac69&quot;,&quot;parentUUID&quot;:&quot;052d1a7b-32ca-488a-aa0d-26412a614b6f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14dba1ec-da0e-4fec-a44e-5fc51d96beae&quot;,&quot;parentUUID&quot;:&quot;052d1a7b-32ca-488a-aa0d-26412a614b6f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b3516bfb-9856-4bf3-82f1-825dadb1f734&quot;,&quot;title&quot;:&quot;graphVertexCollection.vertex&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:400,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f3ffa95-5033-4850-9106-dee558afa7bb&quot;,&quot;parentUUID&quot;:&quot;b3516bfb-9856-4bf3-82f1-825dadb1f734&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3079549a-dde6-4bb5-8411-4080fdfb8018&quot;,&quot;parentUUID&quot;:&quot;b3516bfb-9856-4bf3-82f1-825dadb1f734&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:412,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d3e2a38-e9f2-473a-9451-6593d406d527&quot;,&quot;parentUUID&quot;:&quot;b3516bfb-9856-4bf3-82f1-825dadb1f734&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3079549a-dde6-4bb5-8411-4080fdfb8018&quot;,&quot;8d3e2a38-e9f2-473a-9451-6593d406d527&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:719,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;da035930-a71b-4921-bea3-44f36e1d3610&quot;,&quot;title&quot;:&quot;graphVertexCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:519,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71fc317a-af23-4d6f-b79e-6a6fab8fe7aa&quot;,&quot;parentUUID&quot;:&quot;da035930-a71b-4921-bea3-44f36e1d3610&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e964d76-1c0f-483e-92f5-3369c9b0d316&quot;,&quot;parentUUID&quot;:&quot;da035930-a71b-4921-bea3-44f36e1d3610&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:350,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7d28155-4206-415f-bcf0-a0594158f1c9&quot;,&quot;parentUUID&quot;:&quot;da035930-a71b-4921-bea3-44f36e1d3610&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e964d76-1c0f-483e-92f5-3369c9b0d316&quot;,&quot;d7d28155-4206-415f-bcf0-a0594158f1c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:658,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f53194eb-b8ab-4a2e-aabb-35ef1560106a&quot;,&quot;title&quot;:&quot;graphVertexCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save creates a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:562,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5d5251a-db02-4349-a49a-f9361d43d93b&quot;,&quot;parentUUID&quot;:&quot;f53194eb-b8ab-4a2e-aabb-35ef1560106a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:614,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;762f6898-6954-4a48-9a6b-9ccddf44470b&quot;,&quot;parentUUID&quot;:&quot;f53194eb-b8ab-4a2e-aabb-35ef1560106a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5d5251a-db02-4349-a49a-f9361d43d93b&quot;,&quot;762f6898-6954-4a48-9a6b-9ccddf44470b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1176,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1c18943c-c201-4fd7-863d-8338dbf99a14&quot;,&quot;title&quot;:&quot;graphVertexCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.replace replaces the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:809,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de014cea-284a-42a6-8cf7-1477b9c370e6&quot;,&quot;parentUUID&quot;:&quot;1c18943c-c201-4fd7-863d-8338dbf99a14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de014cea-284a-42a6-8cf7-1477b9c370e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:809,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b479a05c-22d8-4da6-a3da-6f538d2c106d&quot;,&quot;title&quot;:&quot;graphVertexCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update updates the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1023,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56eb2509-b74d-41f7-bacf-c255b84cd6cf&quot;,&quot;parentUUID&quot;:&quot;b479a05c-22d8-4da6-a3da-6f538d2c106d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1009,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ceac800-2b0c-4312-bc87-ffd4133a6760&quot;,&quot;parentUUID&quot;:&quot;b479a05c-22d8-4da6-a3da-6f538d2c106d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56eb2509-b74d-41f7-bacf-c255b84cd6cf&quot;,&quot;2ceac800-2b0c-4312-bc87-ffd4133a6760&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2032,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0ef0307f-97f8-4109-b84f-a90aba3f907f&quot;,&quot;title&quot;:&quot;graphVertexCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7855929e-f7e1-43af-aedf-62aab3e9ffaf&quot;,&quot;parentUUID&quot;:&quot;0ef0307f-97f8-4109-b84f-a90aba3f907f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove deletes the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:616,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.vertex(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;033a03cf-dba7-4734-ad44-0fdf817a74fb&quot;,&quot;parentUUID&quot;:&quot;0ef0307f-97f8-4109-b84f-a90aba3f907f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;033a03cf-dba7-4734-ad44-0fdf817a74fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:616,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5e70ed86-ab43-45ba-a60a-11423d98f173&quot;,&quot;title&quot;:&quot;Join Path&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/21-util-joinpath.js&quot;,&quot;file&quot;:&quot;/lib/async/test/21-util-joinpath.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;joinPath 1&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;../../u1/u2\&quot;;\nvar path = \&quot;/security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;../../u1/u2/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3468a01c-1050-4855-a392-2a6f5e938060&quot;,&quot;parentUUID&quot;:&quot;5e70ed86-ab43-45ba-a60a-11423d98f173&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 2&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/u1/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ecd9113-793e-44f5-aeb7-b6db391415a8&quot;,&quot;parentUUID&quot;:&quot;5e70ed86-ab43-45ba-a60a-11423d98f173&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 3&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdfca25e-2edc-476c-b06c-d3732fc9dd58&quot;,&quot;parentUUID&quot;:&quot;5e70ed86-ab43-45ba-a60a-11423d98f173&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3468a01c-1050-4855-a392-2a6f5e938060&quot;,&quot;0ecd9113-793e-44f5-aeb7-b6db391415a8&quot;,&quot;bdfca25e-2edc-476c-b06c-d3732fc9dd58&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8b578d70-3248-4cc1-b1a8-8a78da1a9835&quot;,&quot;title&quot;:&quot;Helper.getFullStreamPath&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output when there is no extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is no extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d28e9d6-a591-4dfe-8f77-9984f481d8ec&quot;,&quot;parentUUID&quot;:&quot;8b578d70-3248-4cc1-b1a8-8a78da1a9835&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns correct output when there is extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;, \&quot;/compaction\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog/compaction\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99b7773a-401a-4db9-b6c8-3a7486cd6830&quot;,&quot;parentUUID&quot;:&quot;8b578d70-3248-4cc1-b1a8-8a78da1a9835&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d28e9d6-a591-4dfe-8f77-9984f481d8ec&quot;,&quot;99b7773a-401a-4db9-b6c8-3a7486cd6830&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9c4bf1f3-4c2f-4b0a-9653-6e71c134cdcd&quot;,&quot;title&quot;:&quot;Helper.getDCListString&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output&quot;,&quot;fullTitle&quot;:&quot;Helper.getDCListString returns correct output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(helper_1.getDCListString(response)).to.equal(&#x27;dev-ap-southeast-1,dev-ap-southeast-2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e572c10d-3825-4c57-af19-49564a0e931a&quot;,&quot;parentUUID&quot;:&quot;9c4bf1f3-4c2f-4b0a-9653-6e71c134cdcd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e572c10d-3825-4c57-af19-49564a0e931a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;cc9bac83-9946-4971-961c-afd582213d40&quot;,&quot;title&quot;:&quot;C8QL Stream queries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1868,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84e46aba-0253-4808-8263-2d87f5afe0e1&quot;,&quot;parentUUID&quot;:&quot;cc9bac83-9946-4971-961c-afd582213d40&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:318,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ee54fda-1736-457c-9415-19e47f1f0acc&quot;,&quot;parentUUID&quot;:&quot;cc9bac83-9946-4971-961c-afd582213d40&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8965b5cf-c575-4bef-8016-28fd655ae1bd&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:272,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;, {}, { options: { stream: true } })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d9ca186-6e62-46f5-9576-4432d1cc1080&quot;,&quot;parentUUID&quot;:&quot;8965b5cf-c575-4bef-8016-28fd655ae1bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 }, { options: { stream: true } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0b647f4-3dda-4d6a-82fa-3a6e1b032229&quot;,&quot;parentUUID&quot;:&quot;8965b5cf-c575-4bef-8016-28fd655ae1bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:302,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, {}, {\n    batchSize: 2,\n    count: true\n})\n    .then(cursor =&gt; {\n    let count = cursor.count;\n    chai_1.expect(count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e79ac5ea-8984-4d26-b945-547cee4f0ed8&quot;,&quot;parentUUID&quot;:&quot;8965b5cf-c575-4bef-8016-28fd655ae1bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78872ade-6e1d-4dd4-8ab9-9e1fe1b18110&quot;,&quot;parentUUID&quot;:&quot;8965b5cf-c575-4bef-8016-28fd655ae1bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d9ca186-6e62-46f5-9576-4432d1cc1080&quot;,&quot;e0b647f4-3dda-4d6a-82fa-3a6e1b032229&quot;,&quot;e79ac5ea-8984-4d26-b945-547cee4f0ed8&quot;,&quot;78872ade-6e1d-4dd4-8ab9-9e1fe1b18110&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1190,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;fbc4c903-4f1d-4667-b840-a17c6ee7c9c6&quot;,&quot;title&quot;:&quot;with some data&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;can access large collection in parallel&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries with some data can access large collection in parallel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;997a6ba9-84f1-4118-958b-250272df346f&quot;,&quot;parentUUID&quot;:&quot;fbc4c903-4f1d-4667-b840-a17c6ee7c9c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;can do writes and reads&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries with some data can do writes and reads&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c443cd9-f2ca-43be-ad22-71057c82978f&quot;,&quot;parentUUID&quot;:&quot;fbc4c903-4f1d-4667-b840-a17c6ee7c9c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;997a6ba9-84f1-4118-958b-250272df346f&quot;,&quot;0c443cd9-f2ca-43be-ad22-71057c82978f&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4becde04-ae7b-4e8b-9edc-9ba2771a123e&quot;,&quot;title&quot;:&quot;Manipulating streams&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1213,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;697afce3-1167-429a-b208-c8889089c405&quot;,&quot;parentUUID&quot;:&quot;4becde04-ae7b-4e8b-9edc-9ba2771a123e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;401e6a84-6f1e-4b29-bad3-9e37096a09ae&quot;,&quot;parentUUID&quot;:&quot;4becde04-ae7b-4e8b-9edc-9ba2771a123e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b5ad3def-0532-404f-bc2a-1554d921c3fd&quot;,&quot;title&quot;:&quot;fabric.stream&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a new Stream instance&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream returns a new Stream instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.stream(\&quot;testStream\&quot;, true)).to.be.instanceof(stream_1.Stream);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fedec02-97bc-43f5-9c0f-1b614c349b1f&quot;,&quot;parentUUID&quot;:&quot;b5ad3def-0532-404f-bc2a-1554d921c3fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets all streams&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream gets all streams&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getStreams();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f081e08-eb52-4977-bcfb-d43536e5a41a&quot;,&quot;parentUUID&quot;:&quot;b5ad3def-0532-404f-bc2a-1554d921c3fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;clears backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:304,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.clearBacklog();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfff803d-b883-4ae5-9307-a5349586f549&quot;,&quot;parentUUID&quot;:&quot;b5ad3def-0532-404f-bc2a-1554d921c3fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;clears subscription backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears subscription backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39ec797e-1463-4252-b2fe-23f2a2e7af9c&quot;,&quot;parentUUID&quot;:&quot;b5ad3def-0532-404f-bc2a-1554d921c3fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unsubscribes to a subscription&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream unsubscribes to a subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0496687b-b342-42f3-861f-8c56eb5a6c36&quot;,&quot;parentUUID&quot;:&quot;b5ad3def-0532-404f-bc2a-1554d921c3fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0fedec02-97bc-43f5-9c0f-1b614c349b1f&quot;,&quot;8f081e08-eb52-4977-bcfb-d43536e5a41a&quot;,&quot;dfff803d-b883-4ae5-9307-a5349586f549&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;39ec797e-1463-4252-b2fe-23f2a2e7af9c&quot;,&quot;0496687b-b342-42f3-861f-8c56eb5a6c36&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:611,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;eef1e300-1d97-43ff-9c4e-ae7cc72ef4a6&quot;,&quot;title&quot;:&quot;stream.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7dfd59c7-a917-479e-8768-2c67507bbb6f&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, true);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f32739a-d5cd-48b7-9d47-3833aa0be777&quot;,&quot;parentUUID&quot;:&quot;7dfd59c7-a917-479e-8768-2c67507bbb6f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, false);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a938ed7-5201-48fd-8b1d-94fc75e5e77d&quot;,&quot;parentUUID&quot;:&quot;7dfd59c7-a917-479e-8768-2c67507bbb6f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f32739a-d5cd-48b7-9d47-3833aa0be777&quot;,&quot;5a938ed7-5201-48fd-8b1d-94fc75e5e77d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:611,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;7ccf5255-760e-4891-80cf-96bda3cd8253&quot;,&quot;title&quot;:&quot;stream.manipulate&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:414,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream = fabric.stream(`testStream${Date.now()}`, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a49d2ef1-a50f-43d6-bea8-70457f1e4193&quot;,&quot;parentUUID&quot;:&quot;7ccf5255-760e-4891-80cf-96bda3cd8253&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:506,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ca02e4d-60af-41d9-81d1-7da9ed268584&quot;,&quot;parentUUID&quot;:&quot;7ccf5255-760e-4891-80cf-96bda3cd8253&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc8dcd26-419c-4591-80da-c1d7a6a09bcf&quot;,&quot;parentUUID&quot;:&quot;7ccf5255-760e-4891-80cf-96bda3cd8253&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.expireMessagesOnAllSubscriptions&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.expireMessagesOnAllSubscriptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d401ca8-48f9-4a05-bf48-43ff2d2e6906&quot;,&quot;parentUUID&quot;:&quot;7ccf5255-760e-4891-80cf-96bda3cd8253&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6303e885-dd91-43ff-87c2-51244e07fb3c&quot;,&quot;title&quot;:&quot;stream.getBacklog&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets estimated backlog for offline stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getBacklog gets estimated backlog for offline stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(async function () {\n    const response = await stream.backlog();\n    chai_1.expect(response.error).to.be.false;\n}, 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3307a63c-c471-4f9c-99bc-0e1b88370010&quot;,&quot;parentUUID&quot;:&quot;6303e885-dd91-43ff-87c2-51244e07fb3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3307a63c-c471-4f9c-99bc-0e1b88370010&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;ef3e88e2-e900-4287-9175-460135537ab9&quot;,&quot;title&quot;:&quot;stream.getStreamStatistics&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets the stream statistics&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getStreamStatistics gets the stream statistics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:268,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getStreamStatistics();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd7b3160-e73b-4237-b594-2c980011e737&quot;,&quot;parentUUID&quot;:&quot;ef3e88e2-e900-4287-9175-460135537ab9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd7b3160-e73b-4237-b594-2c980011e737&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:268,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;f1ff6740-fbe6-4735-85ce-3cb010cde3f9&quot;,&quot;title&quot;:&quot;stream.subscriptions&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.resetSubscriptionToPosition&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetSubscriptionToPosition&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b8c7d89-eee5-4b5e-ae39-b42b4c2d4856&quot;,&quot;parentUUID&quot;:&quot;f1ff6740-fbe6-4735-85ce-3cb010cde3f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.expireMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.expireMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cc42559-7182-4db7-b92e-dd789ece3b9c&quot;,&quot;parentUUID&quot;:&quot;f1ff6740-fbe6-4735-85ce-3cb010cde3f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.resetCursor&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetCursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d4879e7-09b5-4e7c-9e07-9064aed2e464&quot;,&quot;parentUUID&quot;:&quot;f1ff6740-fbe6-4735-85ce-3cb010cde3f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.skipNumberOfMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipNumberOfMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9294ba90-35bc-4098-8cd4-25f5caa36bb6&quot;,&quot;parentUUID&quot;:&quot;f1ff6740-fbe6-4735-85ce-3cb010cde3f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.skipAllMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipAllMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a78f794f-7128-47a4-a40c-0cbd7e4813a9&quot;,&quot;parentUUID&quot;:&quot;f1ff6740-fbe6-4735-85ce-3cb010cde3f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.getSubscriptionList&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.getSubscriptionList&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;it(\&quot;gets subscription list\&quot;, async () =&gt; {\n    const response = await stream.getSubscriptionList();\n    chai_1.expect(response.error).to.be.false;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdf09d9c-9a1a-4c8b-b18e-e73d78fd1af2&quot;,&quot;parentUUID&quot;:&quot;f1ff6740-fbe6-4735-85ce-3cb010cde3f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cc42559-7182-4db7-b92e-dd789ece3b9c&quot;,&quot;3d4879e7-09b5-4e7c-9e07-9064aed2e464&quot;,&quot;9294ba90-35bc-4098-8cd4-25f5caa36bb6&quot;,&quot;a78f794f-7128-47a4-a40c-0cbd7e4813a9&quot;,&quot;cdf09d9c-9a1a-4c8b-b18e-e73d78fd1af2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;2b8c7d89-eee5-4b5e-ae39-b42b4c2d4856&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;9676e617-9652-4c3f-9c34-110465bc0ad4&quot;,&quot;title&quot;:&quot;stream.terminate&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a6ecd9ac-89ff-4b24-80b0-6e958f20bf1a&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;26d2dbf8-eaef-45c9-9fa3-a9f20237ec2b&quot;,&quot;title&quot;:&quot;local&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:344,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, true);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d038d0d-01f7-4581-b108-e2bb53941e6b&quot;,&quot;parentUUID&quot;:&quot;26d2dbf8-eaef-45c9-9fa3-a9f20237ec2b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local terminates persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(async function () {\n    const response = await stream.terminateStream();\n    chai_1.expect(response.error).to.be.false;\n}, 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5285154b-cd45-4eab-89dc-076703ba43d4&quot;,&quot;parentUUID&quot;:&quot;26d2dbf8-eaef-45c9-9fa3-a9f20237ec2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5285154b-cd45-4eab-89dc-076703ba43d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;6920105e-f96c-461d-9322-2527335b81cf&quot;,&quot;title&quot;:&quot;global&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:299,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ba499a3-f3c3-4a7f-823b-a6acc737f44b&quot;,&quot;parentUUID&quot;:&quot;6920105e-f96c-461d-9322-2527335b81cf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global terminates persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(async function () {\n    const response = await stream.terminateStream();\n    chai_1.expect(response.error).to.be.false;\n}, 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61e8255c-c0c7-476d-8163-4afc0a7ff731&quot;,&quot;parentUUID&quot;:&quot;6920105e-f96c-461d-9322-2527335b81cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61e8255c-c0c7-476d-8163-4afc0a7ff731&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;4308e58e-7c23-405b-8c68-14d5fdf188d1&quot;,&quot;title&quot;:&quot;stream.websocket&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baa21ce2-06cc-49ac-b5c8-e070eabac157&quot;,&quot;parentUUID&quot;:&quot;4308e58e-7c23-405b-8c68-14d5fdf188d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6105c9cd-113c-41a7-940c-3a98041a4ac0&quot;,&quot;parentUUID&quot;:&quot;4308e58e-7c23-405b-8c68-14d5fdf188d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets data in consumer when sent by producer&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket gets data in consumer when sent by producer&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3251,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;function callback(msg) {\n    const parsedMsg = JSON.parse(msg);\n    const { payload } = parsedMsg;\n    chai_1.expect(payload).to.equal(\&quot;dGVzdA==\&quot;);\n    done();\n}\nstream.consumer(`streamSubscription${Date.now()}`, {\n    onmessage: callback,\n    onopen: () =&gt; stream.producer(\&quot;test\&quot;, dcName)\n}, dcName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5fcf5e1-784e-4313-a02e-f24a4b5e3d58&quot;,&quot;parentUUID&quot;:&quot;4308e58e-7c23-405b-8c68-14d5fdf188d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5fcf5e1-784e-4313-a02e-f24a4b5e3d58&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3251,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;2d401ca8-48f9-4a05-bf48-43ff2d2e6906&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;268e9a20-421f-4690-a428-e42d3f5f05e9&quot;,&quot;title&quot;:&quot;User Management&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1555,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba0bca2f-9095-400e-9ee0-4d5879f04eb2&quot;,&quot;parentUUID&quot;:&quot;268e9a20-421f-4690-a428-e42d3f5f05e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc5507f4-db1e-4daa-bbe3-485f52f12895&quot;,&quot;parentUUID&quot;:&quot;268e9a20-421f-4690-a428-e42d3f5f05e9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;32883f1c-d23a-4ecf-9bab-02d6bee071fe&quot;,&quot;title&quot;:&quot;fabric.user&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new user instance&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.user creates a new user instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.user(\&quot;testUser\&quot;, \&quot;testUser@test.com\&quot;)).to.be.instanceof(user_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ed4caad-ec75-44f9-b12c-1f2d8f8e60ef&quot;,&quot;parentUUID&quot;:&quot;32883f1c-d23a-4ecf-9bab-02d6bee071fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ed4caad-ec75-44f9-b12c-1f2d8f8e60ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1f19a557-2ae0-47c8-81eb-dadeb895f6da&quot;,&quot;title&quot;:&quot;user.create&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await user.deleteUser();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;882f54e2-82ea-4620-b979-7cc6e018bcf8&quot;,&quot;parentUUID&quot;:&quot;1f19a557-2ae0-47c8-81eb-dadeb895f6da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.create creates a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nconst response = await user.createUser(\&quot;testPass\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4310531-673f-4337-85a8-70e36dc0debb&quot;,&quot;parentUUID&quot;:&quot;1f19a557-2ae0-47c8-81eb-dadeb895f6da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4310531-673f-4337-85a8-70e36dc0debb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;ed4ba4c4-9ddc-4e7d-9a73-ba081a14d69a&quot;,&quot;title&quot;:&quot;fabric.getAllUsers&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists all users&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.getAllUsers Lists all users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllUsers();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09f1c369-67f5-4262-a496-c0ce93231129&quot;,&quot;parentUUID&quot;:&quot;ed4ba4c4-9ddc-4e7d-9a73-ba081a14d69a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09f1c369-67f5-4262-a496-c0ce93231129&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:306,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8ca5519e-411f-4ce0-b1a0-3897993e6f7a&quot;,&quot;title&quot;:&quot;user.crud_operations&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:318,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nawait user.createUser(\&quot;testPass\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d4ce42e-7dc6-4fd3-95e8-8bdff47357ea&quot;,&quot;parentUUID&quot;:&quot;8ca5519e-411f-4ce0-b1a0-3897993e6f7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:303,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await user.deleteUser();\n}\ncatch (error) { }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f922950-f326-4d2a-b46b-624ceafb9852&quot;,&quot;parentUUID&quot;:&quot;8ca5519e-411f-4ce0-b1a0-3897993e6f7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;98dbd510-8b5d-434f-8673-4ea5367815cb&quot;,&quot;title&quot;:&quot;user.deleteUser&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Deletes a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.deleteUser Deletes a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.deleteUser();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93d27764-1fea-4eb1-b2cc-7fb925d81804&quot;,&quot;parentUUID&quot;:&quot;98dbd510-8b5d-434f-8673-4ea5367815cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;93d27764-1fea-4eb1-b2cc-7fb925d81804&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:308,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;edab48d0-1350-42c5-b7b3-b5f95ee6185b&quot;,&quot;title&quot;:&quot;user.getUserDetails&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Fetches a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.getUserDetails Fetches a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:259,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getUserDeatils();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2ceeb0c-b472-4b87-a4b8-b56bd7fc6ec1&quot;,&quot;parentUUID&quot;:&quot;edab48d0-1350-42c5-b7b3-b5f95ee6185b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2ceeb0c-b472-4b87-a4b8-b56bd7fc6ec1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:259,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;ff2d88fb-d6d1-4a0f-816a-eb8e0ceda258&quot;,&quot;title&quot;:&quot;user.modifyUser&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.modifyUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:271,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.modifyUser({\n    active: false\n});\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.active).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c219f994-d0d9-4f51-94d3-ed21f419d7de&quot;,&quot;parentUUID&quot;:&quot;ff2d88fb-d6d1-4a0f-816a-eb8e0ceda258&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c219f994-d0d9-4f51-94d3-ed21f419d7de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:271,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1b189cc5-d418-4599-989a-7bc09c0fb2d1&quot;,&quot;title&quot;:&quot;user.replaceUser&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.replaceUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:264,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.replaceUser({\n    passwd: \&quot;test_passwordddd\&quot;\n});\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5b8c9c2-32a4-4379-b2a8-2d45fcad6fd1&quot;,&quot;parentUUID&quot;:&quot;1b189cc5-d418-4599-989a-7bc09c0fb2d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a5b8c9c2-32a4-4379-b2a8-2d45fcad6fd1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:264,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;title&quot;:&quot;User.FabricAccessOperations&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:339,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(testFabricName, [{ username: user.user }], {\n    dcList: dcList\n});\n// fabric.useFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7dd2c135-05d2-46d9-a9f5-5b479826c007&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:317,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cfc1b50-77a1-4b8f-9102-235005a7d3a3&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists the accessible databases and their permissions &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:288,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8923d385-fd24-47a2-8ef3-718b37823407&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Lists the accessible databases and their permissions with all the collections&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions with all the collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:297,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases(true);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2e6ff21-a9ac-47db-b502-229bfc71d5cb&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Gets the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:555,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result).to.be.oneOf([\&quot;rw\&quot;, \&quot;ro\&quot;, \&quot;none\&quot;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;996669fd-05d4-454b-a31f-5a4a5a714da4&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Gets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:627,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = `coll${Date.now()}`;\nawait fabric.collection(collectionName).create();\nconst response = await user.getCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09135e76-9ed9-4e0a-9a6a-b1c865c6a4a6&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Clears the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.clearDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d48a1bbd-dacb-4a9e-a115-2a61e513ccd6&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Clears the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94d8a029-f1f0-4635-935c-fe3919f93f5c&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c9d4cf4-2ee0-4849-9124-80b007582e58&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sets the access level of a database&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:261,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.setDatabaseAccessLevel(testFabricName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8865d37e-9bb4-43da-abd7-9c864f9b6bfa&quot;,&quot;parentUUID&quot;:&quot;3e8ecdfe-0b95-46ea-ab71-bd488148ba2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8923d385-fd24-47a2-8ef3-718b37823407&quot;,&quot;a2e6ff21-a9ac-47db-b502-229bfc71d5cb&quot;,&quot;996669fd-05d4-454b-a31f-5a4a5a714da4&quot;,&quot;09135e76-9ed9-4e0a-9a6a-b1c865c6a4a6&quot;,&quot;d48a1bbd-dacb-4a9e-a115-2a61e513ccd6&quot;,&quot;8865d37e-9bb4-43da-abd7-9c864f9b6bfa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;94d8a029-f1f0-4635-935c-fe3919f93f5c&quot;,&quot;6c9d4cf4-2ee0-4849-9124-80b007582e58&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:2336,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;67349fbc-c8ef-43b0-90ba-ae70d3a28a3a&quot;,&quot;title&quot;:&quot;manipulating restql&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1220,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d7e9957-eb07-442a-b5b1-9284d1cccf1a&quot;,&quot;parentUUID&quot;:&quot;67349fbc-c8ef-43b0-90ba-ae70d3a28a3a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3a0c6b8-9e9d-41e1-a708-4ee9f57fd41d&quot;,&quot;parentUUID&quot;:&quot;67349fbc-c8ef-43b0-90ba-ae70d3a28a3a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6815ffd6-a4da-4b15-8222-f90b35185f42&quot;,&quot;title&quot;:&quot;fabric.saveQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should save a query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.saveQuery should save a query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryName = \&quot;testQuery\&quot;;\nconst response = await fabric.saveQuery(queryName, {}, \&quot;for coll in _collections return coll\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.name).to.equal(queryName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a4fe309-cfba-48cc-beef-b6a89e3eb7c4&quot;,&quot;parentUUID&quot;:&quot;6815ffd6-a4da-4b15-8222-f90b35185f42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a4fe309-cfba-48cc-beef-b6a89e3eb7c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:306,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;692d49db-86b3-4323-8059-db008c8b4fdd&quot;,&quot;title&quot;:&quot;fabric.listSavedQueries&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should make a successful API call&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.listSavedQueries should make a successful API call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.listSavedQueries();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.length).to.be.at.least(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9654c78e-667a-4f81-b0ff-1d78cabdba5b&quot;,&quot;parentUUID&quot;:&quot;692d49db-86b3-4323-8059-db008c8b4fdd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9654c78e-667a-4f81-b0ff-1d78cabdba5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:308,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;e0948123-cf0a-436e-a7dc-b8bc1176cdae&quot;,&quot;title&quot;:&quot;fabric.executeSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:921,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.executeSavedQuery(queryName, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7391683-baed-4a2e-92f6-942494f33202&quot;,&quot;parentUUID&quot;:&quot;e0948123-cf0a-436e-a7dc-b8bc1176cdae&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery should execute a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;655352cc-522a-4db8-b9cb-1a86861da219&quot;,&quot;parentUUID&quot;:&quot;e0948123-cf0a-436e-a7dc-b8bc1176cdae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;655352cc-522a-4db8-b9cb-1a86861da219&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;a09a213c-ef2a-4b6f-96fd-ba144fbed8d3&quot;,&quot;title&quot;:&quot;fabric.deleteSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.deleteSavedQuery should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:304,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.deleteSavedQuery(queryName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4e24449-0a25-4910-a3ef-e6e991e90d30&quot;,&quot;parentUUID&quot;:&quot;a09a213c-ef2a-4b6f-96fd-ba144fbed8d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c4e24449-0a25-4910-a3ef-e6e991e90d30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:304,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;0ba45e6d-2871-458e-8136-ae64703df699&quot;,&quot;title&quot;:&quot;fabric.createRestqlCursor&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.createRestqlCursor should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4188b78-41bd-4878-b906-1272a2cd5a49&quot;,&quot;parentUUID&quot;:&quot;0ba45e6d-2871-458e-8136-ae64703df699&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;d4188b78-41bd-4878-b906-1272a2cd5a49&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;bdf6f5cf-a5f6-412e-97e6-f49d0e4a8bcb&quot;,&quot;title&quot;:&quot; StreamApps &quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot; StreamApps  \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1229,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ab57737-f409-4d61-9c39-2fb4b5d1afab&quot;,&quot;parentUUID&quot;:&quot;bdf6f5cf-a5f6-412e-97e6-f49d0e4a8bcb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot; StreamApps  \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c53bf9b1-85c0-41b7-8227-82f8f81c4284&quot;,&quot;parentUUID&quot;:&quot;bdf6f5cf-a5f6-412e-97e6-f49d0e4a8bcb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;db08c569-bb3a-436d-9c61-c5cd2c663863&quot;,&quot;title&quot;:&quot;fabric.createStreamApp&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create a Stream Apllication&quot;,&quot;fullTitle&quot;:&quot; StreamApps  fabric.createStreamApp Should create a Stream Apllication&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:633,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllEdgeLocations();\nlet dcListAll = helper_1.getDCListString(response);\nlet dcList = dcListAll.split(\&quot;,\&quot;);\nlet appDefinition = `@App:name(&#x27;Sample-Cargo-App&#x27;)\n    -- Stream\n    define stream srcCargoStream (weight int);\n    -- Table\n    define table destCargoTable (weight int, totalWeight long);\n    -- Data Processing\n    @info(name=&#x27;Query&#x27;)\n    select weight, sum(weight) as totalWeight\n    from srcCargoStream\n    insert into destCargoTable;`;\nlet resp = await fabric.createStreamApp(dcList, appDefinition);\nconsole.log(resp);\nchai_1.expect(resp.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4684361b-fbf5-48c1-9412-6579a654de5c&quot;,&quot;parentUUID&quot;:&quot;db08c569-bb3a-436d-9c61-c5cd2c663863&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4684361b-fbf5-48c1-9412-6579a654de5c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:633,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5476f233-dd31-491e-ad19-db7a0f01c8bd&quot;,&quot;title&quot;:&quot;fabric.getAllStreamApps&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;get all stream apps&quot;,&quot;fullTitle&quot;:&quot; StreamApps  fabric.getAllStreamApps get all stream apps&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:285,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await fabric.getAllStreamApps();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2e85ad4-7074-4797-92c6-b857c1305d8f&quot;,&quot;parentUUID&quot;:&quot;5476f233-dd31-491e-ad19-db7a0f01c8bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2e85ad4-7074-4797-92c6-b857c1305d8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:285,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;427447d4-9fb4-4d5d-8c3a-68b97da2cc8b&quot;,&quot;title&quot;:&quot;fabric.validateStreamappDefinition&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;validate the streamapp definition&quot;,&quot;fullTitle&quot;:&quot; StreamApps  fabric.validateStreamappDefinition validate the streamapp definition&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let appDefinition = `@App:name(&#x27;Sample-Cargo-App&#x27;)\n    -- Stream\n    define stream srcCargoStream (weight int);\n    -- Table\n    define table destCargoTable (weight int, totalWeight long);\n    -- Data Processing\n    @info(name=&#x27;Query&#x27;)\n    select weight, sum(weight) as totalWeight\n    from srcCargoStream\n    insert into destCargoTable;`;\nlet response = await fabric.validateStreamappDefinition(appDefinition);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87a005b9-f64a-44f8-ab1c-091c312ae151&quot;,&quot;parentUUID&quot;:&quot;427447d4-9fb4-4d5d-8c3a-68b97da2cc8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;87a005b9-f64a-44f8-ab1c-091c312ae151&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d61474e6-2ad9-44f0-95bc-538ac53e032e&quot;,&quot;title&quot;:&quot;fabric.getSampleStreamApps&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;get sample stream apps&quot;,&quot;fullTitle&quot;:&quot; StreamApps  fabric.getSampleStreamApps get sample stream apps&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:619,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await fabric.getSampleStreamApps();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50903ca6-224c-4458-a09d-d5eb8b3fb6c0&quot;,&quot;parentUUID&quot;:&quot;d61474e6-2ad9-44f0-95bc-538ac53e032e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;50903ca6-224c-4458-a09d-d5eb8b3fb6c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:619,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;dc67cbf7-72c3-4fbd-94c2-05f5eca18aeb&quot;,&quot;title&quot;:&quot;streamapps.activateStreamApplication&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Activate a stream App&quot;,&quot;fullTitle&quot;:&quot; StreamApps  streamapps.activateStreamApplication Activate a stream App&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:300,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const app = fabric.streamApp(\&quot;Sample-Cargo-App\&quot;);\nlet response = await app.activateStreamApplication(true);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b6a4845-38c7-449d-9745-0a37d25e7ade&quot;,&quot;parentUUID&quot;:&quot;dc67cbf7-72c3-4fbd-94c2-05f5eca18aeb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b6a4845-38c7-449d-9745-0a37d25e7ade&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:300,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;eb2f7dde-4ac6-4458-a231-138abc48419c&quot;,&quot;title&quot;:&quot;streamapps.retriveApplication&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Retrive a stream App&quot;,&quot;fullTitle&quot;:&quot; StreamApps  streamapps.retriveApplication Retrive a stream App&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:272,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const app = fabric.streamApp(\&quot;Sample-Cargo-App\&quot;);\nlet response = await app.retriveApplication();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3804610f-cf35-4545-b017-9a37f92d0990&quot;,&quot;parentUUID&quot;:&quot;eb2f7dde-4ac6-4458-a231-138abc48419c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3804610f-cf35-4545-b017-9a37f92d0990&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:272,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;62fbe30b-f970-4066-89ea-7affa83c9eaa&quot;,&quot;title&quot;:&quot;streamapps.updateApplication&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Update a stream App&quot;,&quot;fullTitle&quot;:&quot; StreamApps  streamapps.updateApplication Update a stream App&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:648,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resp = await fabric.getAllEdgeLocations();\nlet dcListAll = helper_1.getDCListString(resp);\nlet dcList = dcListAll.split(\&quot;,\&quot;);\nlet appdef = `@App:name(&#x27;Sample-Cargo-App&#x27;)\n    -- Stream\n    define stream srcCargoStream (weight int);\n    -- Table\n    define table destCargoTable (weight int, totalWeight long);\n    -- Data Processing\n    @info(name=&#x27;Query&#x27;)\n    select weight, sum(weight) as totalWeight\n    from srcCargoStream\n    insert into destCargoTable;`;\nconst app = fabric.streamApp(\&quot;Sample-Cargo-App\&quot;);\nlet response = await app.updateApplication(dcList, appdef);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79bb04b8-9347-4c48-aff6-43261a349c97&quot;,&quot;parentUUID&quot;:&quot;62fbe30b-f970-4066-89ea-7affa83c9eaa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79bb04b8-9347-4c48-aff6-43261a349c97&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:648,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;219aebf8-55ad-4759-b1d9-61356b960a80&quot;,&quot;title&quot;:&quot;streamapps.query&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;runs query&quot;,&quot;fullTitle&quot;:&quot; StreamApps  streamapps.query runs query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const app = fabric.streamApp(\&quot;Sample-Cargo-App\&quot;);\nlet response = await app.query(\&quot;select * from destCargoTable limit 3\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;211d0c78-e075-4364-a799-6d8b4fdb80bf&quot;,&quot;parentUUID&quot;:&quot;219aebf8-55ad-4759-b1d9-61356b960a80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;211d0c78-e075-4364-a799-6d8b4fdb80bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;101e3497-7f10-4f9a-9cef-89b2377f2b4d&quot;,&quot;title&quot;:&quot;streamapps.deleteApplication&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Delete a stream App&quot;,&quot;fullTitle&quot;:&quot; StreamApps  streamapps.deleteApplication Delete a stream App&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:298,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const app = fabric.streamApp(\&quot;Sample-Cargo-App\&quot;);\nlet response = await app.deleteApplication();\nconsole.log(response);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;552c2da4-9fbf-4f28-abf9-b1a22305a14f&quot;,&quot;parentUUID&quot;:&quot;101e3497-7f10-4f9a-9cef-89b2377f2b4d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;552c2da4-9fbf-4f28-abf9-b1a22305a14f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:298,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8b22457a-3163-425a-a83a-bcf233b77edb&quot;,&quot;title&quot;:&quot;fabric.route&quot;,&quot;fullFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/lib/async/test/32-streamapps.js&quot;,&quot;file&quot;:&quot;/lib/async/test/32-streamapps.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Route instance&quot;,&quot;fullTitle&quot;:&quot;fabric.route returns a Route instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route();\nchai_1.expect(route).to.be.an.instanceof(route_1.Route);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65bd8b8c-959f-4ba5-b020-e42edb15bd6b&quot;,&quot;parentUUID&quot;:&quot;8b22457a-3163-425a-a83a-bcf233b77edb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a route for the given path&quot;,&quot;fullTitle&quot;:&quot;fabric.route creates a route for the given path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = \&quot;/hi\&quot;;\nconst route = fabric.route(path);\nchai_1.expect(route._path).to.equal(path);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5ad0285-8253-479f-8811-18b45d4fc259&quot;,&quot;parentUUID&quot;:&quot;8b22457a-3163-425a-a83a-bcf233b77edb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes the given headers to the new route&quot;,&quot;fullTitle&quot;:&quot;fabric.route passes the given headers to the new route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/hello\&quot;, { \&quot;x-magic\&quot;: \&quot;awesome\&quot; });\nchai_1.expect(route._headers).to.have.property(\&quot;x-magic\&quot;, \&quot;awesome\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ebf99e0-c4a9-43bf-85d7-47f802892892&quot;,&quot;parentUUID&quot;:&quot;8b22457a-3163-425a-a83a-bcf233b77edb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;65bd8b8c-959f-4ba5-b020-e42edb15bd6b&quot;,&quot;b5ad0285-8253-479f-8811-18b45d4fc259&quot;,&quot;9ebf99e0-c4a9-43bf-85d7-47f802892892&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;193f0fbf-e5dd-48a6-a948-f971aad99f9a&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;5.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;options&quot;:{},&quot;version&quot;:&quot;4.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;jsC8&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/sulom/Desktop/Projects/jsC8/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>