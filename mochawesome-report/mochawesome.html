<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:156,&quot;tests&quot;:221,&quot;passes&quot;:190,&quot;pending&quot;:20,&quot;failures&quot;:11,&quot;start&quot;:&quot;2020-02-24T07:01:18.433Z&quot;,&quot;end&quot;:&quot;2020-02-24T07:07:41.917Z&quot;,&quot;duration&quot;:383484,&quot;testsRegistered&quot;:222,&quot;passPercent&quot;:94.05940594059405,&quot;pendingPercent&quot;:9.00900900900901,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:1,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;3160622d-3805-4efd-9613-22c9bd8d050e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets subscription list&quot;,&quot;fullTitle&quot;:&quot;gets subscription list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getSubscriptionList();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef192cca-cbd5-4812-8234-5eca6139272a&quot;,&quot;parentUUID&quot;:&quot;3160622d-3805-4efd-9613-22c9bd8d050e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3401d0c6-330d-4dab-a51d-8901b0ffdcd5&quot;,&quot;title&quot;:&quot;Creating a Fabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ad3963e2-836f-4e7c-9021-f1829b664308&quot;,&quot;title&quot;:&quot;using the factory&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b620154-1848-48cb-833e-f6d88ccad6ad&quot;,&quot;parentUUID&quot;:&quot;ad3963e2-836f-4e7c-9021-f1829b664308&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 54321);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9de6b35-ccfe-439e-b1f1-0eb7731fbc00&quot;,&quot;parentUUID&quot;:&quot;ad3963e2-836f-4e7c-9021-f1829b664308&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b620154-1848-48cb-833e-f6d88ccad6ad&quot;,&quot;c9de6b35-ccfe-439e-b1f1-0eb7731fbc00&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;dd15f728-ab3e-4902-a877-6d028ee7f323&quot;,&quot;title&quot;:&quot;using the constructor&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6bea1ee-1b7d-4b11-82ad-a0ce9e804f71&quot;,&quot;parentUUID&quot;:&quot;dd15f728-ab3e-4902-a877-6d028ee7f323&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 43210);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44e1a39a-ed47-4b42-9e76-2e6184f4d16c&quot;,&quot;parentUUID&quot;:&quot;dd15f728-ab3e-4902-a877-6d028ee7f323&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f6bea1ee-1b7d-4b11-82ad-a0ce9e804f71&quot;,&quot;44e1a39a-ed47-4b42-9e76-2e6184f4d16c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9dbba5f0-9efa-4303-bebe-01b704b32bc9&quot;,&quot;title&quot;:&quot;Configuring the driver&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;72b00b2b-ecb5-4eb5-892a-e2bddbf47bdb&quot;,&quot;title&quot;:&quot;with a string&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the url&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with a string sets the url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc3c6d86-11d4-46d8-b5d3-18805490f68d&quot;,&quot;parentUUID&quot;:&quot;72b00b2b-ecb5-4eb5-892a-e2bddbf47bdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;dc3c6d86-11d4-46d8-b5d3-18805490f68d&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;2598d34d-f2b6-4daf-b3db-2dc564869c02&quot;,&quot;title&quot;:&quot;with headers&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;applies the headers&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with headers applies the headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({\n    headers: {\n        \&quot;x-one\&quot;: \&quot;1\&quot;,\n        \&quot;x-two\&quot;: \&quot;2\&quot;\n    }\n});\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-one\&quot;, \&quot;1\&quot;);\n        chai_1.expect(headers).to.have.property(\&quot;x-two\&quot;, \&quot;2\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d05043b3-a3f6-4eac-9ce3-80e2e45895cc&quot;,&quot;parentUUID&quot;:&quot;2598d34d-f2b6-4daf-b3db-2dc564869c02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d05043b3-a3f6-4eac-9ce3-80e2e45895cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;17df862e-0020-43ba-ae0b-4bd1b170cba1&quot;,&quot;title&quot;:&quot;with an c8Version&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the x-c8-version header&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with an c8Version sets the x-c8-version header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({ c8Version: 99999 });\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-c8-version\&quot;, \&quot;99999\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97d662c4-9f46-4862-9f1e-ec544b310422&quot;,&quot;parentUUID&quot;:&quot;17df862e-0020-43ba-ae0b-4bd1b170cba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97d662c4-9f46-4862-9f1e-ec544b310422&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;f0b3d0e9-4e74-47c1-aa17-8012d4d640dd&quot;,&quot;title&quot;:&quot;with agentOptions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Agent = (ptcl) =&gt; function (opts) {\n    protocol = ptcl;\n    options = opts;\n    return () =&gt; null;\n};\nhttp.Agent = Agent(\&quot;http\&quot;);\nhttps.Agent = Agent(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a55b7f29-8828-42b7-9f4b-226c84b7c487&quot;,&quot;parentUUID&quot;:&quot;f0b3d0e9-4e74-47c1-aa17-8012d4d640dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae7c060d-4b33-484e-a5f8-b3d6d4d9468e&quot;,&quot;parentUUID&quot;:&quot;f0b3d0e9-4e74-47c1-aa17-8012d4d640dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.Agent = _httpAgent;\nhttps.Agent = _httpsAgent;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c1b2c3b-5a48-45c9-9c62-3412fa49f82a&quot;,&quot;parentUUID&quot;:&quot;f0b3d0e9-4e74-47c1-aa17-8012d4d640dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agentOptions to the agent&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions passes the agentOptions to the agent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;new connection_1.Connection({ agentOptions: { hello: \&quot;world\&quot; } }); // eslint-disable-line no-new\nchai_1.expect(options).to.have.property(\&quot;hello\&quot;, \&quot;world\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2234a261-e5f0-4eb5-89e7-4f70a1c03b65&quot;,&quot;parentUUID&quot;:&quot;f0b3d0e9-4e74-47c1-aa17-8012d4d640dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the built-in agent for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions uses the built-in agent for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// default: http\nnew connection_1.Connection(); // eslint-disable-line no-new\n// expect(protocol).to.equal(\&quot;http\&quot;);\nnew connection_1.Connection(\&quot;https://test.macrometa.io\&quot;); // eslint-disable-line no-new\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;deadce77-7262-4568-9c86-b92c4881758f&quot;,&quot;parentUUID&quot;:&quot;f0b3d0e9-4e74-47c1-aa17-8012d4d640dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2234a261-e5f0-4eb5-89e7-4f70a1c03b65&quot;,&quot;deadce77-7262-4568-9c86-b92c4881758f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;54d9bce0-a2c5-4d77-9ff3-b7756e8478d4&quot;,&quot;title&quot;:&quot;with agent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Request = (ptcl) =&gt; (opts) =&gt; {\n    protocol = ptcl;\n    options = opts;\n    return {\n        on() {\n            return this;\n        },\n        end() {\n            return this;\n        }\n    };\n};\nhttp.request = Request(\&quot;http\&quot;);\nhttps.request = Request(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8a35845-f949-4e50-9f0f-0e901e5e4afa&quot;,&quot;parentUUID&quot;:&quot;54d9bce0-a2c5-4d77-9ff3-b7756e8478d4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;216a8c5d-22d1-4689-87a7-122c981f944d&quot;,&quot;parentUUID&quot;:&quot;54d9bce0-a2c5-4d77-9ff3-b7756e8478d4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.request = _httpRequest;\nhttps.request = _httpsRequest;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4869f7a1-4d38-4205-b48b-ee48b7ae1fd3&quot;,&quot;parentUUID&quot;:&quot;54d9bce0-a2c5-4d77-9ff3-b7756e8478d4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agent to the request function&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent passes the agent to the request function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: https\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);\nagent = Symbol(\&quot;agent\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;856a95c4-6a05-4a64-a056-c309d3617fa6&quot;,&quot;parentUUID&quot;:&quot;54d9bce0-a2c5-4d77-9ff3-b7756e8478d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the request function for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent uses the request function for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: http\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28cce8da-152f-4706-8a72-08f8e6ab1543&quot;,&quot;parentUUID&quot;:&quot;54d9bce0-a2c5-4d77-9ff3-b7756e8478d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;calls Agent#destroy when the connection is closed&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent calls Agent#destroy when the connection is closed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = {\n    _destroyed: false,\n    destroy() {\n        this._destroyed = true;\n    }\n};\nconst conn = new connection_1.Connection({ agent });\nchai_1.expect(agent._destroyed).to.equal(false);\nconn.close();\nchai_1.expect(agent._destroyed).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20a64d3b-33e9-4896-a78f-05bcedf5c741&quot;,&quot;parentUUID&quot;:&quot;54d9bce0-a2c5-4d77-9ff3-b7756e8478d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;856a95c4-6a05-4a64-a056-c309d3617fa6&quot;,&quot;28cce8da-152f-4706-8a72-08f8e6ab1543&quot;,&quot;20a64d3b-33e9-4896-a78f-05bcedf5c741&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c64b42e3-60b9-4a39-acea-933f95cf0338&quot;,&quot;title&quot;:&quot;Manipulating fabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1495,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d63007be-598d-402d-88c3-996502c3eb10&quot;,&quot;parentUUID&quot;:&quot;c64b42e3-60b9-4a39-acea-933f95cf0338&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1508,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = new jsC8_1.Fabric({\n    url: testUrl\n});\nawait fabric2.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric2.useTenant(\&quot;guest\&quot;);\ncollection = fabric2.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cff47b66-c717-4113-bddd-1bd718e0270e&quot;,&quot;parentUUID&quot;:&quot;c64b42e3-60b9-4a39-acea-933f95cf0338&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1532,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7da1177f-2abe-4a66-b185-65b1b83b4d5c&quot;,&quot;parentUUID&quot;:&quot;c64b42e3-60b9-4a39-acea-933f95cf0338&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e501ab7b-45c9-45bb-b38c-6b67649e7214&quot;,&quot;parentUUID&quot;:&quot;c64b42e3-60b9-4a39-acea-933f95cf0338&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f067f332-9eba-48d6-852e-53ccf248d703&quot;,&quot;parentUUID&quot;:&quot;c64b42e3-60b9-4a39-acea-933f95cf0338&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:302,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.drop();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b50ecc1-4621-4371-b375-98774417f0da&quot;,&quot;parentUUID&quot;:&quot;c64b42e3-60b9-4a39-acea-933f95cf0338&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01e23f39-b806-4e24-ab75-b53279abb252&quot;,&quot;parentUUID&quot;:&quot;c64b42e3-60b9-4a39-acea-933f95cf0338&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e5a77a75-7fa5-40d8-ab4c-e372427ba61c&quot;,&quot;title&quot;:&quot;fabric.version&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version object when no details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when no details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version();\nchai_1.expect(response.server).to.equal(\&quot;C8DB\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48458175-4615-4eef-85bd-fbf2e80af77c&quot;,&quot;parentUUID&quot;:&quot;e5a77a75-7fa5-40d8-ab4c-e372427ba61c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the version object when details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version(true);\nchai_1.expect(response.server).to.equal(\&quot;C8DB\&quot;);\nchai_1.expect(response.details).to.haveOwnProperty(\&quot;architecture\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1eaf761a-8e0e-4eac-86c0-649db99ab806&quot;,&quot;parentUUID&quot;:&quot;e5a77a75-7fa5-40d8-ab4c-e372427ba61c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48458175-4615-4eef-85bd-fbf2e80af77c&quot;,&quot;1eaf761a-8e0e-4eac-86c0-649db99ab806&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:817,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;215850b4-d9c6-46bd-a182-06a935ca9654&quot;,&quot;title&quot;:&quot;fabric.useFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the fabric name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric updates the fabric name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = \&quot;example\&quot;;\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;); // default\nfabric.useFabric(name);\nchai_1.expect(fabric._connection).to.have.property(\&quot;_fabricName\&quot;, name);\nchai_1.expect(fabric.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cb7a3c8-c0f4-41bc-8189-4b6d32a46ec7&quot;,&quot;parentUUID&quot;:&quot;215850b4-d9c6-46bd-a182-06a935ca9654&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns itself&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric returns itself&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = fabric.useFabric(\&quot;nope\&quot;);\nchai_1.expect(fabric).to.equal(fabric2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0048d27f-8d6e-40c6-b196-2ef0ec84dab0&quot;,&quot;parentUUID&quot;:&quot;215850b4-d9c6-46bd-a182-06a935ca9654&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4cb7a3c8-c0f4-41bc-8189-4b6d32a46ec7&quot;,&quot;0048d27f-8d6e-40c6-b196-2ef0ec84dab0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1aad3845-01f2-4927-8fab-fbb8c61b6409&quot;,&quot;title&quot;:&quot;fabric.edgeLocations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets all the edge locations&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets all the edge locations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:370,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllEdgeLocations();\nchai_1.expect(Array.isArray(response)).to.be.true;\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;tags\&quot;);\nchai_1.expect(response.length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbdc69ae-a6c5-403a-b3e4-05f7b1a73b81&quot;,&quot;parentUUID&quot;:&quot;1aad3845-01f2-4927-8fab-fbb8c61b6409&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets local edge location&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets local edge location&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:375,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\nchai_1.expect(Array.isArray(response)).to.be.false;\nchai_1.expect(response).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;tags\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a0bbfcd-62f7-43f7-84bf-58c8937ee75d&quot;,&quot;parentUUID&quot;:&quot;1aad3845-01f2-4927-8fab-fbb8c61b6409&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cbdc69ae-a6c5-403a-b3e4-05f7b1a73b81&quot;,&quot;6a0bbfcd-62f7-43f7-84bf-58c8937ee75d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:745,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7a914517-5026-42a6-950d-25d796ba2def&quot;,&quot;title&quot;:&quot;fabric.createFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:510,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;805e8b1f-693a-4786-9dfa-a41ca101367f&quot;,&quot;parentUUID&quot;:&quot;7a914517-5026-42a6-950d-25d796ba2def&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a fabric with the given name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric creates a fabric with the given name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:923,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nconst info = await fabric.get();\nchai_1.expect(info.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3331d5fe-3408-491b-a2e1-cf1b2fbbc45e&quot;,&quot;parentUUID&quot;:&quot;7a914517-5026-42a6-950d-25d796ba2def&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;adds the given users to the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric adds the given users to the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95a58802-89d1-48d3-b553-db02a097f170&quot;,&quot;parentUUID&quot;:&quot;7a914517-5026-42a6-950d-25d796ba2def&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3331d5fe-3408-491b-a2e1-cf1b2fbbc45e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;95a58802-89d1-48d3-b553-db02a097f170&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:923,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;98cf7aea-d688-4b52-a896-86f18157efb5&quot;,&quot;title&quot;:&quot;fabric.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches the fabric description if the fabric exists&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fetches the fabric description if the fabric exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await fabric.get();\nchai_1.expect(info.name).to.equal(fabric.name);\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab2cfe47-575c-4ae0-9728-7872b846c051&quot;,&quot;parentUUID&quot;:&quot;98cf7aea-d688-4b52-a896-86f18157efb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fails if the fabric does not exist&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fails if the fabric does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;__does_not_exist__\&quot;);\ntry {\n    await fabric.get();\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n    return;\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58669d7c-76a7-4980-b29d-aa98ca8ab79e&quot;,&quot;parentUUID&quot;:&quot;98cf7aea-d688-4b52-a896-86f18157efb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ab2cfe47-575c-4ae0-9728-7872b846c051&quot;,&quot;58669d7c-76a7-4980-b29d-aa98ca8ab79e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:717,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;19e441ed-c51b-44d0-91f8-ab5ca09e7cf5&quot;,&quot;title&quot;:&quot;fabric.listFabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of all fabrics&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listFabrics returns a list of all fabrics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:428,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics.indexOf(\&quot;_system\&quot;)).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f500306-126d-48b6-b83f-dcfdaedf1cbf&quot;,&quot;parentUUID&quot;:&quot;19e441ed-c51b-44d0-91f8-ab5ca09e7cf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f500306-126d-48b6-b83f-dcfdaedf1cbf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:428,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e301657e-5ed0-4e50-ae8c-0930de44855f&quot;,&quot;title&quot;:&quot;fabric.listUserFabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of fabrics accessible to the active user&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listUserFabrics returns a list of fabrics accessible to the active user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listUserFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics[0].name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6581ca9-139a-402f-9845-069295afaecc&quot;,&quot;parentUUID&quot;:&quot;e301657e-5ed0-4e50-ae8c-0930de44855f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6581ca9-139a-402f-9845-069295afaecc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:409,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;bff8ddb6-3bf5-4124-b5cc-c7b7f413f5c7&quot;,&quot;title&quot;:&quot;fabric.dropFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:515,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f22752d-5d5e-48f3-8523-d3ee91ae8a91&quot;,&quot;parentUUID&quot;:&quot;bff8ddb6-3bf5-4124-b5cc-c7b7f413f5c7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given fabric from the server&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric deletes the given fabric from the server&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:577,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.dropFabric(name);\nlet temp = new jsC8_1.Fabric().useFabric(name);\ntry {\n    await temp.get();\n}\ncatch (e) {\n    return;\n}\nfinally {\n    temp.close();\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;558ad462-2212-456e-911f-2e8c812fc13b&quot;,&quot;parentUUID&quot;:&quot;bff8ddb6-3bf5-4124-b5cc-c7b7f413f5c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;558ad462-2212-456e-911f-2e8c812fc13b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:577,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;384a6509-effe-438f-9ed2-092a8cf91b19&quot;,&quot;title&quot;:&quot;fabric.truncate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2924,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create();\n        await collection.save({ _key: \&quot;example\&quot; });\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create({ isSystem: true });\n        await collection.save({ _key: \&quot;example\&quot; });\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e4751ff-0db5-42bd-9cb1-e37fe1421b04&quot;,&quot;parentUUID&quot;:&quot;384a6509-effe-438f-9ed2-092a8cf91b19&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:509,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90c8e196-6aba-4182-9c26-3ee50baea9b8&quot;,&quot;parentUUID&quot;:&quot;384a6509-effe-438f-9ed2-092a8cf91b19&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes all documents from all non-system collections in the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate removes all documents from all non-system collections in the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6193,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.truncate();\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;869b20e8-e362-4473-97d1-d420a6032bcb&quot;,&quot;parentUUID&quot;:&quot;384a6509-effe-438f-9ed2-092a8cf91b19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;additionally truncates system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate additionally truncates system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a69b14c-f80d-46e7-ad46-a282bacd7de3&quot;,&quot;parentUUID&quot;:&quot;384a6509-effe-438f-9ed2-092a8cf91b19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;869b20e8-e362-4473-97d1-d420a6032bcb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;7a69b14c-f80d-46e7-ad46-a282bacd7de3&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:6193,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;210833a0-b4d6-48d9-a261-41f060f6b690&quot;,&quot;title&quot;:&quot;fabric.validateQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate correct query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate correct query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:394,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.validateQuery(\&quot;for doc in docs return doc\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbdbdb44-aeb7-40e7-b0e8-754092134a34&quot;,&quot;parentUUID&quot;:&quot;210833a0-b4d6-48d9-a261-41f060f6b690&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate incorrect query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate incorrect query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:312,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const response = await fabric.validateQuery(\&quot;forrrr doc in docs return doc\&quot;);\n    chai_1.expect(response.error).to.be.true;\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcc4d618-e3a4-443d-a287-0b3073cfae55&quot;,&quot;parentUUID&quot;:&quot;210833a0-b4d6-48d9-a261-41f060f6b690&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fbdbdb44-aeb7-40e7-b0e8-754092134a34&quot;,&quot;fcc4d618-e3a4-443d-a287-0b3073cfae55&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:706,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6795e7e3-ae3d-4589-8f81-ef95785238c0&quot;,&quot;title&quot;:&quot;fabric.explainQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should explain query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.explainQuery should explain query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryObject = {\n    query: `for doc in ${collectionName} return doc`,\n    bindVars: {}\n};\nconst response = await fabric.explainQuery(queryObject);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: expecting POST /_api/query&quot;,&quot;estack&quot;:&quot;C8Error: expecting POST /_api/query\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;cd3176c1-2149-4725-8bf3-756ea73cf68f&quot;,&quot;parentUUID&quot;:&quot;6795e7e3-ae3d-4589-8f81-ef95785238c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;cd3176c1-2149-4725-8bf3-756ea73cf68f&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:307,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5a07eeb9-dc8e-406d-895d-e2408ddaa7a9&quot;,&quot;title&quot;:&quot;fabric.getCurrentQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get currently running queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.getCurrentQueries should get currently running queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8644f450-6fe3-471d-97fb-92acfbb2d751&quot;,&quot;parentUUID&quot;:&quot;5a07eeb9-dc8e-406d-895d-e2408ddaa7a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;8644f450-6fe3-471d-97fb-92acfbb2d751&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4146ef92-5a35-4b26-9908-eb01e045f6ca&quot;,&quot;title&quot;:&quot;fabric.clearSlowQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should clear slow queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.clearSlowQueries should clear slow queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a463a601-78d5-4798-9faa-bdfa8632b405&quot;,&quot;parentUUID&quot;:&quot;4146ef92-5a35-4b26-9908-eb01e045f6ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;a463a601-78d5-4798-9faa-bdfa8632b405&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0d5c1c19-a7fd-48ec-94c5-dd7ff5deb8f4&quot;,&quot;title&quot;:&quot;fabric.terminateRunningQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should terminate running query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.terminateRunningQuery should terminate running query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fce2680-0f73-4d6b-b0cb-5cc59c3d732b&quot;,&quot;parentUUID&quot;:&quot;0d5c1c19-a7fd-48ec-94c5-dd7ff5deb8f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;5fce2680-0f73-4d6b-b0cb-5cc59c3d732b&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3b0308fa-d14c-4483-b968-1b649fa97872&quot;,&quot;title&quot;:&quot;Accessing collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3072,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\nconst collections = await fabric.listCollections(false);\nbuiltinSystemCollections = collections.map((c) =&gt; c.name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a6c5a24-fd59-4f11-9f21-9c3c91db4ce5&quot;,&quot;parentUUID&quot;:&quot;3b0308fa-d14c-4483-b968-1b649fa97872&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:511,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60c084ae-02ae-4c71-8bf0-ac439a62dec7&quot;,&quot;parentUUID&quot;:&quot;3b0308fa-d14c-4483-b968-1b649fa97872&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;df03161e-e70b-499a-998e-3502139ce02c&quot;,&quot;title&quot;:&quot;fabric.collection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a DocumentCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collection returns a DocumentCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = fabric.collection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.DocumentCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d4d26c3-991b-4f66-a28d-83c49e4ace26&quot;,&quot;parentUUID&quot;:&quot;df03161e-e70b-499a-998e-3502139ce02c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d4d26c3-991b-4f66-a28d-83c49e4ace26&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;421b6f45-b7af-442c-8864-54dd6d9c04f3&quot;,&quot;title&quot;:&quot;fabric.edgeCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an EdgeCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.edgeCollection returns an EdgeCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;tomato\&quot;;\nlet collection = fabric.edgeCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.EdgeCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4edb6167-7eed-4579-ab7a-7db1f9b2abc3&quot;,&quot;parentUUID&quot;:&quot;421b6f45-b7af-442c-8864-54dd6d9c04f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4edb6167-7eed-4579-ab7a-7db1f9b2abc3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;675e0d52-57c2-4518-b1f0-7087eb9a2345&quot;,&quot;title&quot;:&quot;fabric.listCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1222,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).create())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).create({ isSystem: true })\n    // )\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48fc307d-789a-4a79-90ad-c0907a279e7e&quot;,&quot;parentUUID&quot;:&quot;675e0d52-57c2-4518-b1f0-7087eb9a2345&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:712,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).drop())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).drop({ isSystem: true })\n    // )\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e2caecf-53e0-446b-b79c-15c67c4c698d&quot;,&quot;parentUUID&quot;:&quot;675e0d52-57c2-4518-b1f0-7087eb9a2345&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all non-system collections&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections fetches information about all non-system collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections()\n    .then(collections =&gt; {\n    chai_1.expect(collections.length).to.equal(nonSystemCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(nonSystemCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed20fb65-de3d-4f2f-be1a-b73a69ab4a72&quot;,&quot;parentUUID&quot;:&quot;675e0d52-57c2-4518-b1f0-7087eb9a2345&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections(false)\n    .then(collections =&gt; {\n    let allCollectionNames = nonSystemCollectionNames\n        // .concat(systemCollectionNames)\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(collections.length).to.be.at.least(allCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(allCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0c541e9-e9e1-4fb1-8ec0-54302ae4a024&quot;,&quot;parentUUID&quot;:&quot;675e0d52-57c2-4518-b1f0-7087eb9a2345&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed20fb65-de3d-4f2f-be1a-b73a69ab4a72&quot;,&quot;a0c541e9-e9e1-4fb1-8ec0-54302ae4a024&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:720,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;d8cf5722-54ad-412b-ae39-4ba21cefacfc&quot;,&quot;title&quot;:&quot;fabric.collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1213,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85dd4c2a-83be-405c-bed6-1ffbbc2ff52c&quot;,&quot;parentUUID&quot;:&quot;d8cf5722-54ad-412b-ae39-4ba21cefacfc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1229,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).drop()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).drop())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b2e95ba-fbf9-4343-ac5b-a7f54ec85cc5&quot;,&quot;parentUUID&quot;:&quot;d8cf5722-54ad-412b-ae39-4ba21cefacfc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates DocumentCollection and EdgeCollection instances&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections creates DocumentCollection and EdgeCollection instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:425,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections()\n    .then(collections =&gt; {\n    let documentCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.DocumentCollection)\n        .sort();\n    let edgeCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.EdgeCollection)\n        .sort();\n    chai_1.expect(documentCollections.length).to.equal(documentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(documentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.equal(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e43fb70-f603-4297-807f-b52db83cdb12&quot;,&quot;parentUUID&quot;:&quot;d8cf5722-54ad-412b-ae39-4ba21cefacfc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections(false)\n    .then(collections =&gt; {\n    let documentCollections = collections.filter((c) =&gt; c instanceof collection_1.DocumentCollection);\n    let edgeCollections = collections.filter((c) =&gt; c instanceof collection_1.EdgeCollection);\n    let allDocumentCollectionNames = documentCollectionNames\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(documentCollections.length).to.be.at.least(allDocumentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(allDocumentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.be.at.least(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3331865-be49-4b19-842b-204963cadb25&quot;,&quot;parentUUID&quot;:&quot;d8cf5722-54ad-412b-ae39-4ba21cefacfc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e43fb70-f603-4297-807f-b52db83cdb12&quot;,&quot;f3331865-be49-4b19-842b-204963cadb25&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:834,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;df8618d7-f566-40f1-ad28-94d95bf8190b&quot;,&quot;title&quot;:&quot;Accessing graphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2553,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4785160-95b4-4e08-a25d-2b9764f49bdc&quot;,&quot;parentUUID&quot;:&quot;df8618d7-f566-40f1-ad28-94d95bf8190b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:397,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa154d49-9bd6-47e2-830b-a4d19377a0f2&quot;,&quot;parentUUID&quot;:&quot;df8618d7-f566-40f1-ad28-94d95bf8190b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;14bb89f0-f22a-4a58-9c85-8aaa8c4e7deb&quot;,&quot;title&quot;:&quot;fabric.graph&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Graph instance&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graph returns a Graph instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet graph = fabric.graph(name);\nchai_1.expect(graph).to.be.an.instanceof(graph_1.Graph);\nchai_1.expect(graph)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64a6cb28-76a8-4793-b0bf-eb083e1675a0&quot;,&quot;parentUUID&quot;:&quot;14bb89f0-f22a-4a58-9c85-8aaa8c4e7deb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64a6cb28-76a8-4793-b0bf-eb083e1675a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;9dedba69-9de2-46d4-a915-4be1c1d90c53&quot;,&quot;title&quot;:&quot;fabric.listGraphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1850,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        })),\n        isSmart: true,\n        options: {\n            numberOfShards: 1,\n            smartGraphAttribute: \&quot;test\&quot;\n        },\n        orphanCollections: []\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46a96e6f-cde2-4823-a2bf-168f1ea5685d&quot;,&quot;parentUUID&quot;:&quot;9dedba69-9de2-46d4-a915-4be1c1d90c53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1423,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1211be99-24b4-4d99-8628-882729da1056&quot;,&quot;parentUUID&quot;:&quot;9dedba69-9de2-46d4-a915-4be1c1d90c53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all graphs&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs fetches information about all graphs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:418,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listGraphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g._key).sort()).to.eql(graphNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd19f4e2-6702-4d98-a9f3-9779fc6a9f71&quot;,&quot;parentUUID&quot;:&quot;9dedba69-9de2-46d4-a915-4be1c1d90c53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd19f4e2-6702-4d98-a9f3-9779fc6a9f71&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:418,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;1fe2af52-5d12-4cb8-aae8-04aa5bb3fb24&quot;,&quot;title&quot;:&quot;fabric.graphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1329,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        }))\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0256f9ee-103c-441e-9433-e5a0b15c2c32&quot;,&quot;parentUUID&quot;:&quot;1fe2af52-5d12-4cb8-aae8-04aa5bb3fb24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1429,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad1e1985-50a0-4497-95cd-b343bccad44b&quot;,&quot;parentUUID&quot;:&quot;1fe2af52-5d12-4cb8-aae8-04aa5bb3fb24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates Graph instances&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs creates Graph instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:413,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .graphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g.name).sort()).to.eql(graphNames);\n    graphs.forEach((graph) =&gt; chai_1.expect(graph).to.be.an.instanceof(graph_1.Graph));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;159d7d5d-1a9e-46e2-9459-90a97eff0e05&quot;,&quot;parentUUID&quot;:&quot;1fe2af52-5d12-4cb8-aae8-04aa5bb3fb24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;159d7d5d-1a9e-46e2-9459-90a97eff0e05&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:413,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;080ce7d9-f983-4b4e-938e-34d3eabb1651&quot;,&quot;title&quot;:&quot;Transactions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1513,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88bde966-02b1-46e1-8001-a5e8b8622f4a&quot;,&quot;parentUUID&quot;:&quot;080ce7d9-f983-4b4e-938e-34d3eabb1651&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19aeac41-5e58-404d-9539-28864d2e3931&quot;,&quot;parentUUID&quot;:&quot;080ce7d9-f983-4b4e-938e-34d3eabb1651&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3a3aef7f-4189-4912-b9ae-f5ad83d3636f&quot;,&quot;title&quot;:&quot;fabric.transaction&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a transaction and return the result&quot;,&quot;fullTitle&quot;:&quot;Transactions fabric.transaction should execute a transaction and return the result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:370,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await fabric.transaction([], \&quot;function (params) {return params;}\&quot;, \&quot;test\&quot;);\nchai_1.expect(result).to.equal(\&quot;test\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79b18991-fa05-43a9-bfce-3a460ddf629e&quot;,&quot;parentUUID&quot;:&quot;3a3aef7f-4189-4912-b9ae-f5ad83d3636f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79b18991-fa05-43a9-bfce-3a460ddf629e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:370,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;216a1f8a-8414-4d93-bb03-6b3ad8f81aad&quot;,&quot;title&quot;:&quot;C8QL queries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2641,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26d76dfb-98ab-4110-8f99-0c11cd1e9d6f&quot;,&quot;parentUUID&quot;:&quot;216a1f8a-8414-4d93-bb03-6b3ad8f81aad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:509,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fa287d9-99c9-41bc-a3aa-4c6e55e7fdfc&quot;,&quot;parentUUID&quot;:&quot;216a1f8a-8414-4d93-bb03-6b3ad8f81aad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:403,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f4f33f9-3967-4629-a7c8-4ce1ed14c01c&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an exception on error&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:405,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i IN no RETURN i\&quot;)\n    .then(() =&gt; {\n    chai_1.expect.fail();\n    done();\n})\n    .catch(err =&gt; {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d4f21fb-065c-482f-adbf-4828135ea8e8&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an exception on error (async await)&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error (async await)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:374,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.query(\&quot;FOR i IN no RETURN i\&quot;);\n    chai_1.expect.fail();\n}\ncatch (err) {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61c1bf93-7326-4c18-97c8-c1934f1de737&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:444,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99edba33-c96c-4069-adf5-6d851bce47ed&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, undefined, {\n    batchSize: 2,\n    count: true\n})\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;149e459d-83ba-4e91-95b4-88087496f12e&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports AQB queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports AQB queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ toC8QL: () =&gt; \&quot;RETURN 42\&quot; })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(42);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a80fba32-2eec-4a3d-a3d4-1906cfe34887&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports query objects&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports query objects&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN 1337\&quot;, bindVars: {} })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(1337);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;573f37ce-1fa7-4b28-b2c9-bf02bbfdf6ce&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN @potato\&quot;, bindVars: { potato: \&quot;tomato\&quot; } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(\&quot;tomato\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47420515-4a83-41a8-80c4-45cadcb89319&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:510,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed89be41-bd00-426d-a6d1-251211a95eba&quot;,&quot;parentUUID&quot;:&quot;2cbd61e5-9d1a-440c-8147-af416a83e1ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9f4f33f9-3967-4629-a7c8-4ce1ed14c01c&quot;,&quot;2d4f21fb-065c-482f-adbf-4828135ea8e8&quot;,&quot;61c1bf93-7326-4c18-97c8-c1934f1de737&quot;,&quot;99edba33-c96c-4069-adf5-6d851bce47ed&quot;,&quot;149e459d-83ba-4e91-95b4-88087496f12e&quot;,&quot;a80fba32-2eec-4a3d-a3d4-1906cfe34887&quot;,&quot;573f37ce-1fa7-4b28-b2c9-bf02bbfdf6ce&quot;,&quot;47420515-4a83-41a8-80c4-45cadcb89319&quot;,&quot;ed89be41-bd00-426d-a6d1-251211a95eba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3772,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;60075beb-c6ed-478d-b056-7348cc35c033&quot;,&quot;title&quot;:&quot;c8ql&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly handles simple parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles simple parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let values = [\n    0,\n    42,\n    -1,\n    null,\n    undefined,\n    true,\n    false,\n    \&quot;\&quot;,\n    \&quot;string\&quot;,\n    [1, 2, 3],\n    { a: \&quot;b\&quot; }\n];\nlet query = jsC8_1.c8ql `\n        A ${values[0]} B ${values[1]} C ${values[2]} D ${values[3]} E ${values[4]} F ${values[5]}\n        G ${values[6]} H ${values[7]} I ${values[8]} J ${values[9]} K ${values[10]} EOF\n      `;\nchai_1.expect(query.query).to.equal(`\n        A @value0 B @value1 C @value2 D @value3 E @value4 F @value5\n        G @value6 H @value7 I @value8 J @value9 K @value10 EOF\n      `);\nlet bindVarNames = Object.keys(query.bindVars).sort((a, b) =&gt; (+a.substr(5) &gt; +b.substr(5) ? 1 : -1));\nchai_1.expect(bindVarNames).to.eql([\n    \&quot;value0\&quot;,\n    \&quot;value1\&quot;,\n    \&quot;value2\&quot;,\n    \&quot;value3\&quot;,\n    \&quot;value4\&quot;,\n    \&quot;value5\&quot;,\n    \&quot;value6\&quot;,\n    \&quot;value7\&quot;,\n    \&quot;value8\&quot;,\n    \&quot;value9\&quot;,\n    \&quot;value10\&quot;\n]);\nchai_1.expect(bindVarNames.map(k =&gt; query.bindVars[k])).to.eql(values);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b9bca88-0645-449d-a8cc-73f9f0e922e7&quot;,&quot;parentUUID&quot;:&quot;60075beb-c6ed-478d-b056-7348cc35c033&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;correctly handles jsC8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles jsC8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let collection = fabric.collection(\&quot;potato\&quot;);\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;potato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52a91853-178e-40c6-9490-89374b0c48e0&quot;,&quot;parentUUID&quot;:&quot;60075beb-c6ed-478d-b056-7348cc35c033&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;correctly handles C8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles C8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;class C8Collection {\n    constructor() {\n        this.isC8Collection = true;\n        this.name = \&quot;tomato\&quot;;\n    }\n}\nlet collection = new C8Collection();\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;tomato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;921f2ed4-3f2b-44e3-b96e-0166362ea4aa&quot;,&quot;parentUUID&quot;:&quot;60075beb-c6ed-478d-b056-7348cc35c033&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b9bca88-0645-449d-a8cc-73f9f0e922e7&quot;,&quot;52a91853-178e-40c6-9490-89374b0c48e0&quot;,&quot;921f2ed4-3f2b-44e3-b96e-0166362ea4aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;cba31348-c262-4f5a-9fbe-8b3918665db5&quot;,&quot;title&quot;:&quot;Route API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2149,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\ncollection = fabric.collection(`c${Date.now()}`);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a5c32b7-08e0-42f4-8654-111b8df1da19&quot;,&quot;parentUUID&quot;:&quot;cba31348-c262-4f5a-9fbe-8b3918665db5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:296,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.truncate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddb688e3-64f7-4c11-8cdb-ae66ee971722&quot;,&quot;parentUUID&quot;:&quot;cba31348-c262-4f5a-9fbe-8b3918665db5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:405,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e87188a4-cee3-458a-a584-07933428db6c&quot;,&quot;parentUUID&quot;:&quot;cba31348-c262-4f5a-9fbe-8b3918665db5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6964b9b9-5e3f-4fbf-9cfb-8c19b3ed5a59&quot;,&quot;title&quot;:&quot;route.route&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should concat path&quot;,&quot;fullTitle&quot;:&quot;Route API route.route should concat path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/api\&quot;).route(\&quot;/version\&quot;);\nchai_1.expect(route).to.have.property(\&quot;_path\&quot;, \&quot;/api/version\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc4f3280-d683-458a-bdd6-81e968c92235&quot;,&quot;parentUUID&quot;:&quot;6964b9b9-5e3f-4fbf-9cfb-8c19b3ed5a59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc4f3280-d683-458a-bdd6-81e968c92235&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a6ca89a9-d80f-4b91-a12b-9289397ff5bc&quot;,&quot;title&quot;:&quot;route.post&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.post should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${collection.name}`)\n    .post({ foo: \&quot;bar\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99d3c10f-163d-4fd6-a348-0feb25f775c3&quot;,&quot;parentUUID&quot;:&quot;a6ca89a9-d80f-4b91-a12b-9289397ff5bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99d3c10f-163d-4fd6-a348-0feb25f775c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:308,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;24a986a1-c1ba-4bc4-ae42-b76974253dbc&quot;,&quot;title&quot;:&quot;route.put&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.put \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba5936a2-ceda-4181-a466-0bd2a9351df5&quot;,&quot;parentUUID&quot;:&quot;24a986a1-c1ba-4bc4-ae42-b76974253dbc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.put should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .put({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b295120d-d6eb-44dc-9ff8-5407040ae8d5&quot;,&quot;parentUUID&quot;:&quot;24a986a1-c1ba-4bc4-ae42-b76974253dbc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b295120d-d6eb-44dc-9ff8-5407040ae8d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:308,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ed2748bb-b572-498f-b400-5779f9371b8f&quot;,&quot;title&quot;:&quot;route.patch&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;611b1d98-ebc2-46f4-b69a-20ae86913654&quot;,&quot;parentUUID&quot;:&quot;ed2748bb-b572-498f-b400-5779f9371b8f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .patch({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;477242ab-e42a-4175-afd9-d2543ae4e0f8&quot;,&quot;parentUUID&quot;:&quot;ed2748bb-b572-498f-b400-5779f9371b8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;477242ab-e42a-4175-afd9-d2543ae4e0f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:309,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c1e23384-fae6-46e6-b68f-eeda4dacbb30&quot;,&quot;title&quot;:&quot;route.delete&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8508aefe-0b21-47e3-b7d0-fbd9e0dbbcc4&quot;,&quot;parentUUID&quot;:&quot;c1e23384-fae6-46e6-b68f-eeda4dacbb30&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:319,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .delete()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;523513bf-05d3-4793-83d0-ed1a7862757f&quot;,&quot;parentUUID&quot;:&quot;c1e23384-fae6-46e6-b68f-eeda4dacbb30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;523513bf-05d3-4793-83d0-ed1a7862757f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:319,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0c3cbdb6-0341-460b-8146-2868f875a769&quot;,&quot;title&quot;:&quot;route.head&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.head \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24c046b4-b6c3-4aed-934d-be452fe88ca8&quot;,&quot;parentUUID&quot;:&quot;0c3cbdb6-0341-460b-8146-2868f875a769&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.head should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:255,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .head()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;statusCode\&quot;, 200);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;563997aa-7859-4624-a564-a95d46154c04&quot;,&quot;parentUUID&quot;:&quot;0c3cbdb6-0341-460b-8146-2868f875a769&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;563997aa-7859-4624-a564-a95d46154c04&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:255,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6da2303f-3936-43ba-bd3e-55a5c17ec689&quot;,&quot;title&quot;:&quot;Cursor API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1635,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;216dc811-bae3-4b60-bdaa-907f21679157&quot;,&quot;parentUUID&quot;:&quot;6da2303f-3936-43ba-bd3e-55a5c17ec689&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:363,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor = await fabric.query(c8qlQuery);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c951196-bfdc-4b9c-a7db-a1a67aa2ed6c&quot;,&quot;parentUUID&quot;:&quot;6da2303f-3936-43ba-bd3e-55a5c17ec689&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4728b99f-0f21-4d2d-b8c9-472c3bb8cde3&quot;,&quot;parentUUID&quot;:&quot;6da2303f-3936-43ba-bd3e-55a5c17ec689&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;232705b0-452a-4ca0-acc3-125235968bf1&quot;,&quot;title&quot;:&quot;cursor.all&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an Array of all results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.all returns an Array of all results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(vals =&gt; {\n    chai_1.expect(vals).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91d79d51-a94a-4701-86bd-38ad0edd5e85&quot;,&quot;parentUUID&quot;:&quot;232705b0-452a-4ca0-acc3-125235968bf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91d79d51-a94a-4701-86bd-38ad0edd5e85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;8c0feed9-bde4-45fa-85b3-68ce6189da6c&quot;,&quot;title&quot;:&quot;cursor.next&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns the next result of the Cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.next returns the next result of the Cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(0);\n    return cursor.next();\n})\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(1);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24233592-4431-4adf-8cfb-3da7a0f17386&quot;,&quot;parentUUID&quot;:&quot;8c0feed9-bde4-45fa-85b3-68ce6189da6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24233592-4431-4adf-8cfb-3da7a0f17386&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;2d9d4fe1-c050-4f7f-ac80-78bf105f43f4&quot;,&quot;title&quot;:&quot;cursor.hasNext&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the Cursor has more results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true if the Cursor has more results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(cursor.hasNext()).to.equal(true);\ncursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.be.a(\&quot;number\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27221fd5-9f0f-4226-a35d-4d959f75ecb2&quot;,&quot;parentUUID&quot;:&quot;2d9d4fe1-c050-4f7f-ac80-78bf105f43f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the Cursor is empty&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false if the Cursor is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(() =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;239c7280-e211-44b5-873e-d515bfa3dfe3&quot;,&quot;parentUUID&quot;:&quot;2d9d4fe1-c050-4f7f-ac80-78bf105f43f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns true after first batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true after first batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:415,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(c8qlQuery, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor.next();\n    chai_1.expect(cursor._result.length).to.equal(0);\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8591475c-cb18-4039-9c4c-95289f953581&quot;,&quot;parentUUID&quot;:&quot;2d9d4fe1-c050-4f7f-ac80-78bf105f43f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:822,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(\&quot;FOR i In 0..1 RETURN i\&quot;, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74a75766-916c-4f21-8859-35db24f9ada8&quot;,&quot;parentUUID&quot;:&quot;2d9d4fe1-c050-4f7f-ac80-78bf105f43f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.query(\&quot;FOR i In 0..1 RETURN i\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(2);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(1);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e59dae20-87f2-4390-9c9e-9896940c7b10&quot;,&quot;parentUUID&quot;:&quot;2d9d4fe1-c050-4f7f-ac80-78bf105f43f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 404 after timeout&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns 404 after timeout&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97de8db3-080a-431c-a8c4-8fbfb10a3944&quot;,&quot;parentUUID&quot;:&quot;2d9d4fe1-c050-4f7f-ac80-78bf105f43f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed (with large amount of results)&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed (with large amount of results)&quot;,&quot;timedOut&quot;:true,&quot;duration&quot;:20001,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const EXPECTED_LENGTH = 100000;\nconst loadMore = function (cursor, totalLength) {\n    cursor\n        .next()\n        .then(() =&gt; {\n        totalLength++;\n        chai_1.expect(cursor.hasNext()).to.equal(totalLength !== EXPECTED_LENGTH);\n        if (cursor.hasNext()) {\n            loadMore(cursor, totalLength);\n        }\n        else {\n            done();\n        }\n    })\n        .catch(done);\n};\nfabric.query(`FOR i In 1..${EXPECTED_LENGTH} RETURN i`)\n    .then(cursor =&gt; loadMore(cursor, 0))\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Timeout of 20000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js)&quot;,&quot;estack&quot;:&quot;Error: Timeout of 20000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js)&quot;},&quot;uuid&quot;:&quot;f1220385-a9a0-46ce-82da-e43cf5301293&quot;,&quot;parentUUID&quot;:&quot;2d9d4fe1-c050-4f7f-ac80-78bf105f43f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;27221fd5-9f0f-4226-a35d-4d959f75ecb2&quot;,&quot;239c7280-e211-44b5-873e-d515bfa3dfe3&quot;,&quot;8591475c-cb18-4039-9c4c-95289f953581&quot;,&quot;74a75766-916c-4f21-8859-35db24f9ada8&quot;,&quot;e59dae20-87f2-4390-9c9e-9896940c7b10&quot;],&quot;failures&quot;:[&quot;f1220385-a9a0-46ce-82da-e43cf5301293&quot;],&quot;pending&quot;:[&quot;97de8db3-080a-431c-a8c4-8fbfb10a3944&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:21650,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1755c084-75b4-4be1-99e6-ab332a456ac0&quot;,&quot;title&quot;:&quot;cursor.each&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;invokes the callback for each value&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each invokes the callback for each value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each(value =&gt; {\n    results.push(value);\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0bc21a3-b746-4748-8d64-b0ac42d3d7c9&quot;,&quot;parentUUID&quot;:&quot;1755c084-75b4-4be1-99e6-ab332a456ac0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;aborts if the callback returns false&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each aborts if the callback returns false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each((value) =&gt; {\n    results.push(value);\n    if (value === 5)\n        return false;\n    return;\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0d38d97-464d-400c-8e1c-f0ee12cf3e5b&quot;,&quot;parentUUID&quot;:&quot;1755c084-75b4-4be1-99e6-ab332a456ac0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a0bc21a3-b746-4748-8d64-b0ac42d3d7c9&quot;,&quot;f0d38d97-464d-400c-8e1c-f0ee12cf3e5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9fc93fb2-71a9-4c5b-938e-28db425bf318&quot;,&quot;title&quot;:&quot;cursor.every&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns true if the callback returns a truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return false;\n    results.push(value);\n    return true;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64f36e28-c851-4186-aad6-40468ac3e46a&quot;,&quot;parentUUID&quot;:&quot;9fc93fb2-71a9-4c5b-938e-28db425bf318&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns false if the callback returns a non-truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    results.push(value);\n    return value &lt; 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7cb9410-3e63-441a-990d-815e85b8113d&quot;,&quot;parentUUID&quot;:&quot;9fc93fb2-71a9-4c5b-938e-28db425bf318&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64f36e28-c851-4186-aad6-40468ac3e46a&quot;,&quot;e7cb9410-3e63-441a-990d-815e85b8113d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;147d6275-d4dc-4c47-a8c3-453eb98b7a5e&quot;,&quot;title&quot;:&quot;cursor.some&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns false if the callback returns a non-truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return true;\n    results.push(value);\n    return false;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05dea7c3-a1d1-4008-8c5b-da68ca1234c6&quot;,&quot;parentUUID&quot;:&quot;147d6275-d4dc-4c47-a8c3-453eb98b7a5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns true if the callback returns a truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    results.push(value);\n    return value &gt;= 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f02a694-9fb9-4349-ba51-c226a830dce2&quot;,&quot;parentUUID&quot;:&quot;147d6275-d4dc-4c47-a8c3-453eb98b7a5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05dea7c3-a1d1-4008-8c5b-da68ca1234c6&quot;,&quot;9f02a694-9fb9-4349-ba51-c226a830dce2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;e48cf8ba-7bd4-4b5a-ba0a-dcdcde1b3cf6&quot;,&quot;title&quot;:&quot;cursor.map&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;maps all result values over the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.map maps all result values over the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .map(value =&gt; value * 2)\n    .then(results =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult.map(value =&gt; value * 2));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8da48e67-da88-4df1-91a7-b923ab9f3ebe&quot;,&quot;parentUUID&quot;:&quot;e48cf8ba-7bd4-4b5a-ba0a-dcdcde1b3cf6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8da48e67-da88-4df1-91a7-b923ab9f3ebe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;0826d669-2074-4b1f-b9ae-abe2a770eef6&quot;,&quot;title&quot;:&quot;cursor.reduce&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;reduces the result values with the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.reduce reduces the result values with the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .reduce((a, b) =&gt; a + b)\n    .then(result =&gt; {\n    chai_1.expect(result).to.eql(c8qlResult.reduce((a, b) =&gt; a + b));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb9f8499-0566-4d5b-a5db-998f34a2f779&quot;,&quot;parentUUID&quot;:&quot;0826d669-2074-4b1f-b9ae-abe2a770eef6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb9f8499-0566-4d5b-a5db-998f34a2f779&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;23b9eeb1-5d4d-4781-bcda-69cd787f86c4&quot;,&quot;title&quot;:&quot;cursor.delete&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete the cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.delete should delete the cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb6930d6-984d-423f-b468-044ae58372cf&quot;,&quot;parentUUID&quot;:&quot;23b9eeb1-5d4d-4781-bcda-69cd787f86c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;eb6930d6-984d-423f-b468-044ae58372cf&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;cb813a19-c7e1-449c-9d73-dd0b80c4bde0&quot;,&quot;title&quot;:&quot;Collection metadata&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3055,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b1054d2-e345-4ba3-9c20-ee04cbdb50b2&quot;,&quot;parentUUID&quot;:&quot;cb813a19-c7e1-449c-9d73-dd0b80c4bde0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:563,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(dbName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0b93e27-6509-4598-968b-e577ed9863b3&quot;,&quot;parentUUID&quot;:&quot;cb813a19-c7e1-449c-9d73-dd0b80c4bde0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9699b8f3-3d2f-4d30-9c04-a3df71c341aa&quot;,&quot;title&quot;:&quot;collection.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await collection.get();\nchai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\nchai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\nchai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\nchai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c60b42a-b620-4df9-90ec-7650a8eaa40e&quot;,&quot;parentUUID&quot;:&quot;9699b8f3-3d2f-4d30-9c04-a3df71c341aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should throw if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:511,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.collection(\&quot;no\&quot;).get();\n}\ncatch (e) {\n    chai_1.expect(e).to.have.property(\&quot;errorNum\&quot;, collection_1.COLLECTION_NOT_FOUND);\n    return;\n}\nchai_1.expect.fail(\&quot;should throw\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73e3608f-cd1a-417e-8a2c-d3f9322b25a4&quot;,&quot;parentUUID&quot;:&quot;9699b8f3-3d2f-4d30-9c04-a3df71c341aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9c60b42a-b620-4df9-90ec-7650a8eaa40e&quot;,&quot;73e3608f-cd1a-417e-8a2c-d3f9322b25a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:920,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e1dc05ae-5981-4147-861f-c4897f60336a&quot;,&quot;title&quot;:&quot;collection.exists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if collection exists&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return true if collection exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.exists();\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84393284-49df-4193-bf0f-21620b7ee4ab&quot;,&quot;parentUUID&quot;:&quot;e1dc05ae-5981-4147-861f-c4897f60336a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return false if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric.collection(\&quot;no\&quot;).exists();\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcdfaefb-b20d-44e1-b6f4-05bec7f16d99&quot;,&quot;parentUUID&quot;:&quot;e1dc05ae-5981-4147-861f-c4897f60336a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84393284-49df-4193-bf0f-21620b7ee4ab&quot;,&quot;dcdfaefb-b20d-44e1-b6f4-05bec7f16d99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:818,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;221fcc88-753a-44ea-84b1-6d64a0f48d50&quot;,&quot;title&quot;:&quot;collection.properties&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return properties of a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.properties should return properties of a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .properties()\n    .then(properties =&gt; {\n    chai_1.expect(properties).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(properties).to.have.property(\&quot;waitForSync\&quot;, false);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e9fca76-6f21-4e6b-81e3-efedbdd5b594&quot;,&quot;parentUUID&quot;:&quot;221fcc88-753a-44ea-84b1-6d64a0f48d50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e9fca76-6f21-4e6b-81e3-efedbdd5b594&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:409,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;92715a2a-5655-4c92-a163-2dd757977fc3&quot;,&quot;title&quot;:&quot;collection.count&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.count should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:355,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .count()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56170765-08c3-41ba-9814-2dc510be774d&quot;,&quot;parentUUID&quot;:&quot;92715a2a-5655-4c92-a163-2dd757977fc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56170765-08c3-41ba-9814-2dc510be774d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:355,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7f939d32-2f8b-4ff0-a03e-79b7026d595c&quot;,&quot;title&quot;:&quot;Manipulating collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2692,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;adf7c348-87f1-4556-b9a8-6c7bdcdec7b6&quot;,&quot;parentUUID&quot;:&quot;7f939d32-2f8b-4ff0-a03e-79b7026d595c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:507,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`collection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f9c4196-d234-4f5d-8dd3-7b8a18cb14e7&quot;,&quot;parentUUID&quot;:&quot;7f939d32-2f8b-4ff0-a03e-79b7026d595c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:406,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dddf154-cb4c-4796-8696-32ababe05300&quot;,&quot;parentUUID&quot;:&quot;7f939d32-2f8b-4ff0-a03e-79b7026d595c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:815,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .get()\n    .then(() =&gt; {\n    collection\n        .drop()\n        .then(() =&gt; void done())\n        .catch(done);\n})\n    .catch(() =&gt; void done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;214c8b73-fc61-4681-9699-c5b7bff66f3b&quot;,&quot;parentUUID&quot;:&quot;7f939d32-2f8b-4ff0-a03e-79b7026d595c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;37239df2-717b-4331-a517-06ce91d05c62&quot;,&quot;title&quot;:&quot;collection.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:906,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39bd7cfe-9dbc-4c4b-a086-aef93a30de6a&quot;,&quot;parentUUID&quot;:&quot;37239df2-717b-4331-a517-06ce91d05c62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new local document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:819,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6340ea7e-828b-41de-8881-8601bf0dc787&quot;,&quot;parentUUID&quot;:&quot;37239df2-717b-4331-a517-06ce91d05c62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:844,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ccb71f4-e876-4088-bc0d-40053dce6035&quot;,&quot;parentUUID&quot;:&quot;37239df2-717b-4331-a517-06ce91d05c62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a new local edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:920,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de83d037-8122-4044-80dd-0386054dfcf5&quot;,&quot;parentUUID&quot;:&quot;37239df2-717b-4331-a517-06ce91d05c62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39bd7cfe-9dbc-4c4b-a086-aef93a30de6a&quot;,&quot;6340ea7e-828b-41de-8881-8601bf0dc787&quot;,&quot;5ccb71f4-e876-4088-bc0d-40053dce6035&quot;,&quot;de83d037-8122-4044-80dd-0386054dfcf5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3489,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e9826eb0-d3cc-412c-b7d5-a56a9001f752&quot;,&quot;title&quot;:&quot;collection.rename&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should rename a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.rename should rename a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:922,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(\&quot;/_admin/server/role\&quot;)\n    .get()\n    .then(res =&gt; {\n    if (res.body.role !== \&quot;SINGLE\&quot;)\n        return;\n    const name = `renamecollection${Date.now()}`;\n    return collection.rename(name).then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, name);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75efedc3-3ca8-4dae-a79b-6546abfee61d&quot;,&quot;parentUUID&quot;:&quot;e9826eb0-d3cc-412c-b7d5-a56a9001f752&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;75efedc3-3ca8-4dae-a79b-6546abfee61d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:922,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;701f6dd3-d51a-4b29-953d-d922cbf8d917&quot;,&quot;title&quot;:&quot;collection.truncate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should truncate a non-empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should truncate a non-empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2970,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.save({}).then(() =&gt; {\n    return collection\n        .truncate()\n        .then(() =&gt; {\n        collection.count().then(info =&gt; {\n            chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n            chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n        });\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc14364f-f5a4-4929-a791-fa4689f2bae6&quot;,&quot;parentUUID&quot;:&quot;701f6dd3-d51a-4b29-953d-d922cbf8d917&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow truncating a empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should allow truncating a empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:772,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.truncate().then(() =&gt; {\n    return collection\n        .count()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c571390-b3b6-4d37-98bc-4cb6d0b356c5&quot;,&quot;parentUUID&quot;:&quot;701f6dd3-d51a-4b29-953d-d922cbf8d917&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc14364f-f5a4-4929-a791-fa4689f2bae6&quot;,&quot;2c571390-b3b6-4d37-98bc-4cb6d0b356c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3742,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e62493cc-c36c-4a3f-9c7c-ab4fd3c8db07&quot;,&quot;title&quot;:&quot;collection.drop&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.drop should drop a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:767,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.drop().then(() =&gt; {\n    return collection\n        .get()\n        .then(done)\n        .catch(err =&gt; {\n        chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n        void done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e624b6e5-94dc-41f8-b03c-5a181aa21f57&quot;,&quot;parentUUID&quot;:&quot;e62493cc-c36c-4a3f-9c7c-ab4fd3c8db07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e624b6e5-94dc-41f8-b03c-5a181aa21f57&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:767,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;6f69b433-13dd-4f82-a7fb-d2a43e59cc66&quot;,&quot;title&quot;:&quot;collection.onChange&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the message on collection change&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.onChange should get the message on collection change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2158,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const callbackObj = {\n    onopen: () =&gt; {\n        collection.save({ name: \&quot;Anthony\&quot;, lastname: \&quot;Gonsalvis\&quot; });\n    },\n    onmessage: (msg) =&gt; {\n        console.log(\&quot;msg=&gt;\&quot;, msg);\n        done();\n    },\n    onerror: (err) =&gt; {\n        console.log(\&quot;Connection Error-&gt;\&quot;, err);\n        chai_1.expect.fail(\&quot;Websocket connection error\&quot;);\n    },\n    onclose: () =&gt; console.log(\&quot;Websoket connection closed\&quot;)\n};\ncollection.onChange(callbackObj, testUrl.substring(8));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63ed74b0-2a38-45c1-95f1-4b47dbea0b3f&quot;,&quot;parentUUID&quot;:&quot;6f69b433-13dd-4f82-a7fb-d2a43e59cc66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;63ed74b0-2a38-45c1-95f1-4b47dbea0b3f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2158,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2cf0f6eb-c45a-43eb-ad5a-fc47d5890c94&quot;,&quot;title&quot;:&quot;Managing indexes&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2867,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b064641f-d12a-4df9-882e-696df0cacfde&quot;,&quot;parentUUID&quot;:&quot;2cf0f6eb-c45a-43eb-ad5a-fc47d5890c94&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:511,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54943eb3-0d53-4d4a-bf70-6118bf0826fe&quot;,&quot;parentUUID&quot;:&quot;2cf0f6eb-c45a-43eb-ad5a-fc47d5890c94&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f04194ca-41db-40db-ae98-46c262d96b80&quot;,&quot;title&quot;:&quot;collection.createIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a index of given type&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createIndex should create a index of given type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:386,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createIndex({\n    type: \&quot;hash\&quot;,\n    fields: [\&quot;value0\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value0\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f513acc7-98ad-47ca-9cc5-2648e173560f&quot;,&quot;parentUUID&quot;:&quot;f04194ca-41db-40db-ae98-46c262d96b80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f513acc7-98ad-47ca-9cc5-2648e173560f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:386,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0aef6883-0ad2-415d-b620-efa5e0930fdb&quot;,&quot;title&quot;:&quot;collection.createHashIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a hash index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createHashIndex should create a hash index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:432,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4a09218-33b4-4df7-9df6-863fa5e9501b&quot;,&quot;parentUUID&quot;:&quot;0aef6883-0ad2-415d-b620-efa5e0930fdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4a09218-33b4-4df7-9df6-863fa5e9501b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:432,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;145537f0-b4fc-4d88-a685-8a6cdec214cb&quot;,&quot;title&quot;:&quot;collection.createSkipList&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a skiplist index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createSkipList should create a skiplist index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createSkipList([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;skiplist\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96abe994-de76-4c83-aa03-e3300a2b6554&quot;,&quot;parentUUID&quot;:&quot;145537f0-b4fc-4d88-a685-8a6cdec214cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96abe994-de76-4c83-aa03-e3300a2b6554&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:407,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;18944efc-5520-48c8-a560-3ab8958bf246&quot;,&quot;title&quot;:&quot;collection.createPersistentIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a persistent index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createPersistentIndex should create a persistent index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createPersistentIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;persistent\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bb91ee3-9e0a-4e84-92f3-bb8177fdfb5b&quot;,&quot;parentUUID&quot;:&quot;18944efc-5520-48c8-a560-3ab8958bf246&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7bb91ee3-9e0a-4e84-92f3-bb8177fdfb5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:410,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;88937f73-5c61-487e-9d8d-ebddb38f4b8d&quot;,&quot;title&quot;:&quot;collection.createGeoIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a geo1 index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo1 index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ff57b49-7027-4f8d-bb49-5d2d5b0a960f&quot;,&quot;parentUUID&quot;:&quot;88937f73-5c61-487e-9d8d-ebddb38f4b8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo2 index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo2 index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef93f224-11db-4542-bdc4-066e48d09614&quot;,&quot;parentUUID&quot;:&quot;88937f73-5c61-487e-9d8d-ebddb38f4b8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac75e51d-9def-4217-9cf4-d410596a43ee&quot;,&quot;parentUUID&quot;:&quot;88937f73-5c61-487e-9d8d-ebddb38f4b8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:408,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value1\&quot;, \&quot;value2\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value1\&quot;, \&quot;value2\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;542b7c51-10b7-4ec0-a6b9-24f47f774636&quot;,&quot;parentUUID&quot;:&quot;88937f73-5c61-487e-9d8d-ebddb38f4b8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac75e51d-9def-4217-9cf4-d410596a43ee&quot;,&quot;542b7c51-10b7-4ec0-a6b9-24f47f774636&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;6ff57b49-7027-4f8d-bb49-5d2d5b0a960f&quot;,&quot;ef93f224-11db-4542-bdc4-066e48d09614&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:815,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ee3b1edb-9e6f-49cd-9393-99d125d6cfc1&quot;,&quot;title&quot;:&quot;collection.createFulltextIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fulltext index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createFulltextIndex should create a fulltext index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createFulltextIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;fulltext\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fcd1643-e37b-4838-8088-4d1edfa5d4be&quot;,&quot;parentUUID&quot;:&quot;ee3b1edb-9e6f-49cd-9393-99d125d6cfc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4fcd1643-e37b-4838-8088-4d1edfa5d4be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:407,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4357b898-64fe-4d8f-bca0-bc4b49408485&quot;,&quot;title&quot;:&quot;collection.index&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.index should return information about a index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:925,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.index(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        chai_1.expect(index).to.have.property(\&quot;type\&quot;, info.type);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9da2d551-21cf-4962-8d4c-f52fe32bbc12&quot;,&quot;parentUUID&quot;:&quot;4357b898-64fe-4d8f-bca0-bc4b49408485&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9da2d551-21cf-4962-8d4c-f52fe32bbc12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:925,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;70b63e46-1210-46b7-a164-bb44e13a0c89&quot;,&quot;title&quot;:&quot;collection.indexes&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of indexes&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.indexes should return a list of indexes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:920,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(index =&gt; {\n    return collection.indexes().then(indexes =&gt; {\n        chai_1.expect(indexes).to.be.instanceof(Array);\n        chai_1.expect(indexes).to.not.be.empty;\n        chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(1);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa6f995b-ce9d-450d-9633-cdebe85b6ffc&quot;,&quot;parentUUID&quot;:&quot;70b63e46-1210-46b7-a164-bb44e13a0c89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa6f995b-ce9d-450d-9633-cdebe85b6ffc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:920,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b94d5504-afbe-410f-9cdb-ae27a356f3f0&quot;,&quot;title&quot;:&quot;collection.dropIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop existing index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.dropIndex should drop existing index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1224,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.dropIndex(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        return collection.indexes().then(indexes =&gt; {\n            chai_1.expect(indexes).to.be.instanceof(Array);\n            chai_1.expect(indexes).to.not.be.empty;\n            chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(0);\n        });\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd2204cd-9a35-4064-a17c-43f66b3d9540&quot;,&quot;parentUUID&quot;:&quot;b94d5504-afbe-410f-9cdb-ae27a356f3f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd2204cd-9a35-4064-a17c-43f66b3d9540&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1224,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f3d56788-2a36-48c7-8ca6-811465173b1e&quot;,&quot;title&quot;:&quot;DocumentCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1810,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f614c535-5b89-48eb-abe1-cb53663e63d6&quot;,&quot;parentUUID&quot;:&quot;f3d56788-2a36-48c7-8ca6-811465173b1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:510,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;499a1d2c-fea3-4216-934d-f39c643c4fc7&quot;,&quot;parentUUID&quot;:&quot;f3d56788-2a36-48c7-8ca6-811465173b1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:294,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d64ba04f-3dcd-40d7-8f03-616f985d3d9a&quot;,&quot;parentUUID&quot;:&quot;f3d56788-2a36-48c7-8ca6-811465173b1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c4996d4-f595-4581-bfbd-9a03dcc8b051&quot;,&quot;parentUUID&quot;:&quot;f3d56788-2a36-48c7-8ca6-811465173b1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2f5a0623-1e64-4678-8657-221773365563&quot;,&quot;title&quot;:&quot;documentCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:327,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3625f6c5-7f33-46f6-ac93-819d3392c72c&quot;,&quot;parentUUID&quot;:&quot;2f5a0623-1e64-4678-8657-221773365563&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document returns a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:256,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb6ab4f5-0ed8-4645-8b89-8f4b5bbd8d68&quot;,&quot;parentUUID&quot;:&quot;2f5a0623-1e64-4678-8657-221773365563&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:309,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6cddf78-c466-4b68-b3d6-08ecf5e19e8c&quot;,&quot;parentUUID&quot;:&quot;2f5a0623-1e64-4678-8657-221773365563&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb6ab4f5-0ed8-4645-8b89-8f4b5bbd8d68&quot;,&quot;a6cddf78-c466-4b68-b3d6-08ecf5e19e8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:565,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4d81df35-26f7-4aa8-8494-7d4bc7bd7b47&quot;,&quot;title&quot;:&quot;documentCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:349,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c9119c6-e7e6-44a3-83d7-76f4684246e4&quot;,&quot;parentUUID&quot;:&quot;4d81df35-26f7-4aa8-8494-7d4bc7bd7b47&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the document exists&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns true if the document exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:256,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ce5bf21-a2e8-4a16-983d-e76c84a70dbe&quot;,&quot;parentUUID&quot;:&quot;4d81df35-26f7-4aa8-8494-7d4bc7bd7b47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the document does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the document does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:256,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;does-not-exist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;206c29cd-9522-48ca-b84c-02b303828682&quot;,&quot;parentUUID&quot;:&quot;4d81df35-26f7-4aa8-8494-7d4bc7bd7b47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the collection does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric\n    .collection(\&quot;doesnotexist\&quot;)\n    .documentExists(\&quot;lol\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36e2c0ee-eb46-4ca1-a1d0-2c14fab1965d&quot;,&quot;parentUUID&quot;:&quot;4d81df35-26f7-4aa8-8494-7d4bc7bd7b47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ce5bf21-a2e8-4a16-983d-e76c84a70dbe&quot;,&quot;206c29cd-9522-48ca-b84c-02b303828682&quot;,&quot;36e2c0ee-eb46-4ca1-a1d0-2c14fab1965d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:818,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ae2d1946-6860-4d5c-9692-0d4830980bef&quot;,&quot;title&quot;:&quot;documentCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save creates a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:615,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cf2ad8e-1e73-4083-ab90-7e0d7659a54a&quot;,&quot;parentUUID&quot;:&quot;ae2d1946-6860-4d5c-9692-0d4830980bef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:623,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5c6d5f3-298f-4670-9a4a-240096296254&quot;,&quot;parentUUID&quot;:&quot;ae2d1946-6860-4d5c-9692-0d4830980bef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns the document if opts.returnNew is set&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save returns the document if opts.returnNew is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = { returnNew: true };\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a9e305c-6ec9-4b65-9487-9d987fc17af8&quot;,&quot;parentUUID&quot;:&quot;ae2d1946-6860-4d5c-9692-0d4830980bef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;interprets opts as returnNew if it is a boolean&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save interprets opts as returnNew if it is a boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:437,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = true;\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2b460ad-0c7e-4c58-aa0d-736f169f65da&quot;,&quot;parentUUID&quot;:&quot;ae2d1946-6860-4d5c-9692-0d4830980bef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2cf2ad8e-1e73-4083-ab90-7e0d7659a54a&quot;,&quot;c5c6d5f3-298f-4670-9a4a-240096296254&quot;,&quot;4a9e305c-6ec9-4b65-9487-9d987fc17af8&quot;,&quot;c2b460ad-0c7e-4c58-aa0d-736f169f65da&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1985,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9b6dbdfd-146f-4f81-a752-1880826b2206&quot;,&quot;title&quot;:&quot;documentCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.replace replaces the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:922,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69e35a39-1484-467b-96b2-801635a2a850&quot;,&quot;parentUUID&quot;:&quot;9b6dbdfd-146f-4f81-a752-1880826b2206&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69e35a39-1484-467b-96b2-801635a2a850&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:922,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;73686fca-f925-4049-b162-ad52fc025860&quot;,&quot;title&quot;:&quot;documentCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:929,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49873499-c586-4822-917a-dc68f9149a5f&quot;,&quot;parentUUID&quot;:&quot;73686fca-f925-4049-b162-ad52fc025860&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:905,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69221bd7-8dd3-4065-8849-905d722266b4&quot;,&quot;parentUUID&quot;:&quot;73686fca-f925-4049-b162-ad52fc025860&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;49873499-c586-4822-917a-dc68f9149a5f&quot;,&quot;69221bd7-8dd3-4065-8849-905d722266b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1834,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;84ed3d8e-1cca-426f-a8c4-e765c3b2e376&quot;,&quot;title&quot;:&quot;documentCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;259fc64f-b851-4031-a93b-a490896602c6&quot;,&quot;parentUUID&quot;:&quot;84ed3d8e-1cca-426f-a8c4-e765c3b2e376&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove deletes the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:614,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.document(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcf1be77-1dee-4b6e-ba49-5685fa79e05d&quot;,&quot;parentUUID&quot;:&quot;84ed3d8e-1cca-426f-a8c4-e765c3b2e376&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dcf1be77-1dee-4b6e-ba49-5685fa79e05d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:614,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;81598936-aabc-458b-beaa-c1a22263f388&quot;,&quot;title&quot;:&quot;EdgeCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2572,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d020b8db-5504-4f44-b275-6f4d7375eff5&quot;,&quot;parentUUID&quot;:&quot;81598936-aabc-458b-beaa-c1a22263f388&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.edgeCollection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f617c8df-8b96-46a0-8bb1-ded8bcae568b&quot;,&quot;parentUUID&quot;:&quot;81598936-aabc-458b-beaa-c1a22263f388&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38a52285-fc82-45b7-853f-d0b8d4f50afb&quot;,&quot;parentUUID&quot;:&quot;81598936-aabc-458b-beaa-c1a22263f388&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:408,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;225bdbaf-f5d8-4fd0-b175-76387373c8f1&quot;,&quot;parentUUID&quot;:&quot;81598936-aabc-458b-beaa-c1a22263f388&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3e4cf1c2-fe89-40a6-a996-f4eb52d197a5&quot;,&quot;title&quot;:&quot;edgeCollection.edge&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:510,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4eb497d9-57d1-43a1-b8ed-c4bfd3a7a3a5&quot;,&quot;parentUUID&quot;:&quot;3e4cf1c2-fe89-40a6-a996-f4eb52d197a5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:513,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;795ceaef-cbc9-4533-9580-5dcd052d29e3&quot;,&quot;parentUUID&quot;:&quot;3e4cf1c2-fe89-40a6-a996-f4eb52d197a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:513,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdea8bf1-89c8-472a-9f4b-e2039f73bbb2&quot;,&quot;parentUUID&quot;:&quot;3e4cf1c2-fe89-40a6-a996-f4eb52d197a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;795ceaef-cbc9-4533-9580-5dcd052d29e3&quot;,&quot;fdea8bf1-89c8-472a-9f4b-e2039f73bbb2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1026,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c2624824-3e56-412f-957b-1d9d2c38972b&quot;,&quot;title&quot;:&quot;edgeCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:418,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1431be1c-29fa-48bb-ae73-bcdde1a3da9e&quot;,&quot;parentUUID&quot;:&quot;c2624824-3e56-412f-957b-1d9d2c38972b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9429beaf-055c-40c6-bd94-914037e69479&quot;,&quot;parentUUID&quot;:&quot;c2624824-3e56-412f-957b-1d9d2c38972b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:403,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f2c3e6f-6d9e-498a-ae59-ec07872d7492&quot;,&quot;parentUUID&quot;:&quot;c2624824-3e56-412f-957b-1d9d2c38972b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9429beaf-055c-40c6-bd94-914037e69479&quot;,&quot;2f2c3e6f-6d9e-498a-ae59-ec07872d7492&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:813,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e524f207-697f-4b04-befa-87065112d6c8&quot;,&quot;title&quot;:&quot;edgeCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:613,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;834ec45d-70c8-4ca3-85c8-baf1d81947d5&quot;,&quot;parentUUID&quot;:&quot;e524f207-697f-4b04-befa-87065112d6c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the edge exists&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns true if the edge exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:458,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81c46924-bce0-4c9c-a75a-839996b2b1a1&quot;,&quot;parentUUID&quot;:&quot;e524f207-697f-4b04-befa-87065112d6c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false if the edge does not exist&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns false if the edge does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:512,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;doesnotexist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e17ade08-1e29-4eb7-82e9-653ec553e8f3&quot;,&quot;parentUUID&quot;:&quot;e524f207-697f-4b04-befa-87065112d6c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;81c46924-bce0-4c9c-a75a-839996b2b1a1&quot;,&quot;e17ade08-1e29-4eb7-82e9-653ec553e8f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:970,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c20e1efe-eb1e-4fc8-a13d-766b4a2ea912&quot;,&quot;title&quot;:&quot;edgeCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save creates an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:817,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35a84c4d-2a3f-4551-8f47-aa788be640f8&quot;,&quot;parentUUID&quot;:&quot;c20e1efe-eb1e-4fc8-a13d-766b4a2ea912&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:820,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = {\n    chicken: \&quot;chicken\&quot;,\n    _key: \&quot;banana\&quot;,\n    _from: \&quot;d/1\&quot;,\n    _to: \&quot;d/2\&quot;\n};\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.equals(data._key);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._key).to.equal(data._key);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4537617d-56a8-4a2d-96f4-db0372a7a62d&quot;,&quot;parentUUID&quot;:&quot;c20e1efe-eb1e-4fc8-a13d-766b4a2ea912&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes _from and _to as positional arguments&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes _from and _to as positional arguments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:917,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad7dc42a-d76c-4a9a-be6d-ac43580e352d&quot;,&quot;parentUUID&quot;:&quot;c20e1efe-eb1e-4fc8-a13d-766b4a2ea912&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes an options object&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:788,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0778f8b3-cbef-46fb-b7a8-0a97bd18d7dc&quot;,&quot;parentUUID&quot;:&quot;c20e1efe-eb1e-4fc8-a13d-766b4a2ea912&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;takes an options object with positional _from and _to&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object with positional _from and _to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:723,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a696626-36d4-45e6-9776-88a4d4c41ce7&quot;,&quot;parentUUID&quot;:&quot;c20e1efe-eb1e-4fc8-a13d-766b4a2ea912&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;35a84c4d-2a3f-4551-8f47-aa788be640f8&quot;,&quot;4537617d-56a8-4a2d-96f4-db0372a7a62d&quot;,&quot;ad7dc42a-d76c-4a9a-be6d-ac43580e352d&quot;,&quot;0778f8b3-cbef-46fb-b7a8-0a97bd18d7dc&quot;,&quot;6a696626-36d4-45e6-9776-88a4d4c41ce7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4065,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8af13bbb-dc86-4c07-96c5-d73cf4a4f3c4&quot;,&quot;title&quot;:&quot;edgeCollection.traversal&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1289,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows = fabric.edgeCollection(\&quot;knows\&quot;);\nconst person = fabric.collection(\&quot;person\&quot;);\nPromise.all([person.create(), knows.create()])\n    .then(() =&gt; Promise.all([\n    person.import([\n        { _key: \&quot;Alice\&quot; },\n        { _key: \&quot;Bob\&quot; },\n        { _key: \&quot;Charlie\&quot; },\n        { _key: \&quot;Dave\&quot; },\n        { _key: \&quot;Eve\&quot; }\n    ]),\n    knows.import([\n        { _from: \&quot;person/Alice\&quot;, _to: \&quot;person/Bob\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Charlie\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Dave\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Alice\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Bob\&quot; }\n    ])\n]))\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e856574-1243-4331-9e38-25cc82e4b2d7&quot;,&quot;parentUUID&quot;:&quot;8af13bbb-dc86-4c07-96c5-d73cf4a4f3c4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;executes traversal&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal executes traversal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:342,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows\n    .traversal(\&quot;person/Alice\&quot;, { direction: \&quot;outbound\&quot; })\n    .then((result) =&gt; {\n    chai_1.expect(result).to.have.property(\&quot;visited\&quot;);\n    const visited = result.visited;\n    chai_1.expect(visited).to.have.property(\&quot;vertices\&quot;);\n    const vertices = visited.vertices;\n    chai_1.expect(vertices).to.be.instanceOf(Array);\n    chai_1.expect(vertices.length).to.equal(4);\n    const names = vertices.map((d) =&gt; d._key);\n    for (const name of [\&quot;Alice\&quot;, \&quot;Bob\&quot;, \&quot;Charlie\&quot;, \&quot;Dave\&quot;]) {\n        chai_1.expect(names).to.contain(name);\n    }\n    chai_1.expect(visited).to.have.property(\&quot;paths\&quot;);\n    const paths = visited.paths;\n    chai_1.expect(paths).to.be.instanceOf(Array);\n    chai_1.expect(paths.length).to.equal(4);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;956f79e1-1b8d-4fee-88da-28e76b602042&quot;,&quot;parentUUID&quot;:&quot;8af13bbb-dc86-4c07-96c5-d73cf4a4f3c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;956f79e1-1b8d-4fee-88da-28e76b602042&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:342,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;242d3bef-9a09-45d1-b4dd-5be8b248dc2e&quot;,&quot;title&quot;:&quot;edgeCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.replace replaces the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1331,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = { potato: \&quot;tomato\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, {\n        sup: \&quot;dawg\&quot;,\n        _from: \&quot;d/1\&quot;,\n        _to: \&quot;d/2\&quot;\n    });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;beb636cb-77dd-4f2a-abd4-1b67c51fdb88&quot;,&quot;parentUUID&quot;:&quot;242d3bef-9a09-45d1-b4dd-5be8b248dc2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;beb636cb-77dd-4f2a-abd4-1b67c51fdb88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1331,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;93f4a1fb-2b6c-4cc4-9adb-ef6fbf1f89b2&quot;,&quot;title&quot;:&quot;edgeCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1021,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;empty\&quot;, null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4625e13-f09f-4050-ba64-4ea05948bf71&quot;,&quot;parentUUID&quot;:&quot;93f4a1fb-2b6c-4cc4-9adb-ef6fbf1f89b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0117d6dc-7514-4581-963f-470705162c30&quot;,&quot;parentUUID&quot;:&quot;93f4a1fb-2b6c-4cc4-9adb-ef6fbf1f89b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4625e13-f09f-4050-ba64-4ea05948bf71&quot;,&quot;0117d6dc-7514-4581-963f-470705162c30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2150,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7dc3a19e-9588-4d95-a60b-91893ff3f513&quot;,&quot;title&quot;:&quot;edgeCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5f5e59d-2df2-425b-bd4a-8c8a7c82eb96&quot;,&quot;parentUUID&quot;:&quot;7dc3a19e-9588-4d95-a60b-91893ff3f513&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove deletes the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:719,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.edge(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cad8274b-31c6-48d8-b68b-06a1483e9d67&quot;,&quot;parentUUID&quot;:&quot;7dc3a19e-9588-4d95-a60b-91893ff3f513&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cad8274b-31c6-48d8-b68b-06a1483e9d67&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:719,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;53429192-c4b6-4049-9644-f8435ee8d291&quot;,&quot;title&quot;:&quot;Graph API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2768,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9aaf99b9-e9ba-4b73-8d16-dac43ed2f25a&quot;,&quot;parentUUID&quot;:&quot;53429192-c4b6-4049-9644-f8435ee8d291&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:513,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;112ef648-cb61-4019-99ce-68f07ad71a8c&quot;,&quot;parentUUID&quot;:&quot;53429192-c4b6-4049-9644-f8435ee8d291&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;62e1d801-e231-4131-b8c4-a0753bd3dd35&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1838,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49b9f8bf-0f88-491e-b4cd-347b54716356&quot;,&quot;parentUUID&quot;:&quot;62e1d801-e231-4131-b8c4-a0753bd3dd35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1224,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc7559de-8417-4090-a538-e142eb6835b8&quot;,&quot;parentUUID&quot;:&quot;62e1d801-e231-4131-b8c4-a0753bd3dd35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get fetches information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:416,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fdeb621-ece3-4ba2-9c70-2f5a5a5bf2af&quot;,&quot;parentUUID&quot;:&quot;62e1d801-e231-4131-b8c4-a0753bd3dd35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2fdeb621-ece3-4ba2-9c70-2f5a5a5bf2af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:416,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1bec70fd-ef30-4d33-9fcc-ccdbd2017710&quot;,&quot;title&quot;:&quot;graph.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1446,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3adfd13-86c0-416c-8027-490e75a3d955&quot;,&quot;parentUUID&quot;:&quot;1bec70fd-ef30-4d33-9fcc-ccdbd2017710&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:792,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric.collection(name).drop()))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a444bfb4-eeff-43a7-a7b8-fe946cbac82a&quot;,&quot;parentUUID&quot;:&quot;1bec70fd-ef30-4d33-9fcc-ccdbd2017710&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create creates the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:805,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let graph = fabric.graph(`g${Date.now()}`);\ngraph\n    .create({\n    edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n        collection: name,\n        from: vertexCollectionNames,\n        to: vertexCollectionNames\n    }))\n})\n    .then(() =&gt; graph.get())\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4eda60bf-8078-4237-a4c3-96799828a7d6&quot;,&quot;parentUUID&quot;:&quot;1bec70fd-ef30-4d33-9fcc-ccdbd2017710&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4eda60bf-8078-4237-a4c3-96799828a7d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:805,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c67eb32e-3df3-4ce3-93eb-a00df32f2dd9&quot;,&quot;title&quot;:&quot;graph.drop&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1232,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61ed5e1d-cc6d-4f80-adb5-ef8fc1c94d3b&quot;,&quot;parentUUID&quot;:&quot;c67eb32e-3df3-4ce3-93eb-a00df32f2dd9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:818,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric\n    .collection(name)\n    .drop()\n    .catch(() =&gt; null)))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f693b0d-fd01-44fa-b358-7666d41351b7&quot;,&quot;parentUUID&quot;:&quot;c67eb32e-3df3-4ce3-93eb-a00df32f2dd9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;destroys the graph if not passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop destroys the graph if not passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1230,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4019e54-73d4-43c2-aacb-4d839b730421&quot;,&quot;parentUUID&quot;:&quot;c67eb32e-3df3-4ce3-93eb-a00df32f2dd9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;additionally drops all of its collections if passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop additionally drops all of its collections if passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1329,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop(true)\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).not.to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd3f5425-caff-4299-b3c0-ce8334701f47&quot;,&quot;parentUUID&quot;:&quot;c67eb32e-3df3-4ce3-93eb-a00df32f2dd9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4019e54-73d4-43c2-aacb-4d839b730421&quot;,&quot;cd3f5425-caff-4299-b3c0-ce8334701f47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2559,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f628def9-3617-490f-8b81-ea5d677fde39&quot;,&quot;title&quot;:&quot;Manipulating graph vertices&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2657,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baaf939f-2535-4b3a-9543-4f9c6f8dd79b&quot;,&quot;parentUUID&quot;:&quot;f628def9-3617-490f-8b81-ea5d677fde39&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1457,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44fc16cf-bce3-4975-a72d-dacb2de45082&quot;,&quot;parentUUID&quot;:&quot;f628def9-3617-490f-8b81-ea5d677fde39&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:511,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b112d8fc-8c9a-46aa-af68-4ee09ec978c6&quot;,&quot;parentUUID&quot;:&quot;f628def9-3617-490f-8b81-ea5d677fde39&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1020,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9ce595e-773c-4493-9b05-a33d8c75e9b9&quot;,&quot;parentUUID&quot;:&quot;f628def9-3617-490f-8b81-ea5d677fde39&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;412a177c-32c8-4eb2-b76a-0a7d1fa1a4a3&quot;,&quot;title&quot;:&quot;graph.vertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a GraphVertexCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.vertexCollection returns a GraphVertexCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = graph.vertexCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(graph_1.GraphVertexCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c143feb-5166-42b0-b3ee-b0e25116b303&quot;,&quot;parentUUID&quot;:&quot;412a177c-32c8-4eb2-b76a-0a7d1fa1a4a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c143feb-5166-42b0-b3ee-b0e25116b303&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;d41bf846-9431-4467-9810-4703e9b1c66b&quot;,&quot;title&quot;:&quot;graph.addVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:389,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`coll${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;649d53e6-cebf-4c7a-83ea-c7e4e73d4bba&quot;,&quot;parentUUID&quot;:&quot;d41bf846-9431-4467-9810-4703e9b1c66b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:503,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c505c75-4eed-4e0e-ae7c-6134f955c7e7&quot;,&quot;parentUUID&quot;:&quot;d41bf846-9431-4467-9810-4703e9b1c66b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds the given vertex collection to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection adds the given vertex collection to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:336,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).to.contain(vertexCollection.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6a7f4d5-07ea-41ad-ad30-23b065715be6&quot;,&quot;parentUUID&quot;:&quot;d41bf846-9431-4467-9810-4703e9b1c66b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6a7f4d5-07ea-41ad-ad30-23b065715be6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:336,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;57d02a3d-415c-43d6-b97e-8ae03919feff&quot;,&quot;title&quot;:&quot;graph.removeVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:791,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`xc${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; graph.addVertexCollection(vertexCollection.name))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d7f61de-8b1f-47fe-8a9a-43dcf5a1487b&quot;,&quot;parentUUID&quot;:&quot;57d02a3d-415c-43d6-b97e-8ae03919feff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes the given vertex collection from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection removes the given vertex collection from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:875,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e8651ea-c621-424e-a562-60ae40bf631a&quot;,&quot;parentUUID&quot;:&quot;57d02a3d-415c-43d6-b97e-8ae03919feff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;destroys the collection if explicitly passed true&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection destroys the collection if explicitly passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:925,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name, true)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), err =&gt; {\n    chai_1.expect(err).to.be.an.instanceof(error_1.C8Error);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fb47a23-d3bb-4b6e-8866-aae21eca51c7&quot;,&quot;parentUUID&quot;:&quot;57d02a3d-415c-43d6-b97e-8ae03919feff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e8651ea-c621-424e-a562-60ae40bf631a&quot;,&quot;8fb47a23-d3bb-4b6e-8866-aae21eca51c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1800,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c03ab93a-827d-44c5-b280-6f048cbea655&quot;,&quot;title&quot;:&quot;Manipulating graph edges&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2562,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68c608a4-2491-4a52-bda7-9cfb601ffa2e&quot;,&quot;parentUUID&quot;:&quot;c03ab93a-827d-44c5-b280-6f048cbea655&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:414,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(graphName);\ngraph\n    .create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d1e9c95-ddcb-42dd-ac1f-b64d6753adda&quot;,&quot;parentUUID&quot;:&quot;c03ab93a-827d-44c5-b280-6f048cbea655&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:398,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;076b121d-f3dd-45fc-ba3e-f40d1ff04a3b&quot;,&quot;parentUUID&quot;:&quot;c03ab93a-827d-44c5-b280-6f048cbea655&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72e1bdad-26d7-415b-8006-30ac077b9316&quot;,&quot;parentUUID&quot;:&quot;c03ab93a-827d-44c5-b280-6f048cbea655&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;53bd9c1b-ddd3-4d68-9ecf-f9b1f1efee37&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.get should return information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:369,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23a8be8e-c416-447f-84ba-94eaa282eabf&quot;,&quot;parentUUID&quot;:&quot;53bd9c1b-ddd3-4d68-9ecf-f9b1f1efee37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;23a8be8e-c416-447f-84ba-94eaa282eabf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:369,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e24bcd8d-7f79-4c4b-8bd0-60135a4824c3&quot;,&quot;title&quot;:&quot;graph.edgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.edgeCollections should contain edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:368,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .edgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info.map((c) =&gt; c.name)).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02487382-c5d3-4c7b-8295-758b5161ce60&quot;,&quot;parentUUID&quot;:&quot;e24bcd8d-7f79-4c4b-8bd0-60135a4824c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;02487382-c5d3-4c7b-8295-758b5161ce60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:368,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f68b7cf0-1035-452f-a773-4d6e17cae955&quot;,&quot;title&quot;:&quot;graph.listEdgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all edge collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listEdgeCollections should return all edge collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:386,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listEdgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b01632e0-09c5-4882-ae2b-2c7a09a585d3&quot;,&quot;parentUUID&quot;:&quot;f68b7cf0-1035-452f-a773-4d6e17cae955&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b01632e0-09c5-4882-ae2b-2c7a09a585d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:386,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d1698ff2-ff5a-4b82-840b-d83b0f491c4f&quot;,&quot;title&quot;:&quot;graph.listVertexCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all vertex collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listVertexCollections should return all vertex collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:413,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listVertexCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6ddf2cd-f23d-4673-8fa7-40a8fdaae3c7&quot;,&quot;parentUUID&quot;:&quot;d1698ff2-ff5a-4b82-840b-d83b0f491c4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6ddf2cd-f23d-4673-8fa7-40a8fdaae3c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:413,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;57bc7139-f5f4-4cb0-9f0e-e6ec843830ec&quot;,&quot;title&quot;:&quot;graph.addEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add an edgeDefinition to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.addEdgeDefinition should add an edgeDefinition to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:419,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addEdgeDefinition({\n    collection: \&quot;works_in\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(2);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;works_in\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;works_in\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c960aa63-1620-4d8e-bd16-fbdcea98d3f8&quot;,&quot;parentUUID&quot;:&quot;57bc7139-f5f4-4cb0-9f0e-e6ec843830ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c960aa63-1620-4d8e-bd16-fbdcea98d3f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:419,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3595e673-38b2-44f0-8652-8a333016c4ef&quot;,&quot;title&quot;:&quot;graph.replaceEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should replace an existing edgeDefinition in the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.replaceEdgeDefinition should replace an existing edgeDefinition in the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .replaceEdgeDefinition(\&quot;knows\&quot;, {\n    collection: \&quot;knows\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c246598-fdc9-4269-9960-984c6de905d1&quot;,&quot;parentUUID&quot;:&quot;3595e673-38b2-44f0-8652-8a333016c4ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c246598-fdc9-4269-9960-984c6de905d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:411,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ebd76365-a15d-493c-96c1-5e16a86d4861&quot;,&quot;title&quot;:&quot;graph.removeEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove an edgeDefinition from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.removeEdgeDefinition should remove an edgeDefinition from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:512,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeEdgeDefinition(\&quot;knows\&quot;)\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57c11e38-322e-4171-9b17-6abc01cc407b&quot;,&quot;parentUUID&quot;:&quot;ebd76365-a15d-493c-96c1-5e16a86d4861&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;57c11e38-322e-4171-9b17-6abc01cc407b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:512,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a936cf65-7abc-43c2-af4e-d74602e16029&quot;,&quot;title&quot;:&quot;GraphVertexCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3088,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\nconst graph = fabric.graph(`testgraph${Date.now()}`);\nawait graph.create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n});\ncollection = graph.vertexCollection(\&quot;person\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aebcf127-8e58-48bf-a12d-43f331955c62&quot;,&quot;parentUUID&quot;:&quot;a936cf65-7abc-43c2-af4e-d74602e16029&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:510,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .truncate()\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d0f259b-ea29-41e2-b840-ca4c2f851446&quot;,&quot;parentUUID&quot;:&quot;a936cf65-7abc-43c2-af4e-d74602e16029&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:509,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;230809b0-acba-4908-8ba0-5466aa61b9da&quot;,&quot;parentUUID&quot;:&quot;a936cf65-7abc-43c2-af4e-d74602e16029&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;018a57db-c6da-468e-ba09-2d272b34cbe5&quot;,&quot;title&quot;:&quot;graphVertexCollection.vertex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:366,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e426b46b-3d6d-492a-9583-ea8224172769&quot;,&quot;parentUUID&quot;:&quot;018a57db-c6da-468e-ba09-2d272b34cbe5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6a60644-fcc4-4e3d-9c30-ba868af4b83c&quot;,&quot;parentUUID&quot;:&quot;018a57db-c6da-468e-ba09-2d272b34cbe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:408,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81c8797f-56b9-4104-8317-cec3a80c1eb1&quot;,&quot;parentUUID&quot;:&quot;018a57db-c6da-468e-ba09-2d272b34cbe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6a60644-fcc4-4e3d-9c30-ba868af4b83c&quot;,&quot;81c8797f-56b9-4104-8317-cec3a80c1eb1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:819,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c3ccfae9-85c1-484a-821f-551536017390&quot;,&quot;title&quot;:&quot;graphVertexCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:413,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;062e6be2-6810-44da-b16c-f6d3d11cc5e0&quot;,&quot;parentUUID&quot;:&quot;c3ccfae9-85c1-484a-821f-551536017390&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:555,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3afc26a-739e-4af8-bce3-9fb961098425&quot;,&quot;parentUUID&quot;:&quot;c3ccfae9-85c1-484a-821f-551536017390&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88963009-829a-41ef-a54c-65918c112fe8&quot;,&quot;parentUUID&quot;:&quot;c3ccfae9-85c1-484a-821f-551536017390&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3afc26a-739e-4af8-bce3-9fb961098425&quot;,&quot;88963009-829a-41ef-a54c-65918c112fe8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1684,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;568da0db-a7b2-4376-a35f-98cbc67f819a&quot;,&quot;title&quot;:&quot;graphVertexCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save creates a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:811,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06b20280-3af9-48a9-8ae2-940bfdfc75b6&quot;,&quot;parentUUID&quot;:&quot;568da0db-a7b2-4376-a35f-98cbc67f819a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:820,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8950992-e7a8-4b16-a68a-465ffb898edc&quot;,&quot;parentUUID&quot;:&quot;568da0db-a7b2-4376-a35f-98cbc67f819a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;06b20280-3af9-48a9-8ae2-940bfdfc75b6&quot;,&quot;d8950992-e7a8-4b16-a68a-465ffb898edc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1631,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7fc1ba7f-c137-488a-8135-5364f3b85969&quot;,&quot;title&quot;:&quot;graphVertexCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.replace replaces the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1332,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c76234e9-888f-4b41-bb58-1d4f053f80da&quot;,&quot;parentUUID&quot;:&quot;7fc1ba7f-c137-488a-8135-5364f3b85969&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c76234e9-888f-4b41-bb58-1d4f053f80da&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1332,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a470e1b2-bea3-46af-aad5-923b789e98a6&quot;,&quot;title&quot;:&quot;graphVertexCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update updates the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1228,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;916a0111-0fac-41af-b77b-30c70cc6286a&quot;,&quot;parentUUID&quot;:&quot;a470e1b2-bea3-46af-aad5-923b789e98a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1330,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a23fc50-f80f-447e-bb3d-0ac79d7c53c5&quot;,&quot;parentUUID&quot;:&quot;a470e1b2-bea3-46af-aad5-923b789e98a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;916a0111-0fac-41af-b77b-30c70cc6286a&quot;,&quot;4a23fc50-f80f-447e-bb3d-0ac79d7c53c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2558,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;36a9eb38-55f7-4735-98c7-cffc988c5e4c&quot;,&quot;title&quot;:&quot;graphVertexCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:411,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b008783e-fb6f-4428-ac60-2921bce77edd&quot;,&quot;parentUUID&quot;:&quot;36a9eb38-55f7-4735-98c7-cffc988c5e4c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove deletes the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:820,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.vertex(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c87e0451-8297-440f-8f0b-8c4d897ff4bf&quot;,&quot;parentUUID&quot;:&quot;36a9eb38-55f7-4735-98c7-cffc988c5e4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c87e0451-8297-440f-8f0b-8c4d897ff4bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:820,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f5cc4ff6-2d3d-4440-9eae-00f9d052fc88&quot;,&quot;title&quot;:&quot;Join Path&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/21-util-joinpath.js&quot;,&quot;file&quot;:&quot;/lib/async/test/21-util-joinpath.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;joinPath 1&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;../../u1/u2\&quot;;\nvar path = \&quot;/security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;../../u1/u2/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bec2849-9554-4591-826e-852e02bff3ae&quot;,&quot;parentUUID&quot;:&quot;f5cc4ff6-2d3d-4440-9eae-00f9d052fc88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 2&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/u1/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccade5c6-4828-4c3c-a117-d1e5db17676c&quot;,&quot;parentUUID&quot;:&quot;f5cc4ff6-2d3d-4440-9eae-00f9d052fc88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 3&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccac1496-5993-478f-9dac-356887275aea&quot;,&quot;parentUUID&quot;:&quot;f5cc4ff6-2d3d-4440-9eae-00f9d052fc88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0bec2849-9554-4591-826e-852e02bff3ae&quot;,&quot;ccade5c6-4828-4c3c-a117-d1e5db17676c&quot;,&quot;ccac1496-5993-478f-9dac-356887275aea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;0409fe79-1e6a-41d7-b520-46d3b354a10e&quot;,&quot;title&quot;:&quot;Helper.getFullStreamPath&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output when there is no extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is no extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ca07bfd-d8ee-4587-a261-82cfabea8418&quot;,&quot;parentUUID&quot;:&quot;0409fe79-1e6a-41d7-b520-46d3b354a10e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns correct output when there is extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;, \&quot;/compaction\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog/compaction\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5eeebad-dc46-4258-8922-544fe384ee9c&quot;,&quot;parentUUID&quot;:&quot;0409fe79-1e6a-41d7-b520-46d3b354a10e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ca07bfd-d8ee-4587-a261-82cfabea8418&quot;,&quot;d5eeebad-dc46-4258-8922-544fe384ee9c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;47b5e6c6-274f-4e0c-b96d-789abf16c89c&quot;,&quot;title&quot;:&quot;Helper.getDCListString&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output&quot;,&quot;fullTitle&quot;:&quot;Helper.getDCListString returns correct output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(helper_1.getDCListString(response)).to.equal(&#x27;dev-ap-southeast-1,dev-ap-southeast-2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cc94ff6-02f7-4279-aa43-014b26edce14&quot;,&quot;parentUUID&quot;:&quot;47b5e6c6-274f-4e0c-b96d-789abf16c89c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cc94ff6-02f7-4279-aa43-014b26edce14&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;0899c109-0234-49a0-80e0-d8ab47297ec0&quot;,&quot;title&quot;:&quot;C8QL Stream queries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1849,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5ed2942-0b30-44b9-b31a-cd34e24385e8&quot;,&quot;parentUUID&quot;:&quot;0899c109-0234-49a0-80e0-d8ab47297ec0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f2ee78e-c476-42d8-98f4-e5be45d8bf1d&quot;,&quot;parentUUID&quot;:&quot;0899c109-0234-49a0-80e0-d8ab47297ec0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8c44c859-c2fc-49c5-8e92-17370242524d&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:295,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;, {}, { options: { stream: true } })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6920b6dd-409c-430c-8e20-de21d050dc7a&quot;,&quot;parentUUID&quot;:&quot;8c44c859-c2fc-49c5-8e92-17370242524d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 }, { options: { stream: true } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fa25e9b-3c42-4e15-98cf-582052a5e5d8&quot;,&quot;parentUUID&quot;:&quot;8c44c859-c2fc-49c5-8e92-17370242524d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, {}, {\n    batchSize: 2,\n    count: true,\n    options: { stream: true }\n})\n    .then(cursor =&gt; {\n    let count = cursor.count;\n    chai_1.expect(count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to equal 10&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to equal 10\n    at fabric.query.then.cursor (src/test/23-c8ql-queries-stream.ts:70:28)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;17e3d2ed-e08b-432f-9caf-04b67e02493e&quot;,&quot;parentUUID&quot;:&quot;8c44c859-c2fc-49c5-8e92-17370242524d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:300,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true, options: { stream: true } })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to equal 10&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to equal 10\n    at fabric.query.then.cursor (src/test/23-c8ql-queries-stream.ts:84:35)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;d12e453b-1855-437f-bd60-8fe57d9e0efe&quot;,&quot;parentUUID&quot;:&quot;8c44c859-c2fc-49c5-8e92-17370242524d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6920b6dd-409c-430c-8e20-de21d050dc7a&quot;,&quot;3fa25e9b-3c42-4e15-98cf-582052a5e5d8&quot;],&quot;failures&quot;:[&quot;17e3d2ed-e08b-432f-9caf-04b67e02493e&quot;,&quot;d12e453b-1855-437f-bd60-8fe57d9e0efe&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1208,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;c062f323-7203-42f4-a69f-5b7c56a5c792&quot;,&quot;title&quot;:&quot;with some data&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;can do writes and reads&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries with some data can do writes and reads&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let collection = fabric.collection(cname);\nlet readQ = jsC8_1.c8ql `FOR doc in ${collection} RETURN doc`;\nlet writeQ = jsC8_1.c8ql `FOR i in 1..1000 LET y = SLEEP(1) INSERT {forbidden: i} INTO ${collection}`;\nconst opts = { batchSize: 500, ttl: 5, options: { stream: true } };\n// 900s lock timeout + 5s ttl\nlet readCursor = fabric.query(readQ, opts);\nlet writeCursor = fabric.query(writeQ, opts);\n// the read cursor should always win\nPromise.race([readCursor, writeCursor])\n    .then(c =&gt; {\n    // therefore no document should have been written here\n    return c.every((d) =&gt; !d.hasOwnProperty(\&quot;forbidden\&quot;));\n})\n    .then(isOk =&gt; {\n    chai_1.expect(isOk).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: collection or view not found: name: MyTestCollection&quot;,&quot;estack&quot;:&quot;C8Error: collection or view not found: name: MyTestCollection\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;bd35493f-ec18-46d7-8b65-e05e41728fa9&quot;,&quot;parentUUID&quot;:&quot;c062f323-7203-42f4-a69f-5b7c56a5c792&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;bd35493f-ec18-46d7-8b65-e05e41728fa9&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:306,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;4d3b0526-e3e6-41a5-ac11-b8babfdeacb2&quot;,&quot;title&quot;:&quot;Manipulating streams&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1637,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9568492c-f729-4d79-a747-6cf1e509783c&quot;,&quot;parentUUID&quot;:&quot;4d3b0526-e3e6-41a5-ac11-b8babfdeacb2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;095d1001-9680-4002-925d-0ef41e86a842&quot;,&quot;parentUUID&quot;:&quot;4d3b0526-e3e6-41a5-ac11-b8babfdeacb2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;45d56f73-4cac-42ac-8c4e-3062345e722e&quot;,&quot;title&quot;:&quot;fabric.stream&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a new Stream instance&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream returns a new Stream instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.stream(\&quot;testStream\&quot;, true)).to.be.instanceof(stream_1.Stream);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8c58cd5-5fbb-4c11-bafd-b90e40250ed7&quot;,&quot;parentUUID&quot;:&quot;45d56f73-4cac-42ac-8c4e-3062345e722e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets all streams&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream gets all streams&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:372,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getStreams();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb3f3710-9cbf-4262-983c-3cb4e562a068&quot;,&quot;parentUUID&quot;:&quot;45d56f73-4cac-42ac-8c4e-3062345e722e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;clears backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:445,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.clearBacklog();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b4e2c05-eb47-4941-841e-219284a47a34&quot;,&quot;parentUUID&quot;:&quot;45d56f73-4cac-42ac-8c4e-3062345e722e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;clears subscription backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears subscription backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e584e33-8e9c-4e56-97b7-156a59040b47&quot;,&quot;parentUUID&quot;:&quot;45d56f73-4cac-42ac-8c4e-3062345e722e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unsubscribes to a subscription&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream unsubscribes to a subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e68059c-e906-4207-b62e-6fc56ed56492&quot;,&quot;parentUUID&quot;:&quot;45d56f73-4cac-42ac-8c4e-3062345e722e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f8c58cd5-5fbb-4c11-bafd-b90e40250ed7&quot;,&quot;cb3f3710-9cbf-4262-983c-3cb4e562a068&quot;,&quot;9b4e2c05-eb47-4941-841e-219284a47a34&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;0e584e33-8e9c-4e56-97b7-156a59040b47&quot;,&quot;5e68059c-e906-4207-b62e-6fc56ed56492&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:817,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;53cd979b-8b0b-4b47-bd0c-d569b4049daf&quot;,&quot;title&quot;:&quot;stream.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;104b68f2-075c-41b7-93ec-7a096bdba4eb&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:408,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, true);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8ae441b-2b60-4149-a72c-77c3e42be3a8&quot;,&quot;parentUUID&quot;:&quot;104b68f2-075c-41b7-93ec-7a096bdba4eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, false);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;818cfe48-2bc0-4798-9157-8ca9e2699579&quot;,&quot;parentUUID&quot;:&quot;104b68f2-075c-41b7-93ec-7a096bdba4eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f8ae441b-2b60-4149-a72c-77c3e42be3a8&quot;,&quot;818cfe48-2bc0-4798-9157-8ca9e2699579&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:817,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;c5fb18ef-6f4d-44a3-a9ae-b1d51ac6c2dd&quot;,&quot;title&quot;:&quot;stream.manipulate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream = fabric.stream(`testStream${Date.now()}`, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b3c7f8b-fb99-4a24-a202-93249d323ac7&quot;,&quot;parentUUID&quot;:&quot;c5fb18ef-6f4d-44a3-a9ae-b1d51ac6c2dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:512,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3abe954d-d3c1-4593-baba-97d440616ab9&quot;,&quot;parentUUID&quot;:&quot;c5fb18ef-6f4d-44a3-a9ae-b1d51ac6c2dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8a7816c-07c6-47cf-803d-084bf067a2a9&quot;,&quot;parentUUID&quot;:&quot;c5fb18ef-6f4d-44a3-a9ae-b1d51ac6c2dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.expireMessagesOnAllSubscriptions&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.expireMessagesOnAllSubscriptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4673a4ec-cc53-44c3-b38f-b25b5ad14bba&quot;,&quot;parentUUID&quot;:&quot;c5fb18ef-6f4d-44a3-a9ae-b1d51ac6c2dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;97311986-8a73-48e5-b482-c23d46e78606&quot;,&quot;title&quot;:&quot;stream.getBacklog&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets estimated backlog for offline stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getBacklog gets estimated backlog for offline stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10369,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.backlog();\nconsole.log(response.error);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: C8Streams error 500&quot;,&quot;estack&quot;:&quot;C8Error: C8Streams error 500\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;0f1064f2-d9f4-4264-b3be-0cf7ec4c0f1e&quot;,&quot;parentUUID&quot;:&quot;97311986-8a73-48e5-b482-c23d46e78606&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;0f1064f2-d9f4-4264-b3be-0cf7ec4c0f1e&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10369,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;b701058d-92c6-45ba-9bfb-f2f93c32f173&quot;,&quot;title&quot;:&quot;stream.getStreamStatistics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets the stream statistics&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getStreamStatistics gets the stream statistics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:379,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getStreamStatistics();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b7b3387-4f7d-4a7b-a72a-1f7dced3a548&quot;,&quot;parentUUID&quot;:&quot;b701058d-92c6-45ba-9bfb-f2f93c32f173&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5b7b3387-4f7d-4a7b-a72a-1f7dced3a548&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:379,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;7c68c60f-3fb2-4722-a413-7e1f87ccb248&quot;,&quot;title&quot;:&quot;stream.subscriptions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.resetSubscriptionToPosition&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetSubscriptionToPosition&quot;,&quot;timedOut&quot;:true,&quot;duration&quot;:50001,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let numberOfMessages = 0;\nfunction callback(msg) {\n    const parsedMsg = JSON.parse(msg);\n    const { payload } = parsedMsg;\n    const array = [\&quot;bmFuZGhh\&quot;, \&quot;YWJoaXNoZWs=\&quot;, \&quot;dmlwdWw=\&quot;, \&quot;c3Vsb20=\&quot;, \&quot;cHJhdGlr\&quot;];\n    if (array.includes(payload)) {\n        numberOfMessages++;\n    }\n    ;\n    if (numberOfMessages === 5) {\n        done();\n    }\n}\nstream.consumer(`streamSubscriptionTest`, {\n    onmessage: callback,\n    onopen: () =&gt; {\n        stream.producer([\&quot;nandha\&quot;, \&quot;abhishek\&quot;, \&quot;vipul\&quot;, \&quot;sulom\&quot;, \&quot;pratik\&quot;], dcName);\n    }\n}, dcName);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Timeout of 50000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js)&quot;,&quot;estack&quot;:&quot;Error: Timeout of 50000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js)&quot;},&quot;uuid&quot;:&quot;642c7ea4-f4ab-4b0e-bb31-751883e9858c&quot;,&quot;parentUUID&quot;:&quot;7c68c60f-3fb2-4722-a413-7e1f87ccb248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.expireMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.expireMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;490e15c1-1178-4e65-94a2-cd301d5f28c8&quot;,&quot;parentUUID&quot;:&quot;7c68c60f-3fb2-4722-a413-7e1f87ccb248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.resetCursor&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetCursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80e5339a-9b38-4594-9136-95e5b08210f2&quot;,&quot;parentUUID&quot;:&quot;7c68c60f-3fb2-4722-a413-7e1f87ccb248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.skipNumberOfMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipNumberOfMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;060e3917-39d0-484f-8c39-0cb11c5c8d0f&quot;,&quot;parentUUID&quot;:&quot;7c68c60f-3fb2-4722-a413-7e1f87ccb248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.skipAllMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipAllMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82a8bbbd-8e76-4725-83ff-9cebeaf6cdfd&quot;,&quot;parentUUID&quot;:&quot;7c68c60f-3fb2-4722-a413-7e1f87ccb248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.getSubscriptionList&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.getSubscriptionList&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;it(\&quot;gets subscription list\&quot;, async () =&gt; {\n    const response = await stream.getSubscriptionList();\n    chai_1.expect(response.error).to.be.false;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93e61515-66b2-42f7-936f-86e84fba834c&quot;,&quot;parentUUID&quot;:&quot;7c68c60f-3fb2-4722-a413-7e1f87ccb248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;490e15c1-1178-4e65-94a2-cd301d5f28c8&quot;,&quot;80e5339a-9b38-4594-9136-95e5b08210f2&quot;,&quot;060e3917-39d0-484f-8c39-0cb11c5c8d0f&quot;,&quot;82a8bbbd-8e76-4725-83ff-9cebeaf6cdfd&quot;,&quot;93e61515-66b2-42f7-936f-86e84fba834c&quot;],&quot;failures&quot;:[&quot;642c7ea4-f4ab-4b0e-bb31-751883e9858c&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50001,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;ebc9fc40-db3d-4c5a-94c0-8c33007e132a&quot;,&quot;title&quot;:&quot;stream.terminate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e8999019-243d-4c32-8761-5d0545a691d5&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d6b23c0c-e7af-4632-9de3-d32e177cf3bc&quot;,&quot;title&quot;:&quot;local&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:479,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, true);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2ab1e1e-bf63-446d-8a4a-3ac599e20a4b&quot;,&quot;parentUUID&quot;:&quot;d6b23c0c-e7af-4632-9de3-d32e177cf3bc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local terminates persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:385,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.terminateStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dcac8d7-f513-4343-8700-dec102977170&quot;,&quot;parentUUID&quot;:&quot;d6b23c0c-e7af-4632-9de3-d32e177cf3bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5dcac8d7-f513-4343-8700-dec102977170&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:385,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;82baa342-552e-4918-9d2c-7e3a84007f50&quot;,&quot;title&quot;:&quot;global&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:379,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a1239ab-9dcf-4901-9e06-57ee718fe402&quot;,&quot;parentUUID&quot;:&quot;82baa342-552e-4918-9d2c-7e3a84007f50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global terminates persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:469,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.terminateStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: C8Streams error 404&quot;,&quot;estack&quot;:&quot;C8Error: C8Streams error 404\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;6ab66476-c096-4453-b240-28decfdde7ac&quot;,&quot;parentUUID&quot;:&quot;82baa342-552e-4918-9d2c-7e3a84007f50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;6ab66476-c096-4453-b240-28decfdde7ac&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:469,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;c6f70c22-3778-4254-a0b6-eaa2594eba1b&quot;,&quot;title&quot;:&quot;stream.websocket&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:403,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82ae0ce6-f91d-4379-843e-8f2cdd9d886e&quot;,&quot;parentUUID&quot;:&quot;c6f70c22-3778-4254-a0b6-eaa2594eba1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f32eb00a-28e5-4a77-b4e4-591a53a7b065&quot;,&quot;parentUUID&quot;:&quot;c6f70c22-3778-4254-a0b6-eaa2594eba1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets data in consumer when sent by producer&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket gets data in consumer when sent by producer&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2768,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;function callback(msg) {\n    const parsedMsg = JSON.parse(msg);\n    const { payload } = parsedMsg;\n    chai_1.expect(payload).to.equal(\&quot;dGVzdA==\&quot;);\n    done();\n}\nstream.consumer(`streamSubscription${Date.now()}`, {\n    onmessage: callback,\n    onopen: () =&gt; stream.producer(\&quot;test\&quot;, dcName)\n}, dcName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4aaea9bb-e60a-41fe-8847-75f9471e439b&quot;,&quot;parentUUID&quot;:&quot;c6f70c22-3778-4254-a0b6-eaa2594eba1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4aaea9bb-e60a-41fe-8847-75f9471e439b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2768,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;4673a4ec-cc53-44c3-b38f-b25b5ad14bba&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;1ba50037-d011-46da-bd7f-5fe7d46d1cc0&quot;,&quot;title&quot;:&quot;manipulating spot&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1485,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nlocalLocation = await fabric.getLocalEdgeLocation();\nname = localLocation.name;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce44e972-089c-4865-a344-e37ef071647d&quot;,&quot;parentUUID&quot;:&quot;1ba50037-d011-46da-bd7f-5fe7d46d1cc0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3336732-7043-4075-a839-7b59ea3c1bb8&quot;,&quot;parentUUID&quot;:&quot;1ba50037-d011-46da-bd7f-5fe7d46d1cc0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e7ae8440-ed04-48a3-a490-4ad7780afd4e&quot;,&quot;title&quot;:&quot;spot_region status of a region&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should change the spot_region of a region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot_region status of a region should change the spot_region of a region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:579,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const currentSpotStatus = localLocation.spot_region;\nawait fabric.changeEdgeLocationSpotStatus(name, !currentSpotStatus);\nconst changedLocation = await fabric.getLocalEdgeLocation();\nconst changedSpotStatus = changedLocation.spot_region;\nchai_1.expect(changedLocation).to.equal(!changedSpotStatus);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_id, _key, ...) } to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_id, _key, ...) } to equal true\n    at Context.it (src/test/29-manipulating-spot.ts:35:34)\n    at process._tickCallback (internal/process/next_tick.js:68:7)&quot;},&quot;uuid&quot;:&quot;748556fd-57be-4334-8167-cd5e089d5145&quot;,&quot;parentUUID&quot;:&quot;e7ae8440-ed04-48a3-a490-4ad7780afd4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not change the spot_region to false if a fabric&#x27;s spot primary is that region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot_region status of a region should not change the spot_region to false if a fabric&#x27;s spot primary is that region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f135ff3-071d-4422-a227-fe1a127c6836&quot;,&quot;parentUUID&quot;:&quot;e7ae8440-ed04-48a3-a490-4ad7780afd4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;748556fd-57be-4334-8167-cd5e089d5145&quot;],&quot;pending&quot;:[&quot;7f135ff3-071d-4422-a227-fe1a127c6836&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:579,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;40ff9372-64f2-47dc-b81f-ebdf4bb877d0&quot;,&quot;title&quot;:&quot;spot fabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.dropFabric(fabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ea068ef-b3f0-4956-8178-ab9d126cc628&quot;,&quot;parentUUID&quot;:&quot;40ff9372-64f2-47dc-b81f-ebdf4bb877d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fabric with a spot primary region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric should create a fabric with a spot primary region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:689,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.changeEdgeLocationSpotStatus(name, true);\nconst options = {\n    dcList: name,\n    spotDc: name\n};\nconst response = await fabric.createFabric(fabricName, undefined, options);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb581224-d494-48f0-82f3-394fb4ccc9cf&quot;,&quot;parentUUID&quot;:&quot;40ff9372-64f2-47dc-b81f-ebdf4bb877d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should change the spot primary region of a fabric&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric should change the spot primary region of a fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c61713f-25b1-4dc2-bfd2-7a1d020423a3&quot;,&quot;parentUUID&quot;:&quot;40ff9372-64f2-47dc-b81f-ebdf4bb877d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb581224-d494-48f0-82f3-394fb4ccc9cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;9c61713f-25b1-4dc2-bfd2-7a1d020423a3&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:689,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1dfa1302-a7b9-4140-b9e6-8f759a8fb744&quot;,&quot;title&quot;:&quot;spot collection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a spot document collection&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection should create a spot document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3b2ed56-f29b-4856-99cd-1d9c1e118a67&quot;,&quot;parentUUID&quot;:&quot;1dfa1302-a7b9-4140-b9e6-8f759a8fb744&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a spot edge collection&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection should create a spot edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f70b332-c3a0-45fd-9fa2-db07c087d49d&quot;,&quot;parentUUID&quot;:&quot;1dfa1302-a7b9-4140-b9e6-8f759a8fb744&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6130aeeb-5259-47b8-bcc4-299165e4939e&quot;,&quot;title&quot;:&quot;mapulating spot collection&#x27;s region&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should change the spot region of a spot collection to none&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection mapulating spot collection&#x27;s region should change the spot region of a spot collection to none&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c502f1cf-6bb0-4651-a3d3-3dc56dfdff36&quot;,&quot;parentUUID&quot;:&quot;6130aeeb-5259-47b8-bcc4-299165e4939e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should change the spot region of a spot collection to some other region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection mapulating spot collection&#x27;s region should change the spot region of a spot collection to some other region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abfff2c7-3125-44d2-8544-559d5177c580&quot;,&quot;parentUUID&quot;:&quot;6130aeeb-5259-47b8-bcc4-299165e4939e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;c502f1cf-6bb0-4651-a3d3-3dc56dfdff36&quot;,&quot;abfff2c7-3125-44d2-8544-559d5177c580&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;c3b2ed56-f29b-4856-99cd-1d9c1e118a67&quot;,&quot;1f70b332-c3a0-45fd-9fa2-db07c087d49d&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9b76d3dc-457d-451f-94b0-61d2d92d4c8f&quot;,&quot;title&quot;:&quot;User Management&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1529,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c18da603-0a22-413a-94a4-1f17cd496a1f&quot;,&quot;parentUUID&quot;:&quot;9b76d3dc-457d-451f-94b0-61d2d92d4c8f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d4e546e-bb7d-4095-9a04-a0b27c93de42&quot;,&quot;parentUUID&quot;:&quot;9b76d3dc-457d-451f-94b0-61d2d92d4c8f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;367bea4a-781d-4244-9858-124a58cfd59c&quot;,&quot;title&quot;:&quot;fabric.user&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new user instance&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.user creates a new user instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.user(\&quot;testUser\&quot;, \&quot;testUser@test.com\&quot;)).to.be.instanceof(user_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;028e4760-bf1b-48ef-9049-796dac1b6d30&quot;,&quot;parentUUID&quot;:&quot;367bea4a-781d-4244-9858-124a58cfd59c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;028e4760-bf1b-48ef-9049-796dac1b6d30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;42c76e1c-3fc8-4fa9-be77-9579c203e29e&quot;,&quot;title&quot;:&quot;user.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:414,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await user.deleteUser();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10cabd29-5085-48b3-b824-ff4d2828156b&quot;,&quot;parentUUID&quot;:&quot;42c76e1c-3fc8-4fa9-be77-9579c203e29e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.create creates a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nconst response = await user.createUser(\&quot;testPass\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0163364c-266b-4be7-9236-36ef4af57b7b&quot;,&quot;parentUUID&quot;:&quot;42c76e1c-3fc8-4fa9-be77-9579c203e29e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0163364c-266b-4be7-9236-36ef4af57b7b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;0e786dba-a398-46dc-a12f-629336187048&quot;,&quot;title&quot;:&quot;fabric.getAllUsers&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists all users&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.getAllUsers Lists all users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllUsers();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd56023b-55c6-4d6a-83df-ede8e0927b77&quot;,&quot;parentUUID&quot;:&quot;0e786dba-a398-46dc-a12f-629336187048&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd56023b-55c6-4d6a-83df-ede8e0927b77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;6ea8471c-db29-4dbe-9747-3e2ed6ab32b9&quot;,&quot;title&quot;:&quot;user.crud_operations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nawait user.createUser(\&quot;testPass\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6723b166-f6bc-4b5d-984b-41330f0d5ba1&quot;,&quot;parentUUID&quot;:&quot;6ea8471c-db29-4dbe-9747-3e2ed6ab32b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await user.deleteUser();\n}\ncatch (error) { }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76392d41-fab1-449c-aad2-02b6318fbfc2&quot;,&quot;parentUUID&quot;:&quot;6ea8471c-db29-4dbe-9747-3e2ed6ab32b9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cb15a82c-4a5c-4ae5-8db6-bf40727d91c1&quot;,&quot;title&quot;:&quot;user.deleteUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Deletes a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.deleteUser Deletes a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.deleteUser();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f53369a-e6a6-4e3f-9abf-4ba073c57e9f&quot;,&quot;parentUUID&quot;:&quot;cb15a82c-4a5c-4ae5-8db6-bf40727d91c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f53369a-e6a6-4e3f-9abf-4ba073c57e9f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:407,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;b704bd56-9ddd-4592-a19d-a93ab244f2b3&quot;,&quot;title&quot;:&quot;user.getUserDetails&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Fetches a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.getUserDetails Fetches a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getUserDeatils();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;492f1876-d3a2-4b7a-b903-be036a08bdf8&quot;,&quot;parentUUID&quot;:&quot;b704bd56-9ddd-4592-a19d-a93ab244f2b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;492f1876-d3a2-4b7a-b903-be036a08bdf8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;cedf89bc-3e7b-4f1e-86a1-c847eb7f6644&quot;,&quot;title&quot;:&quot;user.modifyUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.modifyUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:259,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.modifyUser({\n    active: false\n});\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.active).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b194d71-36a0-47fb-b5e4-060e6e1183ac&quot;,&quot;parentUUID&quot;:&quot;cedf89bc-3e7b-4f1e-86a1-c847eb7f6644&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b194d71-36a0-47fb-b5e4-060e6e1183ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:259,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;bee1fa01-7e78-4ab9-99c7-f02b01849912&quot;,&quot;title&quot;:&quot;user.replaceUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.replaceUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.replaceUser({\n    passwd: \&quot;test_passwordddd\&quot;\n});\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11ecba2a-5504-496e-80f5-4aa456157218&quot;,&quot;parentUUID&quot;:&quot;bee1fa01-7e78-4ab9-99c7-f02b01849912&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11ecba2a-5504-496e-80f5-4aa456157218&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:307,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;title&quot;:&quot;User.FabricAccessOperations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(testFabricName, [{ username: user.user }], {\n    dcList: dcList\n});\nfabric.useFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a934c2e7-b460-4fd9-bb8a-7f2db29a2440&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dacfb5af-b53f-4f93-8276-be36b1fd5ab7&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists the accessible databases and their permissions &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6ebb559-c9db-4b20-b246-5995fc6220a8&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Lists the accessible databases and their permissions with all the collections&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions with all the collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases(true);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13eb795a-33ff-471c-a65d-b9a8106c9313&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Gets the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result).to.be.oneOf([\&quot;rw\&quot;, \&quot;ro\&quot;, \&quot;none\&quot;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f540b3b0-2859-4d9d-8cd4-0a2671857035&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Gets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:612,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.getCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;878a9e72-5f56-4b2b-95fe-a31a676be5b6&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Clears the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:260,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.clearDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57723703-80a4-45eb-a9b1-2a6492674450&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Clears the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:609,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.clearCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: database not found&quot;,&quot;estack&quot;:&quot;C8Error: database not found\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;1f0c79ac-edc9-45df-8bad-742e4a9b6992&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:665,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.setCollectionAccessLevel(testFabricName, collectionName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}/${collectionName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;C8Error: database not found&quot;,&quot;estack&quot;:&quot;C8Error: database not found\n    at new C8Error (src/error.ts:76:17)\n    at Object.resolve (src/connection.ts:358:20)\n    at _hosts.(anonymous function) (src/connection.ts:201:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;6d1f5e11-eb3b-4775-bebf-307df3bbaa3e&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Sets the access level of a database&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.setDatabaseAccessLevel(testFabricName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aeae4571-6c9f-4ba8-9b90-35873d372cd0&quot;,&quot;parentUUID&quot;:&quot;ea8cd9e4-aaac-4517-a608-39cd5b193adb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6ebb559-c9db-4b20-b246-5995fc6220a8&quot;,&quot;13eb795a-33ff-471c-a65d-b9a8106c9313&quot;,&quot;f540b3b0-2859-4d9d-8cd4-0a2671857035&quot;,&quot;878a9e72-5f56-4b2b-95fe-a31a676be5b6&quot;,&quot;57723703-80a4-45eb-a9b1-2a6492674450&quot;,&quot;aeae4571-6c9f-4ba8-9b90-35873d372cd0&quot;],&quot;failures&quot;:[&quot;1f0c79ac-edc9-45df-8bad-742e4a9b6992&quot;,&quot;6d1f5e11-eb3b-4775-bebf-307df3bbaa3e&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3378,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;c2e52089-740e-4585-bc83-06c69f9740a1&quot;,&quot;title&quot;:&quot;manipulating restql&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1608,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;063a7811-eb46-4d82-9cab-f522b3db6e47&quot;,&quot;parentUUID&quot;:&quot;c2e52089-740e-4585-bc83-06c69f9740a1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4ee1150-117d-445b-8880-af2b22c548af&quot;,&quot;parentUUID&quot;:&quot;c2e52089-740e-4585-bc83-06c69f9740a1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5af246ab-a15b-4947-815f-85744e62243a&quot;,&quot;title&quot;:&quot;fabric.saveQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should save a query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.saveQuery should save a query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:438,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryName = \&quot;testQuery\&quot;;\nconst response = await fabric.saveQuery(queryName, {}, \&quot;for coll in _collections return coll\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.name).to.equal(queryName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c241f43-ee50-4f08-920d-bd9ad97a6640&quot;,&quot;parentUUID&quot;:&quot;5af246ab-a15b-4947-815f-85744e62243a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c241f43-ee50-4f08-920d-bd9ad97a6640&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:438,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;5fd714a7-e20c-438c-8536-bdfe94a4e286&quot;,&quot;title&quot;:&quot;fabric.listSavedQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should make a successful API call&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.listSavedQueries should make a successful API call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.listSavedQueries();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.length).to.be.at.least(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;840b3ed3-8bdd-4150-99d4-925211684d7c&quot;,&quot;parentUUID&quot;:&quot;5fd714a7-e20c-438c-8536-bdfe94a4e286&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;840b3ed3-8bdd-4150-99d4-925211684d7c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:410,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;7b199da7-ab10-47e4-8848-47cd0dbdb256&quot;,&quot;title&quot;:&quot;fabric.executeSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:513,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.executeSavedQuery(queryName, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03088950-4475-4119-a6ce-6ce6c511ee91&quot;,&quot;parentUUID&quot;:&quot;7b199da7-ab10-47e4-8848-47cd0dbdb256&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery should execute a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcbb2a1f-0d97-4c37-8a4a-8e31d05e4b57&quot;,&quot;parentUUID&quot;:&quot;7b199da7-ab10-47e4-8848-47cd0dbdb256&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fcbb2a1f-0d97-4c37-8a4a-8e31d05e4b57&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;fb456ec7-bdc5-4365-9c5b-69da60ef045d&quot;,&quot;title&quot;:&quot;fabric.deleteSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.deleteSavedQuery should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:403,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.deleteSavedQuery(queryName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;140dc740-044b-4526-9f26-b91b37ac46ad&quot;,&quot;parentUUID&quot;:&quot;fb456ec7-bdc5-4365-9c5b-69da60ef045d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;140dc740-044b-4526-9f26-b91b37ac46ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:403,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;d4e17892-3bc2-487f-a025-d18802dc00ca&quot;,&quot;title&quot;:&quot;fabric.createRestqlCursor&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.createRestqlCursor should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;043a631f-0cd4-4bbd-9e00-d8b7cac6e8de&quot;,&quot;parentUUID&quot;:&quot;d4e17892-3bc2-487f-a025-d18802dc00ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;043a631f-0cd4-4bbd-9e00-d8b7cac6e8de&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;9d1d16f4-12d7-47c7-b393-5eac5dd91730&quot;,&quot;title&quot;:&quot;fabric.route&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Route instance&quot;,&quot;fullTitle&quot;:&quot;fabric.route returns a Route instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route();\nchai_1.expect(route).to.be.an.instanceof(route_1.Route);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21b62ad5-07b6-4503-aaec-ff31b08709f5&quot;,&quot;parentUUID&quot;:&quot;9d1d16f4-12d7-47c7-b393-5eac5dd91730&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a route for the given path&quot;,&quot;fullTitle&quot;:&quot;fabric.route creates a route for the given path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = \&quot;/hi\&quot;;\nconst route = fabric.route(path);\nchai_1.expect(route._path).to.equal(path);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f0694ee-bfd7-4f27-83c9-5166eaf083c1&quot;,&quot;parentUUID&quot;:&quot;9d1d16f4-12d7-47c7-b393-5eac5dd91730&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes the given headers to the new route&quot;,&quot;fullTitle&quot;:&quot;fabric.route passes the given headers to the new route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/hello\&quot;, { \&quot;x-magic\&quot;: \&quot;awesome\&quot; });\nchai_1.expect(route._headers).to.have.property(\&quot;x-magic\&quot;, \&quot;awesome\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c23d62a-c163-4ebc-a6b0-c0ab164029c3&quot;,&quot;parentUUID&quot;:&quot;9d1d16f4-12d7-47c7-b393-5eac5dd91730&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;21b62ad5-07b6-4503-aaec-ff31b08709f5&quot;,&quot;8f0694ee-bfd7-4f27-83c9-5166eaf083c1&quot;,&quot;1c23d62a-c163-4ebc-a6b0-c0ab164029c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;ef192cca-cbd5-4812-8234-5eca6139272a&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;5.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;options&quot;:{},&quot;version&quot;:&quot;4.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;jsC8&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>