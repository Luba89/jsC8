<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:44,&quot;tests&quot;:34,&quot;passes&quot;:32,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2020-02-25T13:11:24.536Z&quot;,&quot;end&quot;:&quot;2020-02-25T13:12:00.774Z&quot;,&quot;duration&quot;:36238,&quot;testsRegistered&quot;:222,&quot;passPercent&quot;:14.545454545454545,&quot;pendingPercent&quot;:0.9009009009009009,&quot;other&quot;:38,&quot;hasOther&quot;:true,&quot;skipped&quot;:188,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;355cd1dc-caf6-4482-bbb6-e2ac7c67c229&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3c13fcc7-b0e1-473a-b728-304f396dfee5&quot;,&quot;title&quot;:&quot;Creating a Fabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;933b44e7-ee47-44bb-980f-f1a1958c9dcf&quot;,&quot;title&quot;:&quot;using the factory&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;063c1896-9dde-41a4-a2a8-90b9fd877f2a&quot;,&quot;parentUUID&quot;:&quot;933b44e7-ee47-44bb-980f-f1a1958c9dcf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the factory passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 54321);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a40b8c82-f463-4183-a20f-e6929dbc777c&quot;,&quot;parentUUID&quot;:&quot;933b44e7-ee47-44bb-980f-f1a1958c9dcf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;063c1896-9dde-41a4-a2a8-90b9fd877f2a&quot;,&quot;a40b8c82-f463-4183-a20f-e6929dbc777c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2985f4de-325f-4f70-8252-4cdcb8dd3f9c&quot;,&quot;title&quot;:&quot;using the constructor&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Fabric instance&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor returns a Fabric instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric).to.be.an.instanceof(jsC8_1.Fabric);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4c7024f-e08e-41d5-bd47-612a2ddb121f&quot;,&quot;parentUUID&quot;:&quot;2985f4de-325f-4f70-8252-4cdcb8dd3f9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes any configs to the connection&quot;,&quot;fullTitle&quot;:&quot;Creating a Fabric using the constructor passes any configs to the connection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric._connection).to.have.property(\&quot;_c8Version\&quot;, 43210);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6fa7a75-9423-428c-841e-5498c229a29f&quot;,&quot;parentUUID&quot;:&quot;2985f4de-325f-4f70-8252-4cdcb8dd3f9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4c7024f-e08e-41d5-bd47-612a2ddb121f&quot;,&quot;d6fa7a75-9423-428c-841e-5498c229a29f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;aef593f1-2727-46be-9ab0-6b4f44b83bef&quot;,&quot;title&quot;:&quot;Configuring the driver&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19551597-cd0a-4eab-8149-39e474436052&quot;,&quot;title&quot;:&quot;with a string&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the url&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with a string sets the url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eebdedf4-664a-418d-8438-ee5780c28b12&quot;,&quot;parentUUID&quot;:&quot;19551597-cd0a-4eab-8149-39e474436052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;eebdedf4-664a-418d-8438-ee5780c28b12&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ce985700-bda0-4080-a9c9-da34d3ebd653&quot;,&quot;title&quot;:&quot;with headers&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;applies the headers&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with headers applies the headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({\n    headers: {\n        \&quot;x-one\&quot;: \&quot;1\&quot;,\n        \&quot;x-two\&quot;: \&quot;2\&quot;\n    }\n});\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-one\&quot;, \&quot;1\&quot;);\n        chai_1.expect(headers).to.have.property(\&quot;x-two\&quot;, \&quot;2\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e417d654-d10d-4292-bf9f-404d8af8b48b&quot;,&quot;parentUUID&quot;:&quot;ce985700-bda0-4080-a9c9-da34d3ebd653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e417d654-d10d-4292-bf9f-404d8af8b48b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0db723cb-5dab-467f-a493-7a02fbdd0c84&quot;,&quot;title&quot;:&quot;with an c8Version&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets the x-c8-version header&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with an c8Version sets the x-c8-version header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const conn = new connection_1.Connection({ c8Version: 99999 });\nconn._hosts = [\n    ({ headers }) =&gt; {\n        chai_1.expect(headers).to.have.property(\&quot;x-c8-version\&quot;, \&quot;99999\&quot;);\n        done();\n    }\n];\nconn.request({ headers: {} }, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;395ee6de-4aa9-4664-8550-3037f70ae3f6&quot;,&quot;parentUUID&quot;:&quot;0db723cb-5dab-467f-a493-7a02fbdd0c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;395ee6de-4aa9-4664-8550-3037f70ae3f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9173884e-06d1-4074-8d75-141441f7aa14&quot;,&quot;title&quot;:&quot;with agentOptions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Agent = (ptcl) =&gt; function (opts) {\n    protocol = ptcl;\n    options = opts;\n    return () =&gt; null;\n};\nhttp.Agent = Agent(\&quot;http\&quot;);\nhttps.Agent = Agent(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b387708-b66e-4d53-9183-61a857864dfe&quot;,&quot;parentUUID&quot;:&quot;9173884e-06d1-4074-8d75-141441f7aa14&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86dab904-c217-4bac-873b-838cde7e7e0b&quot;,&quot;parentUUID&quot;:&quot;9173884e-06d1-4074-8d75-141441f7aa14&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.Agent = _httpAgent;\nhttps.Agent = _httpsAgent;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdd9a2f4-e73c-4ed4-9227-873d61ad3afd&quot;,&quot;parentUUID&quot;:&quot;9173884e-06d1-4074-8d75-141441f7aa14&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agentOptions to the agent&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions passes the agentOptions to the agent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;new connection_1.Connection({ agentOptions: { hello: \&quot;world\&quot; } }); // eslint-disable-line no-new\nchai_1.expect(options).to.have.property(\&quot;hello\&quot;, \&quot;world\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1dc7ffa1-3533-4752-8f59-b875429e8882&quot;,&quot;parentUUID&quot;:&quot;9173884e-06d1-4074-8d75-141441f7aa14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the built-in agent for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agentOptions uses the built-in agent for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// default: http\nnew connection_1.Connection(); // eslint-disable-line no-new\n// expect(protocol).to.equal(\&quot;http\&quot;);\nnew connection_1.Connection(\&quot;https://test.macrometa.io\&quot;); // eslint-disable-line no-new\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1256ecde-de08-4080-b45e-69fc8c51a5fb&quot;,&quot;parentUUID&quot;:&quot;9173884e-06d1-4074-8d75-141441f7aa14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1dc7ffa1-3533-4752-8f59-b875429e8882&quot;,&quot;1256ecde-de08-4080-b45e-69fc8c51a5fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4e74de57-17da-4e03-86bc-65cbbd9fc251&quot;,&quot;title&quot;:&quot;with agent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/00-basics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/00-basics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let Request = (ptcl) =&gt; (opts) =&gt; {\n    protocol = ptcl;\n    options = opts;\n    return {\n        on() {\n            return this;\n        },\n        end() {\n            return this;\n        }\n    };\n};\nhttp.request = Request(\&quot;http\&quot;);\nhttps.request = Request(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70dee5bf-856d-4cbc-88d4-aa19fe1e7885&quot;,&quot;parentUUID&quot;:&quot;4e74de57-17da-4e03-86bc-65cbbd9fc251&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;protocol = undefined;\noptions = undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e61d8187-fbea-4a90-af8b-400b1c9877d5&quot;,&quot;parentUUID&quot;:&quot;4e74de57-17da-4e03-86bc-65cbbd9fc251&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;http.request = _httpRequest;\nhttps.request = _httpsRequest;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;161a3b3c-4783-4b11-9ef2-7852ee91987c&quot;,&quot;parentUUID&quot;:&quot;4e74de57-17da-4e03-86bc-65cbbd9fc251&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;passes the agent to the request function&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent passes the agent to the request function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: https\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);\nagent = Symbol(\&quot;agent\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(options).to.have.property(\&quot;agent\&quot;, agent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77b61fd4-d948-4075-ba8c-060ac6da8390&quot;,&quot;parentUUID&quot;:&quot;4e74de57-17da-4e03-86bc-65cbbd9fc251&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uses the request function for the protocol&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent uses the request function for the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = Symbol(\&quot;agent\&quot;);\nlet conn;\nconn = new connection_1.Connection({ agent }); // default: http\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);\nconn = new connection_1.Connection({ agent, url: \&quot;https://test.macrometa.io\&quot; });\nconn.request({ headers: {} }, () =&gt; { });\nchai_1.expect(protocol).to.equal(\&quot;https\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;242ec93c-52f6-4efd-98e4-2e3c234f63bb&quot;,&quot;parentUUID&quot;:&quot;4e74de57-17da-4e03-86bc-65cbbd9fc251&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;calls Agent#destroy when the connection is closed&quot;,&quot;fullTitle&quot;:&quot;Configuring the driver with agent calls Agent#destroy when the connection is closed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const agent = {\n    _destroyed: false,\n    destroy() {\n        this._destroyed = true;\n    }\n};\nconst conn = new connection_1.Connection({ agent });\nchai_1.expect(agent._destroyed).to.equal(false);\nconn.close();\nchai_1.expect(agent._destroyed).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c9c68c0-9773-4cff-bf5e-638f485921fe&quot;,&quot;parentUUID&quot;:&quot;4e74de57-17da-4e03-86bc-65cbbd9fc251&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77b61fd4-d948-4075-ba8c-060ac6da8390&quot;,&quot;242ec93c-52f6-4efd-98e4-2e3c234f63bb&quot;,&quot;5c9c68c0-9773-4cff-bf5e-638f485921fe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d31bf513-04df-4d4c-a971-ec40ebee30e6&quot;,&quot;title&quot;:&quot;Manipulating fabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1027,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6912d73a-36e6-41cf-a966-d5b2c1764678&quot;,&quot;parentUUID&quot;:&quot;d31bf513-04df-4d4c-a971-ec40ebee30e6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:872,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = new jsC8_1.Fabric({\n    url: testUrl\n});\nawait fabric2.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric2.useTenant(\&quot;guest\&quot;);\ncollection = fabric2.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3ec1f5c-5e6c-4476-b1aa-1c4a3d92ad9b&quot;,&quot;parentUUID&quot;:&quot;d31bf513-04df-4d4c-a971-ec40ebee30e6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;should validate correct query\&quot;&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook for \&quot;should validate correct query\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:685,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;20f7b830-35c8-4fd5-943f-a0adf97a7703&quot;,&quot;parentUUID&quot;:&quot;d31bf513-04df-4d4c-a971-ec40ebee30e6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a615f3a-511e-45d4-8a95-e63ed82f4a4c&quot;,&quot;parentUUID&quot;:&quot;d31bf513-04df-4d4c-a971-ec40ebee30e6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ae973bb-77ea-4971-b68f-936e6a955afc&quot;,&quot;parentUUID&quot;:&quot;d31bf513-04df-4d4c-a971-ec40ebee30e6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:614,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.drop();&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;824fee43-c425-45e2-831e-362ccb0f5843&quot;,&quot;parentUUID&quot;:&quot;d31bf513-04df-4d4c-a971-ec40ebee30e6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b931087f-9b0e-402e-9877-652b7bbe2dc2&quot;,&quot;parentUUID&quot;:&quot;d31bf513-04df-4d4c-a971-ec40ebee30e6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ef32b0f1-44b6-47ae-8552-b73c419cdd8d&quot;,&quot;title&quot;:&quot;fabric.version&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version object when no details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when no details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:867,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version();\nchai_1.expect(response.server).to.equal(\&quot;C8DB\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76bdadeb-2076-4111-9c50-5c2c282e260a&quot;,&quot;parentUUID&quot;:&quot;ef32b0f1-44b6-47ae-8552-b73c419cdd8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the version object when details are required&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.version should return the version object when details are required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.version(true);\nchai_1.expect(response.server).to.equal(\&quot;C8DB\&quot;);\nchai_1.expect(response.details).to.haveOwnProperty(\&quot;architecture\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd8bb71a-5945-4d55-a03c-8f424c0a623f&quot;,&quot;parentUUID&quot;:&quot;ef32b0f1-44b6-47ae-8552-b73c419cdd8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76bdadeb-2076-4111-9c50-5c2c282e260a&quot;,&quot;bd8bb71a-5945-4d55-a03c-8f424c0a623f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1073,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;76b379b7-f88b-47a2-9b84-48d19af326d8&quot;,&quot;title&quot;:&quot;fabric.useFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the fabric name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric updates the fabric name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = \&quot;example\&quot;;\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;); // default\nfabric.useFabric(name);\nchai_1.expect(fabric._connection).to.have.property(\&quot;_fabricName\&quot;, name);\nchai_1.expect(fabric.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b4f5341-a880-4d8e-9d1d-b2a6d23b0264&quot;,&quot;parentUUID&quot;:&quot;76b379b7-f88b-47a2-9b84-48d19af326d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns itself&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.useFabric returns itself&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabric2 = fabric.useFabric(\&quot;nope\&quot;);\nchai_1.expect(fabric).to.equal(fabric2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98da2d1f-9bcf-42ce-ae33-6fedd575cd6e&quot;,&quot;parentUUID&quot;:&quot;76b379b7-f88b-47a2-9b84-48d19af326d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b4f5341-a880-4d8e-9d1d-b2a6d23b0264&quot;,&quot;98da2d1f-9bcf-42ce-ae33-6fedd575cd6e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c7824342-3d7b-4755-a58f-97531aa33aed&quot;,&quot;title&quot;:&quot;fabric.edgeLocations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets all the edge locations&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets all the edge locations&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllEdgeLocations();\nchai_1.expect(Array.isArray(response)).to.be.true;\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response[0]).to.haveOwnProperty(\&quot;tags\&quot;);\nchai_1.expect(response.length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22324c7f-ecc2-48f2-ae46-7f4d6fdfacee&quot;,&quot;parentUUID&quot;:&quot;c7824342-3d7b-4755-a58f-97531aa33aed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets local edge location&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.edgeLocations gets local edge location&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\nchai_1.expect(Array.isArray(response)).to.be.false;\nchai_1.expect(response).to.haveOwnProperty(\&quot;_id\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;name\&quot;);\nchai_1.expect(response).to.haveOwnProperty(\&quot;tags\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75c2ce35-cd36-4983-95d2-a4574d622de9&quot;,&quot;parentUUID&quot;:&quot;c7824342-3d7b-4755-a58f-97531aa33aed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22324c7f-ecc2-48f2-ae46-7f4d6fdfacee&quot;,&quot;75c2ce35-cd36-4983-95d2-a4574d622de9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:382,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;fb45d2ed-143e-471c-ae11-ac9b9546741a&quot;,&quot;title&quot;:&quot;fabric.createFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10cde3c6-585d-4401-8d62-a94b6b1b085e&quot;,&quot;parentUUID&quot;:&quot;fb45d2ed-143e-471c-ae11-ac9b9546741a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a fabric with the given name&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric creates a fabric with the given name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:410,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nconst info = await fabric.get();\nchai_1.expect(info.name).to.equal(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;801bd9f2-65ea-4d6e-8909-8166fb0c38f5&quot;,&quot;parentUUID&quot;:&quot;fb45d2ed-143e-471c-ae11-ac9b9546741a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;adds the given users to the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.createFabric adds the given users to the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cada4bcb-ca52-40f7-91fe-c5f2cf574e49&quot;,&quot;parentUUID&quot;:&quot;fb45d2ed-143e-471c-ae11-ac9b9546741a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;801bd9f2-65ea-4d6e-8909-8166fb0c38f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;cada4bcb-ca52-40f7-91fe-c5f2cf574e49&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:410,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b264a8a6-8964-47aa-95c1-c9a4bbc23832&quot;,&quot;title&quot;:&quot;fabric.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches the fabric description if the fabric exists&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fetches the fabric description if the fabric exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:131,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await fabric.get();\nchai_1.expect(info.name).to.equal(fabric.name);\nchai_1.expect(fabric.name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46287851-5814-4c39-9b96-578f0f57ad0c&quot;,&quot;parentUUID&quot;:&quot;b264a8a6-8964-47aa-95c1-c9a4bbc23832&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;fails if the fabric does not exist&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.get fails if the fabric does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:227,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;__does_not_exist__\&quot;);\ntry {\n    await fabric.get();\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n    return;\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc7fe5f5-ac07-4ba9-b508-d9bb486f4aef&quot;,&quot;parentUUID&quot;:&quot;b264a8a6-8964-47aa-95c1-c9a4bbc23832&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46287851-5814-4c39-9b96-578f0f57ad0c&quot;,&quot;dc7fe5f5-ac07-4ba9-b508-d9bb486f4aef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:358,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;afea4a7f-c564-4f5c-96d2-b200b4dbd50e&quot;,&quot;title&quot;:&quot;fabric.listFabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of all fabrics&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listFabrics returns a list of all fabrics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics.indexOf(\&quot;_system\&quot;)).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e998c1bf-0f45-430f-a408-3499a044b96a&quot;,&quot;parentUUID&quot;:&quot;afea4a7f-c564-4f5c-96d2-b200b4dbd50e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e998c1bf-0f45-430f-a408-3499a044b96a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:208,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e79f5764-95d8-445f-93ab-aff92466b374&quot;,&quot;title&quot;:&quot;fabric.listUserFabrics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a list of fabrics accessible to the active user&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.listUserFabrics returns a list of fabrics accessible to the active user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:126,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fabrics = await fabric.listUserFabrics();\nchai_1.expect(fabrics).to.be.an.instanceof(Array);\nchai_1.expect(fabrics[0].name).to.equal(\&quot;_system\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaa7f0ca-ee71-4834-a259-dcc990306fcb&quot;,&quot;parentUUID&quot;:&quot;e79f5764-95d8-445f-93ab-aff92466b374&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aaa7f0ca-ee71-4834-a259-dcc990306fcb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:126,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1e462918-6c44-4615-834b-b08f53f7d105&quot;,&quot;title&quot;:&quot;fabric.dropFabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:213,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da758e55-ec9a-4ade-9733-f388a6e84141&quot;,&quot;parentUUID&quot;:&quot;1e462918-6c44-4615-834b-b08f53f7d105&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given fabric from the server&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.dropFabric deletes the given fabric from the server&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:389,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.dropFabric(name);\nlet temp = new jsC8_1.Fabric().useFabric(name);\ntry {\n    await temp.get();\n}\ncatch (e) {\n    return;\n}\nfinally {\n    temp.close();\n}\nchai_1.expect.fail(\&quot;should not succeed\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8154fd4-36cc-4a2d-8ada-855c9a2c04f8&quot;,&quot;parentUUID&quot;:&quot;1e462918-6c44-4615-834b-b08f53f7d105&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8154fd4-36cc-4a2d-8ada-855c9a2c04f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:389,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;cf61ff1d-c610-4594-bff9-3c51c8cfb884&quot;,&quot;title&quot;:&quot;fabric.truncate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook for \&quot;removes all documents from all non-system collections in the fabric\&quot;&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;before each\&quot; hook for \&quot;removes all documents from all non-system collections in the fabric\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:389,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(name, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(name);\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create();\n        await collection.save({ _key: \&quot;example\&quot; });\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        let collection = fabric.collection(name);\n        await collection.create({ isSystem: true });\n        await collection.save({ _key: \&quot;example\&quot; });\n    })\n]);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;91f5b7e3-bdcc-4877-9697-24030c9395a6&quot;,&quot;parentUUID&quot;:&quot;cf61ff1d-c610-4594-bff9-3c51c8cfb884&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook for \&quot;removes all documents from all non-system collections in the fabric\&quot;&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate \&quot;after each\&quot; hook for \&quot;removes all documents from all non-system collections in the fabric\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:383,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;006a7efc-4d05-45ea-b905-0e22113e3c9e&quot;,&quot;parentUUID&quot;:&quot;cf61ff1d-c610-4594-bff9-3c51c8cfb884&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes all documents from all non-system collections in the fabric&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate removes all documents from all non-system collections in the fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.truncate();\nawait Promise.all([\n    ...nonSystemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    }),\n    ...systemCollections.map(async (name) =&gt; {\n        try {\n            await fabric.collection(name).document(\&quot;example\&quot;);\n            chai_1.expect.fail(\&quot;Expected document to be destroyed\&quot;);\n        }\n        catch (e) {\n            chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n            chai_1.expect(e.code).eq(404);\n            return;\n        }\n    })\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb38a1ca-5ebb-4b9a-ac2f-0ef519c16347&quot;,&quot;parentUUID&quot;:&quot;cf61ff1d-c610-4594-bff9-3c51c8cfb884&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;additionally truncates system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.truncate additionally truncates system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23ab2a39-6cc8-4f6f-afde-590f8d98b76a&quot;,&quot;parentUUID&quot;:&quot;cf61ff1d-c610-4594-bff9-3c51c8cfb884&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;23ab2a39-6cc8-4f6f-afde-590f8d98b76a&quot;],&quot;skipped&quot;:[&quot;eb38a1ca-5ebb-4b9a-ac2f-0ef519c16347&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3f4144dc-755a-4651-8e39-38060cc6f8e8&quot;,&quot;title&quot;:&quot;fabric.validateQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should validate correct query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate correct query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.validateQuery(\&quot;for doc in docs return doc\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d03708da-6e91-46d5-98d4-676d14d47569&quot;,&quot;parentUUID&quot;:&quot;3f4144dc-755a-4651-8e39-38060cc6f8e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should validate incorrect query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.validateQuery should validate incorrect query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const response = await fabric.validateQuery(\&quot;forrrr doc in docs return doc\&quot;);\n    chai_1.expect(response.error).to.be.true;\n}\ncatch (e) {\n    chai_1.expect(e).to.be.an.instanceof(error_1.C8Error);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88ef2620-9452-4820-bb0a-874517928f13&quot;,&quot;parentUUID&quot;:&quot;3f4144dc-755a-4651-8e39-38060cc6f8e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;d03708da-6e91-46d5-98d4-676d14d47569&quot;,&quot;88ef2620-9452-4820-bb0a-874517928f13&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a6a652c9-d109-47d1-af8f-dd596f4eec15&quot;,&quot;title&quot;:&quot;fabric.explainQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should explain query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.explainQuery should explain query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryObject = {\n    query: `for doc in ${collectionName} return doc`,\n    bindVars: {}\n};\nconst response = await fabric.explainQuery(queryObject);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50c20e46-1462-44a2-8d38-8e996d5bae20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;50c20e46-1462-44a2-8d38-8e996d5bae20&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2e3c0313-301b-43a4-8fad-a2508136d0ff&quot;,&quot;title&quot;:&quot;fabric.getCurrentQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get currently running queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.getCurrentQueries should get currently running queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b66708e-0f9a-4e94-8115-4771a7bd9b43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;5b66708e-0f9a-4e94-8115-4771a7bd9b43&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8f7185bb-ba6c-43f1-a7ba-a262daa8f139&quot;,&quot;title&quot;:&quot;fabric.clearSlowQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should clear slow queries&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.clearSlowQueries should clear slow queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74a5968e-079c-4d3f-a97d-8e9904555b78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;74a5968e-079c-4d3f-a97d-8e9904555b78&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;977200cc-b6fb-403d-8b7a-1470f59e74cf&quot;,&quot;title&quot;:&quot;fabric.terminateRunningQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;file&quot;:&quot;/lib/async/test/01-manipulating-fabrics.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should terminate running query&quot;,&quot;fullTitle&quot;:&quot;Manipulating fabrics fabric.terminateRunningQuery should terminate running query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73770482-f545-4a67-8c3c-0601dfc8670d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;73770482-f545-4a67-8c3c-0601dfc8670d&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7f20e21a-44c2-4504-bbc7-e53d47d67b60&quot;,&quot;title&quot;:&quot;Accessing collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:818,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\nconst collections = await fabric.listCollections(false);\nbuiltinSystemCollections = collections.map((c) =&gt; c.name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;34f72608-cfdc-47d9-be76-4a6d59c29e37&quot;,&quot;parentUUID&quot;:&quot;7f20e21a-44c2-4504-bbc7-e53d47d67b60&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;a34ae94f-32b5-4619-9781-ef94a8a96e4d&quot;,&quot;parentUUID&quot;:&quot;7f20e21a-44c2-4504-bbc7-e53d47d67b60&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a4530982-a2a0-41ab-89e6-0c7919f0d051&quot;,&quot;title&quot;:&quot;fabric.collection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a DocumentCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collection returns a DocumentCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = fabric.collection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.DocumentCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8edae0a-6bcb-4785-85d7-376e0ae1e6d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;d8edae0a-6bcb-4785-85d7-376e0ae1e6d6&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;eb580b7c-8b8a-4fda-a3f6-759eb72fcc0f&quot;,&quot;title&quot;:&quot;fabric.edgeCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an EdgeCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.edgeCollection returns an EdgeCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;tomato\&quot;;\nlet collection = fabric.edgeCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(collection_1.EdgeCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7ecc0c1-1b7e-4d3e-9628-854cec75fc8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;b7ecc0c1-1b7e-4d3e-9628-854cec75fc8d&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;752dd46b-9987-45f9-b40e-8a740f7efcad&quot;,&quot;title&quot;:&quot;fabric.listCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).create())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).create({ isSystem: true })\n    // )\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f73f269-3a22-4db9-b75a-2bedbd5a2efc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...nonSystemCollectionNames.map(name =&gt; fabric.collection(name).drop())\n    // ...systemCollectionNames.map(name =&gt;\n    //   fabric.collection(name).drop({ isSystem: true })\n    // )\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49368c2a-bead-43ec-9e91-671f81362235&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all non-system collections&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections fetches information about all non-system collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections()\n    .then(collections =&gt; {\n    chai_1.expect(collections.length).to.equal(nonSystemCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(nonSystemCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14b2cb88-8254-43d8-9acf-da75bcebc2a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.listCollections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listCollections(false)\n    .then(collections =&gt; {\n    let allCollectionNames = nonSystemCollectionNames\n        // .concat(systemCollectionNames)\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(collections.length).to.be.at.least(allCollectionNames.length);\n    chai_1.expect(collections.map((c) =&gt; c.name).sort()).to.eql(allCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;728fdbf9-2e74-478b-a592-f351e27c1442&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;14b2cb88-8254-43d8-9acf-da75bcebc2a7&quot;,&quot;728fdbf9-2e74-478b-a592-f351e27c1442&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;6a538455-731d-4e5d-9a70-f2b29bed7a58&quot;,&quot;title&quot;:&quot;fabric.collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/02-accessing-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/02-accessing-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0619c14-e8af-4762-bc7f-2d412ba76d1d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...documentCollectionNames.map(name =&gt; fabric.collection(name).drop()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).drop())\n])\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f03f8254-4dea-491e-85fc-7168a6dc99c2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates DocumentCollection and EdgeCollection instances&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections creates DocumentCollection and EdgeCollection instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections()\n    .then(collections =&gt; {\n    let documentCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.DocumentCollection)\n        .sort();\n    let edgeCollections = collections\n        .filter((c) =&gt; c instanceof collection_1.EdgeCollection)\n        .sort();\n    chai_1.expect(documentCollections.length).to.equal(documentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(documentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.equal(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6abebf3-9ba8-44a1-ac7e-57bbb3eb61fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;includes system collections if explicitly passed false&quot;,&quot;fullTitle&quot;:&quot;Accessing collections fabric.collections includes system collections if explicitly passed false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .collections(false)\n    .then(collections =&gt; {\n    let documentCollections = collections.filter((c) =&gt; c instanceof collection_1.DocumentCollection);\n    let edgeCollections = collections.filter((c) =&gt; c instanceof collection_1.EdgeCollection);\n    let allDocumentCollectionNames = documentCollectionNames\n        .concat(builtinSystemCollections)\n        .sort();\n    chai_1.expect(documentCollections.length).to.be.at.least(allDocumentCollectionNames.length);\n    chai_1.expect(documentCollections.map((c) =&gt; c.name).sort()).to.eql(allDocumentCollectionNames);\n    chai_1.expect(edgeCollections.length).to.be.at.least(edgeCollectionNames.length);\n    chai_1.expect(edgeCollections.map((c) =&gt; c.name).sort()).to.eql(edgeCollectionNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ebff1f2-6bb6-4c32-b210-2c21dc90588c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;d6abebf3-9ba8-44a1-ac7e-57bbb3eb61fa&quot;,&quot;2ebff1f2-6bb6-4c32-b210-2c21dc90588c&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;ea44faf7-19f2-4836-9000-52cabe0b3bd9&quot;,&quot;title&quot;:&quot;Accessing graphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:649,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;83ca2efc-e799-4b66-8612-32b7ad7f7be9&quot;,&quot;parentUUID&quot;:&quot;ea44faf7-19f2-4836-9000-52cabe0b3bd9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;f5be4bc9-57f6-419d-bede-185a566a37d6&quot;,&quot;parentUUID&quot;:&quot;ea44faf7-19f2-4836-9000-52cabe0b3bd9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cbb8322e-7828-457a-98dc-4b6a0a798da0&quot;,&quot;title&quot;:&quot;fabric.graph&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Graph instance&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graph returns a Graph instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet graph = fabric.graph(name);\nchai_1.expect(graph).to.be.an.instanceof(graph_1.Graph);\nchai_1.expect(graph)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a1a476f-2a16-4e81-8f44-3080129d3699&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;5a1a476f-2a16-4e81-8f44-3080129d3699&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;70319132-7ee7-414f-b125-d96dc3f3c62a&quot;,&quot;title&quot;:&quot;fabric.listGraphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        })),\n        isSmart: true,\n        options: {\n            numberOfShards: 1,\n            smartGraphAttribute: \&quot;test\&quot;\n        },\n        orphanCollections: []\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bae6ed12-5841-4412-a4b7-c71329edc269&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41565c69-4177-47d2-a264-ed0c45395ab4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about all graphs&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.listGraphs fetches information about all graphs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .listGraphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g._key).sort()).to.eql(graphNames);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78d50035-c2f0-4813-bd93-c319fcce642b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;78d50035-c2f0-4813-bd93-c319fcce642b&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;eae34955-a6ca-4bf5-ab5b-3209bf43bd58&quot;,&quot;title&quot;:&quot;fabric.graphs&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/03-accessing-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/03-accessing-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([\n    ...vertexCollectionNames.map(name =&gt; fabric.collection(name).create()),\n    ...edgeCollectionNames.map(name =&gt; fabric.edgeCollection(name).create())\n])\n    .then(() =&gt; Promise.all([\n    ...graphNames.map(name =&gt; fabric.graph(name).create({\n        edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n            collection: name,\n            from: vertexCollectionNames,\n            to: vertexCollectionNames\n        }))\n    }))\n]))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbe82558-1614-4b25-b72a-acc376dfe864&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all(graphNames.map(name =&gt; fabric.graph(name).drop()))\n    .then(() =&gt; Promise.all(vertexCollectionNames\n    .concat(edgeCollectionNames)\n    .map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36ff9540-8a09-479f-8a7f-8e32895bb743&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates Graph instances&quot;,&quot;fullTitle&quot;:&quot;Accessing graphs fabric.graphs creates Graph instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .graphs()\n    .then(graphs =&gt; {\n    chai_1.expect(graphs.length).to.equal(graphNames.length);\n    chai_1.expect(graphs.map((g) =&gt; g.name).sort()).to.eql(graphNames);\n    graphs.forEach((graph) =&gt; chai_1.expect(graph).to.be.an.instanceof(graph_1.Graph));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85aee447-5dfa-401c-9009-e825422d40bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;85aee447-5dfa-401c-9009-e825422d40bc&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:600000},{&quot;uuid&quot;:&quot;de01fef8-6676-42c9-ac65-4b18e12cdd0f&quot;,&quot;title&quot;:&quot;Transactions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:819,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;5162c0a0-241a-4d26-90bd-87ef22d46f02&quot;,&quot;parentUUID&quot;:&quot;de01fef8-6676-42c9-ac65-4b18e12cdd0f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Transactions \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98edbe01-4d5f-4e20-bc2e-bdca880d973d&quot;,&quot;parentUUID&quot;:&quot;de01fef8-6676-42c9-ac65-4b18e12cdd0f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5256d172-4b8f-482f-bd6c-6074479b6590&quot;,&quot;title&quot;:&quot;fabric.transaction&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/04-transactions.js&quot;,&quot;file&quot;:&quot;/lib/async/test/04-transactions.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a transaction and return the result&quot;,&quot;fullTitle&quot;:&quot;Transactions fabric.transaction should execute a transaction and return the result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await fabric.transaction([], \&quot;function (params) {return params;}\&quot;, \&quot;test\&quot;);\nchai_1.expect(result).to.equal(\&quot;test\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;528be816-1290-4ab7-88c9-725ae52ebd26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;528be816-1290-4ab7-88c9-725ae52ebd26&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;39cee1e4-f47e-4e06-ac8d-6258dae2b744&quot;,&quot;title&quot;:&quot;C8QL queries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:814,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;2a5e4965-2905-4b0b-b7a5-1d82b84a4743&quot;,&quot;parentUUID&quot;:&quot;39cee1e4-f47e-4e06-ac8d-6258dae2b744&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;a800b197-96ff-43d0-9e67-4f633efb2d55&quot;,&quot;parentUUID&quot;:&quot;39cee1e4-f47e-4e06-ac8d-6258dae2b744&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;71c1749f-bd8e-4536-b41a-80c44751fb9b&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b9643a2-f9fc-49ab-a5b8-ac485eccda1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;throws an exception on error&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i IN no RETURN i\&quot;)\n    .then(() =&gt; {\n    chai_1.expect.fail();\n    done();\n})\n    .catch(err =&gt; {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5d89632-1530-419d-ad6f-06f190227a5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;throws an exception on error (async await)&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query throws an exception on error (async await)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.query(\&quot;FOR i IN no RETURN i\&quot;);\n    chai_1.expect.fail();\n}\ncatch (err) {\n    chai_1.expect(err).is.instanceof(error_1.C8Error);\n    chai_1.expect(err).to.have.property(\&quot;statusCode\&quot;, 404);\n    chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;150d48b9-dd82-45b9-8f6b-54136744ec9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1da294e6-9ab3-4018-bf4d-b36a2c0cd2e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, undefined, {\n    batchSize: 2,\n    count: true\n})\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16c5ec6b-185d-4ff7-97a1-290d11c81146&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports AQB queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports AQB queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ toC8QL: () =&gt; \&quot;RETURN 42\&quot; })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(42);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29521f96-c104-4827-b61a-13680c28e85e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports query objects&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports query objects&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN 1337\&quot;, bindVars: {} })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(1337);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46d6a20b-52c2-4691-af01-e66b9baabb1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports compact queries&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query({ query: \&quot;RETURN @potato\&quot;, bindVars: { potato: \&quot;tomato\&quot; } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(\&quot;tomato\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3a26577-6ec9-418d-a5e5-8ba72c05cba3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f350272-0898-4c84-8881-35cf4c212071&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;0b9643a2-f9fc-49ab-a5b8-ac485eccda1e&quot;,&quot;b5d89632-1530-419d-ad6f-06f190227a5e&quot;,&quot;150d48b9-dd82-45b9-8f6b-54136744ec9c&quot;,&quot;1da294e6-9ab3-4018-bf4d-b36a2c0cd2e7&quot;,&quot;16c5ec6b-185d-4ff7-97a1-290d11c81146&quot;,&quot;29521f96-c104-4827-b61a-13680c28e85e&quot;,&quot;46d6a20b-52c2-4691-af01-e66b9baabb1c&quot;,&quot;a3a26577-6ec9-418d-a5e5-8ba72c05cba3&quot;,&quot;1f350272-0898-4c84-8881-35cf4c212071&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;00e3743f-27e8-4dc4-8721-f1fa486748fd&quot;,&quot;title&quot;:&quot;c8ql&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/05-c8ql-queries.js&quot;,&quot;file&quot;:&quot;/lib/async/test/05-c8ql-queries.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly handles simple parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles simple parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let values = [\n    0,\n    42,\n    -1,\n    null,\n    undefined,\n    true,\n    false,\n    \&quot;\&quot;,\n    \&quot;string\&quot;,\n    [1, 2, 3],\n    { a: \&quot;b\&quot; }\n];\nlet query = jsC8_1.c8ql `\n        A ${values[0]} B ${values[1]} C ${values[2]} D ${values[3]} E ${values[4]} F ${values[5]}\n        G ${values[6]} H ${values[7]} I ${values[8]} J ${values[9]} K ${values[10]} EOF\n      `;\nchai_1.expect(query.query).to.equal(`\n        A @value0 B @value1 C @value2 D @value3 E @value4 F @value5\n        G @value6 H @value7 I @value8 J @value9 K @value10 EOF\n      `);\nlet bindVarNames = Object.keys(query.bindVars).sort((a, b) =&gt; (+a.substr(5) &gt; +b.substr(5) ? 1 : -1));\nchai_1.expect(bindVarNames).to.eql([\n    \&quot;value0\&quot;,\n    \&quot;value1\&quot;,\n    \&quot;value2\&quot;,\n    \&quot;value3\&quot;,\n    \&quot;value4\&quot;,\n    \&quot;value5\&quot;,\n    \&quot;value6\&quot;,\n    \&quot;value7\&quot;,\n    \&quot;value8\&quot;,\n    \&quot;value9\&quot;,\n    \&quot;value10\&quot;\n]);\nchai_1.expect(bindVarNames.map(k =&gt; query.bindVars[k])).to.eql(values);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;795c74cb-7b61-475f-bc21-76cc900a3f79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;correctly handles jsC8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles jsC8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let collection = fabric.collection(\&quot;potato\&quot;);\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;potato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e0749f2-26dd-4f8d-ae8d-a15271891793&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;correctly handles C8 collection parameters&quot;,&quot;fullTitle&quot;:&quot;C8QL queries c8ql correctly handles C8 collection parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;class C8Collection {\n    constructor() {\n        this.isC8Collection = true;\n        this.name = \&quot;tomato\&quot;;\n    }\n}\nlet collection = new C8Collection();\nlet query = jsC8_1.c8ql `${collection}`;\nchai_1.expect(query.query).to.equal(\&quot;@@value0\&quot;);\nchai_1.expect(Object.keys(query.bindVars)).to.eql([\&quot;@value0\&quot;]);\nchai_1.expect(query.bindVars[\&quot;@value0\&quot;]).to.equal(\&quot;tomato\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09974ad1-81d9-4973-9f33-41dcf72ad180&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;795c74cb-7b61-475f-bc21-76cc900a3f79&quot;,&quot;7e0749f2-26dd-4f8d-ae8d-a15271891793&quot;,&quot;09974ad1-81d9-4973-9f33-41dcf72ad180&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a1cb1305-0fdb-4141-bd81-488239803a7c&quot;,&quot;title&quot;:&quot;Route API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:716,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);\ncollection = fabric.collection(`c${Date.now()}`);\nawait collection.create();&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;1be0a19c-0e39-4057-b685-e578f7945120&quot;,&quot;parentUUID&quot;:&quot;a1cb1305-0fdb-4141-bd81-488239803a7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await collection.truncate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4275c3e1-6211-4623-9eae-a5ed1d8a6273&quot;,&quot;parentUUID&quot;:&quot;a1cb1305-0fdb-4141-bd81-488239803a7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;afd3c9b1-85d0-496f-a5cd-a3d1e655456c&quot;,&quot;parentUUID&quot;:&quot;a1cb1305-0fdb-4141-bd81-488239803a7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;36ca7614-8249-482e-bbc0-d55732a9e56f&quot;,&quot;title&quot;:&quot;route.route&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should concat path&quot;,&quot;fullTitle&quot;:&quot;Route API route.route should concat path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/api\&quot;).route(\&quot;/version\&quot;);\nchai_1.expect(route).to.have.property(\&quot;_path\&quot;, \&quot;/api/version\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee40b85a-d4f5-4519-843d-aebf14b5cdef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;ee40b85a-d4f5-4519-843d-aebf14b5cdef&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3216c85e-15ff-49ab-b961-f7113d7b4714&quot;,&quot;title&quot;:&quot;route.post&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.post should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${collection.name}`)\n    .post({ foo: \&quot;bar\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4df0f62a-c891-46fa-a8e3-4252f802fac8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;4df0f62a-c891-46fa-a8e3-4252f802fac8&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8791fd98-d40d-4178-81e2-eb934d0c31d1&quot;,&quot;title&quot;:&quot;route.put&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.put \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a938257-8fc1-4f9b-8273-bdddd83bd822&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.put should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .put({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2513a2ff-2e6e-4501-ab1d-a81bcb485d8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;2513a2ff-2e6e-4501-ab1d-a81bcb485d8b&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;da566e34-a336-43a2-8aa9-89f97887fc2b&quot;,&quot;title&quot;:&quot;route.patch&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66289308-f378-479c-8db8-9c4043f57fe8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should passes body&quot;,&quot;fullTitle&quot;:&quot;Route API route.patch should passes body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .patch({ hello: \&quot;world\&quot; })\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6d911af-292d-4218-bc29-49fdf482c2e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;b6d911af-292d-4218-bc29-49fdf482c2e5&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;74ef1d6e-d9db-4a18-9e91-20d4602169bf&quot;,&quot;title&quot;:&quot;route.delete&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76d957ed-1276-49be-b251-c29cec9280d3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.delete should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .delete()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;body\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_id\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_key\&quot;);\n    chai_1.expect(res.body).to.have.property(\&quot;_rev\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae6f8d04-3394-4057-a42d-b76159bf6a24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;ae6f8d04-3394-4057-a42d-b76159bf6a24&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;fd6ab07f-0b52-471b-a97b-7f7ae4a5aecb&quot;,&quot;title&quot;:&quot;route.head&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/07-routes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/07-routes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Route API route.head \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ foo: \&quot;bar\&quot; })\n    .then(doc =&gt; {\n    documentHandle = doc._id;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98270e6b-30eb-4ff8-88a4-8f8f35273a27&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be executed using the route path&quot;,&quot;fullTitle&quot;:&quot;Route API route.head should be executed using the route path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(`/document/${documentHandle}`)\n    .head()\n    .then(res =&gt; {\n    chai_1.expect(res).to.have.property(\&quot;statusCode\&quot;, 200);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0bfe0d2-1c89-4b6a-96af-e8b70a470371&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;e0bfe0d2-1c89-4b6a-96af-e8b70a470371&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e4ba5b1b-2539-4a38-a761-d0c0d36d9528&quot;,&quot;title&quot;:&quot;Cursor API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:642,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: process.env.TEST_C8_URL || \&quot;https://test.macrometa.io\&quot;,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;230ae89b-ed04-4e2e-ad02-9f8f85f57044&quot;,&quot;parentUUID&quot;:&quot;e4ba5b1b-2539-4a38-a761-d0c0d36d9528&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor = await fabric.query(c8qlQuery);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0146c259-d253-409a-b4f5-3d263eee8126&quot;,&quot;parentUUID&quot;:&quot;e4ba5b1b-2539-4a38-a761-d0c0d36d9528&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Cursor API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17e8b1b3-5840-4376-9f3d-d1eff52def42&quot;,&quot;parentUUID&quot;:&quot;e4ba5b1b-2539-4a38-a761-d0c0d36d9528&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;172aaa71-32ae-4e06-b64a-a0bb5e555b69&quot;,&quot;title&quot;:&quot;cursor.all&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an Array of all results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.all returns an Array of all results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(vals =&gt; {\n    chai_1.expect(vals).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a00d641a-bc72-4e77-911a-92a4214f615f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;a00d641a-bc72-4e77-911a-92a4214f615f&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b0a5ace4-f49e-4323-b5cd-dbd6820328a3&quot;,&quot;title&quot;:&quot;cursor.next&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns the next result of the Cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.next returns the next result of the Cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(0);\n    return cursor.next();\n})\n    .then(val =&gt; {\n    chai_1.expect(val).to.equal(1);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08458f0f-a3a9-4821-884c-8f2ed8ea7920&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;08458f0f-a3a9-4821-884c-8f2ed8ea7920&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;81c0d001-34a8-4033-9428-b146f50339fc&quot;,&quot;title&quot;:&quot;cursor.hasNext&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the Cursor has more results&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true if the Cursor has more results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(cursor.hasNext()).to.equal(true);\ncursor\n    .next()\n    .then(val =&gt; {\n    chai_1.expect(val).to.be.a(\&quot;number\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c709bee-15e1-4af7-94dc-cc4a44015009&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns false if the Cursor is empty&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false if the Cursor is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .all()\n    .then(() =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ed2e626-b86b-447a-ad75-2d5c0d065354&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns true after first batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns true after first batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(c8qlQuery, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor.next();\n    chai_1.expect(cursor._result.length).to.equal(0);\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b03ea30-e9c3-4a78-922b-7266c8d31e4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns false after last batch is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last batch is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i In 0..1 RETURN i\&quot;, {}, { batchSize: 1 })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(1);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8de0f6f-387b-4cd1-8e8a-b46c3f1b75ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns false after last result is consumed&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR i In 0..1 RETURN i\&quot;)\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.hasNext()).to.equal(true);\n    chai_1.expect(cursor._result.length).to.equal(2);\n    cursor\n        .next()\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(0);\n        chai_1.expect(cursor.hasNext()).to.equal(true);\n        chai_1.expect(cursor._result.length).to.equal(1);\n        return cursor.next();\n    })\n        .then(val =&gt; {\n        chai_1.expect(val).to.equal(1);\n        chai_1.expect(cursor.hasNext()).to.equal(false);\n        chai_1.expect(cursor._result.length).to.equal(0);\n        done();\n    });\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cba9b6b-8047-4f02-91dd-e789c5ecc11f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns 404 after timeout&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns 404 after timeout&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a836ae0-c2ea-4382-a463-7e66a561763f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns false after last result is consumed (with large amount of results)&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.hasNext returns false after last result is consumed (with large amount of results)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c89150fe-d635-4bb8-a5d9-d7e1f5b64f55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;9a836ae0-c2ea-4382-a463-7e66a561763f&quot;,&quot;c89150fe-d635-4bb8-a5d9-d7e1f5b64f55&quot;],&quot;skipped&quot;:[&quot;1c709bee-15e1-4af7-94dc-cc4a44015009&quot;,&quot;1ed2e626-b86b-447a-ad75-2d5c0d065354&quot;,&quot;6b03ea30-e9c3-4a78-922b-7266c8d31e4c&quot;,&quot;b8de0f6f-387b-4cd1-8e8a-b46c3f1b75ff&quot;,&quot;4cba9b6b-8047-4f02-91dd-e789c5ecc11f&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;118f800b-6e32-43ed-980e-2b2a77a8231c&quot;,&quot;title&quot;:&quot;cursor.each&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;invokes the callback for each value&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each invokes the callback for each value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each(value =&gt; {\n    results.push(value);\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c3ffbd5-2894-4e6c-bbd5-d4ae2b27d4a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;aborts if the callback returns false&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.each aborts if the callback returns false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .each((value) =&gt; {\n    results.push(value);\n    if (value === 5)\n        return false;\n    return;\n})\n    .then(() =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bccfd453-2a9f-41ee-a4fe-57f2e9aa9b6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;2c3ffbd5-2894-4e6c-bbd5-d4ae2b27d4a7&quot;,&quot;bccfd453-2a9f-41ee-a4fe-57f2e9aa9b6e&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;2f3b0ba6-83d1-4491-a65f-bd2041ef3b72&quot;,&quot;title&quot;:&quot;cursor.every&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns true if the callback returns a truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return false;\n    results.push(value);\n    return true;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;401f4766-8c55-4b55-951c-f8411d00a16b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.every returns false if the callback returns a non-truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .every(value =&gt; {\n    results.push(value);\n    return value &lt; 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07d4bfb3-5d7b-4954-b7c1-4b9dd6950c5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;401f4766-8c55-4b55-951c-f8411d00a16b&quot;,&quot;07d4bfb3-5d7b-4954-b7c1-4b9dd6950c5b&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;bb837dcb-500f-4de2-95e6-b29223c2968d&quot;,&quot;title&quot;:&quot;cursor.some&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns false if the callback returns a non-truthy value for every item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns false if the callback returns a non-truthy value for every item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    if (results.indexOf(value) !== -1)\n        return true;\n    results.push(value);\n    return false;\n})\n    .then(result =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult);\n    chai_1.expect(result).to.equal(false);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44689bf1-d1c3-4992-bff0-d96ee8cae67a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns true if the callback returns a truthy value for any item&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.some returns true if the callback returns a truthy value for any item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let results = [];\ncursor\n    .some(value =&gt; {\n    results.push(value);\n    return value &gt;= 5;\n})\n    .then((result) =&gt; {\n    chai_1.expect(results).to.eql([0, 1, 2, 3, 4, 5]);\n    chai_1.expect(result).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47cbd1a1-9835-4588-8a9f-ec65a13f044a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;44689bf1-d1c3-4992-bff0-d96ee8cae67a&quot;,&quot;47cbd1a1-9835-4588-8a9f-ec65a13f044a&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;84134f8e-65f1-4e6e-93ae-6861d4e2ac97&quot;,&quot;title&quot;:&quot;cursor.map&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;maps all result values over the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.map maps all result values over the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .map(value =&gt; value * 2)\n    .then(results =&gt; {\n    chai_1.expect(results).to.eql(c8qlResult.map(value =&gt; value * 2));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6dfd0798-eb1c-4bb3-8ccc-e9c8fdd5c0df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;6dfd0798-eb1c-4bb3-8ccc-e9c8fdd5c0df&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a31b77b2-5040-4acb-a34c-3da429c13f22&quot;,&quot;title&quot;:&quot;cursor.reduce&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;reduces the result values with the callback&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.reduce reduces the result values with the callback&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;cursor\n    .reduce((a, b) =&gt; a + b)\n    .then(result =&gt; {\n    chai_1.expect(result).to.eql(c8qlResult.reduce((a, b) =&gt; a + b));\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cae25877-16f4-414c-93d0-d4525edf0318&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;cae25877-16f4-414c-93d0-d4525edf0318&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e10fd79e-83d7-40d0-a7f6-ed514c92c8bf&quot;,&quot;title&quot;:&quot;cursor.delete&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/08-cursors.js&quot;,&quot;file&quot;:&quot;/lib/async/test/08-cursors.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete the cursor&quot;,&quot;fullTitle&quot;:&quot;Cursor API cursor.delete should delete the cursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46a10c03-7ab4-4ac3-bd93-7bc4cd53fab5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;46a10c03-7ab4-4ac3-bd93-7bc4cd53fab5&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7097fb24-28bf-4d3d-8dd6-9e284dcafb6a&quot;,&quot;title&quot;:&quot;Collection metadata&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:685,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;68299335-e16a-41e5-a7da-e000e09bbfb5&quot;,&quot;parentUUID&quot;:&quot;7097fb24-28bf-4d3d-8dd6-9e284dcafb6a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Collection metadata \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(dbName);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;cd3d6e47-a810-44ec-91be-a7b7baadefb8&quot;,&quot;parentUUID&quot;:&quot;7097fb24-28bf-4d3d-8dd6-9e284dcafb6a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;754d5410-048e-466a-8994-8f6d53f86a23&quot;,&quot;title&quot;:&quot;collection.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const info = await collection.get();\nchai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\nchai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\nchai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\nchai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b1c0e29-ee06-4d4c-83d4-d620248abbb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should throw if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.get should throw if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await fabric.collection(\&quot;no\&quot;).get();\n}\ncatch (e) {\n    chai_1.expect(e).to.have.property(\&quot;errorNum\&quot;, collection_1.COLLECTION_NOT_FOUND);\n    return;\n}\nchai_1.expect.fail(\&quot;should throw\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0011683f-22f3-4649-bba3-0063d50e1a55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;2b1c0e29-ee06-4d4c-83d4-d620248abbb8&quot;,&quot;0011683f-22f3-4649-bba3-0063d50e1a55&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9e7769eb-f55c-42b2-8a16-3a6d17d30914&quot;,&quot;title&quot;:&quot;collection.exists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if collection exists&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return true if collection exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.exists();\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c0fb807-bf66-48dd-9ced-314ab8e9a94f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should return false if collection does not exist&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.exists should return false if collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric.collection(\&quot;no\&quot;).exists();\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68dc4323-f417-4bec-bef4-dafabbb28633&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;6c0fb807-bf66-48dd-9ced-314ab8e9a94f&quot;,&quot;68dc4323-f417-4bec-bef4-dafabbb28633&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4fb23a5c-b15b-41ef-a7bc-e260b46da2d7&quot;,&quot;title&quot;:&quot;collection.properties&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return properties of a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.properties should return properties of a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .properties()\n    .then(properties =&gt; {\n    chai_1.expect(properties).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(properties).to.have.property(\&quot;waitForSync\&quot;, false);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61506336-fe10-4202-9a2c-20da86c06e55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;61506336-fe10-4202-9a2c-20da86c06e55&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8a1a2793-3566-42b7-951b-bbef829c13d9&quot;,&quot;title&quot;:&quot;collection.count&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/09-collection-metadata.js&quot;,&quot;file&quot;:&quot;/lib/async/test/09-collection-metadata.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a collection&quot;,&quot;fullTitle&quot;:&quot;Collection metadata collection.count should return information about a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .count()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, collectionName);\n    chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cf17bc9-f092-4bb4-8736-a21e5fce008e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;2cf17bc9-f092-4bb4-8736-a21e5fce008e&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d3f40267-603e-42cc-9560-db13cb5164d8&quot;,&quot;title&quot;:&quot;Manipulating collections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:596,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;742a522e-5981-4038-8581-bc7e782dd233&quot;,&quot;parentUUID&quot;:&quot;d3f40267-603e-42cc-9560-db13cb5164d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`collection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ab2f65f-d8f6-42b4-b09a-66aa62735258&quot;,&quot;parentUUID&quot;:&quot;d3f40267-603e-42cc-9560-db13cb5164d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;113a8d4f-3e75-45e2-b937-de69d21d8dd4&quot;,&quot;parentUUID&quot;:&quot;d3f40267-603e-42cc-9560-db13cb5164d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .get()\n    .then(() =&gt; {\n    collection\n        .drop()\n        .then(() =&gt; void done())\n        .catch(done);\n})\n    .catch(() =&gt; void done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e569aaff-c8ab-428e-bc84-1adc286d9ab0&quot;,&quot;parentUUID&quot;:&quot;d3f40267-603e-42cc-9560-db13cb5164d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e47bdc01-1080-416a-9bf7-27230ab31735&quot;,&quot;title&quot;:&quot;collection.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff5b3982-68e7-4bc9-9c7a-205d8bb143a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;creates a new local document collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.collection(`documentcollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 2); // document collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a25829f1-88a8-45ea-a3eb-0e4912c43e2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;creates a new edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dd25a75-a824-4111-87e1-c50d852008ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;creates a new local edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.create creates a new local edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collection = fabric.edgeCollection(`edgecollection${Date.now()}`);\ncollection\n    .create({ isLocal: true })\n    .then(() =&gt; {\n    return fabric\n        .collection(collection.name)\n        .get()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;isSystem\&quot;, false);\n        chai_1.expect(info).to.have.property(\&quot;status\&quot;, 3); // loaded\n        chai_1.expect(info).to.have.property(\&quot;type\&quot;, 3); // edge collection\n        chai_1.expect(info).to.have.property(\&quot;isLocal\&quot;, true); // local geo-distribution\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0931d1c-aa66-44b3-bc09-d551c4f0d901&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;ff5b3982-68e7-4bc9-9c7a-205d8bb143a3&quot;,&quot;a25829f1-88a8-45ea-a3eb-0e4912c43e2b&quot;,&quot;2dd25a75-a824-4111-87e1-c50d852008ba&quot;,&quot;c0931d1c-aa66-44b3-bc09-d551c4f0d901&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d5b06884-b981-4593-be36-7c6fdd4bf750&quot;,&quot;title&quot;:&quot;collection.rename&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should rename a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.rename should rename a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .route(\&quot;/_admin/server/role\&quot;)\n    .get()\n    .then(res =&gt; {\n    if (res.body.role !== \&quot;SINGLE\&quot;)\n        return;\n    const name = `renamecollection${Date.now()}`;\n    return collection.rename(name).then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, name);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c62577a-1915-4f99-867b-b5cf304acbc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;2c62577a-1915-4f99-867b-b5cf304acbc3&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;60980b1f-12cf-45c1-a770-2c08e9d0b181&quot;,&quot;title&quot;:&quot;collection.truncate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should truncate a non-empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should truncate a non-empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.save({}).then(() =&gt; {\n    return collection\n        .truncate()\n        .then(() =&gt; {\n        collection.count().then(info =&gt; {\n            chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n            chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n        });\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e1665de-6817-4417-bb28-3b4ce20c23e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should allow truncating a empty collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.truncate should allow truncating a empty collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.truncate().then(() =&gt; {\n    return collection\n        .count()\n        .then(info =&gt; {\n        chai_1.expect(info).to.have.property(\&quot;name\&quot;, collection.name);\n        chai_1.expect(info).to.have.property(\&quot;count\&quot;, 0);\n    })\n        .then(() =&gt; void done())\n        .catch(done);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68dc45df-7c0b-4f6c-94d7-6a8d2343f51c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;7e1665de-6817-4417-bb28-3b4ce20c23e4&quot;,&quot;68dc45df-7c0b-4f6c-94d7-6a8d2343f51c&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ee49e05a-fdbe-4727-b48f-e11e68d56268&quot;,&quot;title&quot;:&quot;collection.drop&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop a collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.drop should drop a collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection.drop().then(() =&gt; {\n    return collection\n        .get()\n        .then(done)\n        .catch(err =&gt; {\n        chai_1.expect(err).to.have.property(\&quot;errorNum\&quot;, 1203);\n        void done();\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16f87cfe-7a18-40b9-b662-3939804bcef1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;16f87cfe-7a18-40b9-b662-3939804bcef1&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8dd6040f-90b3-46ef-a52c-a74b39110ea6&quot;,&quot;title&quot;:&quot;collection.onChange&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/10-manipulating-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/10-manipulating-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the message on collection change&quot;,&quot;fullTitle&quot;:&quot;Manipulating collections collection.onChange should get the message on collection change&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const callbackObj = {\n    onopen: () =&gt; {\n        collection.save({ name: \&quot;Anthony\&quot;, lastname: \&quot;Gonsalvis\&quot; });\n    },\n    onmessage: (msg) =&gt; {\n        console.log(\&quot;msg=&gt;\&quot;, msg);\n        done();\n    },\n    onerror: (err) =&gt; {\n        console.log(\&quot;Connection Error-&gt;\&quot;, err);\n        chai_1.expect.fail(\&quot;Websocket connection error\&quot;);\n    },\n    onclose: () =&gt; console.log(\&quot;Websoket connection closed\&quot;)\n};\ncollection.onChange(callbackObj, testUrl.substring(8));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f702338c-fd44-4ea9-aac8-8e4c06fa905f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;f702338c-fd44-4ea9-aac8-8e4c06fa905f&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3feb617c-d57a-4cb7-8fa7-f076b82649ba&quot;,&quot;title&quot;:&quot;Managing indexes&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:468,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\ncollection = fabric.collection(collectionName);\nawait collection.create();&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;40ff8d36-017e-4248-b00e-ddd1977f91fa&quot;,&quot;parentUUID&quot;:&quot;3feb617c-d57a-4cb7-8fa7-f076b82649ba&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Managing indexes \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;848fc9a7-363a-4254-ac10-f285aca7dff7&quot;,&quot;parentUUID&quot;:&quot;3feb617c-d57a-4cb7-8fa7-f076b82649ba&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f6084cfc-c247-404a-80e4-caa0d8378f2d&quot;,&quot;title&quot;:&quot;collection.createIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a index of given type&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createIndex should create a index of given type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createIndex({\n    type: \&quot;hash\&quot;,\n    fields: [\&quot;value0\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value0\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c2feab7-8738-478f-9ff3-0f63c970c401&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;4c2feab7-8738-478f-9ff3-0f63c970c401&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;7d6f719c-e1c1-45de-81a6-faaedf7bb824&quot;,&quot;title&quot;:&quot;collection.createHashIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a hash index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createHashIndex should create a hash index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;hash\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64731194-df8f-424f-b573-065b96f528b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;64731194-df8f-424f-b573-065b96f528b1&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5f655f2c-5191-4ea7-b8eb-02d4d9554014&quot;,&quot;title&quot;:&quot;collection.createSkipList&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a skiplist index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createSkipList should create a skiplist index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createSkipList([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;skiplist\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85b40b65-8ae2-4c4c-bfbf-d41de50d7a6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;85b40b65-8ae2-4c4c-bfbf-d41de50d7a6c&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f01f8b92-fa68-48f1-93f2-f4a02695d3ed&quot;,&quot;title&quot;:&quot;collection.createPersistentIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a persistent index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createPersistentIndex should create a persistent index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createPersistentIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;persistent\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;742e62fa-a1cd-4bb1-9bcd-db55570dce5d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;742e62fa-a1cd-4bb1-9bcd-db55570dce5d&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;a29489a8-4707-4408-bd46-6d668b49c4c9&quot;,&quot;title&quot;:&quot;collection.createGeoIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a geo1 index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo1 index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d430000c-6fd4-440a-afd8-804ad5d9dd40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo2 index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo2 index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1028275b-b7f6-4c3b-aa4e-d71549f8a7d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a geo index for one field&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for one field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df9c2147-943e-48f8-9e1f-ccf471236f1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should create a geo index for two fields&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createGeoIndex should create a geo index for two fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createGeoIndex([\&quot;value1\&quot;, \&quot;value2\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;geo\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value1\&quot;, \&quot;value2\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3efc9fe-7719-44f7-a8bf-7d293c57e2a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;d430000c-6fd4-440a-afd8-804ad5d9dd40&quot;,&quot;1028275b-b7f6-4c3b-aa4e-d71549f8a7d7&quot;],&quot;skipped&quot;:[&quot;df9c2147-943e-48f8-9e1f-ccf471236f1b&quot;,&quot;b3efc9fe-7719-44f7-a8bf-7d293c57e2a7&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f0f7e81a-79fc-4467-b0da-d8d10298a219&quot;,&quot;title&quot;:&quot;collection.createFulltextIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fulltext index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.createFulltextIndex should create a fulltext index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createFulltextIndex([\&quot;value\&quot;])\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;id\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;type\&quot;, \&quot;fulltext\&quot;);\n    chai_1.expect(info).to.have.property(\&quot;fields\&quot;);\n    chai_1.expect(info.fields).to.eql([\&quot;value\&quot;]);\n    chai_1.expect(info).to.have.property(\&quot;isNewlyCreated\&quot;, true);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b0c5f89-9d93-4351-9e63-03f0edc3efde&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;2b0c5f89-9d93-4351-9e63-03f0edc3efde&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ca69f45f-7147-464a-bf36-d8315bf8b39a&quot;,&quot;title&quot;:&quot;collection.index&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about a index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.index should return information about a index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.index(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        chai_1.expect(index).to.have.property(\&quot;type\&quot;, info.type);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b6d431a-4321-4dff-9dc1-8e590b842479&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;9b6d431a-4321-4dff-9dc1-8e590b842479&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;cf98ff81-e93c-43ad-abb7-7693a2254946&quot;,&quot;title&quot;:&quot;collection.indexes&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of indexes&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.indexes should return a list of indexes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(index =&gt; {\n    return collection.indexes().then(indexes =&gt; {\n        chai_1.expect(indexes).to.be.instanceof(Array);\n        chai_1.expect(indexes).to.not.be.empty;\n        chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(1);\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85bf52ce-35fe-4ccc-982a-f5c595a928e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;85bf52ce-35fe-4ccc-982a-f5c595a928e9&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e36a4dbd-39e2-4c07-ad1b-bd4316f65429&quot;,&quot;title&quot;:&quot;collection.dropIndex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/11-managing-indexes.js&quot;,&quot;file&quot;:&quot;/lib/async/test/11-managing-indexes.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should drop existing index&quot;,&quot;fullTitle&quot;:&quot;Managing indexes collection.dropIndex should drop existing index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .createHashIndex([\&quot;test\&quot;])\n    .then(info =&gt; {\n    return collection.dropIndex(info.id).then(index =&gt; {\n        chai_1.expect(index).to.have.property(\&quot;id\&quot;, info.id);\n        return collection.indexes().then(indexes =&gt; {\n            chai_1.expect(indexes).to.be.instanceof(Array);\n            chai_1.expect(indexes).to.not.be.empty;\n            chai_1.expect(indexes.filter((i) =&gt; i.id === index.id).length).to.equal(0);\n        });\n    });\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3de29872-6b38-40ed-b2b7-033c2dc5a418&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;3de29872-6b38-40ed-b2b7-033c2dc5a418&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;3507835e-eaef-4039-a75d-34c8f269fd6a&quot;,&quot;title&quot;:&quot;DocumentCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:552,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: C8_VERSION\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;73168a3b-87d9-4f22-861d-e05a5dc79cc6&quot;,&quot;parentUUID&quot;:&quot;3507835e-eaef-4039-a75d-34c8f269fd6a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.collection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f43fc21b-0031-48fe-98b5-7dcb0a25b4b1&quot;,&quot;parentUUID&quot;:&quot;3507835e-eaef-4039-a75d-34c8f269fd6a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:161,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;0613d3d0-e17e-4f13-b279-59d1e1e32d48&quot;,&quot;parentUUID&quot;:&quot;3507835e-eaef-4039-a75d-34c8f269fd6a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;788f7cee-95bd-4569-84cc-396ea3dcfce8&quot;,&quot;parentUUID&quot;:&quot;3507835e-eaef-4039-a75d-34c8f269fd6a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;db3dbebf-0a94-4ea1-9a6b-d1a15197efda&quot;,&quot;title&quot;:&quot;documentCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63a578ca-3994-45b5-8adb-372c9456c069&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document returns a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffaadce2-7398-479b-9c71-d421df5f2efd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0343712-d33a-41fa-8da6-4024c2879eae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;ffaadce2-7398-479b-9c71-d421df5f2efd&quot;,&quot;f0343712-d33a-41fa-8da6-4024c2879eae&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8aea4bd6-d1f0-43e9-8a1b-cbbabb4aa0c4&quot;,&quot;title&quot;:&quot;documentCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2763ec88-8199-48a6-97e7-1344b8757366&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the document exists&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns true if the document exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5915f095-250b-43cf-9838-77b8db2430e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns false if the document does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the document does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;does-not-exist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51f745af-f40a-4901-88a9-798d3389fa5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns false if the collection does not exist&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.documentExists returns false if the collection does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await fabric\n    .collection(\&quot;doesnotexist\&quot;)\n    .documentExists(\&quot;lol\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf12062a-dbd1-4d17-8728-973fbc383cb3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;5915f095-250b-43cf-9838-77b8db2430e9&quot;,&quot;51f745af-f40a-4901-88a9-798d3389fa5b&quot;,&quot;cf12062a-dbd1-4d17-8728-973fbc383cb3&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ce35affa-076d-4ce5-8146-63ce594ccb83&quot;,&quot;title&quot;:&quot;documentCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a document in the collection&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save creates a document in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e75f0466-cfc2-498d-ba5f-fe408635f0b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.document(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b576efa4-aa0e-4987-a352-1d94c9e084f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns the document if opts.returnNew is set&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save returns the document if opts.returnNew is set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = { returnNew: true };\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32aab38c-3b3d-4480-8c69-cd8cfcbfe9e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;interprets opts as returnNew if it is a boolean&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.save interprets opts as returnNew if it is a boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot; };\nlet opts = true;\ncollection\n    .save(data, opts)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta.new.potato).to.equal(data.potato);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32738e22-8a0a-4f30-a4ba-8fceaa5b58be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;e75f0466-cfc2-498d-ba5f-fe408635f0b5&quot;,&quot;b576efa4-aa0e-4987-a352-1d94c9e084f1&quot;,&quot;32aab38c-3b3d-4480-8c69-cd8cfcbfe9e0&quot;,&quot;32738e22-8a0a-4f30-a4ba-8fceaa5b58be&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ef301f4a-9a61-448e-b7d3-1c31a0110125&quot;,&quot;title&quot;:&quot;documentCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.replace replaces the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;795d22e3-c983-47c2-b059-a2fa081784d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;795d22e3-c983-47c2-b059-a2fa081784d1&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;4ff838b2-5fd0-4c29-af1c-c1e2089e8e12&quot;,&quot;title&quot;:&quot;documentCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;685e078e-9ae3-4ea1-bb0d-854a976528dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.document(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b303259-8d8c-43e2-aed9-8bd289991f59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;685e078e-9ae3-4ea1-bb0d-854a976528dc&quot;,&quot;7b303259-8d8c-43e2-aed9-8bd289991f59&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d17f127d-f663-4513-b541-51bf4e579475&quot;,&quot;title&quot;:&quot;documentCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/14-document-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/14-document-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86134041-22c9-4ab4-9a8d-a584aedc9f0b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given document&quot;,&quot;fullTitle&quot;:&quot;DocumentCollection API documentCollection.remove deletes the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.document(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d172b3b4-b2de-4b2b-be35-28c07b4ed436&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;d172b3b4-b2de-4b2b-be35-28c07b4ed436&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;97ff1ab1-7b6b-4d4a-ae7c-b6879164e037&quot;,&quot;title&quot;:&quot;EdgeCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:613,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;fc94eb60-9926-48e1-85ae-c6a573158801&quot;,&quot;parentUUID&quot;:&quot;97ff1ab1-7b6b-4d4a-ae7c-b6879164e037&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection = fabric.edgeCollection(`c${Date.now()}`);\ncollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71bb064d-0da6-4586-bd74-60e9e810f1d8&quot;,&quot;parentUUID&quot;:&quot;97ff1ab1-7b6b-4d4a-ae7c-b6879164e037&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;d9d8a424-8626-40fc-b18d-73f65136eb42&quot;,&quot;parentUUID&quot;:&quot;97ff1ab1-7b6b-4d4a-ae7c-b6879164e037&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbfedf6b-b717-4aa9-aa19-c2981c001c66&quot;,&quot;parentUUID&quot;:&quot;97ff1ab1-7b6b-4d4a-ae7c-b6879164e037&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fed8273b-bbd4-4146-a24b-4daa3238d447&quot;,&quot;title&quot;:&quot;edgeCollection.edge&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81b2a276-3b95-4658-9a84-ea1b91051baf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6f55f50-213f-46df-a1f0-a017af65db02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.edge does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.edge(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3645fe1-ee60-42db-be0c-622c641b7cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;a6f55f50-213f-46df-a1f0-a017af65db02&quot;,&quot;f3645fe1-ee60-42db-be0c-622c641b7cc6&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;9cb67988-4011-43c6-8917-c717b16f6a4b&quot;,&quot;title&quot;:&quot;edgeCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;576ae005-1c3c-4935-942d-a783b9c5e137&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document returns an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7794ef84-b458-4872-bd2d-12a1f8515fb0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d5a40dc-8e90-4a4f-87e4-892b44d4cb4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;7794ef84-b458-4872-bd2d-12a1f8515fb0&quot;,&quot;4d5a40dc-8e90-4a4f-87e4-892b44d4cb4f&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;02447808-5952-48e7-9908-05c53fffdfcc&quot;,&quot;title&quot;:&quot;edgeCollection.documentExists&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c40d247-ed7e-414a-b344-a9d47e5e4a9b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the edge exists&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns true if the edge exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(meta._id);\nchai_1.expect(exists).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f975ff4a-9fdf-42a6-afce-0ad9797ccee1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;returns false if the edge does not exist&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.documentExists returns false if the edge does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const exists = await collection.documentExists(\&quot;doesnotexist\&quot;);\nchai_1.expect(exists).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66be430b-23ca-4a00-b52b-fc469b7ca317&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;f975ff4a-9fdf-42a6-afce-0ad9797ccee1&quot;,&quot;66be430b-23ca-4a00-b52b-fc469b7ca317&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;09075722-8716-4fad-8699-6b5584b53b2f&quot;,&quot;title&quot;:&quot;edgeCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates an edge in the collection&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save creates an edge in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e01f124e-8e9c-44fe-a294-5da3c44033ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = {\n    chicken: \&quot;chicken\&quot;,\n    _key: \&quot;banana\&quot;,\n    _from: \&quot;d/1\&quot;,\n    _to: \&quot;d/2\&quot;\n};\nconst meta = await collection.save(data);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.equals(data._key);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._key).to.equal(data._key);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);\nchai_1.expect(doc.chicken).to.equal(data.chicken);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd758bfc-2eba-4332-b624-cfc2ad3e9cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;takes _from and _to as positional arguments&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes _from and _to as positional arguments&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to);\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c3349af-5ee2-420b-a6ba-8faf06af7502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;takes an options object&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\nconst meta = await collection.save(data, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(data._from);\nchai_1.expect(doc._to).to.equal(data._to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6788f9e3-d3a9-4ddc-82d1-925724f0886e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;takes an options object with positional _from and _to&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.save takes an options object with positional _from and _to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const data = { chicken: \&quot;chicken\&quot; };\nconst from = \&quot;d/1\&quot;;\nconst to = \&quot;d/2\&quot;;\nconst meta = await collection.save(data, from, to, { returnNew: true });\nchai_1.expect(meta).to.be.an(\&quot;object\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_id\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_rev\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;_key\&quot;)\n    .that.is.a(\&quot;string\&quot;);\nchai_1.expect(meta)\n    .to.have.property(\&quot;new\&quot;)\n    .that.is.an(\&quot;object\&quot;);\nchai_1.expect(meta.new).to.have.property(\&quot;chicken\&quot;, data.chicken);\nconst doc = await collection.edge(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;chicken\&quot;, \&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;_from\&quot;, \&quot;_to\&quot;);\nchai_1.expect(doc.chicken).to.equal(data.chicken);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc._from).to.equal(from);\nchai_1.expect(doc._to).to.equal(to);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb446006-e248-40d5-9fe5-a5ccdb8cdbe2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;e01f124e-8e9c-44fe-a294-5da3c44033ba&quot;,&quot;fd758bfc-2eba-4332-b624-cfc2ad3e9cf7&quot;,&quot;8c3349af-5ee2-420b-a6ba-8faf06af7502&quot;,&quot;6788f9e3-d3a9-4ddc-82d1-925724f0886e&quot;,&quot;bb446006-e248-40d5-9fe5-a5ccdb8cdbe2&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;92c875b2-756d-4991-859d-48ea9c27838f&quot;,&quot;title&quot;:&quot;edgeCollection.traversal&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows = fabric.edgeCollection(\&quot;knows\&quot;);\nconst person = fabric.collection(\&quot;person\&quot;);\nPromise.all([person.create(), knows.create()])\n    .then(() =&gt; Promise.all([\n    person.import([\n        { _key: \&quot;Alice\&quot; },\n        { _key: \&quot;Bob\&quot; },\n        { _key: \&quot;Charlie\&quot; },\n        { _key: \&quot;Dave\&quot; },\n        { _key: \&quot;Eve\&quot; }\n    ]),\n    knows.import([\n        { _from: \&quot;person/Alice\&quot;, _to: \&quot;person/Bob\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Charlie\&quot; },\n        { _from: \&quot;person/Bob\&quot;, _to: \&quot;person/Dave\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Alice\&quot; },\n        { _from: \&quot;person/Eve\&quot;, _to: \&quot;person/Bob\&quot; }\n    ])\n]))\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3104c3b-ed9c-4bb1-9a81-a352af43789e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;executes traversal&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.traversal executes traversal&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;knows\n    .traversal(\&quot;person/Alice\&quot;, { direction: \&quot;outbound\&quot; })\n    .then((result) =&gt; {\n    chai_1.expect(result).to.have.property(\&quot;visited\&quot;);\n    const visited = result.visited;\n    chai_1.expect(visited).to.have.property(\&quot;vertices\&quot;);\n    const vertices = visited.vertices;\n    chai_1.expect(vertices).to.be.instanceOf(Array);\n    chai_1.expect(vertices.length).to.equal(4);\n    const names = vertices.map((d) =&gt; d._key);\n    for (const name of [\&quot;Alice\&quot;, \&quot;Bob\&quot;, \&quot;Charlie\&quot;, \&quot;Dave\&quot;]) {\n        chai_1.expect(names).to.contain(name);\n    }\n    chai_1.expect(visited).to.have.property(\&quot;paths\&quot;);\n    const paths = visited.paths;\n    chai_1.expect(paths).to.be.instanceOf(Array);\n    chai_1.expect(paths.length).to.equal(4);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a71c64a-5124-45b3-9ec9-0c6a8f92a824&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;9a71c64a-5124-45b3-9ec9-0c6a8f92a824&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8f8b3ed6-f54c-41e0-bd29-63c52353ebb9&quot;,&quot;title&quot;:&quot;edgeCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.replace replaces the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = { potato: \&quot;tomato\&quot;, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, {\n        sup: \&quot;dawg\&quot;,\n        _from: \&quot;d/1\&quot;,\n        _to: \&quot;d/2\&quot;\n    });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7db48d5f-e47f-461f-9453-cd773bb08cc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;7db48d5f-e47f-461f-9453-cd773bb08cc3&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e010c253-76ca-4e7d-a722-24a13a7ff636&quot;,&quot;title&quot;:&quot;edgeCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given document&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update updates the given document&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).to.have.property(\&quot;empty\&quot;, null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36c8acfd-215c-4f81-bbaa-c3021c3278b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.edge(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;potato\&quot;, doc.potato);\n    chai_1.expect(data).to.have.property(\&quot;sup\&quot;, \&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45a4d772-92ad-494e-85ce-1185e871d41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;36c8acfd-215c-4f81-bbaa-c3021c3278b4&quot;,&quot;45a4d772-92ad-494e-85ce-1185e871d41b&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0c7a6298-f135-4d2f-96c4-f35d345db424&quot;,&quot;title&quot;:&quot;edgeCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/15-edge-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/15-edge-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key, _from: \&quot;d/1\&quot;, _to: \&quot;d/2\&quot; })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;584d1cd5-5c18-45b5-b8d3-99a17c0ebbfa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given edge&quot;,&quot;fullTitle&quot;:&quot;EdgeCollection API edgeCollection.remove deletes the given edge&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.edge(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;149191e3-496b-4986-959d-8304373c184e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;149191e3-496b-4986-959d-8304373c184e&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0dabf214-e91c-4270-9595-19710967d66a&quot;,&quot;title&quot;:&quot;Graph API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:818,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;bd464553-1c0c-462c-9e17-2ceb0dbe309f&quot;,&quot;parentUUID&quot;:&quot;0dabf214-e91c-4270-9595-19710967d66a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;b6acfa06-5c0f-4b0c-9cad-6023fb54be08&quot;,&quot;parentUUID&quot;:&quot;0dabf214-e91c-4270-9595-19710967d66a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9dcfd221-58c8-4794-baed-b2e57f3b2330&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b90f4211-b1ca-4f2e-ba5a-fa24b47c25d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d2aac53-fd9d-4df0-8387-d75edf170b92&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetches information about the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.get fetches information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cd64254-560a-4ae0-b589-0c338ee6af26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;7cd64254-560a-4ae0-b589-0c338ee6af26&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;39f67d3b-fd91-40e6-b2ab-d4a23ac8e9ad&quot;,&quot;title&quot;:&quot;graph.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;createCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47ea6000-2684-422d-a907-fd88bd8fdb09&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric.collection(name).drop()))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a1f479b-18c6-4497-bc96-b12247187095&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates the graph&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.create creates the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let graph = fabric.graph(`g${Date.now()}`);\ngraph\n    .create({\n    edgeDefinitions: edgeCollectionNames.map(name =&gt; ({\n        collection: name,\n        from: vertexCollectionNames,\n        to: vertexCollectionNames\n    }))\n})\n    .then(() =&gt; graph.get())\n    .then(data =&gt; {\n    chai_1.expect(data).to.have.property(\&quot;name\&quot;, graph.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;beabbd75-17f1-4887-925d-dbc7dafedcc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;beabbd75-17f1-4887-925d-dbc7dafedcc2&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ddd2e2c7-47c2-4bbc-aa99-a392e54019b8&quot;,&quot;title&quot;:&quot;graph.drop&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/16-graphs.js&quot;,&quot;file&quot;:&quot;/lib/async/test/16-graphs.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    [vertexCollectionNames, edgeCollectionNames] = names;\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30c9af17-c57b-459f-b4c7-ebafa18ba450&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Promise.all([...edgeCollectionNames, ...vertexCollectionNames].map(name =&gt; fabric\n    .collection(name)\n    .drop()\n    .catch(() =&gt; null)))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3399e7a-dce6-41de-8ccf-171058d71c5a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;destroys the graph if not passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop destroys the graph if not passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c535e42-1916-4e40-8fc5-aa91b94e6221&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;additionally drops all of its collections if passed true&quot;,&quot;fullTitle&quot;:&quot;Graph API graph.drop additionally drops all of its collections if passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop(true)\n    .then(() =&gt; graph\n    .get()\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; undefined))\n    .then(() =&gt; fabric.listCollections())\n    .then(collections =&gt; {\n    chai_1.expect(collections.map((c) =&gt; c.name)).not.to.include.members([\n        ...edgeCollectionNames,\n        ...vertexCollectionNames\n    ]);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7645d156-7d68-4777-a457-4a414d55ec17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;4c535e42-1916-4e40-8fc5-aa91b94e6221&quot;,&quot;7645d156-7d68-4777-a457-4a414d55ec17&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;f634a8ee-3d8c-4a65-beed-7e577c758f73&quot;,&quot;title&quot;:&quot;Manipulating graph vertices&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:818,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;23c1dd2a-eec0-443b-a2d3-31e4bfa53f5e&quot;,&quot;parentUUID&quot;:&quot;f634a8ee-3d8c-4a65-beed-7e577c758f73&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(`g${Date.now()}`);\ncreateCollections(fabric)\n    .then(names =&gt; {\n    collectionNames = names.reduce((a, b) =&gt; a.concat(b));\n    return createGraph(graph, names[0], names[1]);\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fe7d932-d95f-4e18-a232-28dee302487d&quot;,&quot;parentUUID&quot;:&quot;f634a8ee-3d8c-4a65-beed-7e577c758f73&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;7713668d-7372-4160-a890-04d249b67bed&quot;,&quot;parentUUID&quot;:&quot;f634a8ee-3d8c-4a65-beed-7e577c758f73&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; Promise.all(collectionNames.map(name =&gt; fabric.collection(name).drop())))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;530b89d1-a49b-4011-8d78-a5d275632cfe&quot;,&quot;parentUUID&quot;:&quot;f634a8ee-3d8c-4a65-beed-7e577c758f73&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;33ae0731-5c18-4e7c-853d-eac790304995&quot;,&quot;title&quot;:&quot;graph.vertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a GraphVertexCollection instance for the collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.vertexCollection returns a GraphVertexCollection instance for the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let name = \&quot;potato\&quot;;\nlet collection = graph.vertexCollection(name);\nchai_1.expect(collection).to.be.an.instanceof(graph_1.GraphVertexCollection);\nchai_1.expect(collection)\n    .to.have.property(\&quot;name\&quot;)\n    .that.equals(name);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc359f0-47b0-4ec0-b3a3-1d16b1f2759f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;bdc359f0-47b0-4ec0-b3a3-1d16b1f2759f&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;a4caf1ef-22ee-4c1d-af58-efb237996884&quot;,&quot;title&quot;:&quot;graph.addVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`coll${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c39584db-8d47-4326-8502-237a7e286578&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2ae3704-f0a4-4b6e-9f84-3e55ed7ae2df&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds the given vertex collection to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.addVertexCollection adds the given vertex collection to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).to.contain(vertexCollection.name);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2090bd8-16df-4e9f-beb2-31ba104005e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;f2090bd8-16df-4e9f-beb2-31ba104005e4&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;3997bce2-1a6f-4a3e-b3f4-44dfaf27caf8&quot;,&quot;title&quot;:&quot;graph.removeVertexCollection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/17-graph-vertices.js&quot;,&quot;file&quot;:&quot;/lib/async/test/17-graph-vertices.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;vertexCollection = fabric.collection(`xc${Date.now()}`);\nvertexCollection\n    .create()\n    .then(() =&gt; graph.addVertexCollection(vertexCollection.name))\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b78465ff-76d7-407b-adbc-bef9ee1c2555&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;removes the given vertex collection from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection removes the given vertex collection from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1afed41-bf4e-4158-ace0-f4c0185452a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;destroys the collection if explicitly passed true&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph vertices graph.removeVertexCollection destroys the collection if explicitly passed true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeVertexCollection(vertexCollection.name, true)\n    .then(data =&gt; {\n    chai_1.expect(data.orphanCollections).not.to.contain(vertexCollection.name);\n    return vertexCollection.get();\n})\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), err =&gt; {\n    chai_1.expect(err).to.be.an.instanceof(error_1.C8Error);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4a9c553-70c7-47af-bca6-ab242811b258&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;c1afed41-bf4e-4158-ace0-f4c0185452a4&quot;,&quot;a4a9c553-70c7-47af-bca6-ab242811b258&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;9d3dd224-5090-4379-9272-284ddb6bfb28&quot;,&quot;title&quot;:&quot;Manipulating graph edges&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:817,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;1edff195-6e5d-4e0e-bcaa-13ea935e608b&quot;,&quot;parentUUID&quot;:&quot;9d3dd224-5090-4379-9272-284ddb6bfb28&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph = fabric.graph(graphName);\ngraph\n    .create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8dec7b2d-8fd6-4ef0-98f9-34a9143b3112&quot;,&quot;parentUUID&quot;:&quot;9d3dd224-5090-4379-9272-284ddb6bfb28&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:205,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;6c3d0fc6-4eed-489c-bc6b-22133ad7ef83&quot;,&quot;parentUUID&quot;:&quot;9d3dd224-5090-4379-9272-284ddb6bfb28&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .drop()\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83fadac1-a061-4269-9bad-c39f16f0bf98&quot;,&quot;parentUUID&quot;:&quot;9d3dd224-5090-4379-9272-284ddb6bfb28&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;53d0778b-3579-4764-8e96-9bd2cfefb9fd&quot;,&quot;title&quot;:&quot;graph.get&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return information about the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.get should return information about the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .get()\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09bb66df-2edf-4b84-b3f0-12f7ed1a61dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;09bb66df-2edf-4b84-b3f0-12f7ed1a61dc&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1da17005-77ab-4976-ac64-f44fa0a635b5&quot;,&quot;title&quot;:&quot;graph.edgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain edge collection&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.edgeCollections should contain edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .edgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info.map((c) =&gt; c.name)).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e871808-f7f4-45d2-9b9f-9a4f23204a9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;4e871808-f7f4-45d2-9b9f-9a4f23204a9e&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e831856d-dcb9-483f-92b8-d8dd8cc78994&quot;,&quot;title&quot;:&quot;graph.listEdgeCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all edge collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listEdgeCollections should return all edge collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listEdgeCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;knows\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;914b58a9-a321-41a4-b2b9-f2565e638a03&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;914b58a9-a321-41a4-b2b9-f2565e638a03&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;8a227907-3f7f-453c-8c89-106a52d0f597&quot;,&quot;title&quot;:&quot;graph.listVertexCollections&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all vertex collection names&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.listVertexCollections should return all vertex collection names&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .listVertexCollections()\n    .then(info =&gt; {\n    chai_1.expect(info).to.be.instanceOf(Array);\n    chai_1.expect(info.length).to.equal(1);\n    chai_1.expect(info).to.contain(\&quot;person\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9abf20d6-e7e1-4766-8235-088f13c8efad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;9abf20d6-e7e1-4766-8235-088f13c8efad&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5f36c922-7b3b-4aae-9009-8e89d2bba3cb&quot;,&quot;title&quot;:&quot;graph.addEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add an edgeDefinition to the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.addEdgeDefinition should add an edgeDefinition to the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .addEdgeDefinition({\n    collection: \&quot;works_in\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(2);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;works_in\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;works_in\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f484fa7-c916-4861-8f4d-5ebea2e7b4e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;8f484fa7-c916-4861-8f4d-5ebea2e7b4e3&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;90dab0fd-00ba-4126-a34a-87ce5d080b9a&quot;,&quot;title&quot;:&quot;graph.replaceEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should replace an existing edgeDefinition in the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.replaceEdgeDefinition should replace an existing edgeDefinition in the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .replaceEdgeDefinition(\&quot;knows\&quot;, {\n    collection: \&quot;knows\&quot;,\n    from: [\&quot;person\&quot;],\n    to: [\&quot;city\&quot;]\n})\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(1);\n    chai_1.expect(info.edgeDefinitions.map((e) =&gt; e.collection)).to.contain(\&quot;knows\&quot;);\n    const edgeDefinition = info.edgeDefinitions.filter((e) =&gt; e.collection === \&quot;knows\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.from))).to.contain(\&quot;person\&quot;);\n    chai_1.expect([].concat.apply([], edgeDefinition.map((e) =&gt; e.to))).to.contain(\&quot;city\&quot;);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61ad19b2-e9e5-4e74-b3c1-9a4fb465f6e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;61ad19b2-e9e5-4e74-b3c1-9a4fb465f6e9&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;b79abc65-cbf4-4f1a-852e-a481bedc8cdb&quot;,&quot;title&quot;:&quot;graph.removeEdgeDefinition&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/18-graph-edges.js&quot;,&quot;file&quot;:&quot;/lib/async/test/18-graph-edges.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove an edgeDefinition from the graph&quot;,&quot;fullTitle&quot;:&quot;Manipulating graph edges graph.removeEdgeDefinition should remove an edgeDefinition from the graph&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;graph\n    .removeEdgeDefinition(\&quot;knows\&quot;)\n    .then(info =&gt; {\n    chai_1.expect(info).to.have.property(\&quot;name\&quot;, graphName);\n    chai_1.expect(info).to.have.property(\&quot;edgeDefinitions\&quot;);\n    chai_1.expect(info.edgeDefinitions).to.be.instanceOf(Array);\n    chai_1.expect(info.edgeDefinitions.length).to.equal(0);\n})\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4a7be66-53dd-4407-9dd9-f7e2ad0b939a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;e4a7be66-53dd-4407-9dd9-f7e2ad0b939a&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;03d077ed-8a41-40e6-81fd-dd5780eb3cf7&quot;,&quot;title&quot;:&quot;GraphVertexCollection API&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:817,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(dbName, [{ username: \&quot;root\&quot; }], {\n    dcList: dcList\n});\nfabric.useFabric(dbName);\nconst graph = fabric.graph(`testgraph${Date.now()}`);\nawait graph.create({\n    edgeDefinitions: [\n        {\n            collection: \&quot;knows\&quot;,\n            from: [\&quot;person\&quot;],\n            to: [\&quot;person\&quot;]\n        }\n    ]\n});\ncollection = graph.vertexCollection(\&quot;person\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;fe0343d7-a3e1-48a6-a645-a92fc22b6574&quot;,&quot;parentUUID&quot;:&quot;03d077ed-8a41-40e6-81fd-dd5780eb3cf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .truncate()\n    .then(() =&gt; done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a054c3de-7d28-476e-9b51-e34ed74a369c&quot;,&quot;parentUUID&quot;:&quot;03d077ed-8a41-40e6-81fd-dd5780eb3cf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(dbName);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;bc4de5e3-b6f9-4bb2-b6e2-dc701c2031fc&quot;,&quot;parentUUID&quot;:&quot;03d077ed-8a41-40e6-81fd-dd5780eb3cf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;39f2a875-5f62-4a95-8ae9-07bc765a3690&quot;,&quot;title&quot;:&quot;graphVertexCollection.vertex&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5acbe40-9481-4815-b1e7-88fee7b2cc8c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;954a1df6-df36-4fea-a571-d00123b3d1dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.vertex does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.vertex(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a335e66-11ed-425c-b931-89920ee3dc67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;954a1df6-df36-4fea-a571-d00123b3d1dd&quot;,&quot;2a335e66-11ed-425c-b931-89920ee3dc67&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5b69ad40-745a-45a3-b6df-3435d5b0d83f&quot;,&quot;title&quot;:&quot;graphVertexCollection.document&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;meta = await collection.save(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fa4f6d6-40e5-4011-83c2-65f029e1f1e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document returns a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(meta._id);\nchai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\nchai_1.expect(doc._id).to.equal(meta._id);\nchai_1.expect(doc._key).to.equal(meta._key);\nchai_1.expect(doc._rev).to.equal(meta._rev);\nchai_1.expect(doc.foo).to.equal(data.foo);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;324d30b2-15c1-4660-bd48-c2599363c02c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;does not throw on not found when graceful&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.document does not throw on not found when graceful&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await collection.document(\&quot;doesnotexist\&quot;, true);\nchai_1.expect(doc).to.equal(null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d87d424a-3046-499b-81dc-e92e1e3c82e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;324d30b2-15c1-4660-bd48-c2599363c02c&quot;,&quot;d87d424a-3046-499b-81dc-e92e1e3c82e0&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;ae98d9fb-6338-45ca-b5cb-46715bcae901&quot;,&quot;title&quot;:&quot;graphVertexCollection.save&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a vertex in the collection&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save creates a vertex in the collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { foo: \&quot;bar\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;foo\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._key).to.equal(meta._key);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc.foo).to.equal(data.foo);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f15924a-23c4-480c-9241-eb7afc517d51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;uses the given _key if provided&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.save uses the given _key if provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = { potato: \&quot;tomato\&quot;, _key: \&quot;banana\&quot; };\ncollection\n    .save(data)\n    .then(meta =&gt; {\n    chai_1.expect(meta).to.be.an(\&quot;object\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_id\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_rev\&quot;)\n        .that.is.a(\&quot;string\&quot;);\n    chai_1.expect(meta)\n        .to.have.property(\&quot;_key\&quot;)\n        .that.equals(data._key);\n    return collection.vertex(meta._id).then(doc =&gt; {\n        chai_1.expect(doc).to.have.keys(\&quot;_key\&quot;, \&quot;_id\&quot;, \&quot;_rev\&quot;, \&quot;potato\&quot;);\n        chai_1.expect(doc._id).to.equal(meta._id);\n        chai_1.expect(doc._rev).to.equal(meta._rev);\n        chai_1.expect(doc._key).to.equal(data._key);\n        chai_1.expect(doc.potato).to.equal(data.potato);\n    });\n})\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad7cab63-e807-4aea-b8c1-89072283025b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;4f15924a-23c4-480c-9241-eb7afc517d51&quot;,&quot;ad7cab63-e807-4aea-b8c1-89072283025b&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;49e96656-f4d7-495f-ad65-5f20d28da3f4&quot;,&quot;title&quot;:&quot;graphVertexCollection.replace&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;replaces the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.replace replaces the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot; };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.replace(doc, { sup: \&quot;dawg\&quot; });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data).not.to.have.property(\&quot;potato\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed362fed-c6ba-4e81-bc19-b14f3e04e08d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;ed362fed-c6ba-4e81-bc19-b14f3e04e08d&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;382d28f8-981c-43ef-8215-3c156180031b&quot;,&quot;title&quot;:&quot;graphVertexCollection.update&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update updates the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data)\n        .to.have.property(\&quot;empty\&quot;)\n        .that.equals(null);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a97755a-edf9-41c0-b369-23570d76e25b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;removes null values if keepNull is explicitly set to false&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.update removes null values if keepNull is explicitly set to false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let doc = { potato: \&quot;tomato\&quot;, empty: false };\ncollection\n    .save(doc)\n    .then(meta =&gt; {\n    delete meta.error;\n    Object.assign(doc, meta);\n    return collection.update(doc, { sup: \&quot;dawg\&quot;, empty: null }, { keepNull: false });\n})\n    .then(() =&gt; collection.vertex(doc._key))\n    .then(data =&gt; {\n    chai_1.expect(data)\n        .to.have.property(\&quot;potato\&quot;)\n        .that.equals(doc.potato);\n    chai_1.expect(data)\n        .to.have.property(\&quot;sup\&quot;)\n        .that.equals(\&quot;dawg\&quot;);\n    chai_1.expect(data).not.to.have.property(\&quot;empty\&quot;);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e94fba8e-1590-4a57-b717-ddf8392b2039&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;6a97755a-edf9-41c0-b369-23570d76e25b&quot;,&quot;e94fba8e-1590-4a57-b717-ddf8392b2039&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;e1993660-83d1-4758-b703-0ff54734f9b5&quot;,&quot;title&quot;:&quot;graphVertexCollection.remove&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;file&quot;:&quot;/lib/async/test/19-graph-vertex-collections.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .save({ _key: key })\n    .then(() =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1488d74b-293c-4003-a76a-c25f9a76e40e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes the given vertex&quot;,&quot;fullTitle&quot;:&quot;GraphVertexCollection API graphVertexCollection.remove deletes the given vertex&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;collection\n    .remove(key)\n    .then(() =&gt; collection.vertex(key))\n    .then(() =&gt; Promise.reject(new Error(\&quot;Should not succeed\&quot;)), () =&gt; void done())\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;317f6174-071a-4053-b09d-9288db512559&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;317f6174-071a-4053-b09d-9288db512559&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;c710aae8-61f0-466b-907f-9f46080da508&quot;,&quot;title&quot;:&quot;Join Path&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/21-util-joinpath.js&quot;,&quot;file&quot;:&quot;/lib/async/test/21-util-joinpath.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;joinPath 1&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;../../u1/u2\&quot;;\nvar path = \&quot;/security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;../../u1/u2/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23e28496-f79f-4037-b39d-17c3da8ee664&quot;,&quot;parentUUID&quot;:&quot;c710aae8-61f0-466b-907f-9f46080da508&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 2&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/u1/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d29791a1-df6b-4c14-b2d1-eebe819ed20d&quot;,&quot;parentUUID&quot;:&quot;c710aae8-61f0-466b-907f-9f46080da508&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;joinPath 3&quot;,&quot;fullTitle&quot;:&quot;Join Path joinPath 3&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;var baseUrl = \&quot;/u1/u2\&quot;;\nvar path = \&quot;../../security/authenticate\&quot;;\nchai_1.expect(joinPath_1.joinPath(baseUrl, path)).to.equal(\&quot;/security/authenticate\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa1dec59-5bc9-411c-8505-dd646b01e157&quot;,&quot;parentUUID&quot;:&quot;c710aae8-61f0-466b-907f-9f46080da508&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;23e28496-f79f-4037-b39d-17c3da8ee664&quot;,&quot;d29791a1-df6b-4c14-b2d1-eebe819ed20d&quot;,&quot;aa1dec59-5bc9-411c-8505-dd646b01e157&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;1c870728-cee4-420a-a8c5-f5bcea1c010b&quot;,&quot;title&quot;:&quot;Helper.getFullStreamPath&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output when there is no extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is no extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d36d3ea3-52af-4aa7-b176-4f9bbd4d2771&quot;,&quot;parentUUID&quot;:&quot;1c870728-cee4-420a-a8c5-f5bcea1c010b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns correct output when there is extra url&quot;,&quot;fullTitle&quot;:&quot;Helper.getFullStreamPath returns correct output when there is extra url&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = helper_1.getFullStreamPath(\&quot;_polog\&quot;, \&quot;/compaction\&quot;);\nchai_1.expect(path).to.equal(\&quot;/streams/persistent/stream/_polog/compaction\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5b831dc-9854-4642-8973-9fcf89b001b8&quot;,&quot;parentUUID&quot;:&quot;1c870728-cee4-420a-a8c5-f5bcea1c010b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d36d3ea3-52af-4aa7-b176-4f9bbd4d2771&quot;,&quot;e5b831dc-9854-4642-8973-9fcf89b001b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0521bab2-327d-4fd3-9d99-a1cde43a5516&quot;,&quot;title&quot;:&quot;Helper.getDCListString&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/22-util-helper.js&quot;,&quot;file&quot;:&quot;/lib/async/test/22-util-helper.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns correct output&quot;,&quot;fullTitle&quot;:&quot;Helper.getDCListString returns correct output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(helper_1.getDCListString(response)).to.equal(&#x27;dev-ap-southeast-1,dev-ap-southeast-2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d7346f6-dcbd-4e23-9df2-45a04e2d922a&quot;,&quot;parentUUID&quot;:&quot;0521bab2-327d-4fd3-9d99-a1cde43a5516&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d7346f6-dcbd-4e23-9df2-45a04e2d922a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;0876ef46-82c3-441e-8446-bd8480c173ce&quot;,&quot;title&quot;:&quot;C8QL Stream queries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:608,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);\nawait fabric.createFabric(name, [{ username: \&quot;root\&quot; }], { dcList: dcList });\nfabric.useFabric(name);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;782afcab-9d0a-4f69-95df-37fe72b20a41&quot;,&quot;parentUUID&quot;:&quot;0876ef46-82c3-441e-8446-bd8480c173ce&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    fabric.useFabric(\&quot;_system\&quot;);\n    await fabric.dropFabric(name);\n}\nfinally {\n    fabric.close();\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;50494359-9135-47f9-b621-f3733d9d1f1e&quot;,&quot;parentUUID&quot;:&quot;0876ef46-82c3-441e-8446-bd8480c173ce&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4a44b1af-0376-415e-9f62-2bb9be540c12&quot;,&quot;title&quot;:&quot;fabric.query&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a cursor for the query result&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query returns a cursor for the query result&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN 23\&quot;, {}, { options: { stream: true } })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor).to.be.an.instanceof(cursor_1.ArrayCursor);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a980934d-1bb2-4fc6-9326-c7208fd24834&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports bindVars&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports bindVars&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;RETURN @x\&quot;, { x: 5 }, { options: { stream: true } })\n    .then(cursor =&gt; cursor.next())\n    .then(value =&gt; {\n    chai_1.expect(value).to.equal(5);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8bdbad1-0429-4911-9b0c-0bab29367c1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric\n    .query(\&quot;FOR x IN 1..10 RETURN x\&quot;, {}, {\n    batchSize: 2,\n    count: true\n})\n    .then(cursor =&gt; {\n    let count = cursor.count;\n    chai_1.expect(count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75935286-8ed7-4ab8-b6ec-770eb742b959&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;supports compact queries with options&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries fabric.query supports compact queries with options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = {\n    query: \&quot;FOR x IN RANGE(1, @max) RETURN x\&quot;,\n    bindVars: { max: 10 }\n};\nfabric\n    .query(query, { batchSize: 2, count: true })\n    .then(cursor =&gt; {\n    chai_1.expect(cursor.count).to.equal(10);\n    chai_1.expect(cursor._hasMore).to.equal(true);\n    done();\n})\n    .catch(done);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e149c4f3-7367-4554-b51d-1bd374947b8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;a980934d-1bb2-4fc6-9326-c7208fd24834&quot;,&quot;e8bdbad1-0429-4911-9b0c-0bab29367c1c&quot;,&quot;75935286-8ed7-4ab8-b6ec-770eb742b959&quot;,&quot;e149c4f3-7367-4554-b51d-1bd374947b8d&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;214efbf8-64f0-4065-a00c-614b4e977940&quot;,&quot;title&quot;:&quot;with some data&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;file&quot;:&quot;/lib/async/test/23-c8ql-queries-stream.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;can access large collection in parallel&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries with some data can access large collection in parallel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45a573b3-4da6-42d2-b930-3649578182bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;can do writes and reads&quot;,&quot;fullTitle&quot;:&quot;C8QL Stream queries with some data can do writes and reads&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33487853-63ee-438c-8706-7f6bbb5e1cba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;45a573b3-4da6-42d2-b930-3649578182bc&quot;,&quot;33487853-63ee-438c-8706-7f6bbb5e1cba&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:1000000},{&quot;uuid&quot;:&quot;e734aee4-7ec9-4e19-be72-b3086e9ca463&quot;,&quot;title&quot;:&quot;Manipulating streams&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:716,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;db650355-c5e9-41be-8a72-8ceac2a6157a&quot;,&quot;parentUUID&quot;:&quot;e734aee4-7ec9-4e19-be72-b3086e9ca463&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;623a2576-af64-44a7-ad11-b1cbd3157693&quot;,&quot;parentUUID&quot;:&quot;e734aee4-7ec9-4e19-be72-b3086e9ca463&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;129c8843-d5dd-487d-ae8c-0b9863c451e2&quot;,&quot;title&quot;:&quot;fabric.stream&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a new Stream instance&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream returns a new Stream instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.stream(\&quot;testStream\&quot;, true)).to.be.instanceof(stream_1.Stream);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6564244a-f65f-40d4-89cf-7e6484e7b15b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;gets all streams&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream gets all streams&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getStreams();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb059145-c4e1-4e5f-a6da-0ba47fce30b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;clears backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.clearBacklog();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b9b1345-1fa8-48b6-9599-2cd5daaf7a9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;clears subscription backlog&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream clears subscription backlog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afb1d7ea-74e3-4d18-b232-f27f54c8bef7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;unsubscribes to a subscription&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams fabric.stream unsubscribes to a subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02f9ae2d-95a0-41fa-955d-66dd1a0e0c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;afb1d7ea-74e3-4d18-b232-f27f54c8bef7&quot;,&quot;02f9ae2d-95a0-41fa-955d-66dd1a0e0c14&quot;],&quot;skipped&quot;:[&quot;6564244a-f65f-40d4-89cf-7e6484e7b15b&quot;,&quot;bb059145-c4e1-4e5f-a6da-0ba47fce30b6&quot;,&quot;1b9b1345-1fa8-48b6-9599-2cd5daaf7a9d&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;fc7bce51-a829-4dda-a084-7bf943e9bd20&quot;,&quot;title&quot;:&quot;stream.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e25cbeb1-dc0b-4303-b12c-0f35249fed82&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, true);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5de66c8-cf21-4d01-a565-a4f5c963537a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;creates a persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.create persistent creates a persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const name = `stream${Date.now()}`;\nstream = fabric.stream(name, false);\nconst response = await stream.createStream();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7fe5f35-cd81-4d51-b2e0-1e8b719a0b8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;f5de66c8-cf21-4d01-a565-a4f5c963537a&quot;,&quot;e7fe5f35-cd81-4d51-b2e0-1e8b719a0b8f&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;a3b7a19b-7f61-4fd8-ad95-b9eb6c20bddf&quot;,&quot;title&quot;:&quot;stream.manipulate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream = fabric.stream(`testStream${Date.now()}`, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82f052ee-8b46-4510-a424-bce6e9771f7f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20fff30f-3e94-493f-a79b-d59603113bb9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22242cf5-0493-4724-9020-749c9cd6e649&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.expireMessagesOnAllSubscriptions&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.expireMessagesOnAllSubscriptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5b18d8d-3ab8-4bd2-b424-7586b33e06a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fea5fd5c-2da6-4414-b7e5-af3190ec1f16&quot;,&quot;title&quot;:&quot;stream.getBacklog&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets estimated backlog for offline stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getBacklog gets estimated backlog for offline stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(async function () {\n    const response = await stream.backlog();\n    chai_1.expect(response.error).to.be.false;\n}, 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9711cd53-a02f-4142-9118-be5cc3c9a011&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;9711cd53-a02f-4142-9118-be5cc3c9a011&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;eeb21fc7-1bda-4bfa-b6c2-a78180e00a4a&quot;,&quot;title&quot;:&quot;stream.getStreamStatistics&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets the stream statistics&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.getStreamStatistics gets the stream statistics&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await stream.getStreamStatistics();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2d6dc05-7efc-44cf-9f24-93f824d9e12c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;f2d6dc05-7efc-44cf-9f24-93f824d9e12c&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;870bf508-93a0-423e-8862-4917d23149cf&quot;,&quot;title&quot;:&quot;stream.subscriptions&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;stream.resetSubscriptionToPosition&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetSubscriptionToPosition&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8d4d889-9f94-4323-a9a9-0ec8a1858dc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;stream.expireMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.expireMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cc3eaf6-de75-42f4-8eb5-5a4cd058aa1f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;stream.resetCursor&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.resetCursor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;375ed04c-419d-44ff-9966-7466c2374f8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;stream.skipNumberOfMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipNumberOfMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90262a1f-68fa-4d92-9b5b-44383458b0d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;stream.skipAllMessages&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.skipAllMessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;796c0e43-61cc-43c6-a16d-d6f4cae467a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;stream.getSubscriptionList&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.subscriptions stream.getSubscriptionList&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;it(\&quot;gets subscription list\&quot;, async () =&gt; {\n    const response = await stream.getSubscriptionList();\n    chai_1.expect(response.error).to.be.false;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea13e21a-859e-438d-bf31-db5816745135&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;d8d4d889-9f94-4323-a9a9-0ec8a1858dc6&quot;],&quot;skipped&quot;:[&quot;5cc3eaf6-de75-42f4-8eb5-5a4cd058aa1f&quot;,&quot;375ed04c-419d-44ff-9966-7466c2374f8a&quot;,&quot;90262a1f-68fa-4d92-9b5b-44383458b0d6&quot;,&quot;796c0e43-61cc-43c6-a16d-d6f4cae467a4&quot;,&quot;ea13e21a-859e-438d-bf31-db5816745135&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;f664731f-1ade-4a3e-9f24-f342024ed82a&quot;,&quot;title&quot;:&quot;stream.terminate&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1ade64f5-d052-4b8c-8664-94c9b74d43da&quot;,&quot;title&quot;:&quot;persistent&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7e036fd2-0f5e-4f90-9de3-a9383d66ebd6&quot;,&quot;title&quot;:&quot;local&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, true);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;114b24bc-4c9a-4f8a-a027-ba556f5e3f70&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent local stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent local terminates persistent local stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(async function () {\n    const response = await stream.terminateStream();\n    chai_1.expect(response.error).to.be.false;\n}, 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3215aff-6e84-4609-87b4-d3fd6c865a70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;c3215aff-6e84-4609-87b4-d3fd6c865a70&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;5344997f-bebd-4f85-9a8a-f27e35b570f3&quot;,&quot;title&quot;:&quot;global&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const streamName = `stream${Date.now()}`;\nstream = fabric.stream(streamName, false);\nawait stream.createStream();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd6abade-fb14-409e-b2b4-b89402c3f947&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;terminates persistent global stream&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.terminate persistent global terminates persistent global stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setTimeout(async function () {\n    const response = await stream.terminateStream();\n    chai_1.expect(response.error).to.be.false;\n}, 5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c88abe1f-243c-4f79-9163-071a91b6a05b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;c88abe1f-243c-4f79-9163-071a91b6a05b&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;c7080d37-0b86-4975-bc0e-ff048b847c3d&quot;,&quot;title&quot;:&quot;stream.websocket&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/28-manipulating-streams.js&quot;,&quot;file&quot;:&quot;/lib/async/test/28-manipulating-streams.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getLocalEdgeLocation();\ndcName = response.tags.url;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a35fa637-5ba2-4186-adec-c4d7b7dfa359&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;stream.closeConnections();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd27dec0-c551-44f4-8ff5-2ce03e74d02e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets data in consumer when sent by producer&quot;,&quot;fullTitle&quot;:&quot;Manipulating streams stream.manipulate stream.websocket gets data in consumer when sent by producer&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;function callback(msg) {\n    const parsedMsg = JSON.parse(msg);\n    const { payload } = parsedMsg;\n    chai_1.expect(payload).to.equal(\&quot;dGVzdA==\&quot;);\n    done();\n}\nstream.consumer(`streamSubscription${Date.now()}`, {\n    onmessage: callback,\n    onopen: () =&gt; stream.producer(\&quot;test\&quot;, dcName)\n}, dcName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41efc7f7-8863-45f5-b8d4-580d4747539c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;41efc7f7-8863-45f5-b8d4-580d4747539c&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;e5b18d8d-3ab8-4bd2-b424-7586b33e06a9&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;fdb63003-6049-476d-b5fb-251c408b88eb&quot;,&quot;title&quot;:&quot;manipulating spot&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:817,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nlocalLocation = await fabric.getLocalEdgeLocation();\nname = localLocation.name;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;115c9e58-985f-4148-a2a5-73187178d871&quot;,&quot;parentUUID&quot;:&quot;fdb63003-6049-476d-b5fb-251c408b88eb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;713cf000-0b84-43a3-a8e6-197cd26fbb75&quot;,&quot;parentUUID&quot;:&quot;fdb63003-6049-476d-b5fb-251c408b88eb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2e57aebd-2351-4d78-93ed-6edb8070a35b&quot;,&quot;title&quot;:&quot;spot_region status of a region&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should change the spot_region of a region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot_region status of a region should change the spot_region of a region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const currentSpotStatus = localLocation.spot_region;\nawait fabric.changeEdgeLocationSpotStatus(name, !currentSpotStatus);\nconst changedLocation = await fabric.getLocalEdgeLocation();\nconst changedSpotStatus = changedLocation.spot_region;\nchai_1.expect(changedLocation).to.equal(!changedSpotStatus);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d659864-c39b-4973-8f33-cd38860d0541&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should not change the spot_region to false if a fabric&#x27;s spot primary is that region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot_region status of a region should not change the spot_region to false if a fabric&#x27;s spot primary is that region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87fad035-3501-4daa-a81d-c91eea6306c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;87fad035-3501-4daa-a81d-c91eea6306c4&quot;],&quot;skipped&quot;:[&quot;5d659864-c39b-4973-8f33-cd38860d0541&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;d3ce1cf8-e388-48d1-aba0-5cbe0562a98e&quot;,&quot;title&quot;:&quot;spot fabric&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.dropFabric(fabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f70d3069-9707-4c09-9889-bc31a0c03a86&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a fabric with a spot primary region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric should create a fabric with a spot primary region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.changeEdgeLocationSpotStatus(name, true);\nconst options = {\n    dcList: name,\n    spotDc: name\n};\nconst response = await fabric.createFabric(fabricName, undefined, options);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ddf3ce0-4238-4d23-bbf1-1d8521b5174d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;should change the spot primary region of a fabric&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot fabric should change the spot primary region of a fabric&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ca82e68-5351-4380-803a-3289e5fdb7b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;9ca82e68-5351-4380-803a-3289e5fdb7b8&quot;],&quot;skipped&quot;:[&quot;9ddf3ce0-4238-4d23-bbf1-1d8521b5174d&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;57b94986-3e98-4109-9e3b-578230ae99da&quot;,&quot;title&quot;:&quot;spot collection&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a spot document collection&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection should create a spot document collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b432b22d-e237-41a5-b6f7-d6cdbd3685d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a spot edge collection&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection should create a spot edge collection&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;061da6ae-deb9-48b5-a58d-ae84568907f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ab5d8473-d857-4b5b-99db-6527da1b14ab&quot;,&quot;title&quot;:&quot;mapulating spot collection&#x27;s region&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/29-manipulating-spot.js&quot;,&quot;file&quot;:&quot;/lib/async/test/29-manipulating-spot.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should change the spot region of a spot collection to none&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection mapulating spot collection&#x27;s region should change the spot region of a spot collection to none&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a98c0e0-eec8-48b1-9c76-37799e708a72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should change the spot region of a spot collection to some other region&quot;,&quot;fullTitle&quot;:&quot;manipulating spot spot collection mapulating spot collection&#x27;s region should change the spot region of a spot collection to some other region&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22419c82-b992-4c86-8719-072e2d12412d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;2a98c0e0-eec8-48b1-9c76-37799e708a72&quot;,&quot;22419c82-b992-4c86-8719-072e2d12412d&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;b432b22d-e237-41a5-b6f7-d6cdbd3685d4&quot;,&quot;061da6ae-deb9-48b5-a58d-ae84568907f9&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000},{&quot;uuid&quot;:&quot;5460a57b-71b4-419c-a2e4-699f07611cdd&quot;,&quot;title&quot;:&quot;User Management&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:816,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);\nconst response = await fabric.getAllEdgeLocations();\ndcList = helper_1.getDCListString(response);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;d20986ba-74e2-4d8f-8d98-02f0d4cbc113&quot;,&quot;parentUUID&quot;:&quot;5460a57b-71b4-419c-a2e4-699f07611cdd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;501037bb-1cf3-4909-a222-3dffeea2924f&quot;,&quot;parentUUID&quot;:&quot;5460a57b-71b4-419c-a2e4-699f07611cdd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d4cf7fea-6d23-406b-970e-b04f4ac12659&quot;,&quot;title&quot;:&quot;fabric.user&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a new user instance&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.user creates a new user instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(fabric.user(\&quot;testUser\&quot;, \&quot;testUser@test.com\&quot;)).to.be.instanceof(user_1.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df32ad47-7b01-4adf-a1dd-3ab82a44a7d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;df32ad47-7b01-4adf-a1dd-3ab82a44a7d2&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1090c718-b660-4308-a562-aa5cc0eb0237&quot;,&quot;title&quot;:&quot;user.create&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.create \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await user.deleteUser();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;361b2c9a-bf0b-4f5a-9b85-8f6dad28b71a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.create creates a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nconst response = await user.createUser(\&quot;testPass\&quot;);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33155eb9-16ac-438e-b77a-c3150dfde31b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;33155eb9-16ac-438e-b77a-c3150dfde31b&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;ae2b7b89-4a3c-447c-8dd3-d41d755c07db&quot;,&quot;title&quot;:&quot;fabric.getAllUsers&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists all users&quot;,&quot;fullTitle&quot;:&quot;User Management fabric.getAllUsers Lists all users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.getAllUsers();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6463af22-74cc-4fc7-b961-976d901161d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;6463af22-74cc-4fc7-b961-976d901161d6&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;f90284dd-2a7a-4c73-a86e-a0fe8cd70f64&quot;,&quot;title&quot;:&quot;user.crud_operations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userName = `user${Date.now()}`;\nconst userEmail = `${userName}@test.com`;\nuser = fabric.user(userName, userEmail);\nawait user.createUser(\&quot;testPass\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81befea4-e749-42c2-b567-0110142d0dca&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await user.deleteUser();\n}\ncatch (error) { }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3246ffd-5017-4152-a77d-f983186adbb9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;61a1fce9-0ca9-4949-b7ed-88472159af6a&quot;,&quot;title&quot;:&quot;user.deleteUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Deletes a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.deleteUser Deletes a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.deleteUser();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbb7b242-beb5-4240-8e50-0c7a8611a189&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;dbb7b242-beb5-4240-8e50-0c7a8611a189&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;e95ef17e-9fc5-4fbf-9653-63a9e8eb25f6&quot;,&quot;title&quot;:&quot;user.getUserDetails&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Fetches a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.getUserDetails Fetches a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getUserDeatils();\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5416bc8a-4230-435b-b91e-1784994b8d81&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;5416bc8a-4230-435b-b91e-1784994b8d81&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;17a62f36-cf33-4942-ac24-711f82655b2d&quot;,&quot;title&quot;:&quot;user.modifyUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.modifyUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.modifyUser({\n    active: false\n});\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.active).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdc3b1f5-a927-48c8-a921-d980eee1ca8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;fdc3b1f5-a927-48c8-a921-d980eee1ca8b&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;1510bbe9-2500-4144-97a1-866063c1dc2c&quot;,&quot;title&quot;:&quot;user.replaceUser&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Modifies a user&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations user.replaceUser Modifies a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.replaceUser({\n    passwd: \&quot;test_passwordddd\&quot;\n});\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c764bb8-d083-49dd-bd68-cd353113d36c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;2c764bb8-d083-49dd-bd68-cd353113d36c&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;68a06f8a-277b-4cf1-a40d-d7632137a8df&quot;,&quot;title&quot;:&quot;User.FabricAccessOperations&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/30-user-management.js&quot;,&quot;file&quot;:&quot;/lib/async/test/30-user-management.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await fabric.createFabric(testFabricName, [{ username: user.user }], {\n    dcList: dcList\n});\nfabric.useFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e99c481-9919-4319-ae7b-404efe3deff8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.useFabric(\&quot;_system\&quot;);\nawait fabric.dropFabric(testFabricName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;669dfaef-3c84-4770-a6d5-85279380e3ae&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Lists the accessible databases and their permissions &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1933988-0c49-4cce-8664-f5e6d47e1f88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;Lists the accessible databases and their permissions with all the collections&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Lists the accessible databases and their permissions with all the collections&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getAllDatabases(true);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result[testFabricName]).to.exist;\nchai_1.expect(response.result[testFabricName].collections).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f94d5ac7-e80b-47f1-a192-d80080c29391&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;Gets the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.getDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result).to.be.oneOf([\&quot;rw\&quot;, \&quot;ro\&quot;, \&quot;none\&quot;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43ab3fe1-9863-4406-94df-e9764486e625&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;Gets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Gets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.getCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8f99c89-478d-4208-bb2e-9e2f1d6a9c8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;Clears the access level of a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.clearDatabaseAccessLevel(testFabricName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cb720dc-c4e0-480d-b1be-9912b6237bb2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;Clears the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Clears the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.clearCollectionAccessLevel(testFabricName, collectionName);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(202);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e5064ff-345d-4ab0-823f-ae6c9bee78db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;Sets the access level of a collection in a database &quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a collection in a database &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const collectionName = \&quot;TestCollection\&quot;;\nawait fabric.collection(collectionName).create();\nconst response = await user.setCollectionAccessLevel(testFabricName, collectionName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}/${collectionName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d0efcb4-df7b-47b4-82c5-308c9772f2e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;Sets the access level of a database&quot;,&quot;fullTitle&quot;:&quot;User Management user.crud_operations User.FabricAccessOperations Sets the access level of a database&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await user.setDatabaseAccessLevel(testFabricName, \&quot;ro\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.code).eq(200);\nchai_1.expect(response[`${testFabricName}`]).eq(\&quot;ro\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;205b486e-2e9e-435d-9696-532563d92199&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;c1933988-0c49-4cce-8664-f5e6d47e1f88&quot;,&quot;f94d5ac7-e80b-47f1-a192-d80080c29391&quot;,&quot;43ab3fe1-9863-4406-94df-e9764486e625&quot;,&quot;c8f99c89-478d-4208-bb2e-9e2f1d6a9c8f&quot;,&quot;5cb720dc-c4e0-480d-b1be-9912b6237bb2&quot;,&quot;0e5064ff-345d-4ab0-823f-ae6c9bee78db&quot;,&quot;7d0efcb4-df7b-47b4-82c5-308c9772f2e5&quot;,&quot;205b486e-2e9e-435d-9696-532563d92199&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000},{&quot;uuid&quot;:&quot;3bc397b7-65fa-414c-949b-d3b2445c6ba6&quot;,&quot;title&quot;:&quot;manipulating restql&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:836,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric = new jsC8_1.Fabric({\n    url: testUrl,\n    c8Version: Number(process.env.C8_VERSION || 30400)\n});\nawait fabric.login(\&quot;guest@macrometa.io\&quot;, \&quot;guest\&quot;);\nfabric.useTenant(\&quot;guest\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;HttpError: Service Unavailable&quot;,&quot;estack&quot;:&quot;HttpError: Service Unavailable\n    at new HttpError (src/error.ts:95:17)\n    at Object.resolve (src/connection.ts:364:20)\n    at _hosts.(anonymous function) (src/connection.ts:203:16)\n    at IncomingMessage.res.on (src/util/request.node.ts:82:15)\n    at endReadableNT (_stream_readable.js:1145:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)&quot;},&quot;uuid&quot;:&quot;80735175-358b-4af3-9c4a-5e48e23a3691&quot;,&quot;parentUUID&quot;:&quot;3bc397b7-65fa-414c-949b-d3b2445c6ba6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;fabric.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03447140-9527-49f7-8f45-ffe6d6bbd92b&quot;,&quot;parentUUID&quot;:&quot;3bc397b7-65fa-414c-949b-d3b2445c6ba6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;667b132b-0e75-47c6-93ff-05990e6c8bbb&quot;,&quot;title&quot;:&quot;fabric.saveQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should save a query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.saveQuery should save a query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const queryName = \&quot;testQuery\&quot;;\nconst response = await fabric.saveQuery(queryName, {}, \&quot;for coll in _collections return coll\&quot;);\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.name).to.equal(queryName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;008d57ff-2810-464b-9547-320fade586e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;008d57ff-2810-464b-9547-320fade586e0&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;6259e92c-a2df-4f4c-b4c2-aa3746ffea26&quot;,&quot;title&quot;:&quot;fabric.listSavedQueries&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should make a successful API call&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.listSavedQueries should make a successful API call&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await fabric.listSavedQueries();\nchai_1.expect(response.error).to.be.false;\nchai_1.expect(response.result.length).to.be.at.least(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e48ab7e-3479-424e-850f-a5ad95fd85c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;9e48ab7e-3479-424e-850f-a5ad95fd85c6&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;ed2dede1-3d85-4d2f-9aa9-444ea90677d1&quot;,&quot;title&quot;:&quot;fabric.executeSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.executeSavedQuery(queryName, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91fa0501-8cfc-4cc5-9e87-93d338519586&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should execute a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.executeSavedQuery should execute a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80791d70-79a5-483a-b05b-f8d145c1005c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;80791d70-79a5-483a-b05b-f8d145c1005c&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;021e3168-021a-487a-aa17-9bb528fce150&quot;,&quot;title&quot;:&quot;fabric.deleteSavedQuery&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.deleteSavedQuery should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;response = await fabric.deleteSavedQuery(queryName);\nchai_1.expect(response.error).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;392adafa-66ed-45a2-b037-e41b6ea8290c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;392adafa-66ed-45a2-b037-e41b6ea8290c&quot;],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;ff2f7b01-adb5-42df-b52a-4852efed8494&quot;,&quot;title&quot;:&quot;fabric.createRestqlCursor&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a saved query&quot;,&quot;fullTitle&quot;:&quot;manipulating restql fabric.createRestqlCursor should delete a saved query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fa15247-54aa-445b-b896-a57db8aaa8f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;8fa15247-54aa-445b-b896-a57db8aaa8f2&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;6f292735-b26a-4e71-b9f4-59515e3c347d&quot;,&quot;title&quot;:&quot;fabric.route&quot;,&quot;fullFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/lib/async/test/31-restql.js&quot;,&quot;file&quot;:&quot;/lib/async/test/31-restql.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns a Route instance&quot;,&quot;fullTitle&quot;:&quot;fabric.route returns a Route instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route();\nchai_1.expect(route).to.be.an.instanceof(route_1.Route);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dedb6104-8c17-4b41-b455-70ffcb1b6391&quot;,&quot;parentUUID&quot;:&quot;6f292735-b26a-4e71-b9f4-59515e3c347d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;creates a route for the given path&quot;,&quot;fullTitle&quot;:&quot;fabric.route creates a route for the given path&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const path = \&quot;/hi\&quot;;\nconst route = fabric.route(path);\nchai_1.expect(route._path).to.equal(path);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbdcea1b-21cd-4e66-bb8c-72898e453f01&quot;,&quot;parentUUID&quot;:&quot;6f292735-b26a-4e71-b9f4-59515e3c347d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;passes the given headers to the new route&quot;,&quot;fullTitle&quot;:&quot;fabric.route passes the given headers to the new route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const route = fabric.route(\&quot;/hello\&quot;, { \&quot;x-magic\&quot;: \&quot;awesome\&quot; });\nchai_1.expect(route._headers).to.have.property(\&quot;x-magic\&quot;, \&quot;awesome\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6afe0c9-5224-4271-b464-01eb9a3d8aeb&quot;,&quot;parentUUID&quot;:&quot;6f292735-b26a-4e71-b9f4-59515e3c347d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dedb6104-8c17-4b41-b455-70ffcb1b6391&quot;,&quot;bbdcea1b-21cd-4e66-bb8c-72898e453f01&quot;,&quot;e6afe0c9-5224-4271-b464-01eb9a3d8aeb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:60000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:60000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;5.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false},&quot;version&quot;:&quot;4.1.0&quot;},&quot;marge&quot;:{&quot;options&quot;:{},&quot;version&quot;:&quot;4.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;jsC8&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/abhishek/Documents/Macrometa/jsC8/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>